var eA=Object.defineProperty;var tA=(t,e,n)=>e in t?eA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>tA(t,typeof e!="symbol"?e+"":e,n);function nA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y1={exports:{}},tf={},Q1={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mc=Symbol.for("react.element"),rA=Symbol.for("react.portal"),iA=Symbol.for("react.fragment"),sA=Symbol.for("react.strict_mode"),oA=Symbol.for("react.profiler"),aA=Symbol.for("react.provider"),lA=Symbol.for("react.context"),cA=Symbol.for("react.forward_ref"),uA=Symbol.for("react.suspense"),hA=Symbol.for("react.memo"),dA=Symbol.for("react.lazy"),T0=Symbol.iterator;function fA(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var X1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J1=Object.assign,Z1={};function ya(t,e,n){this.props=t,this.context=e,this.refs=Z1,this.updater=n||X1}ya.prototype.isReactComponent={};ya.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ya.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eE(){}eE.prototype=ya.prototype;function Ey(t,e,n){this.props=t,this.context=e,this.refs=Z1,this.updater=n||X1}var Ty=Ey.prototype=new eE;Ty.constructor=Ey;J1(Ty,ya.prototype);Ty.isPureReactComponent=!0;var S0=Array.isArray,tE=Object.prototype.hasOwnProperty,Sy={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tE.call(e,r)&&!nE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Mc,type:t,key:s,ref:o,props:i,_owner:Sy.current}}function pA(t,e){return{$$typeof:Mc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ky(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mc}function gA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k0=/\/+/g;function yp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gA(""+t.key):e.toString(36)}function vh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mc:case rA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+yp(o,0):r,S0(i)?(n="",t!=null&&(n=t.replace(k0,"$&/")+"/"),vh(i,e,n,"",function(c){return c})):i!=null&&(ky(i)&&(i=pA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(k0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",S0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+yp(s,a);o+=vh(s,e,n,l,i)}else if(l=fA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+yp(s,a++),o+=vh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pu(t,e,n){if(t==null)return t;var r=[],i=0;return vh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function mA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},_h={transition:null},yA={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:_h,ReactCurrentOwner:Sy};function iE(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Pu,forEach:function(t,e,n){Pu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pu(t,function(){e++}),e},toArray:function(t){return Pu(t,function(e){return e})||[]},only:function(t){if(!ky(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=ya;ue.Fragment=iA;ue.Profiler=oA;ue.PureComponent=Ey;ue.StrictMode=sA;ue.Suspense=uA;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yA;ue.act=iE;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Sy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tE.call(e,l)&&!nE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Mc,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:lA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aA,_context:t},t.Consumer=t};ue.createElement=rE;ue.createFactory=function(t){var e=rE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:cA,render:t}};ue.isValidElement=ky;ue.lazy=function(t){return{$$typeof:dA,_payload:{_status:-1,_result:t},_init:mA}};ue.memo=function(t,e){return{$$typeof:hA,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=_h.transition;_h.transition={};try{t()}finally{_h.transition=e}};ue.unstable_act=iE;ue.useCallback=function(t,e){return Xt.current.useCallback(t,e)};ue.useContext=function(t){return Xt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Xt.current.useEffect(t,e)};ue.useId=function(){return Xt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Xt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};ue.useRef=function(t){return Xt.current.useRef(t)};ue.useState=function(t){return Xt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Xt.current.useTransition()};ue.version="18.3.1";Q1.exports=ue;var M=Q1.exports;const ce=G1(M),vA=nA({__proto__:null,default:ce},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A=M,wA=Symbol.for("react.element"),xA=Symbol.for("react.fragment"),bA=Object.prototype.hasOwnProperty,EA=_A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TA={key:!0,ref:!0,__self:!0,__source:!0};function sE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bA.call(e,r)&&!TA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wA,type:t,key:s,ref:o,props:i,_owner:EA.current}}tf.Fragment=xA;tf.jsx=sE;tf.jsxs=sE;Y1.exports=tf;var m=Y1.exports,bg={},oE={exports:{}},En={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var H=U.length;U.push(W);e:for(;0<H;){var ie=H-1>>>1,X=U[ie];if(0<i(X,W))U[ie]=W,U[H]=X,H=ie;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],H=U.pop();if(H!==W){U[0]=H;e:for(var ie=0,X=U.length,ne=X>>>1;ie<ne;){var me=2*(ie+1)-1,be=U[me],Ee=me+1,et=U[Ee];if(0>i(be,H))Ee<X&&0>i(et,be)?(U[ie]=et,U[Ee]=H,ie=Ee):(U[ie]=be,U[me]=H,ie=me);else if(Ee<X&&0>i(et,H))U[ie]=et,U[Ee]=H,ie=Ee;else break e}}return W}function i(U,W){var H=U.sortIndex-W.sortIndex;return H!==0?H:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=U)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function I(U){if(v=!1,E(U),!y)if(n(l)!==null)y=!0,G(N);else{var W=n(c);W!==null&&re(I,W.startTime-U)}}function N(U,W){y=!1,v&&(v=!1,_(T),T=-1),p=!0;var H=f;try{for(E(W),d=n(l);d!==null&&(!(d.expirationTime>W)||U&&!R());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var X=ie(d.expirationTime<=W);W=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),E(W)}else r(l);d=n(l)}if(d!==null)var ne=!0;else{var me=n(c);me!==null&&re(I,me.startTime-W),ne=!1}return ne}finally{d=null,f=H,p=!1}}var O=!1,S=null,T=-1,k=5,P=-1;function R(){return!(t.unstable_now()-P<k)}function D(){if(S!==null){var U=t.unstable_now();P=U;var W=!0;try{W=S(!0,U)}finally{W?A():(O=!1,S=null)}}else O=!1}var A;if(typeof w=="function")A=function(){w(D)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Y=Z.port2;Z.port1.onmessage=D,A=function(){Y.postMessage(null)}}else A=function(){x(D,0)};function G(U){S=U,O||(O=!0,A())}function re(U,W){T=x(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,G(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var H=f;f=W;try{return U()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=f;f=U;try{return W()}finally{f=H}},t.unstable_scheduleCallback=function(U,W,H){var ie=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ie+H:ie):H=ie,U){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=H+X,U={id:u++,callback:W,priorityLevel:U,startTime:H,expirationTime:X,sortIndex:-1},H>ie?(U.sortIndex=H,e(c,U),n(l)===null&&U===n(c)&&(v?(_(T),T=-1):v=!0,re(I,H-ie))):(U.sortIndex=X,e(l,U),y||p||(y=!0,G(N))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var W=f;return function(){var H=f;f=W;try{return U.apply(this,arguments)}finally{f=H}}}})(lE);aE.exports=lE;var SA=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA=M,bn=SA;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cE=new Set,Gl={};function Js(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(Gl[t]=e,t=0;t<e.length;t++)cE.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eg=Object.prototype.hasOwnProperty,IA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I0={},C0={};function CA(t){return Eg.call(C0,t)?!0:Eg.call(I0,t)?!1:IA.test(t)?C0[t]=!0:(I0[t]=!0,!1)}function PA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AA(t,e,n,r){if(e===null||typeof e>"u"||PA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Iy=/[\-:]([a-z])/g;function Cy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Iy,Cy);Ct[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Iy,Cy);Ct[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Iy,Cy);Ct[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Py(t,e,n,r){var i=Ct.hasOwnProperty(e)?Ct[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AA(e,n,i,r)&&(n=null),r||i===null?CA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=kA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Au=Symbol.for("react.element"),ko=Symbol.for("react.portal"),Io=Symbol.for("react.fragment"),Ay=Symbol.for("react.strict_mode"),Tg=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Ry=Symbol.for("react.forward_ref"),Sg=Symbol.for("react.suspense"),kg=Symbol.for("react.suspense_list"),Ny=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),dE=Symbol.for("react.offscreen"),P0=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=P0&&t[P0]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,vp;function cl(t){if(vp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vp=e&&e[1]||""}return`
`+vp+t}var _p=!1;function wp(t,e){if(!t||_p)return"";_p=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{_p=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function RA(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=wp(t.type,!1),t;case 11:return t=wp(t.type.render,!1),t;case 1:return t=wp(t.type,!0),t;default:return""}}function Ig(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Io:return"Fragment";case ko:return"Portal";case Tg:return"Profiler";case Ay:return"StrictMode";case Sg:return"Suspense";case kg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case uE:return(t._context.displayName||"Context")+".Provider";case Ry:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ny:return e=t.displayName||null,e!==null?e:Ig(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return Ig(t(e))}catch{}}return null}function NA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ig(e);case 8:return e===Ay?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DA(t){var e=fE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ru(t){t._valueTracker||(t._valueTracker=DA(t))}function pE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=fE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cg(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gE(t,e){e=e.checked,e!=null&&Py(t,"checked",e,!1)}function Pg(t,e){gE(t,e);var n=ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ag(t,e.type,ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function R0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ag(t,e,n){(e!=="number"||Qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ul=Array.isArray;function Bo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ji(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ul(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ji(n)}}function mE(t,e){var n=ji(e.value),r=ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function D0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ng(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nu,vE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nu=Nu||document.createElement("div"),Nu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OA=["Webkit","ms","Moz","O"];Object.keys(kl).forEach(function(t){OA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kl[e]=kl[t]})});function _E(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kl.hasOwnProperty(t)&&kl[t]?(""+e).trim():e+"px"}function wE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_E(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MA=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dg(t,e){if(e){if(MA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Og(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mg=null;function Dy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lg=null,zo=null,$o=null;function O0(t){if(t=jc(t)){if(typeof Lg!="function")throw Error(B(280));var e=t.stateNode;e&&(e=af(e),Lg(t.stateNode,t.type,e))}}function xE(t){zo?$o?$o.push(t):$o=[t]:zo=t}function bE(){if(zo){var t=zo,e=$o;if($o=zo=null,O0(t),e)for(t=0;t<e.length;t++)O0(e[t])}}function EE(t,e){return t(e)}function TE(){}var xp=!1;function SE(t,e,n){if(xp)return t(e,n);xp=!0;try{return EE(t,e,n)}finally{xp=!1,(zo!==null||$o!==null)&&(TE(),bE())}}function Ql(t,e){var n=t.stateNode;if(n===null)return null;var r=af(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Vg=!1;if(Fr)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Vg=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Vg=!1}function LA(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Il=!1,Xh=null,Jh=!1,jg=null,VA={onError:function(t){Il=!0,Xh=t}};function jA(t,e,n,r,i,s,o,a,l){Il=!1,Xh=null,LA.apply(VA,arguments)}function FA(t,e,n,r,i,s,o,a,l){if(jA.apply(this,arguments),Il){if(Il){var c=Xh;Il=!1,Xh=null}else throw Error(B(198));Jh||(Jh=!0,jg=c)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M0(t){if(Zs(t)!==t)throw Error(B(188))}function UA(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return M0(i),t;if(s===r)return M0(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function IE(t){return t=UA(t),t!==null?CE(t):null}function CE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CE(t);if(e!==null)return e;t=t.sibling}return null}var PE=bn.unstable_scheduleCallback,L0=bn.unstable_cancelCallback,BA=bn.unstable_shouldYield,zA=bn.unstable_requestPaint,nt=bn.unstable_now,$A=bn.unstable_getCurrentPriorityLevel,Oy=bn.unstable_ImmediatePriority,AE=bn.unstable_UserBlockingPriority,Zh=bn.unstable_NormalPriority,WA=bn.unstable_LowPriority,RE=bn.unstable_IdlePriority,nf=null,or=null;function HA(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(nf,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:GA,qA=Math.log,KA=Math.LN2;function GA(t){return t>>>=0,t===0?32:31-(qA(t)/KA|0)|0}var Du=64,Ou=4194304;function hl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ed(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=hl(a):(s&=o,s!==0&&(r=hl(s)))}else o=n&~i,o!==0?r=hl(o):s!==0&&(r=hl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),i=1<<n,r|=t[n],e&=~i;return r}function YA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=YA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Fg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NE(){var t=Du;return Du<<=1,!(Du&4194240)&&(Du=64),t}function bp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function XA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function My(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function DE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var OE,Ly,ME,LE,VE,Ug=!1,Mu=[],Si=null,ki=null,Ii=null,Xl=new Map,Jl=new Map,ui=[],JA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V0(t,e){switch(t){case"focusin":case"focusout":Si=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":Xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(e.pointerId)}}function Xa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=jc(e),e!==null&&Ly(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ZA(t,e,n,r,i){switch(e){case"focusin":return Si=Xa(Si,t,e,n,r,i),!0;case"dragenter":return ki=Xa(ki,t,e,n,r,i),!0;case"mouseover":return Ii=Xa(Ii,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xl.set(s,Xa(Xl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Jl.set(s,Xa(Jl.get(s)||null,t,e,n,r,i)),!0}return!1}function jE(t){var e=Ss(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=kE(n),e!==null){t.blockedOn=e,VE(t.priority,function(){ME(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mg=r,n.target.dispatchEvent(r),Mg=null}else return e=jc(n),e!==null&&Ly(e),t.blockedOn=n,!1;e.shift()}return!0}function j0(t,e,n){wh(t)&&n.delete(e)}function eR(){Ug=!1,Si!==null&&wh(Si)&&(Si=null),ki!==null&&wh(ki)&&(ki=null),Ii!==null&&wh(Ii)&&(Ii=null),Xl.forEach(j0),Jl.forEach(j0)}function Ja(t,e){t.blockedOn===e&&(t.blockedOn=null,Ug||(Ug=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,eR)))}function Zl(t){function e(i){return Ja(i,t)}if(0<Mu.length){Ja(Mu[0],t);for(var n=1;n<Mu.length;n++){var r=Mu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Si!==null&&Ja(Si,t),ki!==null&&Ja(ki,t),Ii!==null&&Ja(Ii,t),Xl.forEach(e),Jl.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)jE(n),n.blockedOn===null&&ui.shift()}var Wo=Kr.ReactCurrentBatchConfig,td=!0;function tR(t,e,n,r){var i=ke,s=Wo.transition;Wo.transition=null;try{ke=1,Vy(t,e,n,r)}finally{ke=i,Wo.transition=s}}function nR(t,e,n,r){var i=ke,s=Wo.transition;Wo.transition=null;try{ke=4,Vy(t,e,n,r)}finally{ke=i,Wo.transition=s}}function Vy(t,e,n,r){if(td){var i=Bg(t,e,n,r);if(i===null)Np(t,e,r,nd,n),V0(t,r);else if(ZA(i,t,e,n,r))r.stopPropagation();else if(V0(t,r),e&4&&-1<JA.indexOf(t)){for(;i!==null;){var s=jc(i);if(s!==null&&OE(s),s=Bg(t,e,n,r),s===null&&Np(t,e,r,nd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Np(t,e,r,null,n)}}var nd=null;function Bg(t,e,n,r){if(nd=null,t=Dy(r),t=Ss(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nd=t,null}function FE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($A()){case Oy:return 1;case AE:return 4;case Zh:case WA:return 16;case RE:return 536870912;default:return 16}default:return 16}}var yi=null,jy=null,xh=null;function UE(){if(xh)return xh;var t,e=jy,n=e.length,r,i="value"in yi?yi.value:yi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xh=i.slice(t,1<r?1-r:void 0)}function bh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lu(){return!0}function F0(){return!1}function Tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lu:F0,this.isPropagationStopped=F0,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lu)},persist:function(){},isPersistent:Lu}),e}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fy=Tn(va),Vc=qe({},va,{view:0,detail:0}),rR=Tn(Vc),Ep,Tp,Za,rf=qe({},Vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(Ep=t.screenX-Za.screenX,Tp=t.screenY-Za.screenY):Tp=Ep=0,Za=t),Ep)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),U0=Tn(rf),iR=qe({},rf,{dataTransfer:0}),sR=Tn(iR),oR=qe({},Vc,{relatedTarget:0}),Sp=Tn(oR),aR=qe({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),lR=Tn(aR),cR=qe({},va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uR=Tn(cR),hR=qe({},va,{data:0}),B0=Tn(hR),dR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pR[t])?!!e[t]:!1}function Uy(){return gR}var mR=qe({},Vc,{key:function(t){if(t.key){var e=dR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uy,charCode:function(t){return t.type==="keypress"?bh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yR=Tn(mR),vR=qe({},rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z0=Tn(vR),_R=qe({},Vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uy}),wR=Tn(_R),xR=qe({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),bR=Tn(xR),ER=qe({},rf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TR=Tn(ER),SR=[9,13,27,32],By=Fr&&"CompositionEvent"in window,Cl=null;Fr&&"documentMode"in document&&(Cl=document.documentMode);var kR=Fr&&"TextEvent"in window&&!Cl,BE=Fr&&(!By||Cl&&8<Cl&&11>=Cl),$0=" ",W0=!1;function zE(t,e){switch(t){case"keyup":return SR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $E(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function IR(t,e){switch(t){case"compositionend":return $E(e);case"keypress":return e.which!==32?null:(W0=!0,$0);case"textInput":return t=e.data,t===$0&&W0?null:t;default:return null}}function CR(t,e){if(Co)return t==="compositionend"||!By&&zE(t,e)?(t=UE(),xh=jy=yi=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var PR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PR[t.type]:e==="textarea"}function WE(t,e,n,r){xE(r),e=rd(e,"onChange"),0<e.length&&(n=new Fy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pl=null,ec=null;function AR(t){tT(t,0)}function sf(t){var e=Ro(t);if(pE(e))return t}function RR(t,e){if(t==="change")return e}var HE=!1;if(Fr){var kp;if(Fr){var Ip="oninput"in document;if(!Ip){var q0=document.createElement("div");q0.setAttribute("oninput","return;"),Ip=typeof q0.oninput=="function"}kp=Ip}else kp=!1;HE=kp&&(!document.documentMode||9<document.documentMode)}function K0(){Pl&&(Pl.detachEvent("onpropertychange",qE),ec=Pl=null)}function qE(t){if(t.propertyName==="value"&&sf(ec)){var e=[];WE(e,ec,t,Dy(t)),SE(AR,e)}}function NR(t,e,n){t==="focusin"?(K0(),Pl=e,ec=n,Pl.attachEvent("onpropertychange",qE)):t==="focusout"&&K0()}function DR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sf(ec)}function OR(t,e){if(t==="click")return sf(e)}function MR(t,e){if(t==="input"||t==="change")return sf(e)}function LR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:LR;function tc(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Eg.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function G0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y0(t,e){var n=G0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G0(n)}}function KE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GE(){for(var t=window,e=Qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qh(t.document)}return e}function zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VR(t){var e=GE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KE(n.ownerDocument.documentElement,n)){if(r!==null&&zy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Y0(n,s);var o=Y0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jR=Fr&&"documentMode"in document&&11>=document.documentMode,Po=null,zg=null,Al=null,$g=!1;function Q0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$g||Po==null||Po!==Qh(r)||(r=Po,"selectionStart"in r&&zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Al&&tc(Al,r)||(Al=r,r=rd(zg,"onSelect"),0<r.length&&(e=new Fy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function Vu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ao={animationend:Vu("Animation","AnimationEnd"),animationiteration:Vu("Animation","AnimationIteration"),animationstart:Vu("Animation","AnimationStart"),transitionend:Vu("Transition","TransitionEnd")},Cp={},YE={};Fr&&(YE=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function of(t){if(Cp[t])return Cp[t];if(!Ao[t])return t;var e=Ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in YE)return Cp[t]=e[n];return t}var QE=of("animationend"),XE=of("animationiteration"),JE=of("animationstart"),ZE=of("transitionend"),eT=new Map,X0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){eT.set(t,e),Js(e,[t])}for(var Pp=0;Pp<X0.length;Pp++){var Ap=X0[Pp],FR=Ap.toLowerCase(),UR=Ap[0].toUpperCase()+Ap.slice(1);Gi(FR,"on"+UR)}Gi(QE,"onAnimationEnd");Gi(XE,"onAnimationIteration");Gi(JE,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(ZE,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BR=new Set("cancel close invalid load scroll toggle".split(" ").concat(dl));function J0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FA(r,e,void 0,t),t.currentTarget=null}function tT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;J0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;J0(i,a,c),s=l}}}if(Jh)throw t=jg,Jh=!1,jg=null,t}function Ne(t,e){var n=e[Gg];n===void 0&&(n=e[Gg]=new Set);var r=t+"__bubble";n.has(r)||(nT(e,t,2,!1),n.add(r))}function Rp(t,e,n){var r=0;e&&(r|=4),nT(n,t,r,e)}var ju="_reactListening"+Math.random().toString(36).slice(2);function nc(t){if(!t[ju]){t[ju]=!0,cE.forEach(function(n){n!=="selectionchange"&&(BR.has(n)||Rp(n,!1,t),Rp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ju]||(e[ju]=!0,Rp("selectionchange",!1,e))}}function nT(t,e,n,r){switch(FE(e)){case 1:var i=tR;break;case 4:i=nR;break;default:i=Vy}n=i.bind(null,e,n,t),i=void 0,!Vg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Np(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ss(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}SE(function(){var c=s,u=Dy(n),d=[];e:{var f=eT.get(t);if(f!==void 0){var p=Fy,y=t;switch(t){case"keypress":if(bh(n)===0)break e;case"keydown":case"keyup":p=yR;break;case"focusin":y="focus",p=Sp;break;case"focusout":y="blur",p=Sp;break;case"beforeblur":case"afterblur":p=Sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=U0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=sR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=wR;break;case QE:case XE:case JE:p=lR;break;case ZE:p=bR;break;case"scroll":p=rR;break;case"wheel":p=TR;break;case"copy":case"cut":case"paste":p=uR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=z0}var v=(e&4)!==0,x=!v&&t==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var w=c,E;w!==null;){E=w;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,_!==null&&(I=Ql(w,_),I!=null&&v.push(rc(w,I,E)))),x)break;w=w.return}0<v.length&&(f=new p(f,y,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Mg&&(y=n.relatedTarget||n.fromElement)&&(Ss(y)||y[Ur]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Ss(y):null,y!==null&&(x=Zs(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=U0,I="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=z0,I="onPointerLeave",_="onPointerEnter",w="pointer"),x=p==null?f:Ro(p),E=y==null?f:Ro(y),f=new v(I,w+"leave",p,n,u),f.target=x,f.relatedTarget=E,I=null,Ss(u)===c&&(v=new v(_,w+"enter",y,n,u),v.target=E,v.relatedTarget=x,I=v),x=I,p&&y)t:{for(v=p,_=y,w=0,E=v;E;E=_o(E))w++;for(E=0,I=_;I;I=_o(I))E++;for(;0<w-E;)v=_o(v),w--;for(;0<E-w;)_=_o(_),E--;for(;w--;){if(v===_||_!==null&&v===_.alternate)break t;v=_o(v),_=_o(_)}v=null}else v=null;p!==null&&Z0(d,f,p,v,!1),y!==null&&x!==null&&Z0(d,x,y,v,!0)}}e:{if(f=c?Ro(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=RR;else if(H0(f))if(HE)N=MR;else{N=DR;var O=NR}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=OR);if(N&&(N=N(t,c))){WE(d,N,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Ag(f,"number",f.value)}switch(O=c?Ro(c):window,t){case"focusin":(H0(O)||O.contentEditable==="true")&&(Po=O,zg=c,Al=null);break;case"focusout":Al=zg=Po=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,Q0(d,n,u);break;case"selectionchange":if(jR)break;case"keydown":case"keyup":Q0(d,n,u)}var S;if(By)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Co?zE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(BE&&n.locale!=="ko"&&(Co||T!=="onCompositionStart"?T==="onCompositionEnd"&&Co&&(S=UE()):(yi=u,jy="value"in yi?yi.value:yi.textContent,Co=!0)),O=rd(c,T),0<O.length&&(T=new B0(T,t,null,n,u),d.push({event:T,listeners:O}),S?T.data=S:(S=$E(n),S!==null&&(T.data=S)))),(S=kR?IR(t,n):CR(t,n))&&(c=rd(c,"onBeforeInput"),0<c.length&&(u=new B0("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}tT(d,e)})}function rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ql(t,n),s!=null&&r.unshift(rc(t,s,i)),s=Ql(t,e),s!=null&&r.push(rc(t,s,i))),t=t.return}return r}function _o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Z0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ql(n,s),l!=null&&o.unshift(rc(n,l,a))):i||(l=Ql(n,s),l!=null&&o.push(rc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zR=/\r\n?/g,$R=/\u0000|\uFFFD/g;function ew(t){return(typeof t=="string"?t:""+t).replace(zR,`
`).replace($R,"")}function Fu(t,e,n){if(e=ew(e),ew(t)!==e&&n)throw Error(B(425))}function id(){}var Wg=null,Hg=null;function qg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kg=typeof setTimeout=="function"?setTimeout:void 0,WR=typeof clearTimeout=="function"?clearTimeout:void 0,tw=typeof Promise=="function"?Promise:void 0,HR=typeof queueMicrotask=="function"?queueMicrotask:typeof tw<"u"?function(t){return tw.resolve(null).then(t).catch(qR)}:Kg;function qR(t){setTimeout(function(){throw t})}function Dp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zl(e)}function Ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _a=Math.random().toString(36).slice(2),ir="__reactFiber$"+_a,ic="__reactProps$"+_a,Ur="__reactContainer$"+_a,Gg="__reactEvents$"+_a,KR="__reactListeners$"+_a,GR="__reactHandles$"+_a;function Ss(t){var e=t[ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nw(t);t!==null;){if(n=t[ir])return n;t=nw(t)}return e}t=n,n=t.parentNode}return null}function jc(t){return t=t[ir]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function af(t){return t[ic]||null}var Yg=[],No=-1;function Yi(t){return{current:t}}function De(t){0>No||(t.current=Yg[No],Yg[No]=null,No--)}function Ae(t,e){No++,Yg[No]=t.current,t.current=e}var Fi={},Ut=Yi(Fi),an=Yi(!1),Fs=Fi;function Zo(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function sd(){De(an),De(Ut)}function rw(t,e,n){if(Ut.current!==Fi)throw Error(B(168));Ae(Ut,e),Ae(an,n)}function rT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,NA(t)||"Unknown",i));return qe({},n,r)}function od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,Fs=Ut.current,Ae(Ut,t),Ae(an,an.current),!0}function iw(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=rT(t,e,Fs),r.__reactInternalMemoizedMergedChildContext=t,De(an),De(Ut),Ae(Ut,t)):De(an),Ae(an,n)}var kr=null,lf=!1,Op=!1;function iT(t){kr===null?kr=[t]:kr.push(t)}function YR(t){lf=!0,iT(t)}function Qi(){if(!Op&&kr!==null){Op=!0;var t=0,e=ke;try{var n=kr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,lf=!1}catch(i){throw kr!==null&&(kr=kr.slice(t+1)),PE(Oy,Qi),i}finally{ke=e,Op=!1}}return null}var Do=[],Oo=0,ad=null,ld=0,In=[],Cn=0,Us=null,Cr=1,Pr="";function ws(t,e){Do[Oo++]=ld,Do[Oo++]=ad,ad=t,ld=e}function sT(t,e,n){In[Cn++]=Cr,In[Cn++]=Pr,In[Cn++]=Us,Us=t;var r=Cr;t=Pr;var i=32-zn(r)-1;r&=~(1<<i),n+=1;var s=32-zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cr=1<<32-zn(e)+i|n<<i|r,Pr=s+t}else Cr=1<<s|n<<i|r,Pr=t}function $y(t){t.return!==null&&(ws(t,1),sT(t,1,0))}function Wy(t){for(;t===ad;)ad=Do[--Oo],Do[Oo]=null,ld=Do[--Oo],Do[Oo]=null;for(;t===Us;)Us=In[--Cn],In[Cn]=null,Pr=In[--Cn],In[Cn]=null,Cr=In[--Cn],In[Cn]=null}var xn=null,yn=null,Le=!1,Fn=null;function oT(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,yn=Ci(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:Cr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,yn=null,!0):!1;default:return!1}}function Qg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xg(t){if(Le){var e=yn;if(e){var n=e;if(!sw(t,e)){if(Qg(t))throw Error(B(418));e=Ci(n.nextSibling);var r=xn;e&&sw(t,e)?oT(r,n):(t.flags=t.flags&-4097|2,Le=!1,xn=t)}}else{if(Qg(t))throw Error(B(418));t.flags=t.flags&-4097|2,Le=!1,xn=t}}}function ow(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Uu(t){if(t!==xn)return!1;if(!Le)return ow(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qg(t.type,t.memoizedProps)),e&&(e=yn)){if(Qg(t))throw aT(),Error(B(418));for(;e;)oT(t,e),e=Ci(e.nextSibling)}if(ow(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=Ci(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=xn?Ci(t.stateNode.nextSibling):null;return!0}function aT(){for(var t=yn;t;)t=Ci(t.nextSibling)}function ea(){yn=xn=null,Le=!1}function Hy(t){Fn===null?Fn=[t]:Fn.push(t)}var QR=Kr.ReactCurrentBatchConfig;function el(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Bu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function aw(t){var e=t._init;return e(t._payload)}function lT(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Ni(_,w),_.index=0,_.sibling=null,_}function s(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,E,I){return w===null||w.tag!==6?(w=Bp(E,_.mode,I),w.return=_,w):(w=i(w,E),w.return=_,w)}function l(_,w,E,I){var N=E.type;return N===Io?u(_,w,E.props.children,I,E.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===li&&aw(N)===w.type)?(I=i(w,E.props),I.ref=el(_,w,E),I.return=_,I):(I=Ph(E.type,E.key,E.props,null,_.mode,I),I.ref=el(_,w,E),I.return=_,I)}function c(_,w,E,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=zp(E,_.mode,I),w.return=_,w):(w=i(w,E.children||[]),w.return=_,w)}function u(_,w,E,I,N){return w===null||w.tag!==7?(w=Rs(E,_.mode,I,N),w.return=_,w):(w=i(w,E),w.return=_,w)}function d(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Bp(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Au:return E=Ph(w.type,w.key,w.props,null,_.mode,E),E.ref=el(_,null,w),E.return=_,E;case ko:return w=zp(w,_.mode,E),w.return=_,w;case li:var I=w._init;return d(_,I(w._payload),E)}if(ul(w)||Ya(w))return w=Rs(w,_.mode,E,null),w.return=_,w;Bu(_,w)}return null}function f(_,w,E,I){var N=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:a(_,w,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Au:return E.key===N?l(_,w,E,I):null;case ko:return E.key===N?c(_,w,E,I):null;case li:return N=E._init,f(_,w,N(E._payload),I)}if(ul(E)||Ya(E))return N!==null?null:u(_,w,E,I,null);Bu(_,E)}return null}function p(_,w,E,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(E)||null,a(w,_,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Au:return _=_.get(I.key===null?E:I.key)||null,l(w,_,I,N);case ko:return _=_.get(I.key===null?E:I.key)||null,c(w,_,I,N);case li:var O=I._init;return p(_,w,E,O(I._payload),N)}if(ul(I)||Ya(I))return _=_.get(E)||null,u(w,_,I,N,null);Bu(w,I)}return null}function y(_,w,E,I){for(var N=null,O=null,S=w,T=w=0,k=null;S!==null&&T<E.length;T++){S.index>T?(k=S,S=null):k=S.sibling;var P=f(_,S,E[T],I);if(P===null){S===null&&(S=k);break}t&&S&&P.alternate===null&&e(_,S),w=s(P,w,T),O===null?N=P:O.sibling=P,O=P,S=k}if(T===E.length)return n(_,S),Le&&ws(_,T),N;if(S===null){for(;T<E.length;T++)S=d(_,E[T],I),S!==null&&(w=s(S,w,T),O===null?N=S:O.sibling=S,O=S);return Le&&ws(_,T),N}for(S=r(_,S);T<E.length;T++)k=p(S,_,T,E[T],I),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),w=s(k,w,T),O===null?N=k:O.sibling=k,O=k);return t&&S.forEach(function(R){return e(_,R)}),Le&&ws(_,T),N}function v(_,w,E,I){var N=Ya(E);if(typeof N!="function")throw Error(B(150));if(E=N.call(E),E==null)throw Error(B(151));for(var O=N=null,S=w,T=w=0,k=null,P=E.next();S!==null&&!P.done;T++,P=E.next()){S.index>T?(k=S,S=null):k=S.sibling;var R=f(_,S,P.value,I);if(R===null){S===null&&(S=k);break}t&&S&&R.alternate===null&&e(_,S),w=s(R,w,T),O===null?N=R:O.sibling=R,O=R,S=k}if(P.done)return n(_,S),Le&&ws(_,T),N;if(S===null){for(;!P.done;T++,P=E.next())P=d(_,P.value,I),P!==null&&(w=s(P,w,T),O===null?N=P:O.sibling=P,O=P);return Le&&ws(_,T),N}for(S=r(_,S);!P.done;T++,P=E.next())P=p(S,_,T,P.value,I),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),w=s(P,w,T),O===null?N=P:O.sibling=P,O=P);return t&&S.forEach(function(D){return e(_,D)}),Le&&ws(_,T),N}function x(_,w,E,I){if(typeof E=="object"&&E!==null&&E.type===Io&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Au:e:{for(var N=E.key,O=w;O!==null;){if(O.key===N){if(N=E.type,N===Io){if(O.tag===7){n(_,O.sibling),w=i(O,E.props.children),w.return=_,_=w;break e}}else if(O.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===li&&aw(N)===O.type){n(_,O.sibling),w=i(O,E.props),w.ref=el(_,O,E),w.return=_,_=w;break e}n(_,O);break}else e(_,O);O=O.sibling}E.type===Io?(w=Rs(E.props.children,_.mode,I,E.key),w.return=_,_=w):(I=Ph(E.type,E.key,E.props,null,_.mode,I),I.ref=el(_,w,E),I.return=_,_=I)}return o(_);case ko:e:{for(O=E.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(_,w.sibling),w=i(w,E.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=zp(E,_.mode,I),w.return=_,_=w}return o(_);case li:return O=E._init,x(_,w,O(E._payload),I)}if(ul(E))return y(_,w,E,I);if(Ya(E))return v(_,w,E,I);Bu(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(_,w.sibling),w=i(w,E),w.return=_,_=w):(n(_,w),w=Bp(E,_.mode,I),w.return=_,_=w),o(_)):n(_,w)}return x}var ta=lT(!0),cT=lT(!1),cd=Yi(null),ud=null,Mo=null,qy=null;function Ky(){qy=Mo=ud=null}function Gy(t){var e=cd.current;De(cd),t._currentValue=e}function Jg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){ud=t,qy=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(qy!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(ud===null)throw Error(B(308));Mo=t,ud.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var ks=null;function Yy(t){ks===null?ks=[t]:ks.push(t)}function uT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function Qy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Br(t,n)}return i=r.interleaved,i===null?(e.next=e,Yy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Br(t,n)}function Eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,My(t,n)}}function lw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hd(t,e,n,r){var i=t.updateQueue;ci=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=qe({},d,f);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zs|=o,t.lanes=o,t.memoizedState=d}}function cw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Fc={},ar=Yi(Fc),sc=Yi(Fc),oc=Yi(Fc);function Is(t){if(t===Fc)throw Error(B(174));return t}function Xy(t,e){switch(Ae(oc,e),Ae(sc,t),Ae(ar,Fc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ng(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ng(e,t)}De(ar),Ae(ar,e)}function na(){De(ar),De(sc),De(oc)}function dT(t){Is(oc.current);var e=Is(ar.current),n=Ng(e,t.type);e!==n&&(Ae(sc,t),Ae(ar,n))}function Jy(t){sc.current===t&&(De(ar),De(sc))}var $e=Yi(0);function dd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mp=[];function Zy(){for(var t=0;t<Mp.length;t++)Mp[t]._workInProgressVersionPrimary=null;Mp.length=0}var Th=Kr.ReactCurrentDispatcher,Lp=Kr.ReactCurrentBatchConfig,Bs=0,We=null,lt=null,vt=null,fd=!1,Rl=!1,ac=0,XR=0;function Nt(){throw Error(B(321))}function ev(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function tv(t,e,n,r,i,s){if(Bs=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Th.current=t===null||t.memoizedState===null?t2:n2,t=n(r,i),Rl){s=0;do{if(Rl=!1,ac=0,25<=s)throw Error(B(301));s+=1,vt=lt=null,e.updateQueue=null,Th.current=r2,t=n(r,i)}while(Rl)}if(Th.current=pd,e=lt!==null&&lt.next!==null,Bs=0,vt=lt=We=null,fd=!1,e)throw Error(B(300));return t}function nv(){var t=ac!==0;return ac=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?We.memoizedState=vt=t:vt=vt.next=t,vt}function On(){if(lt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=vt===null?We.memoizedState:vt.next;if(e!==null)vt=e,lt=t;else{if(t===null)throw Error(B(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},vt===null?We.memoizedState=vt=t:vt=vt.next=t}return vt}function lc(t,e){return typeof e=="function"?e(t):e}function Vp(t){var e=On(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Bs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,We.lanes|=u,zs|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jp(t){var e=On(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fT(){}function pT(t,e){var n=We,r=On(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,rv(yT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,cc(9,mT.bind(null,n,r,i,e),void 0,null),wt===null)throw Error(B(349));Bs&30||gT(n,e,i)}return i}function gT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mT(t,e,n,r){e.value=n,e.getSnapshot=r,vT(e)&&_T(t)}function yT(t,e,n){return n(function(){vT(e)&&_T(t)})}function vT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function _T(t){var e=Br(t,1);e!==null&&$n(e,t,1,-1)}function uw(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lc,lastRenderedState:t},e.queue=t,t=t.dispatch=e2.bind(null,We,t),[e.memoizedState,t]}function cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wT(){return On().memoizedState}function Sh(t,e,n,r){var i=nr();We.flags|=t,i.memoizedState=cc(1|e,n,void 0,r===void 0?null:r)}function cf(t,e,n,r){var i=On();r=r===void 0?null:r;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,r!==null&&ev(r,o.deps)){i.memoizedState=cc(e,n,s,r);return}}We.flags|=t,i.memoizedState=cc(1|e,n,s,r)}function hw(t,e){return Sh(8390656,8,t,e)}function rv(t,e){return cf(2048,8,t,e)}function xT(t,e){return cf(4,2,t,e)}function bT(t,e){return cf(4,4,t,e)}function ET(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TT(t,e,n){return n=n!=null?n.concat([t]):null,cf(4,4,ET.bind(null,e,t),n)}function iv(){}function ST(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ev(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kT(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ev(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IT(t,e,n){return Bs&21?(Hn(n,e)||(n=NE(),We.lanes|=n,zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function JR(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Lp.transition;Lp.transition={};try{t(!1),e()}finally{ke=n,Lp.transition=r}}function CT(){return On().memoizedState}function ZR(t,e,n){var r=Ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PT(t))AT(e,n);else if(n=uT(t,e,n,r),n!==null){var i=Qt();$n(n,t,r,i),RT(n,e,r)}}function e2(t,e,n){var r=Ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PT(t))AT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(i.next=i,Yy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uT(t,e,i,r),n!==null&&(i=Qt(),$n(n,t,r,i),RT(n,e,r))}}function PT(t){var e=t.alternate;return t===We||e!==null&&e===We}function AT(t,e){Rl=fd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function RT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,My(t,n)}}var pd={readContext:Dn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},t2={readContext:Dn,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:hw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sh(4194308,4,ET.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sh(4,2,t,e)},useMemo:function(t,e){var n=nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZR.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:uw,useDebugValue:iv,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=uw(!1),e=t[0];return t=JR.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=nr();if(Le){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),wt===null)throw Error(B(349));Bs&30||gT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,hw(yT.bind(null,r,s,t),[t]),r.flags|=2048,cc(9,mT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nr(),e=wt.identifierPrefix;if(Le){var n=Pr,r=Cr;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ac++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},n2={readContext:Dn,useCallback:ST,useContext:Dn,useEffect:rv,useImperativeHandle:TT,useInsertionEffect:xT,useLayoutEffect:bT,useMemo:kT,useReducer:Vp,useRef:wT,useState:function(){return Vp(lc)},useDebugValue:iv,useDeferredValue:function(t){var e=On();return IT(e,lt.memoizedState,t)},useTransition:function(){var t=Vp(lc)[0],e=On().memoizedState;return[t,e]},useMutableSource:fT,useSyncExternalStore:pT,useId:CT,unstable_isNewReconciler:!1},r2={readContext:Dn,useCallback:ST,useContext:Dn,useEffect:rv,useImperativeHandle:TT,useInsertionEffect:xT,useLayoutEffect:bT,useMemo:kT,useReducer:jp,useRef:wT,useState:function(){return jp(lc)},useDebugValue:iv,useDeferredValue:function(t){var e=On();return lt===null?e.memoizedState=t:IT(e,lt.memoizedState,t)},useTransition:function(){var t=jp(lc)[0],e=On().memoizedState;return[t,e]},useMutableSource:fT,useSyncExternalStore:pT,useId:CT,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uf={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=Ri(t),s=Lr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Pi(t,s,i),e!==null&&($n(e,t,i,r),Eh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=Ri(t),s=Lr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Pi(t,s,i),e!==null&&($n(e,t,i,r),Eh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=Ri(t),i=Lr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Pi(t,i,r),e!==null&&($n(e,t,r,n),Eh(e,t,r))}};function dw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!tc(n,r)||!tc(i,s):!0}function NT(t,e,n){var r=!1,i=Fi,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(i=ln(e)?Fs:Ut.current,r=e.contextTypes,s=(r=r!=null)?Zo(t,i):Fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function fw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uf.enqueueReplaceState(e,e.state,null)}function em(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Qy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dn(s):(s=ln(e)?Fs:Ut.current,i.context=Zo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uf.enqueueReplaceState(i,i.state,null),hd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ra(t,e){try{var n="",r=e;do n+=RA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var i2=typeof WeakMap=="function"?WeakMap:Map;function DT(t,e,n){n=Lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){md||(md=!0,hm=r),tm(t,e)},n}function OT(t,e,n){n=Lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tm(t,e),typeof r!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new i2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=v2.bind(null,t,e,n),e.then(t,t))}function gw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lr(-1,1),e.tag=2,Pi(n,e,1))),n.lanes|=1),t)}var s2=Kr.ReactCurrentOwner,on=!1;function Kt(t,e,n,r){e.child=t===null?cT(e,null,n,r):ta(e,t.child,n,r)}function yw(t,e,n,r,i){n=n.render;var s=e.ref;return Ho(e,i),r=tv(t,e,n,r,s,i),n=nv(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(Le&&n&&$y(e),e.flags|=1,Kt(t,e,r,i),e.child)}function vw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!dv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,MT(t,e,s,r,i)):(t=Ph(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:tc,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Ni(s,r),t.ref=e.ref,t.return=e,e.child=t}function MT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(tc(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,zr(t,e,i)}return nm(t,e,n,r,i)}function LT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Vo,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Vo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Vo,gn),gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Vo,gn),gn|=r;return Kt(t,e,i,n),e.child}function VT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nm(t,e,n,r,i){var s=ln(n)?Fs:Ut.current;return s=Zo(e,s),Ho(e,i),n=tv(t,e,n,r,s,i),r=nv(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(Le&&r&&$y(e),e.flags|=1,Kt(t,e,n,i),e.child)}function _w(t,e,n,r,i){if(ln(n)){var s=!0;od(e)}else s=!1;if(Ho(e,i),e.stateNode===null)kh(t,e),NT(e,n,r),em(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=ln(n)?Fs:Ut.current,c=Zo(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&fw(e,o,r,c),ci=!1;var f=e.memoizedState;o.state=f,hd(e,r,o,i),l=e.memoizedState,a!==r||f!==l||an.current||ci?(typeof u=="function"&&(Zg(e,n,u,r),l=e.memoizedState),(a=ci||dw(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=ln(n)?Fs:Ut.current,l=Zo(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&fw(e,o,r,l),ci=!1,f=e.memoizedState,o.state=f,hd(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||an.current||ci?(typeof p=="function"&&(Zg(e,n,p,r),y=e.memoizedState),(c=ci||dw(e,n,c,r,f,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rm(t,e,n,r,s,i)}function rm(t,e,n,r,i,s){VT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&iw(e,n,!1),zr(t,e,s);r=e.stateNode,s2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ta(e,t.child,null,s),e.child=ta(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&iw(e,n,!0),e.child}function jT(t){var e=t.stateNode;e.pendingContext?rw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rw(t,e.context,!1),Xy(t,e.containerInfo)}function ww(t,e,n,r,i){return ea(),Hy(i),e.flags|=256,Kt(t,e,n,r),e.child}var im={dehydrated:null,treeContext:null,retryLane:0};function sm(t){return{baseLanes:t,cachePool:null,transitions:null}}function FT(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae($e,i&1),t===null)return Xg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ff(o,r,0,null),t=Rs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sm(n),e.memoizedState=im,t):sv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return o2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ni(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ni(a,s):(s=Rs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=im,r}return s=t.child,t=s.sibling,r=Ni(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sv(t,e){return e=ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zu(t,e,n,r){return r!==null&&Hy(r),ta(e,t.child,null,n),t=sv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Fp(Error(B(422))),zu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ff({mode:"visible",children:r.children},i,0,null),s=Rs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ta(e,t.child,null,o),e.child.memoizedState=sm(o),e.memoizedState=im,s);if(!(e.mode&1))return zu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=Fp(s,r,void 0),zu(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=wt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Br(t,i),$n(r,t,i,-1))}return hv(),r=Fp(Error(B(421))),zu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=Ci(i.nextSibling),xn=e,Le=!0,Fn=null,t!==null&&(In[Cn++]=Cr,In[Cn++]=Pr,In[Cn++]=Us,Cr=t.id,Pr=t.overflow,Us=e),e=sv(e,r.children),e.flags|=4096,e)}function xw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jg(t.return,e,n)}function Up(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function UT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xw(t,n,e);else if(t.tag===19)xw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Up(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Up(e,!0,n,null,s);break;case"together":Up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function a2(t,e,n){switch(e.tag){case 3:jT(e),ea();break;case 5:dT(e);break;case 1:ln(e.type)&&od(e);break;case 4:Xy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(cd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?FT(t,e,n):(Ae($e,$e.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Ae($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return UT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,LT(t,e,n)}return zr(t,e,n)}var BT,om,zT,$T;BT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};om=function(){};zT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Is(ar.current);var s=null;switch(n){case"input":i=Cg(t,i),r=Cg(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=Rg(t,i),r=Rg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=id)}Dg(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};$T=function(t,e,n,r){n!==r&&(e.flags|=4)};function tl(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function l2(t,e,n){var r=e.pendingProps;switch(Wy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return ln(e.type)&&sd(),Dt(e),null;case 3:return r=e.stateNode,na(),De(an),De(Ut),Zy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(pm(Fn),Fn=null))),om(t,e),Dt(e),null;case 5:Jy(e);var i=Is(oc.current);if(n=e.type,t!==null&&e.stateNode!=null)zT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Dt(e),null}if(t=Is(ar.current),Uu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ir]=e,r[ic]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<dl.length;i++)Ne(dl[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":A0(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":N0(r,s),Ne("invalid",r)}Dg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fu(r.textContent,a,t),i=["children",""+a]):Gl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Ru(r),R0(r,s,!0);break;case"textarea":Ru(r),D0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=id)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ir]=e,t[ic]=r,BT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Og(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<dl.length;i++)Ne(dl[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":A0(t,r),i=Cg(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":N0(t,r),i=Rg(t,r),Ne("invalid",t);break;default:i=r}Dg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Yl(t,l):typeof l=="number"&&Yl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Gl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",t):l!=null&&Py(t,s,l,o))}switch(n){case"input":Ru(t),R0(t,r,!1);break;case"textarea":Ru(t),D0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ji(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=id)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)$T(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Is(oc.current),Is(ar.current),Uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[ir]=e,(s=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Fu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ir]=e,e.stateNode=r}return Dt(e),null;case 13:if(De($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&yn!==null&&e.mode&1&&!(e.flags&128))aT(),ea(),e.flags|=98560,s=!1;else if(s=Uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[ir]=e}else ea(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),s=!1}else Fn!==null&&(pm(Fn),Fn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ut===0&&(ut=3):hv())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return na(),om(t,e),t===null&&nc(e.stateNode.containerInfo),Dt(e),null;case 10:return Gy(e.type._context),Dt(e),null;case 17:return ln(e.type)&&sd(),Dt(e),null;case 19:if(De($e),s=e.memoizedState,s===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)tl(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dd(t),o!==null){for(e.flags|=128,tl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&nt()>ia&&(e.flags|=128,r=!0,tl(s,!1),e.lanes=4194304)}else{if(!r)if(t=dd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return Dt(e),null}else 2*nt()-s.renderingStartTime>ia&&n!==1073741824&&(e.flags|=128,r=!0,tl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nt(),e.sibling=null,n=$e.current,Ae($e,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return uv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function c2(t,e){switch(Wy(e),e.tag){case 1:return ln(e.type)&&sd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return na(),De(an),De(Ut),Zy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jy(e),null;case 13:if(De($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De($e),null;case 4:return na(),null;case 10:return Gy(e.type._context),null;case 22:case 23:return uv(),null;case 24:return null;default:return null}}var $u=!1,Vt=!1,u2=typeof WeakSet=="function"?WeakSet:Set,K=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function am(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var bw=!1;function h2(t,e){if(Wg=td,t=GE(),zy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hg={focusedElem:t,selectionRange:n},td=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Vn(e.type,v),x);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(I){Qe(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return y=bw,bw=!1,y}function Nl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&am(e,n,s)}i=i.next}while(i!==r)}}function hf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WT(t){var e=t.alternate;e!==null&&(t.alternate=null,WT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[ic],delete e[Gg],delete e[KR],delete e[GR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HT(t){return t.tag===5||t.tag===3||t.tag===4}function Ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=id));else if(r!==4&&(t=t.child,t!==null))for(cm(t,e,n),t=t.sibling;t!==null;)cm(t,e,n),t=t.sibling}function um(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(um(t,e,n),t=t.sibling;t!==null;)um(t,e,n),t=t.sibling}var Et=null,jn=!1;function ii(t,e,n){for(n=n.child;n!==null;)qT(t,e,n),n=n.sibling}function qT(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(nf,n)}catch{}switch(n.tag){case 5:Vt||Lo(n,e);case 6:var r=Et,i=jn;Et=null,ii(t,e,n),Et=r,jn=i,Et!==null&&(jn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(jn?(t=Et,n=n.stateNode,t.nodeType===8?Dp(t.parentNode,n):t.nodeType===1&&Dp(t,n),Zl(t)):Dp(Et,n.stateNode));break;case 4:r=Et,i=jn,Et=n.stateNode.containerInfo,jn=!0,ii(t,e,n),Et=r,jn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&am(n,e,o),i=i.next}while(i!==r)}ii(t,e,n);break;case 1:if(!Vt&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}ii(t,e,n);break;case 21:ii(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,ii(t,e,n),Vt=r):ii(t,e,n);break;default:ii(t,e,n)}}function Tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new u2),e.forEach(function(r){var i=w2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Et=a.stateNode,jn=!1;break e;case 3:Et=a.stateNode.containerInfo,jn=!0;break e;case 4:Et=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(Et===null)throw Error(B(160));qT(s,o,i),Et=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Qe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KT(e,t),e=e.sibling}function KT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Zn(t),r&4){try{Nl(3,t,t.return),hf(3,t)}catch(v){Qe(t,t.return,v)}try{Nl(5,t,t.return)}catch(v){Qe(t,t.return,v)}}break;case 1:Ln(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(Ln(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{Yl(i,"")}catch(v){Qe(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gE(i,s),Og(a,o);var c=Og(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?wE(i,d):u==="dangerouslySetInnerHTML"?vE(i,d):u==="children"?Yl(i,d):Py(i,u,d,c)}switch(a){case"input":Pg(i,s);break;case"textarea":mE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Bo(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Bo(i,!!s.multiple,s.defaultValue,!0):Bo(i,!!s.multiple,s.multiple?[]:"",!1))}i[ic]=s}catch(v){Qe(t,t.return,v)}}break;case 6:if(Ln(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Qe(t,t.return,v)}}break;case 3:if(Ln(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zl(e.containerInfo)}catch(v){Qe(t,t.return,v)}break;case 4:Ln(e,t),Zn(t);break;case 13:Ln(e,t),Zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lv=nt())),r&4&&Tw(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(c=Vt)||u,Ln(e,t),Vt=c):Ln(e,t),Zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(d=K=u;K!==null;){switch(f=K,p=f.child,f.tag){case 0:case 11:case 14:case 15:Nl(4,f,f.return);break;case 1:Lo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Qe(r,n,v)}}break;case 5:Lo(f,f.return);break;case 22:if(f.memoizedState!==null){kw(d);continue}}p!==null?(p.return=f,K=p):kw(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_E("display",o))}catch(v){Qe(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Qe(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),Zn(t),r&4&&Tw(t);break;case 21:break;default:Ln(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HT(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yl(i,""),r.flags&=-33);var s=Ew(t);um(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ew(t);cm(t,a,o);break;default:throw Error(B(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d2(t,e,n){K=t,GT(t)}function GT(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$u;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=$u;var c=Vt;if($u=o,(Vt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Iw(i):l!==null?(l.return=o,K=l):Iw(i);for(;s!==null;)K=s,GT(s),s=s.sibling;K=i,$u=a,Vt=c}Sw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Sw(t)}}function Sw(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||hf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Zl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Vt||e.flags&512&&lm(e)}catch(f){Qe(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function kw(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Iw(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hf(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Qe(e,i,l)}}var s=e.return;try{lm(e)}catch(l){Qe(e,s,l)}break;case 5:var o=e.return;try{lm(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var f2=Math.ceil,gd=Kr.ReactCurrentDispatcher,ov=Kr.ReactCurrentOwner,Rn=Kr.ReactCurrentBatchConfig,ve=0,wt=null,ot=null,It=0,gn=0,Vo=Yi(0),ut=0,uc=null,zs=0,df=0,av=0,Dl=null,nn=null,lv=0,ia=1/0,Sr=null,md=!1,hm=null,Ai=null,Wu=!1,vi=null,yd=0,Ol=0,dm=null,Ih=-1,Ch=0;function Qt(){return ve&6?nt():Ih!==-1?Ih:Ih=nt()}function Ri(t){return t.mode&1?ve&2&&It!==0?It&-It:QR.transition!==null?(Ch===0&&(Ch=NE()),Ch):(t=ke,t!==0||(t=window.event,t=t===void 0?16:FE(t.type)),t):1}function $n(t,e,n,r){if(50<Ol)throw Ol=0,dm=null,Error(B(185));Lc(t,n,r),(!(ve&2)||t!==wt)&&(t===wt&&(!(ve&2)&&(df|=n),ut===4&&hi(t,It)),cn(t,r),n===1&&ve===0&&!(e.mode&1)&&(ia=nt()+500,lf&&Qi()))}function cn(t,e){var n=t.callbackNode;QA(t,e);var r=ed(t,t===wt?It:0);if(r===0)n!==null&&L0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&L0(n),e===1)t.tag===0?YR(Cw.bind(null,t)):iT(Cw.bind(null,t)),HR(function(){!(ve&6)&&Qi()}),n=null;else{switch(DE(r)){case 1:n=Oy;break;case 4:n=AE;break;case 16:n=Zh;break;case 536870912:n=RE;break;default:n=Zh}n=nS(n,YT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YT(t,e){if(Ih=-1,Ch=0,ve&6)throw Error(B(327));var n=t.callbackNode;if(qo()&&t.callbackNode!==n)return null;var r=ed(t,t===wt?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vd(t,r);else{e=r;var i=ve;ve|=2;var s=XT();(wt!==t||It!==e)&&(Sr=null,ia=nt()+500,As(t,e));do try{m2();break}catch(a){QT(t,a)}while(!0);Ky(),gd.current=s,ve=i,ot!==null?e=0:(wt=null,It=0,e=ut)}if(e!==0){if(e===2&&(i=Fg(t),i!==0&&(r=i,e=fm(t,i))),e===1)throw n=uc,As(t,0),hi(t,r),cn(t,nt()),n;if(e===6)hi(t,r);else{if(i=t.current.alternate,!(r&30)&&!p2(i)&&(e=vd(t,r),e===2&&(s=Fg(t),s!==0&&(r=s,e=fm(t,s))),e===1))throw n=uc,As(t,0),hi(t,r),cn(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:xs(t,nn,Sr);break;case 3:if(hi(t,r),(r&130023424)===r&&(e=lv+500-nt(),10<e)){if(ed(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kg(xs.bind(null,t,nn,Sr),e);break}xs(t,nn,Sr);break;case 4:if(hi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f2(r/1960))-r,10<r){t.timeoutHandle=Kg(xs.bind(null,t,nn,Sr),r);break}xs(t,nn,Sr);break;case 5:xs(t,nn,Sr);break;default:throw Error(B(329))}}}return cn(t,nt()),t.callbackNode===n?YT.bind(null,t):null}function fm(t,e){var n=Dl;return t.current.memoizedState.isDehydrated&&(As(t,e).flags|=256),t=vd(t,e),t!==2&&(e=nn,nn=n,e!==null&&pm(e)),t}function pm(t){nn===null?nn=t:nn.push.apply(nn,t)}function p2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hi(t,e){for(e&=~av,e&=~df,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function Cw(t){if(ve&6)throw Error(B(327));qo();var e=ed(t,0);if(!(e&1))return cn(t,nt()),null;var n=vd(t,e);if(t.tag!==0&&n===2){var r=Fg(t);r!==0&&(e=r,n=fm(t,r))}if(n===1)throw n=uc,As(t,0),hi(t,e),cn(t,nt()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xs(t,nn,Sr),cn(t,nt()),null}function cv(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ia=nt()+500,lf&&Qi())}}function $s(t){vi!==null&&vi.tag===0&&!(ve&6)&&qo();var e=ve;ve|=1;var n=Rn.transition,r=ke;try{if(Rn.transition=null,ke=1,t)return t()}finally{ke=r,Rn.transition=n,ve=e,!(ve&6)&&Qi()}}function uv(){gn=Vo.current,De(Vo)}function As(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WR(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Wy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sd();break;case 3:na(),De(an),De(Ut),Zy();break;case 5:Jy(r);break;case 4:na();break;case 13:De($e);break;case 19:De($e);break;case 10:Gy(r.type._context);break;case 22:case 23:uv()}n=n.return}if(wt=t,ot=t=Ni(t.current,null),It=gn=e,ut=0,uc=null,av=df=zs=0,nn=Dl=null,ks!==null){for(e=0;e<ks.length;e++)if(n=ks[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return t}function QT(t,e){do{var n=ot;try{if(Ky(),Th.current=pd,fd){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fd=!1}if(Bs=0,vt=lt=We=null,Rl=!1,ac=0,ov.current=null,n===null||n.return===null){ut=1,uc=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=It,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gw(o);if(p!==null){p.flags&=-257,mw(p,o,a,s,e),p.mode&1&&pw(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){pw(s,c,e),hv();break e}l=Error(B(426))}}else if(Le&&a.mode&1){var x=gw(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mw(x,o,a,s,e),Hy(ra(l,a));break e}}s=l=ra(l,a),ut!==4&&(ut=2),Dl===null?Dl=[s]:Dl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=DT(s,l,e);lw(s,_);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ai===null||!Ai.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=OT(s,a,e);lw(s,I);break e}}s=s.return}while(s!==null)}ZT(n)}catch(N){e=N,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function XT(){var t=gd.current;return gd.current=pd,t===null?pd:t}function hv(){(ut===0||ut===3||ut===2)&&(ut=4),wt===null||!(zs&268435455)&&!(df&268435455)||hi(wt,It)}function vd(t,e){var n=ve;ve|=2;var r=XT();(wt!==t||It!==e)&&(Sr=null,As(t,e));do try{g2();break}catch(i){QT(t,i)}while(!0);if(Ky(),ve=n,gd.current=r,ot!==null)throw Error(B(261));return wt=null,It=0,ut}function g2(){for(;ot!==null;)JT(ot)}function m2(){for(;ot!==null&&!BA();)JT(ot)}function JT(t){var e=tS(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?ZT(t):ot=e,ov.current=null}function ZT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=c2(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}else if(n=l2(n,e,gn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ut===0&&(ut=5)}function xs(t,e,n){var r=ke,i=Rn.transition;try{Rn.transition=null,ke=1,y2(t,e,n,r)}finally{Rn.transition=i,ke=r}return null}function y2(t,e,n,r){do qo();while(vi!==null);if(ve&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XA(t,s),t===wt&&(ot=wt=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wu||(Wu=!0,nS(Zh,function(){return qo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rn.transition,Rn.transition=null;var o=ke;ke=1;var a=ve;ve|=4,ov.current=null,h2(t,n),KT(n,t),VR(Hg),td=!!Wg,Hg=Wg=null,t.current=n,d2(n),zA(),ve=a,ke=o,Rn.transition=s}else t.current=n;if(Wu&&(Wu=!1,vi=t,yd=i),s=t.pendingLanes,s===0&&(Ai=null),HA(n.stateNode),cn(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(md)throw md=!1,t=hm,hm=null,t;return yd&1&&t.tag!==0&&qo(),s=t.pendingLanes,s&1?t===dm?Ol++:(Ol=0,dm=t):Ol=0,Qi(),null}function qo(){if(vi!==null){var t=DE(yd),e=Rn.transition,n=ke;try{if(Rn.transition=null,ke=16>t?16:t,vi===null)var r=!1;else{if(t=vi,vi=null,yd=0,ve&6)throw Error(B(331));var i=ve;for(ve|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Nl(8,u,s)}var d=u.child;if(d!==null)d.return=u,K=d;else for(;K!==null;){u=K;var f=u.sibling,p=u.return;if(WT(u),u===c){K=null;break}if(f!==null){f.return=p,K=f;break}K=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,K=_;break e}K=s.return}}var w=t.current;for(K=w;K!==null;){o=K;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,K=E;else e:for(o=w;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hf(9,a)}}catch(N){Qe(a,a.return,N)}if(a===o){K=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,K=I;break e}K=a.return}}if(ve=i,Qi(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(nf,t)}catch{}r=!0}return r}finally{ke=n,Rn.transition=e}}return!1}function Pw(t,e,n){e=ra(n,e),e=DT(t,e,1),t=Pi(t,e,1),e=Qt(),t!==null&&(Lc(t,1,e),cn(t,e))}function Qe(t,e,n){if(t.tag===3)Pw(t,t,n);else for(;e!==null;){if(e.tag===3){Pw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ai===null||!Ai.has(r))){t=ra(n,t),t=OT(e,t,1),e=Pi(e,t,1),t=Qt(),e!==null&&(Lc(e,1,t),cn(e,t));break}}e=e.return}}function v2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(It&n)===n&&(ut===4||ut===3&&(It&130023424)===It&&500>nt()-lv?As(t,0):av|=n),cn(t,e)}function eS(t,e){e===0&&(t.mode&1?(e=Ou,Ou<<=1,!(Ou&130023424)&&(Ou=4194304)):e=1);var n=Qt();t=Br(t,e),t!==null&&(Lc(t,e,n),cn(t,n))}function _2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eS(t,n)}function w2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),eS(t,n)}var tS;tS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,a2(t,e,n);on=!!(t.flags&131072)}else on=!1,Le&&e.flags&1048576&&sT(e,ld,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kh(t,e),t=e.pendingProps;var i=Zo(e,Ut.current);Ho(e,n),i=tv(null,e,r,t,i,n);var s=nv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,od(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qy(e),i.updater=uf,e.stateNode=i,i._reactInternals=e,em(e,r,t,n),e=rm(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&$y(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b2(r),t=Vn(r,t),i){case 0:e=nm(null,e,r,t,n);break e;case 1:e=_w(null,e,r,t,n);break e;case 11:e=yw(null,e,r,t,n);break e;case 14:e=vw(null,e,r,Vn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),nm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),_w(t,e,r,i,n);case 3:e:{if(jT(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hT(t,e),hd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ra(Error(B(423)),e),e=ww(t,e,r,n,i);break e}else if(r!==i){i=ra(Error(B(424)),e),e=ww(t,e,r,n,i);break e}else for(yn=Ci(e.stateNode.containerInfo.firstChild),xn=e,Le=!0,Fn=null,n=cT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ea(),r===i){e=zr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return dT(e),t===null&&Xg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qg(r,i)?o=null:s!==null&&qg(r,s)&&(e.flags|=32),VT(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Xg(e),null;case 13:return FT(t,e,n);case 4:return Xy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ta(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),yw(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(cd,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!an.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Lr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ho(e,n),i=Dn(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=Vn(r,e.pendingProps),i=Vn(r.type,i),vw(t,e,r,i,n);case 15:return MT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),kh(t,e),e.tag=1,ln(r)?(t=!0,od(e)):t=!1,Ho(e,n),NT(e,r,i),em(e,r,i,n),rm(null,e,r,!0,t,n);case 19:return UT(t,e,n);case 22:return LT(t,e,n)}throw Error(B(156,e.tag))};function nS(t,e){return PE(t,e)}function x2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new x2(t,e,n,r)}function dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b2(t){if(typeof t=="function")return dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ry)return 11;if(t===Ny)return 14}return 2}function Ni(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ph(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Io:return Rs(n.children,i,s,e);case Ay:o=8,i|=8;break;case Tg:return t=Pn(12,n,e,i|2),t.elementType=Tg,t.lanes=s,t;case Sg:return t=Pn(13,n,e,i),t.elementType=Sg,t.lanes=s,t;case kg:return t=Pn(19,n,e,i),t.elementType=kg,t.lanes=s,t;case dE:return ff(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uE:o=10;break e;case hE:o=9;break e;case Ry:o=11;break e;case Ny:o=14;break e;case li:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Rs(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function ff(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=dE,t.lanes=n,t.stateNode={isHidden:!1},t}function Bp(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function zp(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function E2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bp(0),this.expirationTimes=bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fv(t,e,n,r,i,s,o,a,l){return t=new E2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qy(s),t}function T2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rS(t){if(!t)return Fi;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(ln(n))return rT(t,n,e)}return e}function iS(t,e,n,r,i,s,o,a,l){return t=fv(n,r,!0,t,i,s,o,a,l),t.context=rS(null),n=t.current,r=Qt(),i=Ri(n),s=Lr(r,i),s.callback=e??null,Pi(n,s,i),t.current.lanes=i,Lc(t,i,r),cn(t,r),t}function pf(t,e,n,r){var i=e.current,s=Qt(),o=Ri(i);return n=rS(n),e.context===null?e.context=n:e.pendingContext=n,e=Lr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Pi(i,e,o),t!==null&&($n(t,i,o,s),Eh(t,i,o)),o}function _d(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Aw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pv(t,e){Aw(t,e),(t=t.alternate)&&Aw(t,e)}function S2(){return null}var sS=typeof reportError=="function"?reportError:function(t){console.error(t)};function gv(t){this._internalRoot=t}gf.prototype.render=gv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));pf(t,e,null,null)};gf.prototype.unmount=gv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){pf(null,t,null,null)}),e[Ur]=null}};function gf(t){this._internalRoot=t}gf.prototype.unstable_scheduleHydration=function(t){if(t){var e=LE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&jE(t)}};function mv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rw(){}function k2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_d(o);s.call(c)}}var o=iS(e,r,t,0,null,!1,!1,"",Rw);return t._reactRootContainer=o,t[Ur]=o.current,nc(t.nodeType===8?t.parentNode:t),$s(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_d(l);a.call(c)}}var l=fv(t,0,!1,null,null,!1,!1,"",Rw);return t._reactRootContainer=l,t[Ur]=l.current,nc(t.nodeType===8?t.parentNode:t),$s(function(){pf(e,l,n,r)}),l}function yf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_d(o);a.call(l)}}pf(e,o,t,i)}else o=k2(n,e,t,i,r);return _d(o)}OE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hl(e.pendingLanes);n!==0&&(My(e,n|1),cn(e,nt()),!(ve&6)&&(ia=nt()+500,Qi()))}break;case 13:$s(function(){var r=Br(t,1);if(r!==null){var i=Qt();$n(r,t,1,i)}}),pv(t,1)}};Ly=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=Qt();$n(e,t,134217728,n)}pv(t,134217728)}};ME=function(t){if(t.tag===13){var e=Ri(t),n=Br(t,e);if(n!==null){var r=Qt();$n(n,t,e,r)}pv(t,e)}};LE=function(){return ke};VE=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Lg=function(t,e,n){switch(e){case"input":if(Pg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=af(r);if(!i)throw Error(B(90));pE(r),Pg(r,i)}}}break;case"textarea":mE(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};EE=cv;TE=$s;var I2={usingClientEntryPoint:!1,Events:[jc,Ro,af,xE,bE,cv]},nl={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C2={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IE(t),t===null?null:t.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||S2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{nf=Hu.inject(C2),or=Hu}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I2;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mv(e))throw Error(B(200));return T2(t,e,null,n)};En.createRoot=function(t,e){if(!mv(t))throw Error(B(299));var n=!1,r="",i=sS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fv(t,1,!1,null,null,n,!1,r,i),t[Ur]=e.current,nc(t.nodeType===8?t.parentNode:t),new gv(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=IE(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return $s(t)};En.hydrate=function(t,e,n){if(!mf(e))throw Error(B(200));return yf(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!mv(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iS(e,null,t,1,n??null,i,!1,s,o),t[Ur]=e.current,nc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gf(e)};En.render=function(t,e,n){if(!mf(e))throw Error(B(200));return yf(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!mf(t))throw Error(B(40));return t._reactRootContainer?($s(function(){yf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};En.unstable_batchedUpdates=cv;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mf(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return yf(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function oS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oS)}catch(t){console.error(t)}}oS(),oE.exports=En;var P2=oE.exports,Nw=P2;bg.createRoot=Nw.createRoot,bg.hydrateRoot=Nw.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hc.apply(this,arguments)}var _i;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_i||(_i={}));const Dw="popstate";function A2(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return gm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wd(i)}return N2(e,n,null,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R2(){return Math.random().toString(36).substr(2,8)}function Ow(t,e){return{usr:t.state,key:t.key,idx:e}}function gm(t,e,n,r){return n===void 0&&(n=null),hc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wa(e):e,{state:n,key:e&&e.key||r||R2()})}function wd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function N2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=_i.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(hc({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=_i.Pop;let x=u(),_=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:_})}function f(x,_){a=_i.Push;let w=gm(v.location,x,_);c=u()+1;let E=Ow(w,c),I=v.createHref(w);try{o.pushState(E,"",I)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(I)}s&&l&&l({action:a,location:v.location,delta:1})}function p(x,_){a=_i.Replace;let w=gm(v.location,x,_);c=u();let E=Ow(w,c),I=v.createHref(w);o.replaceState(E,"",I),s&&l&&l({action:a,location:v.location,delta:0})}function y(x){let _=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:wd(x);return w=w.replace(/ $/,"%20"),He(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let v={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Dw,d),l=x,()=>{i.removeEventListener(Dw,d),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let _=y(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(x){return o.go(x)}};return v}var Mw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Mw||(Mw={}));function D2(t,e,n){return n===void 0&&(n="/"),O2(t,e,n,!1)}function O2(t,e,n,r){let i=typeof e=="string"?wa(e):e,s=sa(i.pathname||"/",n);if(s==null)return null;let o=lS(t);M2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=q2(s);a=W2(o[l],c,r)}return a}function lS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Di([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(He(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lS(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:z2(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of cS(s.path))i(s,o,l)}),e}function cS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=cS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function M2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L2=/^:[\w-]+$/,V2=3,j2=2,F2=1,U2=10,B2=-2,Lw=t=>t==="*";function z2(t,e){let n=t.split("/"),r=n.length;return n.some(Lw)&&(r+=B2),e&&(r+=j2),n.filter(i=>!Lw(i)).reduce((i,s)=>i+(L2.test(s)?V2:s===""?F2:U2),r)}function $2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function W2(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=xd({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=xd({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Di([s,d.pathname]),pathnameBase:Q2(Di([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Di([s,d.pathnameBase]))}return o}function xd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function H2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),aS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function q2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return aS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function K2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?wa(t):t;return{pathname:n?n.startsWith("/")?n:G2(n,e):e,search:X2(r),hash:J2(i)}}function G2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $p(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yv(t,e){let n=Y2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=wa(t):(i=hc({},t),He(!i.pathname||!i.pathname.includes("?"),$p("?","pathname","search",i)),He(!i.pathname||!i.pathname.includes("#"),$p("#","pathname","hash",i)),He(!i.search||!i.search.includes("#"),$p("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=K2(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Di=t=>t.join("/").replace(/\/\/+/g,"/"),Q2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,J2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uS=["post","put","patch","delete"];new Set(uS);const eN=["get",...uS];new Set(eN);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dc.apply(this,arguments)}const vf=M.createContext(null),hS=M.createContext(null),Gr=M.createContext(null),_f=M.createContext(null),Yr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),dS=M.createContext(null);function tN(t,e){let{relative:n}=e===void 0?{}:e;xa()||He(!1);let{basename:r,navigator:i}=M.useContext(Gr),{hash:s,pathname:o,search:a}=wf(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Di([r,o])),i.createHref({pathname:l,search:a,hash:s})}function xa(){return M.useContext(_f)!=null}function Qr(){return xa()||He(!1),M.useContext(_f).location}function fS(t){M.useContext(Gr).static||M.useLayoutEffect(t)}function Sn(){let{isDataRoute:t}=M.useContext(Yr);return t?gN():nN()}function nN(){xa()||He(!1);let t=M.useContext(vf),{basename:e,future:n,navigator:r}=M.useContext(Gr),{matches:i}=M.useContext(Yr),{pathname:s}=Qr(),o=JSON.stringify(yv(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return fS(()=>{a.current=!0}),M.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=vv(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Di([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function rN(){let{matches:t}=M.useContext(Yr),e=t[t.length-1];return e?e.params:{}}function wf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Gr),{matches:i}=M.useContext(Yr),{pathname:s}=Qr(),o=JSON.stringify(yv(i,r.v7_relativeSplatPath));return M.useMemo(()=>vv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function iN(t,e){return sN(t,e)}function sN(t,e,n,r){xa()||He(!1);let{navigator:i}=M.useContext(Gr),{matches:s}=M.useContext(Yr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Qr(),u;if(e){var d;let x=typeof e=="string"?wa(e):e;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||He(!1),u=x}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=D2(t,{pathname:p}),v=uN(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Di([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Di([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&v?M.createElement(_f.Provider,{value:{location:dc({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:_i.Pop}},v):v}function oN(){let t=pN(),e=Z2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const aN=M.createElement(oN,null);class lN extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Yr.Provider,{value:this.props.routeContext},M.createElement(dS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cN(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(vf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Yr.Provider,{value:e},r)}function uN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||He(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let p,y=!1,v=null,x=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||aN,l&&(c<0&&f===0?(y=!0,x=null):c===f&&(y=!0,x=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),w=()=>{let E;return p?E=v:y?E=x:d.route.Component?E=M.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,M.createElement(cN,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(lN,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var pS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(pS||{}),bd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(bd||{});function hN(t){let e=M.useContext(vf);return e||He(!1),e}function dN(t){let e=M.useContext(hS);return e||He(!1),e}function fN(t){let e=M.useContext(Yr);return e||He(!1),e}function gS(t){let e=fN(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function pN(){var t;let e=M.useContext(dS),n=dN(bd.UseRouteError),r=gS(bd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function gN(){let{router:t}=hN(pS.UseNavigateStable),e=gS(bd.UseNavigateStable),n=M.useRef(!1);return fS(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,dc({fromRouteId:e},s)))},[t,e])}const Vw={};function mN(t,e){Vw[e]||(Vw[e]=!0,console.warn(e))}const jw=(t,e,n)=>mN(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function yN(t,e){t!=null&&t.v7_startTransition||jw("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&jw("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function vN(t){let{to:e,replace:n,state:r,relative:i}=t;xa()||He(!1);let{future:s,static:o}=M.useContext(Gr),{matches:a}=M.useContext(Yr),{pathname:l}=Qr(),c=Sn(),u=vv(e,yv(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function fn(t){He(!1)}function _N(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_i.Pop,navigator:s,static:o=!1,future:a}=t;xa()&&He(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:dc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=wa(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:y="default"}=r,v=M.useMemo(()=>{let x=sa(u,l);return x==null?null:{location:{pathname:x,search:d,hash:f,state:p,key:y},navigationType:i}},[l,u,d,f,p,y,i]);return v==null?null:M.createElement(Gr.Provider,{value:c},M.createElement(_f.Provider,{children:n,value:v}))}function wN(t){let{children:e,location:n}=t;return iN(mm(e),n)}new Promise(()=>{});function mm(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,mm(r.props.children,s));return}r.type!==fn&&He(!1),!r.props.index||!r.props.children||He(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mm(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}function mS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function xN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bN(t,e){return t.button===0&&(!e||e==="_self")&&!xN(t)}const EN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],SN="6";try{window.__reactRouterVersion=SN}catch{}const kN=M.createContext({isTransitioning:!1}),IN="startTransition",Fw=vA[IN];function CN(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=A2({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=M.useCallback(d=>{c&&Fw?Fw(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(u),[o,u]),M.useEffect(()=>yN(r),[r]),M.createElement(_N,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const PN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fc=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=mS(e,EN),{basename:p}=M.useContext(Gr),y,v=!1;if(typeof c=="string"&&AN.test(c)&&(y=c,PN))try{let E=new URL(window.location.href),I=c.startsWith("//")?new URL(E.protocol+c):new URL(c),N=sa(I.pathname,p);I.origin===E.origin&&N!=null?c=N+I.search+I.hash:v=!0}catch{}let x=tN(c,{relative:i}),_=NN(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function w(E){r&&r(E),E.defaultPrevented||_(E)}return M.createElement("a",Ed({},f,{href:y||x,onClick:v||s?r:w,ref:n,target:l}))}),Ht=M.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,d=mS(e,TN),f=wf(l,{relative:d.relative}),p=Qr(),y=M.useContext(hS),{navigator:v,basename:x}=M.useContext(Gr),_=y!=null&&DN(f)&&c===!0,w=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,E=p.pathname,I=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(E=E.toLowerCase(),I=I?I.toLowerCase():null,w=w.toLowerCase()),I&&x&&(I=sa(I,x)||I);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let O=E===w||!o&&E.startsWith(w)&&E.charAt(N)==="/",S=I!=null&&(I===w||!o&&I.startsWith(w)&&I.charAt(w.length)==="/"),T={isActive:O,isPending:S,isTransitioning:_},k=O?r:void 0,P;typeof s=="function"?P=s(T):P=[s,O?"active":null,S?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(T):a;return M.createElement(fc,Ed({},d,{"aria-current":k,className:P,ref:n,style:R,to:l,viewTransition:c}),typeof u=="function"?u(T):u)});var ym;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ym||(ym={}));var Uw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uw||(Uw={}));function RN(t){let e=M.useContext(vf);return e||He(!1),e}function NN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Sn(),c=Qr(),u=wf(t,{relative:o});return M.useCallback(d=>{if(bN(d,n)){d.preventDefault();let f=r!==void 0?r:wd(c)===wd(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function DN(t,e){e===void 0&&(e={});let n=M.useContext(kN);n==null&&He(!1);let{basename:r}=RN(ym.useViewTransitionState),i=wf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=sa(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=sa(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xd(i.pathname,o)!=null||xd(i.pathname,s)!=null}var Bw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ON=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ON(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new MN;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LN=function(t){const e=yS(t);return vS.encodeByteArray(e,!0)},Td=function(t){return LN(t).replace(/\./g,"")},_S=function(t){try{return vS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=()=>VN().__FIREBASE_DEFAULTS__,FN=()=>{if(typeof process>"u"||typeof Bw>"u")return;const t=Bw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_S(t[1]);return e&&JSON.parse(e)},xf=()=>{try{return jN()||FN()||UN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wS=t=>{var e,n;return(n=(e=xf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xS=t=>{const e=wS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bS=()=>{var t;return(t=xf())===null||t===void 0?void 0:t.config},ES=t=>{var e;return(e=xf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Td(JSON.stringify(n)),Td(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function $N(){var t;const e=(t=xf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KN(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GN(){return!$N()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YN(){try{return typeof indexedDB=="object"}catch{return!1}}function QN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XN,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uc.prototype.create)}}class Uc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?JN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new mr(i,a,r)}}function JN(t,e){return t.replace(ZN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ZN=/\{\$([^}]+)}/g;function eD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(zw(s)&&zw(o)){if(!pc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function pl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tD(t,e){const n=new nD(t,e);return n.subscribe.bind(n)}class nD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wp),i.error===void 0&&(i.error=Wp),i.complete===void 0&&(i.complete=Wp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return t&&t._delegate?t._delegate:t}class Ui{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new BN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oD(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sD(t){return t===bs?void 0:t}function oD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const lD={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},cD=he.INFO,uD={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},hD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _v{constructor(e){this.name=e,this._logLevel=cD,this._logHandler=hD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const dD=(t,e)=>e.some(n=>t instanceof n);let $w,Ww;function fD(){return $w||($w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pD(){return Ww||(Ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SS=new WeakMap,vm=new WeakMap,kS=new WeakMap,Hp=new WeakMap,wv=new WeakMap;function gD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Oi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SS.set(n,t)}).catch(()=>{}),wv.set(e,t),e}function mD(t){if(vm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vm.set(t,e)}let _m={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yD(t){_m=t(_m)}function vD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qp(this),e,...n);return kS.set(r,e.sort?e.sort():[e]),Oi(r)}:pD().includes(t)?function(...e){return t.apply(qp(this),e),Oi(SS.get(this))}:function(...e){return Oi(t.apply(qp(this),e))}}function _D(t){return typeof t=="function"?vD(t):(t instanceof IDBTransaction&&mD(t),dD(t,fD())?new Proxy(t,_m):t)}function Oi(t){if(t instanceof IDBRequest)return gD(t);if(Hp.has(t))return Hp.get(t);const e=_D(t);return e!==t&&(Hp.set(t,e),wv.set(e,t)),e}const qp=t=>wv.get(t);function wD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Oi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Oi(o.result),l.oldVersion,l.newVersion,Oi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const xD=["get","getKey","getAll","getAllKeys","count"],bD=["put","add","delete","clear"],Kp=new Map;function Hw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kp.get(e))return Kp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Kp.set(e,s),s}yD(t=>({...t,get:(e,n,r)=>Hw(e,n)||t.get(e,n,r),has:(e,n)=>!!Hw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wm="@firebase/app",qw="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new _v("@firebase/app"),SD="@firebase/app-compat",kD="@firebase/analytics-compat",ID="@firebase/analytics",CD="@firebase/app-check-compat",PD="@firebase/app-check",AD="@firebase/auth",RD="@firebase/auth-compat",ND="@firebase/database",DD="@firebase/data-connect",OD="@firebase/database-compat",MD="@firebase/functions",LD="@firebase/functions-compat",VD="@firebase/installations",jD="@firebase/installations-compat",FD="@firebase/messaging",UD="@firebase/messaging-compat",BD="@firebase/performance",zD="@firebase/performance-compat",$D="@firebase/remote-config",WD="@firebase/remote-config-compat",HD="@firebase/storage",qD="@firebase/storage-compat",KD="@firebase/firestore",GD="@firebase/vertexai",YD="@firebase/firestore-compat",QD="firebase",XD="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="[DEFAULT]",JD={[wm]:"fire-core",[SD]:"fire-core-compat",[ID]:"fire-analytics",[kD]:"fire-analytics-compat",[PD]:"fire-app-check",[CD]:"fire-app-check-compat",[AD]:"fire-auth",[RD]:"fire-auth-compat",[ND]:"fire-rtdb",[DD]:"fire-data-connect",[OD]:"fire-rtdb-compat",[MD]:"fire-fn",[LD]:"fire-fn-compat",[VD]:"fire-iid",[jD]:"fire-iid-compat",[FD]:"fire-fcm",[UD]:"fire-fcm-compat",[BD]:"fire-perf",[zD]:"fire-perf-compat",[$D]:"fire-rc",[WD]:"fire-rc-compat",[HD]:"fire-gcs",[qD]:"fire-gcs-compat",[KD]:"fire-fst",[YD]:"fire-fst-compat",[GD]:"fire-vertex","fire-js":"fire-js",[QD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Map,ZD=new Map,bm=new Map;function Kw(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ws(t){const e=t.name;if(bm.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;bm.set(e,t);for(const n of Sd.values())Kw(n,t);for(const n of ZD.values())Kw(n,t);return!0}function bf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new Uc("app","Firebase",eO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=XD;function IS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:xm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Mi.create("bad-app-name",{appName:String(i)});if(n||(n=bS()),!n)throw Mi.create("no-options");const s=Sd.get(i);if(s){if(pc(n,s.options)&&pc(r,s.config))return s;throw Mi.create("duplicate-app",{appName:i})}const o=new aD(i);for(const l of bm.values())o.addComponent(l);const a=new tO(n,r,o);return Sd.set(i,a),a}function xv(t=xm){const e=Sd.get(t);if(!e&&t===xm&&bS())return IS();if(!e)throw Mi.create("no-app",{appName:t});return e}function lr(t,e,n){var r;let i=(r=JD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(a.join(" "));return}Ws(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="firebase-heartbeat-database",rO=1,gc="firebase-heartbeat-store";let Gp=null;function CS(){return Gp||(Gp=wD(nO,rO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mi.create("idb-open",{originalErrorMessage:t.message})})),Gp}async function iO(t){try{const n=(await CS()).transaction(gc),r=await n.objectStore(gc).get(PS(t));return await n.done,r}catch(e){if(e instanceof mr)$r.warn(e.message);else{const n=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function Gw(t,e){try{const r=(await CS()).transaction(gc,"readwrite");await r.objectStore(gc).put(e,PS(t)),await r.done}catch(n){if(n instanceof mr)$r.warn(n.message);else{const r=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(r.message)}}}function PS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=1024,oO=30*24*60*60*1e3;class aO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=oO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yw(),{heartbeatsToSend:r,unsentEntries:i}=lO(this._heartbeatsCache.heartbeats),s=Td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $r.warn(n),""}}}function Yw(){return new Date().toISOString().substring(0,10)}function lO(t,e=sO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Qw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YN()?QN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Qw(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){Ws(new Ui("platform-logger",e=>new ED(e),"PRIVATE")),Ws(new Ui("heartbeat",e=>new aO(e),"PRIVATE")),lr(wm,qw,t),lr(wm,qw,"esm2017"),lr("fire-js","")}uO("");function bv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hO=AS,RS=new Uc("auth","Firebase",AS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new _v("@firebase/auth");function dO(t,...e){kd.logLevel<=he.WARN&&kd.warn(`Auth (${eo}): ${t}`,...e)}function Ah(t,...e){kd.logLevel<=he.ERROR&&kd.error(`Auth (${eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw Ev(t,...e)}function cr(t,...e){return Ev(t,...e)}function NS(t,e,n){const r=Object.assign(Object.assign({},hO()),{[e]:n});return new Uc("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return NS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ev(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RS.create(t,...e)}function ee(t,e,...n){if(!t)throw Ev(e,...n)}function Ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ah(e),new Error(e)}function Wr(t,e){t||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fO(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fO()||HN()||"connection"in navigator)?navigator.onLine:!0}function gO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=zN()||qN()}get(){return pO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new zc(3e4,6e4);function Xi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ji(t,e,n,r,i={}){return OS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return WN()||(c.referrerPolicy="no-referrer"),DS.fetch()(MS(t,t.config.apiHost,n,a),c)})}async function OS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},mO),e);try{const i=new _O(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw qu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw qu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw qu(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw NS(t,u,c);qn(t,u)}}catch(i){if(i instanceof mr)throw i;qn(t,"network-request-failed",{message:String(i)})}}async function $c(t,e,n,r,i={}){const s=await Ji(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function MS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Tv(t.config,i):`${t.config.apiScheme}://${i}`}function vO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _O{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cr(this.auth,"network-request-failed")),yO.get())})}}function qu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cr(t,e,r);return i.customData._tokenResponse=n,i}function Jw(t){return t!==void 0&&t.enterprise!==void 0}class wO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xO(t,e){return Ji(t,"GET","/v2/recaptchaConfig",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){return Ji(t,"POST","/v1/accounts:delete",e)}async function LS(t,e){return Ji(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EO(t,e=!1){const n=ft(t),r=await n.getIdToken(e),i=Sv(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ml(Yp(i.auth_time)),issuedAtTime:Ml(Yp(i.iat)),expirationTime:Ml(Yp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yp(t){return Number(t)*1e3}function Sv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=_S(n);return i?JSON.parse(i):(Ah("Failed to decode base64 JWT payload"),null)}catch(i){return Ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zw(t){const e=Sv(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&TO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function TO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ml(this.lastLoginAt),this.creationTime=Ml(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t){var e;const n=t.auth,r=await t.getIdToken(),i=await mc(t,LS(n,{idToken:r}));ee(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?VS(s.providerUserInfo):[],a=IO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tm(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function kO(t){const e=ft(t);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VS(t){return t.map(e=>{var{providerId:n}=e,r=bv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e){const n=await OS(t,{},async()=>{const r=Bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=MS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PO(t,e){return Ji(t,"POST","/v2/accounts:revokeToken",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Zw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await CO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ko;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Tm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await mc(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EO(this,e)}reload(){return kO(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await mc(this,bO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:I,isAnonymous:N,providerData:O,stsTokenManager:S}=n;ee(E&&S,e,"internal-error");const T=Ko.fromJSON(this.name,S);ee(typeof E=="string",e,"internal-error"),si(d,e.name),si(f,e.name),ee(typeof I=="boolean",e,"internal-error"),ee(typeof N=="boolean",e,"internal-error"),si(p,e.name),si(y,e.name),si(v,e.name),si(x,e.name),si(_,e.name),si(w,e.name);const k=new Rr({uid:E,auth:e,email:f,emailVerified:I,displayName:d,isAnonymous:N,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:T,createdAt:_,lastLoginAt:w});return O&&Array.isArray(O)&&(k.providerData=O.map(P=>Object.assign({},P))),x&&(k._redirectEventId=x),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ko;i.updateFromServerResponse(n);const s=new Rr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Id(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ko;a.updateFromIdToken(r);const l=new Rr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Tm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Map;function Nr(t){Wr(t instanceof Function,"Expected a class definition");let e=ex.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ex.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jS.type="NONE";const tx=jS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t,e,n){return`firebase:${t}:${e}:${n}`}class Go{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Rh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Go(Nr(tx),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Nr(tx);const o=Rh(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Rr._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Go(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Go(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WS(e))return"Blackberry";if(HS(e))return"Webos";if(US(e))return"Safari";if((e.includes("chrome/")||BS(e))&&!e.includes("edge/"))return"Chrome";if($S(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FS(t=Bt()){return/firefox\//i.test(t)}function US(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BS(t=Bt()){return/crios\//i.test(t)}function zS(t=Bt()){return/iemobile/i.test(t)}function $S(t=Bt()){return/android/i.test(t)}function WS(t=Bt()){return/blackberry/i.test(t)}function HS(t=Bt()){return/webos/i.test(t)}function kv(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AO(t=Bt()){var e;return kv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RO(){return KN()&&document.documentMode===10}function qS(t=Bt()){return kv(t)||$S(t)||HS(t)||WS(t)||/windows phone/i.test(t)||zS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e=[]){let n;switch(t){case"Browser":n=nx(Bt());break;case"Worker":n=`${nx(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO(t,e={}){return Ji(t,"GET","/v2/passwordPolicy",Xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=6;class MO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rx(this),this.idTokenSubscription=new rx(this),this.beforeStateQueue=new NO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LS(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Vr(this));const n=e?ft(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DO(this),n=new MO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Uc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&dO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function to(t){return ft(t)}class rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=tD(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VO(t){Ef=t}function GS(t){return Ef.loadJS(t)}function jO(){return Ef.recaptchaEnterpriseScript}function FO(){return Ef.gapiScript}function UO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class BO{constructor(){this.enterprise=new zO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class zO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $O="recaptcha-enterprise",YS="NO_RECAPTCHA";class WO{constructor(e){this.type=$O,this.auth=to(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{xO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new wO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Jw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(YS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BO().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Jw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jO();l.length!==0&&(l+=a),GS(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function ix(t,e,n,r=!1,i=!1){const s=new WO(t);let o;if(i)o=YS;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Sm(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ix(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ix(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t,e){const n=bf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(pc(s,e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}function qO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KO(t,e,n){const r=to(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=QS(e),{host:o,port:a}=GO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),YO()}function QS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function GO(t){const e=QS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:sx(o)}}}function sx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function QO(t,e){return Ji(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t,e){return $c(t,"POST","/v1/accounts:signInWithPassword",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(t,e){return $c(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}async function ZO(t,e){return $c(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Iv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new yc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sm(e,n,"signInWithPassword",XO);case"emailLink":return JO(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sm(e,r,"signUpPassword",QO);case"emailLink":return ZO(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return $c(t,"POST","/v1/accounts:signInWithIdp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="http://localhost";class Hs extends Iv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=bv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Hs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:eM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nM(t){const e=fl(pl(t)).link,n=e?fl(pl(e)).deep_link_id:null,r=fl(pl(t)).deep_link_id;return(r?fl(pl(r)).link:null)||r||n||e||t}class Cv{constructor(e){var n,r,i,s,o,a;const l=fl(pl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=tM((i=l.mode)!==null&&i!==void 0?i:null);ee(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=nM(e);try{return new Cv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.providerId=ba.PROVIDER_ID}static credential(e,n){return yc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cv.parseLink(n);return ee(r,"argument-error"),yc._fromEmailAndCode(e,r.code,r.tenantId)}}ba.PROVIDER_ID="password";ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends XS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Wc{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Wc{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.GITHUB_SIGN_IN_METHOD="github.com";pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Wc{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gi.credential(n,r)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e){return $c(t,"POST","/v1/accounts:signUp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Rr._fromIdTokenResponse(e,r,i),o=ox(r);return new qs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ox(r);return new qs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ox(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends mr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cd(e,n,r,i)}}function JS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cd._fromErrorAndOperation(t,s,e,r):s})}async function iM(t,e,n=!1){const r=await mc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e,n=!1){const{auth:r}=t;if(sr(r.app))return Promise.reject(Vr(r));const i="reauthenticate";try{const s=await mc(t,JS(r,i,e,t),n);ee(s.idToken,r,"internal-error");const o=Sv(s.idToken);ee(o,r,"internal-error");const{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),qs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e,n=!1){if(sr(t.app))return Promise.reject(Vr(t));const r="signIn",i=await JS(t,r,e),s=await qs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function oM(t,e){return ZS(to(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t){const e=to(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aM(t,e,n){if(sr(t.app))return Promise.reject(Vr(t));const r=to(t),o=await Sm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ek(t),l}),a=await qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function lM(t,e,n){return sr(t.app)?Promise.reject(Vr(t)):oM(ft(t),ba.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ek(t),r})}function cM(t,e,n,r){return ft(t).onIdTokenChanged(e,n,r)}function uM(t,e,n){return ft(t).beforeAuthStateChanged(e,n)}const Pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pd,"1"),this.storage.removeItem(Pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=1e3,dM=10;class nk extends tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);RO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nk.type="LOCAL";const fM=nk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk extends tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rk.type="SESSION";const ik=rk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Tf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await pM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Pv("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function mM(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function yM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _M(){return sk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="firebaseLocalStorageDb",wM=1,Ad="firebaseLocalStorage",ak="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sf(t,e){return t.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function xM(){const t=indexedDB.deleteDatabase(ok);return new Hc(t).toPromise()}function km(){const t=indexedDB.open(ok,wM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ad,{keyPath:ak})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ad)?e(r):(r.close(),await xM(),e(await km()))})})}async function ax(t,e,n){const r=Sf(t,!0).put({[ak]:e,value:n});return new Hc(r).toPromise()}async function bM(t,e){const n=Sf(t,!1).get(e),r=await new Hc(n).toPromise();return r===void 0?null:r.value}function lx(t,e){const n=Sf(t,!0).delete(e);return new Hc(n).toPromise()}const EM=800,TM=3;class lk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(_M()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await yM(),!this.activeServiceWorker)return;this.sender=new gM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await ax(e,Pd,"1"),await lx(e,Pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ax(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sf(i,!1).getAll();return new Hc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lk.type="LOCAL";const SM=lk;new zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e){return e?Nr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends Iv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IM(t){return ZS(t.auth,new Av(t),t.bypassAuthState)}function CM(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),sM(n,new Av(t),t.bypassAuthState)}async function PM(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),iM(n,new Av(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IM;case"linkViaPopup":case"linkViaRedirect":return PM;case"reauthViaPopup":case"reauthViaRedirect":return CM;default:qn(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new zc(2e3,1e4);class jo extends ck{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AM.get())};e()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="pendingRedirect",Nh=new Map;class NM extends ck{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nh.get(this.auth._key());if(!e){try{const r=await DM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DM(t,e){const n=LM(e),r=MM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function OM(t,e){Nh.set(t._key(),e)}function MM(t){return Nr(t._redirectPersistence)}function LM(t){return Rh(RM,t.config.apiKey,t.name)}async function VM(t,e,n=!1){if(sr(t.app))return Promise.reject(Vr(t));const r=to(t),i=kM(r,e),o=await new NM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=10*60*1e3;class FM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!uk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jM&&this.cachedEventUids.clear(),this.cachedEventUids.has(cx(e))}saveEventToCache(e){this.cachedEventUids.add(cx(e)),this.lastProcessedEventTime=Date.now()}}function cx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function uk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(t,e={}){return Ji(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$M=/^https?/;async function WM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BM(t);for(const n of e)try{if(HM(n))return}catch{}qn(t,"unauthorized-domain")}function HM(t){const e=Em(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$M.test(n))return!1;if(zM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=new zc(3e4,6e4);function ux(){const t=ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KM(t){return new Promise((e,n)=>{var r,i,s;function o(){ux(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ux(),n(cr(t,"network-request-failed"))},timeout:qM.get()})}if(!((i=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ur().gapi)===null||s===void 0)&&s.load)o();else{const a=UO("iframefcb");return ur()[a]=()=>{gapi.load?o():n(cr(t,"network-request-failed"))},GS(`${FO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Dh=null,e})}let Dh=null;function GM(t){return Dh=Dh||KM(t),Dh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=new zc(5e3,15e3),QM="__/auth/iframe",XM="emulator/auth/iframe",JM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eL(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tv(e,XM):`https://${t.config.authDomain}/${QM}`,r={apiKey:e.apiKey,appName:t.name,v:eo},i=ZM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bc(r).slice(1)}`}async function tL(t){const e=await GM(t),n=ur().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:eL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=cr(t,"network-request-failed"),a=ur().setTimeout(()=>{s(o)},YM.get());function l(){ur().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rL=500,iL=600,sL="_blank",oL="http://localhost";class hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aL(t,e,n,r=rL,i=iL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},nL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Bt().toLowerCase();n&&(a=BS(c)?sL:n),FS(c)&&(e=e||oL,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(AO(c)&&a!=="_self")return lL(e||"",a),new hx(null);const d=window.open(e||"",a,u);ee(d,t,"popup-blocked");try{d.focus()}catch{}return new hx(d)}function lL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="__/auth/handler",uL="emulator/auth/handler",hL=encodeURIComponent("fac");async function dx(t,e,n,r,i,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:eo,eventId:i};if(e instanceof XS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",eD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Wc){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${hL}=${encodeURIComponent(l)}`:"";return`${dL(t)}?${Bc(a).slice(1)}${c}`}function dL({config:t}){return t.emulator?Tv(t,uL):`https://${t.authDomain}/${cL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class fL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ik,this._completeRedirectFn=VM,this._overrideRedirectResult=OM}async _openPopup(e,n,r,i){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await dx(e,n,r,Em(),i);return aL(e,o,Pv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await dx(e,n,r,Em(),i);return mM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tL(e),r=new FM(e);return n.register("authEvent",i=>(ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qp,{type:Qp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qp];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qS()||US()||kv()}}const pL=fL;var fx="@firebase/auth",px="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yL(t){Ws(new Ui("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KS(t)},c=new LO(r,i,s,l);return qO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ws(new Ui("auth-internal",e=>{const n=to(e.getProvider("auth").getImmediate());return(r=>new gL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(fx,px,mL(t)),lr(fx,px,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=5*60,_L=ES("authIdTokenMaxAge")||vL;let gx=null;const wL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_L)return;const i=n==null?void 0:n.token;gx!==i&&(gx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ns(t=xv()){const e=bf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=HO(t,{popupRedirectResolver:pL,persistence:[SM,fM,ik]}),r=ES("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=wL(s.toString());uM(n,o,()=>o(n.currentUser)),cM(n,a=>o(a))}}const i=wS("auth");return i&&KO(n,`http://${i}`),n}function xL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=cr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yL("Browser");var mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ds,hk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function k(){}k.prototype=T.prototype,S.D=T.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(P,R,D){for(var A=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)A[Z-2]=arguments[Z];return T.prototype[R].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,k){k||(k=0);var P=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)P[R]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(R=0;16>R;++R)P[R]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=S.g[0],k=S.g[1],R=S.g[2];var D=S.g[3],A=T+(D^k&(R^D))+P[0]+3614090360&4294967295;T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[1]+3905402710&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[3]+3250441966&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+P[4]+4118548399&4294967295,T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[5]+1200080426&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[7]+4249261313&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+P[8]+1770035416&4294967295,T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[9]+2336552879&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[11]+2304563134&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+P[12]+1804603682&4294967295,T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[13]+4254626195&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[15]+1236535329&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(R^D&(k^R))+P[1]+4129170786&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[6]+3225465664&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[0]+3921069994&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^D&(k^R))+P[5]+3593408605&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[10]+38016083&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[4]+3889429448&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^D&(k^R))+P[9]+568446438&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[14]+3275163606&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[8]+1163531501&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^D&(k^R))+P[13]+2850285829&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[2]+4243563512&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[12]+2368359562&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(k^R^D)+P[5]+4294588738&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[8]+2272392833&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[14]+4259657740&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^D)+P[1]+2763975236&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[4]+1272893353&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[10]+3200236656&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^D)+P[13]+681279174&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[0]+3936430074&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[6]+76029189&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^D)+P[9]+3654602809&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[12]+3873151461&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[2]+3299628645&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(R^(k|~D))+P[0]+4096336452&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[7]+1126891415&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[5]+4237533241&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~D))+P[12]+1700485571&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[3]+2399980690&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[1]+2240044497&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~D))+P[8]+1873313359&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[15]+4264355552&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[13]+1309151649&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~D))+P[4]+4149444226&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[11]+3174756917&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var k=T-this.blockSize,P=this.B,R=this.h,D=0;D<T;){if(R==0)for(;D<=k;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<T;)if(P[R++]=S.charCodeAt(D++),R==this.blockSize){i(this,P),R=0;break}}else for(;D<T;)if(P[R++]=S[D++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var k=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=k&255,k/=256;for(this.u(S),S=Array(16),T=k=0;4>T;++T)for(var P=0;32>P;P+=8)S[k++]=this.g[T]>>>P&255;return S};function s(S,T){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=T(S)}function o(S,T){this.h=T;for(var k=[],P=!0,R=S.length-1;0<=R;R--){var D=S[R]|0;P&&D==T||(k[R]=D,P=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return x(c(-S));for(var T=[],k=1,P=0;S>=k;P++)T[P]=S/k|0,k*=4294967296;return new o(T,0)}function u(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return x(u(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(T,8)),P=d,R=0;R<S.length;R+=8){var D=Math.min(8,S.length-R),A=parseInt(S.substring(R,R+D),T);8>D?(D=c(Math.pow(T,D)),P=P.j(D).add(c(A))):(P=P.j(k),P=P.add(c(A)))}return P}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();for(var S=0,T=1,k=0;k<this.g.length;k++){var P=this.i(k);S+=(0<=P?P:4294967296+P)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(v(this))return"-"+x(this).toString(S);for(var T=c(Math.pow(S,6)),k=this,P="";;){var R=I(k,T).g;k=_(k,R.j(T));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=R,y(k))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=_(this,S),v(S)?-1:y(S)?0:1};function x(S){for(var T=S.g.length,k=[],P=0;P<T;P++)k[P]=~S.g[P];return new o(k,~S.h).add(f)}t.abs=function(){return v(this)?x(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0,R=0;R<=T;R++){var D=P+(this.i(R)&65535)+(S.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);P=A>>>16,D&=65535,A&=65535,k[R]=A<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(x(T))}t.j=function(S){if(y(this)||y(S))return d;if(v(this))return v(S)?x(this).j(x(S)):x(x(this).j(S));if(v(S))return x(this.j(x(S)));if(0>this.l(p)&&0>S.l(p))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,k=[],P=0;P<2*T;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<S.g.length;R++){var D=this.i(P)>>>16,A=this.i(P)&65535,Z=S.i(R)>>>16,Y=S.i(R)&65535;k[2*P+2*R]+=A*Y,w(k,2*P+2*R),k[2*P+2*R+1]+=D*Y,w(k,2*P+2*R+1),k[2*P+2*R+1]+=A*Z,w(k,2*P+2*R+1),k[2*P+2*R+2]+=D*Z,w(k,2*P+2*R+2)}for(P=0;P<T;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=T;P<2*T;P++)k[P]=0;return new o(k,0)};function w(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function I(S,T){if(y(T))throw Error("division by zero");if(y(S))return new E(d,d);if(v(S))return T=I(x(S),T),new E(x(T.g),x(T.h));if(v(T))return T=I(S,x(T)),new E(x(T.g),T.h);if(30<S.g.length){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var k=f,P=T;0>=P.l(S);)k=N(k),P=N(P);var R=O(k,1),D=O(P,1);for(P=O(P,2),k=O(k,2);!y(P);){var A=D.add(P);0>=A.l(S)&&(R=R.add(k),D=A),P=O(P,1),k=O(k,1)}return T=_(S,R.j(T)),new E(R,T)}for(R=d;0<=S.l(T);){for(k=Math.max(1,Math.floor(S.m()/T.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(k),A=D.j(T);v(A)||0<A.l(S);)k-=P,D=c(k),A=D.j(T);y(D)&&(D=f),R=R.add(D),S=_(S,A)}return new E(R,S)}t.A=function(S){return I(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)&S.i(P);return new o(k,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)|S.i(P);return new o(k,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)^S.i(P);return new o(k,this.h^S.h)};function N(S){for(var T=S.g.length+1,k=[],P=0;P<T;P++)k[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(k,S.h)}function O(S,T){var k=T>>5;T%=32;for(var P=S.g.length-k,R=[],D=0;D<P;D++)R[D]=0<T?S.i(D+k)>>>T|S.i(D+k+1)<<32-T:S.i(D+k);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Ds=o}).apply(typeof mx<"u"?mx:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dk,gl,fk,Oh,Im,pk,gk,mk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,b){return h==Array.prototype||h==Object.prototype||(h[g]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var g=0;g<h.length;++g){var b=h[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(h,g){if(g)e:{var b=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var L=h[C];if(!(L in b))break e;b=b[L]}h=h[h.length-1],C=b[h],g=g(C),g!=C&&g!=null&&e(b,h,{configurable:!0,writable:!0,value:g})}}function s(h,g){h instanceof String&&(h+="");var b=0,C=!1,L={next:function(){if(!C&&b<h.length){var V=b++;return{value:g(V,h[V]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return s(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,b){return h.call.apply(h.bind,arguments)}function d(h,g,b){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function f(h,g,b){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function p(h,g){var b=Array.prototype.slice.call(arguments,1);return function(){var C=b.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function y(h,g){function b(){}b.prototype=g.prototype,h.aa=g.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(C,L,V){for(var z=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)z[Ce-2]=arguments[Ce];return g.prototype[L].apply(C,z)}}function v(h){const g=h.length;if(0<g){const b=Array(g);for(let C=0;C<g;C++)b[C]=h[C];return b}return[]}function x(h,g){for(let b=1;b<arguments.length;b++){const C=arguments[b];if(l(C)){const L=h.length||0,V=C.length||0;h.length=L+V;for(let z=0;z<V;z++)h[L+z]=C[z]}else h.push(C)}}class _{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var N=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(h,g,b){for(const C in h)g.call(b,h[C],C,h)}function S(h,g){for(const b in h)g.call(void 0,h[b],b,h)}function T(h){const g={};for(const b in h)g[b]=h[b];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,g){let b,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(b in C)h[b]=C[b];for(let V=0;V<k.length;V++)b=k[V],Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])}}function R(h){var g=1;h=h.split(":");const b=[];for(;0<g&&h.length;)b.push(h.shift()),g--;return h.length&&b.push(h.join(":")),b}function D(h){a.setTimeout(()=>{throw h},0)}function A(){var h=W;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class Z{constructor(){this.h=this.g=null}add(g,b){const C=Y.get();C.set(g,b),this.h?this.h.next=C:this.g=C,this.h=C}}var Y=new _(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let re,U=!1,W=new Z,H=()=>{const h=a.Promise.resolve(void 0);re=()=>{h.then(ie)}};var ie=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(b){D(b)}var g=Y;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}U=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return h}();function be(h,g){if(ne.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(N){e:{try{I(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else b=="mouseover"?g=h.fromElement:b=="mouseout"&&(g=h.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ee[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&be.aa.h.call(this)}}y(be,ne);var Ee={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),yr=0;function Qn(h,g,b,C,L){this.listener=h,this.proxy=null,this.src=g,this.type=b,this.capture=!!C,this.ha=L,this.key=++yr,this.da=this.fa=!1}function Zr(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ei(h){this.src=h,this.g={},this.h=0}ei.prototype.add=function(h,g,b,C,L){var V=h.toString();h=this.g[V],h||(h=this.g[V]=[],this.h++);var z=is(h,g,C,L);return-1<z?(g=h[z],b||(g.fa=!1)):(g=new Qn(g,this.src,V,!!C,L),g.fa=b,h.push(g)),g};function ti(h,g){var b=g.type;if(b in h.g){var C=h.g[b],L=Array.prototype.indexOf.call(C,g,void 0),V;(V=0<=L)&&Array.prototype.splice.call(C,L,1),V&&(Zr(g),h.g[b].length==0&&(delete h.g[b],h.h--))}}function is(h,g,b,C){for(var L=0;L<h.length;++L){var V=h[L];if(!V.da&&V.listener==g&&V.capture==!!b&&V.ha==C)return L}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),vr={};function $t(h,g,b,C,L){if(Array.isArray(g)){for(var V=0;V<g.length;V++)$t(h,g[V],b,C,L);return null}return b=lu(b),h&&h[et]?h.K(g,b,c(C)?!!C.capture:!!C,L):co(h,g,b,!1,C,L)}function co(h,g,b,C,L,V){if(!g)throw Error("Invalid event type");var z=c(L)?!!L.capture:!!L,Ce=uo(h);if(Ce||(h[Be]=Ce=new ei(h)),b=Ce.add(g,b,C,z,V),b.proxy)return b;if(C=ou(),b.proxy=C,C.src=h,C.listener=b,h.addEventListener)me||(L=z),L===void 0&&(L=!1),h.addEventListener(g.toString(),C,L);else if(h.attachEvent)h.attachEvent(au(g.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ou(){function h(b){return g.call(h.src,h.listener,b)}const g=op;return h}function Pa(h,g,b,C,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)Pa(h,g[V],b,C,L);else C=c(C)?!!C.capture:!!C,b=lu(b),h&&h[et]?(h=h.i,g=String(g).toString(),g in h.g&&(V=h.g[g],b=is(V,b,C,L),-1<b&&(Zr(V[b]),Array.prototype.splice.call(V,b,1),V.length==0&&(delete h.g[g],h.h--)))):h&&(h=uo(h))&&(g=h.g[g.toString()],h=-1,g&&(h=is(g,b,C,L)),(b=-1<h?g[h]:null)&&Aa(b))}function Aa(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[et])ti(g.i,h);else{var b=h.type,C=h.proxy;g.removeEventListener?g.removeEventListener(b,C,h.capture):g.detachEvent?g.detachEvent(au(b),C):g.addListener&&g.removeListener&&g.removeListener(C),(b=uo(g))?(ti(b,h),b.h==0&&(b.src=null,g[Be]=null)):Zr(h)}}}function au(h){return h in vr?vr[h]:vr[h]="on"+h}function op(h,g){if(h.da)h=!0;else{g=new be(g,this);var b=h.listener,C=h.ha||h.src;h.fa&&Aa(h),h=b.call(C,g)}return h}function uo(h){return h=h[Be],h instanceof ei?h:null}var Ra="__closure_events_fn_"+(1e9*Math.random()>>>0);function lu(h){return typeof h=="function"?h:(h[Ra]||(h[Ra]=function(g){return h.handleEvent(g)}),h[Ra])}function pt(){X.call(this),this.i=new ei(this),this.M=this,this.F=null}y(pt,X),pt.prototype[et]=!0,pt.prototype.removeEventListener=function(h,g,b,C){Pa(this,h,g,b,C)};function xt(h,g){var b,C=h.F;if(C)for(b=[];C;C=C.F)b.push(C);if(h=h.M,C=g.type||g,typeof g=="string")g=new ne(g,h);else if(g instanceof ne)g.target=g.target||h;else{var L=g;g=new ne(C,h),P(g,L)}if(L=!0,b)for(var V=b.length-1;0<=V;V--){var z=g.g=b[V];L=ho(z,C,!0,g)&&L}if(z=g.g=h,L=ho(z,C,!0,g)&&L,L=ho(z,C,!1,g)&&L,b)for(V=0;V<b.length;V++)z=g.g=b[V],L=ho(z,C,!1,g)&&L}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var b=h.g[g],C=0;C<b.length;C++)Zr(b[C]);delete h.g[g],h.h--}}this.F=null},pt.prototype.K=function(h,g,b,C){return this.i.add(String(h),g,!1,b,C)},pt.prototype.L=function(h,g,b,C){return this.i.add(String(h),g,!0,b,C)};function ho(h,g,b,C){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,V=0;V<g.length;++V){var z=g[V];if(z&&!z.da&&z.capture==b){var Ce=z.listener,bt=z.ha||z.src;z.fa&&ti(h.i,z),L=Ce.call(bt,C)!==!1&&L}}return L&&!C.defaultPrevented}function fo(h,g,b){if(typeof h=="function")b&&(h=f(h,b));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Na(h){h.g=fo(()=>{h.g=null,h.i&&(h.i=!1,Na(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class cu extends X{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Na(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(h){X.call(this),this.h=h,this.g={}}y(ss,X);var os=[];function Da(h){O(h.g,function(g,b){this.g.hasOwnProperty(b)&&Aa(g)},h),h.g={}}ss.prototype.N=function(){ss.aa.N.call(this),Da(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oa=a.JSON.stringify,uu=a.JSON.parse,hu=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function as(){}as.prototype.h=null;function du(h){return h.h||(h.h=h.i())}function Ma(){}var ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function po(){ne.call(this,"d")}y(po,ne);function gt(){ne.call(this,"c")}y(gt,ne);var Ge={},cs=null;function Ie(){return cs=cs||new pt}Ge.La="serverreachability";function hn(h){ne.call(this,Ge.La,h)}y(hn,ne);function us(h){const g=Ie();xt(g,new hn(g))}Ge.STAT_EVENT="statevent";function go(h,g){ne.call(this,Ge.STAT_EVENT,h),this.stat=g}y(go,ne);function mt(h){const g=Ie();xt(g,new go(g,h))}Ge.Ma="timingevent";function La(h,g){ne.call(this,Ge.Ma,h),this.size=g}y(La,ne);function _r(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function Va(h,g,b,C,L,V){h.info(function(){if(h.g)if(V)for(var z="",Ce=V.split("&"),bt=0;bt<Ce.length;bt++){var we=Ce[bt].split("=");if(1<we.length){var At=we[0];we=we[1];var Rt=At.split("_");z=2<=Rt.length&&Rt[1]=="type"?z+(At+"="+we+"&"):z+(At+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+g+`
`+b+`
`+z})}function ja(h,g,b,C,L,V,z){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+g+`
`+b+`
`+V+" "+z})}function Jn(h,g,b,C){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fa(h,b)+(C?" "+C:"")})}function ap(h,g){h.info(function(){return"TIMEOUT: "+g})}Xn.prototype.info=function(){};function Fa(h,g){if(!h.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var C=b[h];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return Oa(b)}catch{return g}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ua;function le(){}y(le,as),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},Ua=new le;function xe(h,g,b,C){this.j=h,this.i=g,this.l=b,this.R=C||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var Zt={},Wt={};function ds(h,g,b){h.L=1,h.v=_u(wr(g)),h.m=b,h.P=!0,pu(h,null)}function pu(h,g){h.F=Date.now(),mu(h),h.A=wr(h.v);var b=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),n0(b.i,"t",C),h.C=0,b=h.j.J,h.h=new ze,h.g=w0(h.j,b?g:null,!h.m),0<h.O&&(h.M=new cu(f(h.Y,h,h.g),h.O)),g=h.U,b=h.g,C=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(os[0]=L.toString()),L=os);for(var V=0;V<L.length;V++){var z=$t(b,L[V],C||g.handleEvent,!1,g.h||g);if(!z)break;g.g[z.key]=z}g=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),us(),Va(h.i,h.u,h.A,h.l,h.R,h.m)}xe.prototype.ca=function(h){h=h.target;const g=this.M;g&&xr(h)==3?g.j():this.Y(h)},xe.prototype.Y=function(h){try{if(h==this.g)e:{const Rt=xr(this.g);var g=this.g.Ba();const vo=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||c0(this.g)))){this.J||Rt!=4||g==7||(g==8||0>=vo?us(3):us(2)),lp(this);var b=this.g.Z();this.X=b;t:if(gu(this)){var C=c0(this.g);h="";var L=C.length,V=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),Ba(this);var z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(C[g],{stream:!(V&&g==L-1)});C.length=0,this.h.g+=h,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=b==200,ja(this.i,this.u,this.A,this.l,this.R,Rt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,bt=this.g;if((Ce=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ce)){var we=Ce;break t}}we=null}if(b=we)Jn(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cp(this,b);else{this.o=!1,this.s=3,mt(12),fs(this),Ba(this);break e}}if(this.P){b=!0;let Mn;for(;!this.J&&this.C<z.length;)if(Mn=MP(this,z),Mn==Wt){Rt==4&&(this.s=4,mt(14),b=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Zt){this.s=4,mt(15),Jn(this.i,this.l,z,"[Invalid Chunk]"),b=!1;break}else Jn(this.i,this.l,Mn,null),cp(this,Mn);if(gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||z.length!=0||this.h.h||(this.s=1,mt(16),b=!1),this.o=this.o&&b,!b)Jn(this.i,this.l,z,"[Invalid Chunked Response]"),fs(this),Ba(this);else if(0<z.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),gp(At),At.M=!0,mt(11))}}else Jn(this.i,this.l,z,null),cp(this,z);Rt==4&&fs(this),this.o&&!this.J&&(Rt==4?m0(this.j,this):(this.o=!1,mu(this)))}else JP(this.g),b==400&&0<z.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),fs(this),Ba(this)}}}catch{}finally{}};function gu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function MP(h,g){var b=h.C,C=g.indexOf(`
`,b);return C==-1?Wt:(b=Number(g.substring(b,C)),isNaN(b)?Zt:(C+=1,C+b>g.length?Wt:(g=g.slice(C,C+b),h.C=C+b,g)))}xe.prototype.cancel=function(){this.J=!0,fs(this)};function mu(h){h.S=Date.now()+h.I,W_(h,h.I)}function W_(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=_r(f(h.ba,h),g)}function lp(h){h.B&&(a.clearTimeout(h.B),h.B=null)}xe.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ap(this.i,this.A),this.L!=2&&(us(),mt(17)),fs(this),this.s=2,Ba(this)):W_(this,this.S-h)};function Ba(h){h.j.G==0||h.J||m0(h.j,h)}function fs(h){lp(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,Da(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function cp(h,g){try{var b=h.j;if(b.G!=0&&(b.g==h||up(b.h,h))){if(!h.K&&up(b.h,h)&&b.G==3){try{var C=b.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)Su(b),Eu(b);else break e;pp(b),mt(18)}}else b.za=L[1],0<b.za-b.T&&37500>L[2]&&b.F&&b.v==0&&!b.C&&(b.C=_r(f(b.Za,b),6e3));if(1>=K_(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else gs(b,11)}else if((h.K||b.g==h)&&Su(b),!w(g))for(L=b.Da.g.parse(g),g=0;g<L.length;g++){let we=L[g];if(b.T=we[0],we=we[1],b.G==2)if(we[0]=="c"){b.K=we[1],b.ia=we[2];const At=we[3];At!=null&&(b.la=At,b.j.info("VER="+b.la));const Rt=we[4];Rt!=null&&(b.Aa=Rt,b.j.info("SVER="+b.Aa));const vo=we[5];vo!=null&&typeof vo=="number"&&0<vo&&(C=1.5*vo,b.L=C,b.j.info("backChannelRequestTimeoutMs_="+C)),C=b;const Mn=h.g;if(Mn){const Iu=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var V=C.h;V.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(hp(V,V.h),V.h=null))}if(C.D){const mp=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;mp&&(C.ya=mp,Re(C.I,C.D,mp))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),C=b;var z=h;if(C.qa=_0(C,C.J?C.ia:null,C.W),z.K){G_(C.h,z);var Ce=z,bt=C.L;bt&&(Ce.I=bt),Ce.B&&(lp(Ce),mu(Ce)),C.g=z}else p0(C);0<b.i.length&&Tu(b)}else we[0]!="stop"&&we[0]!="close"||gs(b,7);else b.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?gs(b,7):fp(b):we[0]!="noop"&&b.l&&b.l.ta(we),b.v=0)}}us(4)}catch{}}var LP=class{constructor(h,g){this.g=h,this.map=g}};function H_(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function q_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function K_(h){return h.h?1:h.g?h.g.size:0}function up(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function hp(h,g){h.g?h.g.add(g):h.h=g}function G_(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}H_.prototype.cancel=function(){if(this.i=Y_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Y_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const b of h.g.values())g=g.concat(b.D);return g}return v(h.i)}function VP(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],b=h.length,C=0;C<b;C++)g.push(h[C]);return g}g=[],b=0;for(C in h)g[b++]=h[C];return g}function jP(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var b=0;b<h;b++)g.push(b);return g}g=[],b=0;for(const C in h)g[b++]=C;return g}}}function Q_(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var b=jP(h),C=VP(h),L=C.length,V=0;V<L;V++)g.call(void 0,C[V],b&&b[V],h)}var X_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FP(h,g){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var C=h[b].indexOf("="),L=null;if(0<=C){var V=h[b].substring(0,C);L=h[b].substring(C+1)}else V=h[b];g(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ps(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ps){this.h=h.h,yu(this,h.j),this.o=h.o,this.g=h.g,vu(this,h.s),this.l=h.l;var g=h.i,b=new Wa;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),J_(this,b),this.m=h.m}else h&&(g=String(h).match(X_))?(this.h=!1,yu(this,g[1]||"",!0),this.o=za(g[2]||""),this.g=za(g[3]||"",!0),vu(this,g[4]),this.l=za(g[5]||"",!0),J_(this,g[6]||"",!0),this.m=za(g[7]||"")):(this.h=!1,this.i=new Wa(null,this.h))}ps.prototype.toString=function(){var h=[],g=this.j;g&&h.push($a(g,Z_,!0),":");var b=this.g;return(b||g=="file")&&(h.push("//"),(g=this.o)&&h.push($a(g,Z_,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push($a(b,b.charAt(0)=="/"?zP:BP,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",$a(b,WP)),h.join("")};function wr(h){return new ps(h)}function yu(h,g,b){h.j=b?za(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function vu(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function J_(h,g,b){g instanceof Wa?(h.i=g,HP(h.i,h.h)):(b||(g=$a(g,$P)),h.i=new Wa(g,h.h))}function Re(h,g,b){h.i.set(g,b)}function _u(h){return Re(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function za(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $a(h,g,b){return typeof h=="string"?(h=encodeURI(h).replace(g,UP),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function UP(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Z_=/[#\/\?@]/g,BP=/[#\?:]/g,zP=/[#\?]/g,$P=/[#\?@]/g,WP=/#/g;function Wa(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function ni(h){h.g||(h.g=new Map,h.h=0,h.i&&FP(h.i,function(g,b){h.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=Wa.prototype,t.add=function(h,g){ni(this),this.i=null,h=mo(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(g),this.h+=1,this};function e0(h,g){ni(h),g=mo(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function t0(h,g){return ni(h),g=mo(h,g),h.g.has(g)}t.forEach=function(h,g){ni(this),this.g.forEach(function(b,C){b.forEach(function(L){h.call(g,L,C,this)},this)},this)},t.na=function(){ni(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let C=0;C<g.length;C++){const L=h[C];for(let V=0;V<L.length;V++)b.push(g[C])}return b},t.V=function(h){ni(this);let g=[];if(typeof h=="string")t0(this,h)&&(g=g.concat(this.g.get(mo(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)g=g.concat(h[b])}return g},t.set=function(h,g){return ni(this),this.i=null,h=mo(this,h),t0(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function n0(h,g,b){e0(h,g),0<b.length&&(h.i=null,h.g.set(mo(h,g),v(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var C=g[b];const V=encodeURIComponent(String(C)),z=this.V(C);for(C=0;C<z.length;C++){var L=V;z[C]!==""&&(L+="="+encodeURIComponent(String(z[C]))),h.push(L)}}return this.i=h.join("&")};function mo(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function HP(h,g){g&&!h.j&&(ni(h),h.i=null,h.g.forEach(function(b,C){var L=C.toLowerCase();C!=L&&(e0(this,C),n0(this,L,b))},h)),h.j=g}function qP(h,g){const b=new Xn;if(a.Image){const C=new Image;C.onload=p(ri,b,"TestLoadImage: loaded",!0,g,C),C.onerror=p(ri,b,"TestLoadImage: error",!1,g,C),C.onabort=p(ri,b,"TestLoadImage: abort",!1,g,C),C.ontimeout=p(ri,b,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else g(!1)}function KP(h,g){const b=new Xn,C=new AbortController,L=setTimeout(()=>{C.abort(),ri(b,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:C.signal}).then(V=>{clearTimeout(L),V.ok?ri(b,"TestPingServer: ok",!0,g):ri(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ri(b,"TestPingServer: error",!1,g)})}function ri(h,g,b,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(b)}catch{}}function GP(){this.g=new hu}function YP(h,g,b){const C=b||"";try{Q_(h,function(L,V){let z=L;c(L)&&(z=Oa(L)),g.push(C+V+"="+encodeURIComponent(z))})}catch(L){throw g.push(C+"type="+encodeURIComponent("_badmap")),L}}function wu(h){this.l=h.Ub||null,this.j=h.eb||!1}y(wu,as),wu.prototype.g=function(){return new xu(this.l,this.j)},wu.prototype.i=function(h){return function(){return h}}({});function xu(h,g){pt.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(xu,pt),t=xu.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,qa(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;r0(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function r0(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?Ha(this):qa(this),this.readyState==3&&r0(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Ha(this))},t.Qa=function(h){this.g&&(this.response=h,Ha(this))},t.ga=function(){this.g&&Ha(this)};function Ha(h){h.readyState=4,h.l=null,h.j=null,h.v=null,qa(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=g.next();return h.join(`\r
`)};function qa(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function i0(h){let g="";return O(h,function(b,C){g+=C,g+=":",g+=b,g+=`\r
`}),g}function dp(h,g,b){e:{for(C in b){var C=!1;break e}C=!0}C||(b=i0(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):Re(h,g,b))}function Ye(h){pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ye,pt);var QP=/^https?$/i,XP=["POST","PUT"];t=Ye.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,b,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ua.g(),this.v=this.o?du(this.o):du(Ua),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(V){s0(this,V);return}if(h=b||"",b=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)b.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const V of C.keys())b.set(V,C.get(V));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(b.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(XP,g,void 0))||C||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of b)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{l0(this),this.u=!0,this.g.send(h),this.u=!1}catch(V){s0(this,V)}};function s0(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,o0(h),bu(h)}function o0(h){h.A||(h.A=!0,xt(h,"complete"),xt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,xt(this,"complete"),xt(this,"abort"),bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bu(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?a0(this):this.bb())},t.bb=function(){a0(this)};function a0(h){if(h.h&&typeof o<"u"&&(!h.v[1]||xr(h)!=4||h.Z()!=2)){if(h.u&&xr(h)==4)fo(h.Ea,0,h);else if(xt(h,"readystatechange"),xr(h)==4){h.h=!1;try{const z=h.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var C;if(C=z===0){var L=String(h.D).match(X_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),C=!QP.test(L?L.toLowerCase():"")}b=C}if(b)xt(h,"complete"),xt(h,"success");else{h.m=6;try{var V=2<xr(h)?h.g.statusText:""}catch{V=""}h.l=V+" ["+h.Z()+"]",o0(h)}}finally{bu(h)}}}}function bu(h,g){if(h.g){l0(h);const b=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||xt(h,"ready");try{b.onreadystatechange=C}catch{}}}function l0(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function xr(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),uu(g)}};function c0(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function JP(h){const g={};h=(h.g&&2<=xr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(w(h[C]))continue;var b=R(h[C]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const V=g[L]||[];g[L]=V,V.push(b)}S(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ka(h,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||g}function u0(h){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ka("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ka("baseRetryDelayMs",5e3,h),this.cb=Ka("retryDelaySeedMs",1e4,h),this.Wa=Ka("forwardChannelMaxRetries",2,h),this.wa=Ka("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new H_(h&&h.concurrentRequestLimit),this.Da=new GP,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=u0.prototype,t.la=8,t.G=1,t.connect=function(h,g,b,C){mt(0),this.W=h,this.H=g||{},b&&C!==void 0&&(this.H.OSID=b,this.H.OAID=C),this.F=this.X,this.I=_0(this,null,this.W),Tu(this)};function fp(h){if(h0(h),h.G==3){var g=h.U++,b=wr(h.I);if(Re(b,"SID",h.K),Re(b,"RID",g),Re(b,"TYPE","terminate"),Ga(h,b),g=new xe(h,h.j,g),g.L=2,g.v=_u(wr(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=w0(g.j,null),g.g.ea(g.v)),g.F=Date.now(),mu(g)}v0(h)}function Eu(h){h.g&&(gp(h),h.g.cancel(),h.g=null)}function h0(h){Eu(h),h.u&&(a.clearTimeout(h.u),h.u=null),Su(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Tu(h){if(!q_(h.h)&&!h.s){h.s=!0;var g=h.Ga;re||H(),U||(re(),U=!0),W.add(g,h),h.B=0}}function ZP(h,g){return K_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=_r(f(h.Ga,h,g),y0(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new xe(this,this.j,h);let V=this.o;if(this.S&&(V?(V=T(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var C=this.i[b];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=f0(this,L,g),b=wr(this.I),Re(b,"RID",h),Re(b,"CVER",22),this.D&&Re(b,"X-HTTP-Session-Id",this.D),Ga(this,b),V&&(this.O?g="headers="+encodeURIComponent(String(i0(V)))+"&"+g:this.m&&dp(b,this.m,V)),hp(this.h,L),this.Ua&&Re(b,"TYPE","init"),this.P?(Re(b,"$req",g),Re(b,"SID","null"),L.T=!0,ds(L,b,null)):ds(L,b,g),this.G=2}}else this.G==3&&(h?d0(this,h):this.i.length==0||q_(this.h)||d0(this))};function d0(h,g){var b;g?b=g.l:b=h.U++;const C=wr(h.I);Re(C,"SID",h.K),Re(C,"RID",b),Re(C,"AID",h.T),Ga(h,C),h.m&&h.o&&dp(C,h.m,h.o),b=new xe(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),g&&(h.i=g.D.concat(h.i)),g=f0(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),hp(h.h,b),ds(b,C,g)}function Ga(h,g){h.H&&O(h.H,function(b,C){Re(g,C,b)}),h.l&&Q_({},function(b,C){Re(g,C,b)})}function f0(h,g,b){b=Math.min(h.i.length,b);var C=h.l?f(h.l.Na,h.l,h):null;e:{var L=h.i;let V=-1;for(;;){const z=["count="+b];V==-1?0<b?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Ce=!0;for(let bt=0;bt<b;bt++){let we=L[bt].g;const At=L[bt].map;if(we-=V,0>we)V=Math.max(0,L[bt].g-100),Ce=!1;else try{YP(At,z,"req"+we+"_")}catch{C&&C(At)}}if(Ce){C=z.join("&");break e}}}return h=h.i.splice(0,b),g.D=h,C}function p0(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;re||H(),U||(re(),U=!0),W.add(g,h),h.v=0}}function pp(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=_r(f(h.Fa,h),y0(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,g0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=_r(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Eu(this),g0(this))};function gp(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function g0(h){h.g=new xe(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=wr(h.qa);Re(g,"RID","rpc"),Re(g,"SID",h.K),Re(g,"AID",h.T),Re(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&Re(g,"TO",h.ja),Re(g,"TYPE","xmlhttp"),Ga(h,g),h.m&&h.o&&dp(g,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=_u(wr(g)),b.m=null,b.P=!0,pu(b,h)}t.Za=function(){this.C!=null&&(this.C=null,Eu(this),pp(this),mt(19))};function Su(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function m0(h,g){var b=null;if(h.g==g){Su(h),gp(h),h.g=null;var C=2}else if(up(h.h,g))b=g.D,G_(h.h,g),C=1;else return;if(h.G!=0){if(g.o)if(C==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;C=Ie(),xt(C,new La(C,b)),Tu(h)}else p0(h);else if(L=g.s,L==3||L==0&&0<g.X||!(C==1&&ZP(h,g)||C==2&&pp(h)))switch(b&&0<b.length&&(g=h.h,g.i=g.i.concat(b)),L){case 1:gs(h,5);break;case 4:gs(h,10);break;case 3:gs(h,6);break;default:gs(h,2)}}}function y0(h,g){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*g}function gs(h,g){if(h.j.info("Error code "+g),g==2){var b=f(h.fb,h),C=h.Xa;const L=!C;C=new ps(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yu(C,"https"),_u(C),L?qP(C.toString(),b):KP(C.toString(),b)}else mt(2);h.G=0,h.l&&h.l.sa(g),v0(h),h0(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function v0(h){if(h.G=0,h.ka=[],h.l){const g=Y_(h.h);(g.length!=0||h.i.length!=0)&&(x(h.ka,g),x(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function _0(h,g,b){var C=b instanceof ps?wr(b):new ps(b);if(C.g!="")g&&(C.g=g+"."+C.g),vu(C,C.s);else{var L=a.location;C=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var V=new ps(null);C&&yu(V,C),g&&(V.g=g),L&&vu(V,L),b&&(V.l=b),C=V}return b=h.D,g=h.ya,b&&g&&Re(C,b,g),Re(C,"VER",h.la),Ga(h,C),C}function w0(h,g,b){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new Ye(new wu({eb:b})):new Ye(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function x0(){}t=x0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ku(){}ku.prototype.g=function(h,g){return new dn(h,g)};function dn(h,g){pt.call(this),this.g=new u0(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!w(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new yo(this)}y(dn,pt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){fp(this.g)},dn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=Oa(h),h=b);g.i.push(new LP(g.Ya++,h)),g.G==3&&Tu(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,fp(this.g),delete this.g,dn.aa.N.call(this)};function b0(h){po.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const b in g){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}y(b0,po);function E0(){gt.call(this),this.status=1}y(E0,gt);function yo(h){this.g=h}y(yo,x0),yo.prototype.ua=function(){xt(this.g,"a")},yo.prototype.ta=function(h){xt(this.g,new b0(h))},yo.prototype.sa=function(h){xt(this.g,new E0)},yo.prototype.ra=function(){xt(this.g,"b")},ku.prototype.createWebChannel=ku.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,mk=function(){return new ku},gk=function(){return Ie()},pk=Ge,Im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,Oh=hs,fu.COMPLETE="complete",fk=fu,Ma.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",pt.prototype.listen=pt.prototype.K,gl=Ma,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,dk=Ye}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});const yx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new _v("@firebase/firestore");function bo(){return Ks.logLevel}function q(t,...e){if(Ks.logLevel<=he.DEBUG){const n=e.map(Rv);Ks.debug(`Firestore (${Ea}): ${t}`,...n)}}function Hr(t,...e){if(Ks.logLevel<=he.ERROR){const n=e.map(Rv);Ks.error(`Firestore (${Ea}): ${t}`,...n)}}function oa(t,...e){if(Ks.logLevel<=he.WARN){const n=e.map(Rv);Ks.warn(`Firestore (${Ea}): ${t}`,...n)}}function Rv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Ea}) INTERNAL ASSERTION FAILED: `+t;throw Hr(e),new Error(e)}function Te(t,e){t||te()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class EL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class TL{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new yk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Lt(e)}}class SL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new SL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new IL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=PL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function aa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new at(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new at(0,0))}static max(){return new se(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends vc{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const AL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends vc{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return AL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ve.fromString(e))}static fromName(e){return new J(Ve.fromString(e).popFirst(5))}static empty(){return new J(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ve(e.slice()))}}function RL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new Bi(i,J.empty(),e)}function NL(t){return new Bi(t.readTime,t.key,-1)}class Bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bi(se.min(),J.empty(),-1)}static max(){return new Bi(se.max(),J.empty(),-1)}}function DL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ML{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==OL)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function LL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kf.oe=-1;function If(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function VL(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vx(e)),e=FL(t.get(n),e);return vx(e)}function FL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function vx(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _k(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=i??Tt.EMPTY,this.right=s??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wx(this.data.getIterator())}getIteratorFrom(e){return new wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new dt(this.comparator);return n.data=e,n}}class wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new vn([])}unionWith(e){let n=new dt(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wk("Invalid base64 string: "+s):s}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const UL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(t){if(Te(!!t),typeof t=="string"){let e=0;const n=UL.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $i(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cf(t){const e=t.mapValue.fields.__previous_value__;return Nv(e)?Cf(e):e}function _c(t){const e=zi(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class wc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new wc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nv(t)?4:$L(t)?9007199254740991:zL(t)?10:11:te()}function pr(t,e){if(t===e)return!0;const n=Wi(t);if(n!==Wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _c(t).isEqual(_c(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zi(i.timestampValue),a=zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return $i(i.bytesValue).isEqual($i(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return tt(i.geoPointValue.latitude)===tt(s.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tt(i.integerValue)===tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=tt(i.doubleValue),a=tt(s.doubleValue);return o===a?Rd(o)===Rd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return aa(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(_x(o)!==_x(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function xc(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function la(t,e){if(t===e)return 0;const n=Wi(t),r=Wi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=tt(s.integerValue||s.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return xx(t.timestampValue,e.timestampValue);case 4:return xx(_c(t),_c(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=$i(s),l=$i(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ge(a[c],l[c]);if(u!==0)return u}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(tt(s.latitude),tt(o.latitude));return a!==0?a:ge(tt(s.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=ge(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:bx(p,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Yu.mapValue&&o===Yu.mapValue)return 0;if(s===Yu.mapValue)return 1;if(o===Yu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=ge(l[d],u[d]);if(f!==0)return f;const p=la(a[l[d]],c[u[d]]);if(p!==0)return p}return ge(l.length,u.length)}(t.mapValue,e.mapValue);default:throw te()}}function xx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=zi(t),r=zi(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function bx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=la(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function ca(t){return Cm(t)}function Cm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Cm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Cm(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function Mh(t){switch(Wi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cf(t);return e?16+Mh(e):16;case 5:return 2*t.stringValue.length;case 6:return $i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Mh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Zi(r.fields,(s,o)=>{i+=s.length+Mh(o)}),i}(t.mapValue);default:throw te()}}function Pm(t){return!!t&&"integerValue"in t}function Dv(t){return!!t&&"arrayValue"in t}function Ex(t){return!!t&&"nullValue"in t}function Tx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}function zL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ll(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $L(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ll(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(Ll(this.value))}}function xk(t){const e=[];return Zi(t.fields,(n,r)=>{const i=new St([n]);if(Lh(r)){const s=xk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,se.min(),se.min(),se.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new jt(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new jt(e,2,n,se.min(),se.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,se.min(),se.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function Sx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=la(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function kx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n="asc"){this.field=e,this.dir=n}}function WL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{}class ct extends bk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qL(e,n,r):n==="array-contains"?new YL(e,r):n==="in"?new QL(e,r):n==="not-in"?new XL(e,r):n==="array-contains-any"?new JL(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KL(e,r):new GL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(la(n,this.value)):n!==null&&Wi(this.value)===Wi(n)&&this.matchesComparison(la(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends bk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gr(e,n)}matches(e){return Ek(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ek(t){return t.op==="and"}function Tk(t){return HL(t)&&Ek(t)}function HL(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function Am(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(Tk(t))return t.filters.map(e=>Am(e)).join(",");{const e=t.filters.map(n=>Am(n)).join(",");return`${t.op}(${e})`}}function Sk(t,e){return t instanceof ct?function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&pr(r.value,i.value)}(t,e):t instanceof gr?function(r,i){return i instanceof gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Sk(o,i.filters[a]),!0):!1}(t,e):void te()}function kk(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(kk).join(" ,")+"}"}(t):"Filter"}class qL extends ct{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class KL extends ct{constructor(e,n){super(e,"in",n),this.keys=Ik("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GL extends ct{constructor(e,n){super(e,"not-in",n),this.keys=Ik("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ik(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class YL extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dv(n)&&xc(n.arrayValue,this.value)}}class QL extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xc(this.value.arrayValue,n)}}class XL extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xc(this.value.arrayValue,n)}}class JL extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ix(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ZL(t,e,n,r,i,s,o)}function Ov(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Am(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.ue=n}return e.ue}function Mv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Sk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kx(t.startAt,e.startAt)&&kx(t.endAt,e.endAt)}function Rm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function e4(t,e,n,r,i,s,o,a){return new Pf(t,e,n,r,i,s,o,a)}function Lv(t){return new Pf(t)}function Cx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function t4(t){return t.collectionGroup!==null}function Vl(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new dt(St.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Dd(s,r))}),n.has(St.keyField().canonicalString())||e.ce.push(new Dd(St.keyField(),r))}return e.ce}function hr(t){const e=oe(t);return e.le||(e.le=n4(e,Vl(t))),e.le}function n4(t,e){if(t.limitType==="F")return Ix(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Dd(i.field,s)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return Ix(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nm(t,e,n){return new Pf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Af(t,e){return Mv(hr(t),hr(e))&&t.limitType===e.limitType}function Ck(t){return`${Ov(hr(t))}|lt:${t.limitType}`}function Eo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kk(i)).join(", ")}]`),If(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ca(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ca(i)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function Rf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Vl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Sx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Vl(r),i)||r.endAt&&!function(o,a,l){const c=Sx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Vl(r),i))}(t,e)}function r4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pk(t){return(e,n)=>{let r=!1;for(const i of Vl(t)){const s=i4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function i4(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?la(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _k(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Ke(J.comparator);function qr(){return s4}const Ak=new Ke(J.comparator);function ml(...t){let e=Ak;for(const n of t)e=e.insert(n.key,n);return e}function Rk(t){let e=Ak;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cs(){return jl()}function Nk(){return jl()}function jl(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const o4=new Ke(J.comparator),a4=new dt(J.comparator);function de(...t){let e=a4;for(const n of t)e=e.add(n);return e}const l4=new dt(ge);function c4(){return l4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function Dk(t){return{integerValue:""+t}}function u4(t,e){return VL(e)?Dk(e):Vv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function h4(t,e,n){return t instanceof Od?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Nv(s)&&(s=Cf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ua?Mk(t,e):t instanceof bc?Lk(t,e):function(i,s){const o=Ok(i,s),a=Px(o)+Px(i.Pe);return Pm(o)&&Pm(i.Pe)?Dk(a):Vv(i.serializer,a)}(t,e)}function d4(t,e,n){return t instanceof ua?Mk(t,e):t instanceof bc?Lk(t,e):n}function Ok(t,e){return t instanceof Md?function(r){return Pm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Od extends Nf{}class ua extends Nf{constructor(e){super(),this.elements=e}}function Mk(t,e){const n=Vk(e);for(const r of t.elements)n.some(i=>pr(i,r))||n.push(r);return{arrayValue:{values:n}}}class bc extends Nf{constructor(e){super(),this.elements=e}}function Lk(t,e){let n=Vk(e);for(const r of t.elements)n=n.filter(i=>!pr(i,r));return{arrayValue:{values:n}}}class Md extends Nf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Px(t){return tt(t.integerValue||t.doubleValue)}function Vk(t){return Dv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,n){this.field=e,this.transform=n}}function p4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ua&&i instanceof ua||r instanceof bc&&i instanceof bc?aa(r.elements,i.elements,pr):r instanceof Md&&i instanceof Md?pr(r.Pe,i.Pe):r instanceof Od&&i instanceof Od}(t.transform,e.transform)}class g4{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function jk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jv(t.key,Nn.none()):new qc(t.key,t.data,Nn.none());{const n=t.data,r=rn.empty();let i=new dt(St.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new es(t.key,r,new vn(i.toArray()),Nn.none())}}function m4(t,e,n){t instanceof qc?function(i,s,o){const a=i.value.clone(),l=Rx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof es?function(i,s,o){if(!Vh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Rx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Fk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fl(t,e,n,r){return t instanceof qc?function(s,o,a,l){if(!Vh(s.precondition,o))return a;const c=s.value.clone(),u=Nx(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(s,o,a,l){if(!Vh(s.precondition,o))return a;const c=Nx(s.fieldTransforms,l,o),u=o.data;return u.setAll(Fk(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Vh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function y4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Ok(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function Ax(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&aa(r,i,(s,o)=>p4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qc extends Df{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends Df{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rx(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,d4(o,a,n[i]))}return r}function Nx(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,h4(s,o,e))}return r}class jv extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v4 extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&m4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=jk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(n,r)=>Ax(n,r))&&aa(this.baseMutations,e.baseMutations,(n,r)=>Ax(n,r))}}class Fv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return o4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Fv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ye;function b4(t){switch(t){default:return te();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function Uk(t){if(t===void 0)return Hr("GRPC error has no .code"),F.UNKNOWN;switch(t){case it.OK:return F.OK;case it.CANCELLED:return F.CANCELLED;case it.UNKNOWN:return F.UNKNOWN;case it.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case it.INTERNAL:return F.INTERNAL;case it.UNAVAILABLE:return F.UNAVAILABLE;case it.UNAUTHENTICATED:return F.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case it.NOT_FOUND:return F.NOT_FOUND;case it.ALREADY_EXISTS:return F.ALREADY_EXISTS;case it.PERMISSION_DENIED:return F.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case it.ABORTED:return F.ABORTED;case it.OUT_OF_RANGE:return F.OUT_OF_RANGE;case it.UNIMPLEMENTED:return F.UNIMPLEMENTED;case it.DATA_LOSS:return F.DATA_LOSS;default:return te()}}(ye=it||(it={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=new Ds([4294967295,4294967295],0);function Dx(t){const e=E4().encode(t),n=new hk;return n.update(e),new Uint8Array(n.digest())}function Ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ds([n,r],0),new Ds([i,s],0)]}class Uv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yl(`Invalid padding: ${n}`);if(r<0)throw new yl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yl(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ds.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Ds.fromNumber(r)));return i.compare(T4)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Dx(e),[r,i]=Ox(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Uv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Dx(e),[r,i]=Ox(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Of(se.min(),i,new Ke(ge),qr(),de())}}class Kc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kc(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Bk{constructor(e,n){this.targetId=e,this.me=n}}class zk{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Mx{constructor(){this.fe=0,this.ge=Lx(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Kc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Lx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class S4{constructor(e){this.Le=e,this.Be=new Map,this.ke=qr(),this.qe=Qu(),this.Qe=Qu(),this.Ke=new Ke(ge)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Rm(s))if(r===0){const o=new J(s.path);this.We(n,o,jt.newNoDocument(o,se.min()))}else Te(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=$i(r).toUint8Array()}catch(l){if(l instanceof wk)return oa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Uv(o,i,s)}catch(l){return oa(l instanceof yl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Rm(a.target)){const l=new J(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,jt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Of(e,n,this.Ke,this.ke,r);return this.ke=qr(),this.qe=Qu(),this.Qe=Qu(),this.Ke=new Ke(ge),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Mx,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new dt(ge),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new dt(ge),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Mx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Qu(){return new Ke(J.comparator)}function Lx(){return new Ke(J.comparator)}const k4={asc:"ASCENDING",desc:"DESCENDING"},I4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C4={and:"AND",or:"OR"};class P4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dm(t,e){return t.useProto3Json||If(e)?e:{value:e}}function Ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function A4(t,e){return Ld(t,e.toTimestamp())}function dr(t){return Te(!!t),se.fromTimestamp(function(n){const r=zi(n);return new at(r.seconds,r.nanos)}(t))}function Bv(t,e){return Om(t,e).canonicalString()}function Om(t,e){const n=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Wk(t){const e=Ve.fromString(t);return Te(Yk(e)),e}function Mm(t,e){return Bv(t.databaseId,e.path)}function Xp(t,e){const n=Wk(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(qk(n))}function Hk(t,e){return Bv(t.databaseId,e)}function R4(t){const e=Wk(t);return e.length===4?Ve.emptyPath():qk(e)}function Lm(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qk(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vx(t,e,n){return{name:Mm(t,e),fields:n.value.mapValue.fields}}function N4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Te(u===void 0||typeof u=="string"),Pt.fromBase64String(u||"")):(Te(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Pt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?F.UNKNOWN:Uk(c.code);return new Q(u,c.message||"")}(o);n=new zk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xp(t,r.document.name),s=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):se.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=jt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new jh(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xp(t,r.document),s=r.readTime?dr(r.readTime):se.min(),o=jt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new jh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xp(t,r.document),s=r.removedTargetIds||[];n=new jh([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new x4(i,s),a=r.targetId;n=new Bk(a,o)}}return n}function D4(t,e){let n;if(e instanceof qc)n={update:Vx(t,e.key,e.value)};else if(e instanceof jv)n={delete:Mm(t,e.key)};else if(e instanceof es)n={update:Vx(t,e.key,e.data),updateMask:z4(e.fieldMask)};else{if(!(e instanceof v4))return te();n={verify:Mm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Od)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Md)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:A4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function O4(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?dr(i.updateTime):dr(s);return o.isEqual(se.min())&&(o=dr(s)),new g4(o,i.transformResults||[])}(n,e))):[]}function M4(t,e){return{documents:[Hk(t,e.path)]}}function L4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hk(t,i);const s=function(c){if(c.length!==0)return Gk(gr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:To(f.field),direction:F4(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Dm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function V4(t){let e=R4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=Kk(d);return f instanceof gr&&Tk(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Dd(So(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,If(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Nd(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Nd(p,f)}(n.endAt)),e4(e,i,o,s,a,"F",l,c)}function j4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=So(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=So(n.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=So(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return ct.create(So(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(r=>Kk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function F4(t){return k4[t]}function U4(t){return I4[t]}function B4(t){return C4[t]}function To(t){return{fieldPath:t.canonicalString()}}function So(t){return St.fromServerFormat(t.fieldPath)}function Gk(t){return t instanceof ct?function(n){if(n.op==="=="){if(Tx(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NAN"}};if(Ex(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tx(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NAN"}};if(Ex(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(n.field),op:U4(n.op),value:n.value}}}(t):t instanceof gr?function(n){const r=n.getFilters().map(i=>Gk(i));return r.length===1?r[0]:{compositeFilter:{op:B4(n.op),filters:r}}}(t):te()}function z4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,r,i,s=se.min(),o=se.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.ht=e}}function W4(t){const e=V4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.ln=new q4}addToCollectionParentIndex(e,n){return this.ln.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Bi.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class q4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new dt(Ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ha(0)}static Qn(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx([t,e],[n,r]){const i=ge(t,n);return i===0?ge(e,r):i}class K4{constructor(e){this.Gn=e,this.buffer=new dt(Fx),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Fx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sa(n)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ta(n)}await this.Yn(3e5)})}}class Y4{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(kf.oe);const r=new K4(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(jx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jx):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),bo()<=he.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function Q4(t,e){return new Y4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fl(r.mutation,i,vn.empty(),at.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ml();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qr();const o=jl(),a=function(){return jl()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof es)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Fl(u.mutation,c,u.mutation.getFieldMask(),at.now())):o.set(c.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new J4(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=jl();let i=new Ke((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||vn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=Nk();u.forEach(f=>{if(!s.has(f)){const p=jk(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):t4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Cs());let a=-1,l=s;return o.next(c=>j.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?j.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,de())).next(u=>({batchId:a,changes:Rk(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=ml();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ml();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,f){return new Pf(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,jt.newInvalidDocument(u)))});let a=ml();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Fl(u.mutation,c,vn.empty(),at.now()),Rf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return j.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:W4(i.bundledQuery),readTime:dr(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.overlays=new Ke(J.comparator),this.Er=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Cs();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Cs(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Cs(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Cs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return j.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new w4(n,r));let s=this.Er.get(n);s===void 0&&(s=de(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(){this.dr=new dt(yt.Ar),this.Rr=new dt(yt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new yt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new J(new Ve([])),r=new yt(n,e),i=new yt(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new J(new Ve([])),r=new yt(n,e),i=new yt(n,e+1);let s=de();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new yt(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return J.comparator(e.key,n.key)||ge(e.br,n.br)}static Vr(e,n){return ge(e.br,n.br)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new dt(yt.Ar)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new dt(ge);return n.forEach(i=>{const s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),j.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new yt(new J(s),0);let a=new dt(ge);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),j.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return j.forEach(n.mutations,i=>{const s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new yt(n,0),i=this.vr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.Nr=e,this.docs=function(){return new Ke(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||DL(NL(u),r)<=0||(i.has(u.key)||Rf(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Lr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sV(this)}getSize(e){return j.resolve(this.size)}}class sV extends X4{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.persistence=e,this.Br=new no(n=>Ov(n),Mv),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.kr=0,this.qr=new zv,this.targetCount=0,this.Qr=ha.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),j.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new ha(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Un(n),j.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n){this.Kr={},this.overlays={},this.$r=new kf(0),this.Ur=!1,this.Ur=!0,this.Wr=new nV,this.referenceDelegate=e(this),this.Gr=new oV(this),this.indexManager=new H4,this.remoteDocumentCache=function(i){return new iV(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new $4(n),this.jr=new eV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new rV(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new aV(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return j.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class aV extends ML{constructor(e){super(),this.currentSequenceNumber=e}}class $v{constructor(e){this.persistence=e,this.Zr=new zv,this.Xr=null}static ei(e){return new $v(e)}get ti(){if(this.Xr)return this.Xr;throw te()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),j.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ti,r=>{const i=J.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return j.or([()=>j.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.ri=new no(r=>jL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Q4(this,n)}static ei(e,n){return new Vd(e,n)}Hr(){}Jr(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return j.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?j.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}ir(e,n,r){return j.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Wv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return GN()?8:LL(Bt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lV;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(bo()<=he.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),j.resolve()):(bo()<=he.DEBUG&&q("QueryEngine","Query:",Eo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(bo()<=he.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):j.resolve())}Xi(e,n){if(Cx(n))return j.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nm(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,Nm(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return Cx(n)||i.isEqual(se.min())?j.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?j.resolve(null):(bo()<=he.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eo(n)),this.os(e,o,n,RL(i,-1)).next(a=>a))})}rs(e,n){let r=new dt(Pk(e));return n.forEach((i,s)=>{Rf(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return bo()<=he.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.Zi.getDocumentsMatchingQuery(e,n,Bi.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ke(ge),this.cs=new no(s=>Ov(s),Mv),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z4(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function hV(t,e,n,r){return new uV(t,e,n,r)}async function Xk(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function dV(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,f=d.keys();let p=j.resolve();return f.forEach(y=>{p=p.next(()=>u.getEntry(l,y)).next(v=>{const x=c.docVersions.get(y);Te(x!==null),v.version.compareTo(x)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Jk(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function fV(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;a.push(n.Gr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Gr.addMatchingKeys(s,u.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Pt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(v,x,_){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,u)&&a.push(n.Gr.updateTargetData(s,p))});let l=qr(),c=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(pV(s,o,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!r.isEqual(se.min())){const u=n.Gr.getLastRemoteSnapshotVersion(s).next(d=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function pV(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function gV(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mV(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new wi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Vm(t,e,n){const r=oe(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Sa(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Ux(t,e,n){const r=oe(t);let i=se.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=oe(l),f=d.cs.get(u);return f!==void 0?j.resolve(d.us.get(f)):d.Gr.getTargetData(c,u)}(r,o,hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:de())).next(a=>(yV(r,r4(e),a),{documents:a,ds:s})))}function yV(t,e,n){let r=t.ls.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class Bx{constructor(){this.activeTargetIds=c4()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vV{constructor(){this._o=new Bx,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Bx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu=null;function Jp(){return Xu===null?Xu=function(){return 268435456+Math.round(2147483648*Math.random())}():Xu++,"0x"+Xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class bV extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=Jp(),l=this.No(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw oa("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ea}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=wV[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=Jp();return new Promise((o,a)=>{const l=new dk;l.setWithCredentials(!0),l.listenOnce(fk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Oh.NO_ERROR:const u=l.getResponseJson();q(Ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Oh.TIMEOUT:q(Ot,`RPC '${e}' ${s} timed out`),a(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const d=l.getStatus();if(q(Ot,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(p.status);a(new Q(y,p.message))}else a(new Q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(F.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{q(Ot,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(Ot,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=Jp(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mk(),a=gk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");q(Ot,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,p=!1;const y=new xV({Eo:x=>{p?q(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(f||(q(Ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),q(Ot,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},Ao:()=>d.close()}),v=(x,_,w)=>{x.listen(_,E=>{try{w(E)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,gl.EventType.OPEN,()=>{p||(q(Ot,`RPC '${e}' stream ${i} transport opened.`),y.So())}),v(d,gl.EventType.CLOSE,()=>{p||(p=!0,q(Ot,`RPC '${e}' stream ${i} transport closed`),y.Do())}),v(d,gl.EventType.ERROR,x=>{p||(p=!0,oa(Ot,`RPC '${e}' stream ${i} transport errored:`,x),y.Do(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),v(d,gl.EventType.MESSAGE,x=>{var _;if(!p){const w=x.data[0];Te(!!w);const E=w,I=(E==null?void 0:E.error)||((_=E[0])===null||_===void 0?void 0:_.error);if(I){q(Ot,`RPC '${e}' stream ${i} received error:`,I);const N=I.status;let O=function(k){const P=it[k];if(P!==void 0)return Uk(P)}(N),S=I.message;O===void 0&&(O=F.INTERNAL,S="Unknown error status: "+N+" with message "+I.message),p=!0,y.Do(new Q(O,S)),d.close()}else q(Ot,`RPC '${e}' stream ${i} received:`,w),y.vo(w)}}),v(a,pk.STAT_EVENT,x=>{x.stat===Im.PROXY?q(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Im.NOPROXY&&q(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.bo()},0),y}}function Zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){return new P4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Zk(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Hr(n.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EV extends eI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=N4(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?dr(o.readTime):se.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Lm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Rm(l)?{documents:M4(s,l)}:{query:L4(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$k(s,o.resumeToken);const c=Dm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Ld(s,o.snapshotVersion.toTimestamp());const c=Dm(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=j4(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Lm(this.serializer),n.removeTarget=e,this.c_(n)}}class TV extends eI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=O4(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Lm(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>D4(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Om(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Om(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class kV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Hr(n),this.C_=!1):q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{ro(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.k_.add(4),await Gc(c),c.K_.set("Unknown"),c.k_.delete(4),await Lf(c)}(this))})}),this.K_=new kV(r,i)}}async function Lf(t){if(ro(t))for(const e of t.q_)await e(!0)}async function Gc(t){for(const e of t.q_)await e(!1)}function tI(t,e){const n=oe(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Gv(n)?Kv(n):ka(n).s_()&&qv(n,e))}function Hv(t,e){const n=oe(t),r=ka(n);n.B_.delete(e),r.s_()&&nI(n,e),n.B_.size===0&&(r.s_()?r.a_():ro(n)&&n.K_.set("Unknown"))}function qv(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ka(t).V_(e)}function nI(t,e){t.U_.xe(e),ka(t).m_(e)}function Kv(t){t.U_=new S4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.K_.F_()}function Gv(t){return ro(t)&&!ka(t).i_()&&t.B_.size>0}function ro(t){return oe(t).k_.size===0}function rI(t){t.U_=void 0}async function CV(t){t.K_.set("Online")}async function PV(t){t.B_.forEach((e,n)=>{qv(t,e)})}async function AV(t,e){rI(t),Gv(t)?(t.K_.O_(e),Kv(t)):t.K_.set("Unknown")}async function RV(t,e,n){if(t.K_.set("Online"),e instanceof zk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jd(t,r)}else if(e instanceof jh?t.U_.$e(e):e instanceof Bk?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(se.min()))try{const r=await Jk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.B_.get(c);u&&s.B_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.B_.get(l);if(!u)return;s.B_.set(l,u.withResumeToken(Pt.EMPTY_BYTE_STRING,u.snapshotVersion)),nI(s,l);const d=new wi(u.target,l,c,u.sequenceNumber);qv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await jd(t,r)}}async function jd(t,e,n){if(!Sa(e))throw e;t.k_.add(1),await Gc(t),t.K_.set("Offline"),n||(n=()=>Jk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Lf(t)})}function iI(t,e){return e().catch(n=>jd(t,n,e))}async function Vf(t){const e=oe(t),n=Hi(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;NV(e);)try{const i=await gV(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,DV(e,i)}catch(i){await jd(e,i)}sI(e)&&oI(e)}function NV(t){return ro(t)&&t.L_.length<10}function DV(t,e){t.L_.push(e);const n=Hi(t);n.s_()&&n.f_&&n.g_(e.mutations)}function sI(t){return ro(t)&&!Hi(t).i_()&&t.L_.length>0}function oI(t){Hi(t).start()}async function OV(t){Hi(t).w_()}async function MV(t){const e=Hi(t);for(const n of t.L_)e.g_(n.mutations)}async function LV(t,e,n){const r=t.L_.shift(),i=Fv.from(r,e,n);await iI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Vf(t)}async function VV(t,e){e&&Hi(t).f_&&await async function(r,i){if(function(o){return b4(o)&&o!==F.ABORTED}(i.code)){const s=r.L_.shift();Hi(r).__(),await iI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Vf(r)}}(t,e),sI(t)&&oI(t)}async function $x(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ro(n);n.k_.add(3),await Gc(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Lf(n)}async function jV(t,e){const n=oe(t);e?(n.k_.delete(2),await Lf(n)):e||(n.k_.add(2),await Gc(n),n.K_.set("Unknown"))}function ka(t){return t.W_||(t.W_=function(n,r,i){const s=oe(n);return s.b_(),new EV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:CV.bind(null,t),mo:PV.bind(null,t),po:AV.bind(null,t),R_:RV.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Gv(t)?Kv(t):t.K_.set("Unknown")):(await t.W_.stop(),rI(t))})),t.W_}function Hi(t){return t.G_||(t.G_=function(n,r,i){const s=oe(n);return s.b_(),new TV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:OV.bind(null,t),po:VV.bind(null,t),p_:MV.bind(null,t),y_:LV.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Vf(t)):(await t.G_.stop(),t.L_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Yv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qv(t,e){if(Hr("AsyncQueue",`${e}: ${t}`),Sa(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ml(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.z_=new Ke(J.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):te():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class da{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new da(e,n,Qo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class UV{constructor(){this.queries=Hx(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=Hx(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Hx(){return new no(t=>Ck(t),Af)}async function aI(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new FV,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Qv(o,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&Xv(n)}async function lI(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BV(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&Xv(n)}function zV(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function Xv(t){t.X_.forEach(e=>{e.next()})}var jm,qx;(qx=jm||(jm={})).na="default",qx.Cache="cache";class cI{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.key=e}}class hI{constructor(e){this.key=e}}class $V{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=de(),this.mutatedKeys=de(),this.Va=Pk(e),this.ma=new Qo(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new Wx,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=Rf(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;f&&p?f.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),x=!0):this.ya(f,p)||(r.track({type:2,doc:p}),x=!0,(l&&this.Va(p,l)>0||c&&this.Va(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),x=!0):f&&!p&&(r.track({type:1,doc:f}),x=!0,(l||c)&&(a=!0)),x&&(p?(o=o.add(p),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,d)=>function(p,y){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return v(p)-v(y)}(u.type,d.type)||this.Va(u.doc,d.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new da(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Wx,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=de(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new hI(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new uI(r))}),n}va(e){this.da=e.ds,this.Ra=de();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return da.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class WV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class HV{constructor(e){this.key=e,this.Fa=!1}}class qV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new no(a=>Ck(a),Af),this.Oa=new Map,this.Na=new Set,this.La=new Ke(J.comparator),this.Ba=new Map,this.ka=new zv,this.qa={},this.Qa=new Map,this.Ka=ha.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function KV(t,e,n=!0){const r=yI(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await dI(r,e,n,!0),i}async function GV(t,e){const n=yI(t);await dI(n,e,!0,!1)}async function dI(t,e,n,r){const i=await mV(t.localStore,hr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await YV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tI(t.remoteStore,i),a}async function YV(t,e,n,r,i){t.Ua=(d,f,p)=>async function(v,x,_,w){let E=x.view.ga(_);E.ss&&(E=await Ux(v.localStore,x.query,!1).then(({documents:S})=>x.view.ga(S,E)));const I=w&&w.targetChanges.get(x.targetId),N=w&&w.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(E,v.isPrimaryClient,I,N);return Gx(v,x.targetId,O.ba),O.snapshot}(t,d,f,p);const s=await Ux(t.localStore,e,!0),o=new $V(e,s.ds),a=o.ga(s.documents),l=Kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Gx(t,n,c.ba);const u=new WV(e,n,o);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function QV(t,e,n){const r=oe(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Af(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Vm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Hv(r.remoteStore,i.targetId),Fm(r,i.targetId)}).catch(Ta)):(Fm(r,i.targetId),await Vm(r.localStore,i.targetId,!0))}async function XV(t,e){const n=oe(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hv(n.remoteStore,r.targetId))}async function JV(t,e,n){const r=sj(t);try{const i=await function(o,a){const l=oe(o),c=at.now(),u=a.reduce((p,y)=>p.add(y.key),de());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=qr(),v=de();return l.hs.getEntries(p,u).next(x=>{y=x,y.forEach((_,w)=>{w.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(x=>{d=x;const _=[];for(const w of a){const E=y4(w,d.get(w.key).overlayedDocument);E!=null&&_.push(new es(w.key,E,xk(E.value.mapValue),Nn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(x=>{f=x;const _=x.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,x.batchId,_)})}).then(()=>({batchId:f.batchId,changes:Rk(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new Ke(ge)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Yc(r,i.changes),await Vf(r.remoteStore)}catch(i){const s=Qv(i,"Failed to persist write");n.reject(s)}}async function fI(t,e){const n=oe(t);try{const r=await fV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Te(o.Fa):i.removedDocuments.size>0&&(Te(o.Fa),o.Fa=!1))}),await Yc(n,r,e)}catch(r){await Ta(r)}}function Kx(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.J_)f.ea(a)&&(c=!0)}),c&&Xv(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new Ke(J.comparator);o=o.insert(s,jt.newNoDocument(s,se.min()));const a=de().add(s),l=new Of(se.min(),new Map,new Ke(ge),o,a);await fI(r,l),r.La=r.La.remove(s),r.Ba.delete(e),Jv(r)}else await Vm(r.localStore,e,!1).then(()=>Fm(r,e,n)).catch(Ta)}async function ej(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await dV(n.localStore,e);gI(n,r,null),pI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Yc(n,i)}catch(i){await Ta(i)}}async function tj(t,e,n){const r=oe(t);try{const i=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Te(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);gI(r,e,n),pI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Yc(r,i)}catch(i){await Ta(i)}}function pI(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function gI(t,e,n){const r=oe(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Fm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||mI(t,r)})}function mI(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Hv(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),Jv(t))}function Gx(t,e,n){for(const r of n)r instanceof uI?(t.ka.addReference(r.key,e),nj(t,r)):r instanceof hI?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||mI(t,r.key)):te()}function nj(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Na.add(r),Jv(t))}function Jv(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new J(Ve.fromString(e)),r=t.Ka.next();t.Ba.set(r,new HV(n)),t.La=t.La.insert(n,r),tI(t.remoteStore,new wi(hr(Lv(n.path)),r,"TargetPurposeLimboResolution",kf.oe))}}async function Yc(t,e,n){const r=oe(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Wv.zi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const u=oe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,f=>j.forEach(f.Wi,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>j.forEach(f.Gi,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Sa(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.us.get(f),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);u.us=u.us.insert(f,v)}}}(r.localStore,s))}async function rj(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Xk(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Q(F.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yc(n,r.Ts)}}function ij(t,e){const n=oe(t),r=n.Ba.get(e);if(r&&r.Fa)return de().add(r.key);{let i=de();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function yI(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ij.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZV.bind(null,e),e.Ma.R_=BV.bind(null,e.eventManager),e.Ma.Wa=zV.bind(null,e.eventManager),e}function sj(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ej.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tj.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return hV(this.persistence,new cV,e.initialUser,this.serializer)}ja(e){return new Qk($v.ei,this.serializer)}za(e){return new vV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class oj extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Te(this.persistence.referenceDelegate instanceof Vd);const r=this.persistence.referenceDelegate.garbageCollector;return new G4(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Qk(r=>Vd.ei(r,n),this.serializer)}}class Um{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rj.bind(null,this.syncEngine),await jV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UV}()}createDatastore(e){const n=Mf(e.databaseInfo.databaseId),r=function(s){return new bV(s)}(e.databaseInfo);return function(s,o,a,l){return new SV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new IV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Kx(this.syncEngine,n,0),function(){return zx.p()?new zx:new _V}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const d=new qV(i,s,o,a,l,c);return u&&(d.$a=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Gc(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Um.provider={build:()=>new Um};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=vk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eg(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Xk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lj(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$x(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$x(e.remoteStore,i)),t._onlineComponents=e}async function lj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await eg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),await eg(t,new Fd)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await eg(t,new oj(void 0));return t._offlineComponents}async function _I(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Yx(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Yx(t,new Um))),t._onlineComponents}function cj(t){return _I(t).then(e=>e.syncEngine)}async function wI(t){const e=await _I(t),n=e.eventManager;return n.onListen=KV.bind(null,e.syncEngine),n.onUnlisten=QV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XV.bind(null,e.syncEngine),n}function uj(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new vI({next:f=>{u.eu(),o.enqueueAndForget(()=>lI(s,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new cI(Lv(a.path),u,{includeMetadataChanges:!0,ua:!0});return aI(s,d)}(await wI(t),t.asyncQueue,e,n,r)),r.promise}function hj(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new vI({next:f=>{u.eu(),o.enqueueAndForget(()=>lI(s,d)),f.fromCache&&l.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new cI(a,u,{includeMetadataChanges:!0,ua:!0});return aI(s,d)}(await wI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dj(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Xx(t){if(!J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jx(t){if(J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zv(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bL;switch(r.type){case"firstParty":return new kL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qx.get(n);r&&(q("ComponentProvider","Removing Datastore"),Qx.delete(n),r.terminate())}(this),Promise.resolve()}}function fj(t,e,n,r={}){var i;const s=(t=Kn(t,jf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Lt.MOCK_USER;else{a=TS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Lt(c)}t._authCredentials=new EL(new yk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ff(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Li extends Ff{constructor(e,n,r){super(e,n,Lv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new J(e))}withConverter(e){return new Li(this.firestore,e,this._path)}}function Gn(t,e,...n){if(t=ft(t),bI("collection","path",e),t instanceof jf){const r=Ve.fromString(e,...n);return Jx(r),new Li(t,null,r)}{if(!(t instanceof un||t instanceof Li))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Jx(r),new Li(t.firestore,null,r)}}function Yt(t,e,...n){if(t=ft(t),arguments.length===1&&(e=vk.newId()),bI("doc","path",e),t instanceof jf){const r=Ve.fromString(e,...n);return Xx(r),new un(t,null,new J(r))}{if(!(t instanceof un||t instanceof Li))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Xx(r),new un(t.firestore,t instanceof Li?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Zk(this,"async_queue_retry"),this.fu=()=>{const r=Zp();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Zp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Zp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new jr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Sa(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Yv.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class io extends jf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new eb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eb(e),this._firestoreClient=void 0,await e}}}function e_(t,e){const n=typeof t=="object"?t:xv(),r=typeof t=="string"?t:"(default)",i=bf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xS("firestore");s&&fj(i,...s)}return i}function t_(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pj(t),t._firestoreClient}function pj(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new BL(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,xI(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new aj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fa(Pt.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fa(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=/^__.*__$/;class mj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new qc(e,this.data,n,this.fieldTransforms)}}class EI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class zf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ud(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(TI(this.Mu)&&gj.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class yj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mf(e)}$u(e,n,r,i=!1){return new zf({Mu:e,methodName:n,Ku:r,path:St.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i_(t){const e=t._freezeSettings(),n=Mf(t._databaseId);return new yj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SI(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);o_("Data must be an object, but it was:",o,r);const a=kI(r,o);let l,c;if(s.merge)l=new vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=Bm(e,d,n);if(!o.contains(f))throw new Q(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);CI(u,f)||u.push(f)}l=new vn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new mj(new rn(a),l,c)}class $f extends Bf{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function vj(t,e,n){return new zf({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class s_ extends Bf{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=vj(this,e,!0),r=this.Uu.map(s=>Qc(s,n)),i=new ua(r);return new f4(e.path,i)}isEqual(e){return e instanceof s_&&pc(this.Uu,e.Uu)}}function _j(t,e,n,r){const i=t.$u(1,e,n);o_("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();Zi(r,(l,c)=>{const u=a_(e,l,n);c=ft(c);const d=i.Bu(u);if(c instanceof $f)s.push(u);else{const f=Qc(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new vn(s);return new EI(o,a,i.fieldTransforms)}function wj(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[Bm(e,r,n)],l=[i];if(s.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Bm(e,s[f])),l.push(s[f+1]);const c=[],u=rn.empty();for(let f=a.length-1;f>=0;--f)if(!CI(c,a[f])){const p=a[f];let y=l[f];y=ft(y);const v=o.Bu(p);if(y instanceof $f)c.push(p);else{const x=Qc(y,v);x!=null&&(c.push(p),u.set(p,x))}}const d=new vn(c);return new EI(u,d,o.fieldTransforms)}function Qc(t,e){if(II(t=ft(t)))return o_("Unsupported field value:",e,t),kI(t,e);if(t instanceof Bf)return function(r,i){if(!TI(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Qc(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=at.fromDate(r);return{timestampValue:Ld(i.serializer,s)}}if(r instanceof at){const s=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ld(i.serializer,s)}}if(r instanceof n_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fa)return{bytesValue:$k(i.serializer,r._byteString)};if(r instanceof un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof r_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return Vv(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Zv(r)}`)}(t,e)}function kI(t,e){const n={};return _k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,i)=>{const s=Qc(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function II(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof n_||t instanceof fa||t instanceof un||t instanceof Bf||t instanceof r_)}function o_(t,e,n){if(!II(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Zv(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function Bm(t,e,n){if((e=ft(e))instanceof Uf)return e._internalPath;if(typeof e=="string")return a_(t,e);throw Ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const xj=new RegExp("[~\\*/\\[\\]]");function a_(t,e,n){if(e.search(xj)>=0)throw Ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uf(...e.split("."))._internalPath}catch{throw Ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ud(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q(F.INVALID_ARGUMENT,a+t+l)}function CI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(AI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bj extends PI{data(){return super.data()}}function AI(t,e){return typeof e=="string"?a_(t,e):e instanceof Uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tj{convertValue(e,n="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>tt(o.doubleValue));return new r_(s)}convertGeoPoint(e){return new n_(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const n=zi(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Te(Yk(r));const i=new wc(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||Hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class NI extends PI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(AI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fh extends NI{data(e={}){return super.data(e)}}class Sj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new vl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fh(this._firestore,this._userDataWriter,r.key,r,new vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:kj(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){t=Kn(t,un);const e=Kn(t.firestore,io);return uj(t_(e),t._key).then(n=>Ij(e,t,n))}class DI extends Tj{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function Gs(t){t=Kn(t,Ff);const e=Kn(t.firestore,io),n=t_(e),r=new DI(e);return Ej(t._query),hj(n,t._query).then(i=>new Sj(e,r,t,i))}function OI(t,e,n){t=Kn(t,un);const r=Kn(t.firestore,io),i=RI(t.converter,e);return Hf(r,[SI(i_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nn.none())])}function Bd(t,e,n,...r){t=Kn(t,un);const i=Kn(t.firestore,io),s=i_(i);let o;return o=typeof(e=ft(e))=="string"||e instanceof Uf?wj(s,"updateDoc",t._key,e,n,r):_j(s,"updateDoc",t._key,e),Hf(i,[o.toMutation(t._key,Nn.exists(!0))])}function Xc(t){return Hf(Kn(t.firestore,io),[new jv(t._key,Nn.none())])}function Wf(t,e){const n=Kn(t.firestore,io),r=Yt(t),i=RI(t.converter,e);return Hf(n,[SI(i_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}function Hf(t,e){return function(r,i){const s=new jr;return r.asyncQueue.enqueueAndForget(async()=>JV(await cj(r),i,s)),s.promise}(t_(t),e)}function Ij(t,e,n){const r=n.docs.get(e._key),i=new DI(t);return new NI(t,i,e._key,r,new vl(n.hasPendingWrites,n.fromCache),e.converter)}function Cj(...t){return new s_("arrayUnion",t)}(function(e,n=!0){(function(i){Ea=i})(eo),Ws(new Ui("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new io(new TL(r.getProvider("auth-internal")),new CL(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wc(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lr(yx,"4.7.5",e),lr(yx,"4.7.5","esm2017")})();function MI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=MI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function An(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=MI(t))&&(r&&(r+=" "),r+=e);return r}const Ec=t=>typeof t=="number"&&!isNaN(t),Os=t=>typeof t=="string",_n=t=>typeof t=="function",Uh=t=>Os(t)||_n(t)?t:null,zm=t=>M.isValidElement(t)||Os(t)||_n(t)||Ec(t);function Pj(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function qf(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:f,playToast:p}=o;const y=r?`${e}--${l}`:e,v=r?`${n}--${l}`:n,x=M.useRef(0);return M.useLayoutEffect(()=>{const _=d.current,w=y.split(" "),E=I=>{I.target===d.current&&(p(),_.removeEventListener("animationend",E),_.removeEventListener("animationcancel",E),x.current===0&&I.type!=="animationcancel"&&_.classList.remove(...w))};_.classList.add(...w),_.addEventListener("animationend",E),_.addEventListener("animationcancel",E)},[]),M.useEffect(()=>{const _=d.current,w=()=>{_.removeEventListener("animationend",w),i?Pj(_,u,s):u()};f||(c?w():(x.current=1,_.className+=` ${v}`,_.addEventListener("animationend",w)))},[f]),ce.createElement(ce.Fragment,null,a)}}function tb(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Gt=new Map;let Tc=[];const $m=new Set,Aj=t=>$m.forEach(e=>e(t)),LI=()=>Gt.size>0;function VI(t,e){var n;if(e)return!((n=Gt.get(e))==null||!n.isToastActive(t));let r=!1;return Gt.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function jI(t,e){zm(t)&&(LI()||Tc.push({content:t,options:e}),Gt.forEach(n=>{n.buildToast(t,e)}))}function nb(t,e){Gt.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function Rj(t){const{subscribe:e,getSnapshot:n,setProps:r}=M.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(u,d,f){let p=1,y=0,v=[],x=[],_=[],w=d;const E=new Map,I=new Set,N=()=>{_=Array.from(E.values()),I.forEach(T=>T())},O=T=>{x=T==null?[]:x.filter(k=>k!==T),N()},S=T=>{const{toastId:k,onOpen:P,updateId:R,children:D}=T.props,A=R==null;T.staleId&&E.delete(T.staleId),E.set(k,T),x=[...x,T.props.toastId].filter(Z=>Z!==T.staleId),N(),f(tb(T,A?"added":"updated")),A&&_n(P)&&P(M.isValidElement(D)&&D.props)};return{id:u,props:w,observe:T=>(I.add(T),()=>I.delete(T)),toggle:(T,k)=>{E.forEach(P=>{k!=null&&k!==P.props.toastId||_n(P.toggle)&&P.toggle(T)})},removeToast:O,toasts:E,clearQueue:()=>{y-=v.length,v=[]},buildToast:(T,k)=>{if((X=>{let{containerId:ne,toastId:me,updateId:be}=X;const Ee=ne?ne!==u:u!==1,et=E.has(me)&&be==null;return Ee||et})(k))return;const{toastId:P,updateId:R,data:D,staleId:A,delay:Z}=k,Y=()=>{O(P)},G=R==null;G&&y++;const re={...w,style:w.toastStyle,key:p++,...Object.fromEntries(Object.entries(k).filter(X=>{let[ne,me]=X;return me!=null})),toastId:P,updateId:R,data:D,closeToast:Y,isIn:!1,className:Uh(k.className||w.toastClassName),bodyClassName:Uh(k.bodyClassName||w.bodyClassName),progressClassName:Uh(k.progressClassName||w.progressClassName),autoClose:!k.isLoading&&(U=k.autoClose,W=w.autoClose,U===!1||Ec(U)&&U>0?U:W),deleteToast(){const X=E.get(P),{onClose:ne,children:me}=X.props;_n(ne)&&ne(M.isValidElement(me)&&me.props),f(tb(X,"removed")),E.delete(P),y--,y<0&&(y=0),v.length>0?S(v.shift()):N()}};var U,W;re.closeButton=w.closeButton,k.closeButton===!1||zm(k.closeButton)?re.closeButton=k.closeButton:k.closeButton===!0&&(re.closeButton=!zm(w.closeButton)||w.closeButton);let H=T;M.isValidElement(T)&&!Os(T.type)?H=M.cloneElement(T,{closeToast:Y,toastProps:re,data:D}):_n(T)&&(H=T({closeToast:Y,toastProps:re,data:D}));const ie={content:H,props:re,staleId:A};w.limit&&w.limit>0&&y>w.limit&&G?v.push(ie):Ec(Z)?setTimeout(()=>{S(ie)},Z):S(ie)},setProps(T){w=T},setToggle:(T,k)=>{E.get(T).toggle=k},isToastActive:T=>x.some(k=>k===T),getSnapshot:()=>_}}(o,s,Aj);Gt.set(o,l);const c=l.observe(a);return Tc.forEach(u=>jI(u.content,u.options)),Tc=[],()=>{c(),Gt.delete(o)}},setProps(a){var l;(l=Gt.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Gt.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=M.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:VI,count:i==null?void 0:i.length}}function Nj(t){const[e,n]=M.useState(!1),[r,i]=M.useState(!1),s=M.useRef(null),o=M.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=t;var f,p;function y(){n(!0)}function v(){n(!1)}function x(E){const I=s.current;o.canDrag&&I&&(o.didMove=!0,e&&v(),o.delta=t.draggableDirection==="x"?E.clientX-o.start:E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1),I.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,I.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function _(){document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",_);const E=s.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}(p=Gt.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||p.setToggle(f.id,f.fn),M.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||v(),window.addEventListener("focus",y),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",y),window.removeEventListener("blur",v)}},[t.pauseOnFocusLoss]);const w={onPointerDown:function(E){if(t.draggable===!0||t.draggable===E.pointerType){o.didMove=!1,document.addEventListener("pointermove",x),document.addEventListener("pointerup",_);const I=s.current;o.canCloseOnClick=!0,o.canDrag=!0,I.style.transition="none",t.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=I.offsetWidth*(t.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=I.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(E){const{top:I,bottom:N,left:O,right:S}=s.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=O&&E.clientX<=S&&E.clientY>=I&&E.clientY<=N?v():y()}};return a&&l&&(w.onMouseEnter=v,t.stacked||(w.onMouseLeave=y)),d&&(w.onClick=E=>{u&&u(E),o.canCloseOnClick&&c()}),{playToast:y,pauseToast:v,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:w}}function Dj(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:f}=t;const p=s||l&&c===0,y={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(y.transform=`scaleX(${c})`);const v=An("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":u}),x=_n(o)?o({rtl:u,type:i,defaultClassName:v}):An(v,o),_={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return ce.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ce.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),ce.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:x,style:y,..._}))}let Oj=1;const FI=()=>""+Oj++;function Mj(t){return t&&(Os(t.toastId)||Ec(t.toastId))?t.toastId:FI()}function Ul(t,e){return jI(t,e),e.toastId}function zd(t,e){return{...e,type:e&&e.type||t,toastId:Mj(e)}}function Ju(t){return(e,n)=>Ul(e,zd(t,n))}function pe(t,e){return Ul(t,zd("default",e))}pe.loading=(t,e)=>Ul(t,zd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),pe.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Os(i)?pe.loading(i,n):pe.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,f)=>{if(d==null)return void pe.dismiss(r);const p={type:u,...a,...n,data:f},y=Os(d)?{render:d}:d;return r?pe.update(r,{...p,...y}):pe(y.render,{...p,...y}),f},c=_n(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",s,u)),c},pe.success=Ju("success"),pe.info=Ju("info"),pe.error=Ju("error"),pe.warning=Ju("warning"),pe.warn=pe.warning,pe.dark=(t,e)=>Ul(t,zd("default",{theme:"dark",...e})),pe.dismiss=function(t){(function(e){var n;if(LI()){if(e==null||Os(n=e)||Ec(n))Gt.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Gt.get(e.containerId);r?r.removeToast(e.id):Gt.forEach(i=>{i.removeToast(e.id)})}}else Tc=Tc.filter(r=>e!=null&&r.options.toastId!==e)})(t)},pe.clearWaitingQueue=function(t){t===void 0&&(t={}),Gt.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},pe.isActive=VI,pe.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=Gt.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:FI()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Ul(o,s)}},pe.done=t=>{pe.update(t,{progress:1})},pe.onChange=function(t){return $m.add(t),()=>{$m.delete(t)}},pe.play=t=>nb(!0,t),pe.pause=t=>nb(!1,t);const Lj=typeof window<"u"?M.useLayoutEffect:M.useEffect,Zu=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return ce.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},tg={info:function(t){return ce.createElement(Zu,{...t},ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ce.createElement(Zu,{...t},ce.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ce.createElement(Zu,{...t},ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ce.createElement(Zu,{...t},ce.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ce.createElement("div",{className:"Toastify__spinner"})}},Vj=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=Nj(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:f,transition:p,position:y,className:v,style:x,bodyClassName:_,bodyStyle:w,progressClassName:E,progressStyle:I,updateId:N,role:O,progress:S,rtl:T,toastId:k,deleteToast:P,isIn:R,isLoading:D,closeOnClick:A,theme:Z}=t,Y=An("Toastify__toast",`Toastify__toast-theme--${Z}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":A}),G=_n(v)?v({rtl:T,position:y,type:u,defaultClassName:Y}):An(Y,v),re=function(ie){let{theme:X,type:ne,isLoading:me,icon:be}=ie,Ee=null;const et={theme:X,type:ne};return be===!1||(_n(be)?Ee=be({...et,isLoading:me}):M.isValidElement(be)?Ee=M.cloneElement(be,et):me?Ee=tg.spinner():(yr=>yr in tg)(ne)&&(Ee=tg[ne](et))),Ee}(t),U=!!S||!l,W={closeToast:f,type:u,theme:Z};let H=null;return o===!1||(H=_n(o)?o(W):M.isValidElement(o)?M.cloneElement(o,W):function(ie){let{closeToast:X,theme:ne,ariaLabel:me="close"}=ie;return ce.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ne}`,type:"button",onClick:be=>{be.stopPropagation(),X(be)},"aria-label":me},ce.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ce.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(W)),ce.createElement(p,{isIn:R,done:P,position:y,preventExitTransition:n,nodeRef:r,playToast:s},ce.createElement("div",{id:k,onClick:c,"data-in":R,className:G,...i,style:x,ref:r},ce.createElement("div",{...R&&{role:O},className:_n(_)?_({type:u}):An("Toastify__toast-body",_),style:w},re!=null&&ce.createElement("div",{className:An("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!D})},re),ce.createElement("div",null,a)),H,ce.createElement(Dj,{...N&&!U?{key:`pb-${N}`}:{},rtl:T,theme:Z,delay:l,isRunning:e,isIn:R,closeToast:f,hide:d,type:u,style:I,className:E,controlledProgress:U,progress:S||0})))},Kf=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},jj=qf(Kf("bounce",!0));qf(Kf("slide",!0));qf(Kf("zoom"));qf(Kf("flip"));const Fj={position:"top-right",transition:jj,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function Uj(t){let e={...Fj,...t};const n=t.stacked,[r,i]=M.useState(!0),s=M.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=Rj(e),{className:c,style:u,rtl:d,containerId:f}=e;function p(v){const x=An("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":d});return _n(c)?c({position:v,rtl:d,defaultClassName:x}):An(x,Uh(c))}function y(){n&&(i(!0),pe.play())}return Lj(()=>{if(n){var v;const x=s.current.querySelectorAll('[data-in="true"]'),_=12,w=(v=e.position)==null?void 0:v.includes("top");let E=0,I=0;Array.from(x).reverse().forEach((N,O)=>{const S=N;S.classList.add("Toastify__toast--stacked"),O>0&&(S.dataset.collapsed=`${r}`),S.dataset.pos||(S.dataset.pos=w?"top":"bot");const T=E*(r?.2:1)+(r?0:_*O);S.style.setProperty("--y",`${w?T:-1*T}px`),S.style.setProperty("--g",`${_}`),S.style.setProperty("--s",""+(1-(r?I:0))),E+=S.offsetHeight,I+=.025})}},[r,l,n]),ce.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),pe.pause())},onMouseLeave:y},o((v,x)=>{const _=x.length?{...u}:{...u,pointerEvents:"none"};return ce.createElement("div",{className:p(v),style:_,key:`container-${v}`},x.map(w=>{let{content:E,props:I}=w;return ce.createElement(Vj,{...I,stacked:n,collapseAll:y,isIn:a(I.toastId,I.containerId),style:I.style,key:`toast-${I.key}`},E)}))}))}const UI=M.createContext(),Bj=({children:t})=>{const e=Ns(),n=e_(),[r,i]=M.useState(null),[s,o]=M.useState(!0),a=Sn(),l=async y=>{try{const v=Yt(n,"users",y),x=await l_(v);x.exists()?i({uid:y,email:x.data().email,username:x.data().username}):console.error("No user data found!")}catch(v){console.error("Error fetching user data:",v),pe.error(v.message||"Failed to fetch user data.")}},c=async(y,v,x)=>{try{const _=await aM(e,y,v),{uid:w}=_.user,E=Yt(n,"users",w);await OI(E,{username:x,email:y,events:{}}),i({uid:w,email:y,username:x}),pe.success("User registered successfully!")}catch(_){console.error("Error registering user:",_),pe.error(_.message||"Failed to register user.")}},u=async(y,v)=>{try{const x=await lM(e,y,v),{uid:_}=x.user;await l(_),pe.success("Logged in successfully!")}catch(x){console.error("Error logging in:",x),pe.error(x.message||"Failed to log in.")}},d=async()=>{try{await e.signOut(),i(null),pe.success("Logged out successfully!"),a("/")}catch(y){console.error("Error logging out:",y),pe.error("Failed to log out.")}},f=async y=>{try{if(!r)throw new Error("User not authenticated!");const v=Gn(n,`users/${r.uid}/events`);await Wf(v,y),pe.success("Event saved successfully!")}catch(v){console.error("Error saving event:",v),pe.error(v.message||"Failed to save event.")}},p=async()=>{try{if(!r)throw new Error("User not authenticated!");const y=Gn(n,`users/${r.uid}/events`);return(await Gs(y)).docs.map(_=>({id:_.id,..._.data()}))}catch(y){console.error("Error fetching user events:",y),pe.error(y.message||"Failed to fetch events.")}};return M.useEffect(()=>e.onAuthStateChanged(async v=>{v?await l(v.uid):i(null),o(!1)}),[]),m.jsx(UI.Provider,{value:{user:r,loading:s,register:c,login:u,logout:d,saveEvent:f,fetchUserEvents:p},children:t})},so=()=>M.useContext(UI);var BI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rb=ce.createContext&&ce.createContext(BI),zj=["attr","size","title"];function $j(t,e){if(t==null)return{};var n=Wj(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $d(){return $d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$d.apply(this,arguments)}function ib(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ib(Object(n),!0).forEach(function(r){Hj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ib(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hj(t,e,n){return e=qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qj(t){var e=Kj(t,"string");return typeof e=="symbol"?e:e+""}function Kj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zI(t){return t&&t.map((e,n)=>ce.createElement(e.tag,Wd({key:n},e.attr),zI(e.child)))}function Xr(t){return e=>ce.createElement(Gj,$d({attr:Wd({},t.attr)},e),zI(t.child))}function Gj(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=$j(t,zj),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ce.createElement("svg",$d({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Wd(Wd({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ce.createElement("title",null,s),t.children)};return rb!==void 0?ce.createElement(rb.Consumer,null,n=>e(n)):e(BI)}function Yj(t){return Xr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function Qj(t){return Xr({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function Xj(t){return Xr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function Jj(t){return Xr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function sb(t){return Xr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(t)}function Zj(t){return Xr({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(t)}function eF(t){return Xr({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function Wm(t){return Xr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function tF(t){return Xr({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const c_=({onClose:t})=>{const{login:e,register:n}=so(),[r,i]=M.useState(!0),[s,o]=M.useState({email:"",password:"",username:""}),a=c=>{o({...s,[c.target.name]:c.target.value})},l=async c=>{c.preventDefault();try{r?await e(s.email,s.password):await n(s.email,s.password,s.username),t()}catch(u){console.error(r?"Login error:":"Registration error:",u),alert(r?"Invalid login credentials":"Registration failed")}};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96",children:[m.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:r?"Login":"Register"}),m.jsxs("form",{onSubmit:l,className:"space-y-4",children:[!r&&m.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[m.jsx(Wm,{className:"mr-2 text-gray-500"}),m.jsx("input",{type:"text",name:"username",placeholder:"Username",value:s.username,onChange:a,className:"text-gray-600 w-full focus:outline-none",required:!r})]}),m.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[m.jsx(Xj,{className:"mr-2 text-gray-800"}),m.jsx("input",{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:a,className:"text-gray-600 w-full focus:outline-none",required:!0})]}),m.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[m.jsx(Jj,{className:"mr-2 text-gray-500"}),m.jsx("input",{type:"password",name:"password",placeholder:"Password",value:s.password,onChange:a,className:"text-gray-600 w-full focus:outline-none",required:!0})]}),m.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:r?"Login":"Register"})]}),m.jsx("div",{className:"text-center mt-4",children:m.jsx("button",{className:"text-sm text-blue-500 hover:underline",onClick:()=>i(!r),children:r?"Don't have an account? Register":"Already have an account? Login"})}),m.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:t,children:""})]})})};function nF(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[i,s]=M.useState(!1),[o,a]=M.useState(""),{user:l,logout:c,loading:u}=so(),d=()=>e(!t),f=()=>r(!n),p=()=>{e(!1),r(!1)},y=x=>{a(x),s(!0)},v=()=>s(!1);return u?m.jsx("div",{children:"Loading..."}):m.jsxs("nav",{className:"sticky top-0 z-50 bg-gray-800 text-white shadow-md w-full",children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[m.jsx(Ht,{to:"/",className:"text-2xl font-bold hover:text-gray-300",onClick:p,children:"EventPlanner"}),m.jsx("div",{className:"text-2xl cursor-pointer lg:hidden",onClick:d,children:t?m.jsx(eF,{}):m.jsx(Yj,{})}),m.jsxs("ul",{className:"hidden lg:flex lg:items-center lg:space-x-6",children:[m.jsx("li",{children:m.jsx(Ht,{to:"/",className:({isActive:x})=>`hover:text-gray-300 px-2 py-1 rounded ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Home"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/event",className:({isActive:x})=>`hover:text-gray-300 px-2 py-1 rounded ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Search Events"})}),m.jsxs("li",{className:"relative",children:[m.jsx("button",{onClick:f,className:"bg-gray-600 hover:text-gray-300 flex items-center focus:outline-none",children:"Manage"}),n&&m.jsxs("ul",{className:"absolute left-0 mt-2 bg-gray-700 text-white rounded shadow-lg py-2",children:[m.jsx("li",{children:m.jsx(Ht,{to:"/manage-events",className:({isActive:x})=>`block px-4 py-2 hover:bg-gray-600 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Manage Events"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/create-event",className:({isActive:x})=>`block px-4 py-2 hover:bg-gray-600 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Create Events"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/my-events",className:({isActive:x})=>`block px-4 py-2 hover:bg-gray-600 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"My Events"})})]})]}),m.jsx("li",{children:m.jsx(Ht,{to:"/favorites",className:({isActive:x})=>`hover:text-gray-300 px-2 py-1 rounded ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Favorites"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/calendar",className:({isActive:x})=>`hover:text-gray-300 px-2 py-1 rounded ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Calendar"})})]}),m.jsx("div",{className:"hidden lg:flex items-center space-x-4",children:l?m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"text-gray-300",children:["Welcome, ",l.username||"Guest","!"]}),m.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",children:"Logout"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>y("login"),className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:[m.jsx(sb,{}),m.jsx("span",{children:"Login"})]}),m.jsxs("button",{onClick:()=>y("register"),className:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:[m.jsx(Wm,{}),m.jsx("span",{children:"Join us"})]})]})})]}),t&&m.jsxs("div",{className:"lg:hidden bg-gray-700 py-4 space-y-4 text-sm",children:[m.jsxs("ul",{className:"flex flex-wrap space-y-2",children:[m.jsx("li",{children:m.jsx(Ht,{to:"/",className:({isActive:x})=>`block px-4 py-2 hover:text-gray-300 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Home"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/event",className:({isActive:x})=>`block px-4 py-2 hover:text-gray-300 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Search Events"})}),m.jsxs("li",{children:[m.jsx("button",{onClick:f,className:"bg-gray-600 block px-4 py-2 hover:text-gray-300",children:"Manage"}),n&&m.jsxs("ul",{className:"space-y-2 pl-4 flex flex-wrap",children:[m.jsx("li",{children:m.jsx(Ht,{to:"/manage-events",className:({isActive:x})=>`block px-4 py-2 hover:bg-gray-600 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Manage Events"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/create-event",className:({isActive:x})=>`block px-4 py-2 hover:bg-gray-600 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Create Events"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/my-events",className:({isActive:x})=>`block px-4 py-2 hover:bg-gray-600 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"My Events"})})]})]}),m.jsx("li",{children:m.jsx(Ht,{to:"/favorites",className:({isActive:x})=>`block px-4 py-2 hover:text-gray-300 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Favorites"})}),m.jsx("li",{children:m.jsx(Ht,{to:"/calendar",className:({isActive:x})=>`block px-4 py-2 hover:text-gray-300 ${x?"border-b-2 border-blue-500 text-blue-400":""}`,onClick:p,children:"Calendar"})})]}),!l&&m.jsxs("div",{className:"flex space-x-4 px-4",children:[m.jsxs("button",{onClick:()=>y("login"),className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:[m.jsx(sb,{}),m.jsx("span",{children:"Login"})]}),m.jsxs("button",{onClick:()=>y("register"),className:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:[m.jsx(Wm,{}),m.jsx("span",{children:"Register"})]})]})]}),i&&m.jsx(c_,{mode:o,onClose:v})]})}function rF(){const[t,e]=M.useState(!1),n=Sn(),r=()=>{n("/event")};return m.jsxs("div",{className:"bg-primary min-h-screen flex flex-col items-center justify-center text-center px-4 relative overflow-hidden",children:[t&&m.jsx(c_,{onClose:()=>e(!1)}),m.jsxs("div",{className:"hero-section animate-fadeIn bg-gray-200 p-20 rounded-full",children:[m.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold leading-tight mb-12",children:["Welcome to ",m.jsx("br",{}),m.jsx("span",{className:`relative inline-block text-transparent bg-clip-text bg-gradient-to-r 
                from-pink-500 via-purple-500 to-indigo-500 animate-textGlow`,children:"EventPlanner"})]}),m.jsx("p",{className:"text-lg md:text-xl text-textLight max-w-2xl mx-auto mb-8",children:"Your one-stop destination to discover, organize, and attend amazing events. Lets make your events unforgettable."}),m.jsx("button",{onClick:r,className:"px-8 py-3 text-lg md:text-xl font-semibold text-gray-800 bg-gray-300 rounded-full hover:bg-gray-400 transition-transform transform hover:scale-105 shadow-lg",children:"Continue as Guest"})]}),m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"bg-gradient-to-b from-secondary to-primary h-full w-full opacity-50"}),m.jsx("div",{className:"absolute w-72 h-72 bg-accent rounded-full opacity-20 blur-2xl -top-10 -left-20 animate-pulse"}),m.jsx("div",{className:"absolute w-96 h-96 bg-secondary rounded-full opacity-20 blur-3xl -bottom-20 -right-20 animate-pulse"})]}),m.jsx("div",{className:"absolute top-20 left-10",children:m.jsx("div",{className:"w-6 h-6 bg-accent rounded-full animate-bounce"})}),m.jsx("div",{className:"absolute bottom-20 right-10",children:m.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full animate-bounce"})})]})}var iF="firebase",sF="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(iF,sF,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebasestorage.googleapis.com",WI="storageBucket",oF=2*60*1e3,aF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends mr{constructor(e,n,r=0){super(ng(e),`Firebase Storage: ${n} (${ng(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ng(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function ng(t){return"storage/"+t}function u_(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Je.UNKNOWN,t)}function lF(t){return new Ze(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cF(t){return new Ze(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Je.UNAUTHENTICATED,t)}function hF(){return new Ze(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dF(t){return new Ze(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fF(){return new Ze(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pF(){return new Ze(Je.CANCELED,"User canceled the upload/download.")}function gF(t){return new Ze(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function mF(t){return new Ze(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yF(){return new Ze(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WI+"' property when initializing the app?")}function vF(){return new Ze(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _F(){return new Ze(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wF(t){return new Ze(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hm(t){return new Ze(Je.INVALID_ARGUMENT,t)}function HI(){return new Ze(Je.APP_DELETED,"The Firebase app was deleted.")}function xF(t){return new Ze(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bl(t,e){return new Ze(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rl(t){throw new Ze(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=wn.makeFromUrl(e,n)}catch{return new wn(e,"")}if(r.path==="")return r;throw mF(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},v=n===$I?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",_=new RegExp(`^https?://${v}/${i}/${x}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:p,indices:y,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<E.length;I++){const N=E[I],O=N.regex.exec(e);if(O){const S=O[N.indices.bucket];let T=O[N.indices.path];T||(T=""),r=new wn(S,T),N.postModify(r);break}}if(r==null)throw gF(e);return r}}class bF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function d(x){i=setTimeout(()=>{i=null,t(p,l())},x)}function f(){s&&clearTimeout(s)}function p(x,..._){if(c){f();return}if(x){f(),u.call(null,x,..._);return}if(l()||o){f(),u.call(null,x,..._);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,d(E)}let y=!1;function v(x){y||(y=!0,f(),!c&&(i!==null?(x||(a=2),clearTimeout(i),d(0)):x||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function TF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t){return t!==void 0}function kF(t){return typeof t=="object"&&!Array.isArray(t)}function h_(t){return typeof t=="string"||t instanceof String}function ob(t){return d_()&&t instanceof Blob}function d_(){return typeof Blob<"u"}function ab(t,e,n,r){if(r<e)throw Hm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ms;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ms||(Ms={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,n,r,i,s,o,a,l,c,u,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new eh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ms.NO_ERROR,l=s.getStatus();if(!a||IF(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Ms.ABORT;r(!1,new eh(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new eh(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());SF(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=u_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?HI():pF();o(l)}else{const l=fF();o(l)}};this.canceled_?n(!1,new eh(!1,null,!0)):this.backoffId_=EF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function PF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DF(t,e,n,r,i,s,o=!0){const a=qI(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return RF(c,e),PF(c,n),AF(c,s),NF(c,r),new CF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MF(...t){const e=OF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(d_())return new Blob(t);throw new Ze(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){if(typeof atob>"u")throw wF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rg{constructor(e,n){this.data=e,this.contentType=n||null}}function KI(t,e){switch(t){case Un.RAW:return new rg(GI(e));case Un.BASE64:case Un.BASE64URL:return new rg(YI(t,e));case Un.DATA_URL:return new rg(FF(e),UF(e))}throw u_()}function GI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jF(t){let e;try{e=decodeURIComponent(t)}catch{throw Bl(Un.DATA_URL,"Malformed data URL.")}return GI(e)}function YI(t,e){switch(t){case Un.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Bl(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Un.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Bl(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VF(e)}catch(i){throw i.message.includes("polyfill")?i:Bl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class QI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Bl(Un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=BF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function FF(t){const e=new QI(t);return e.base64?YI(Un.BASE64,e.rest):jF(e.rest)}function UF(t){return new QI(t).contentType}function BF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){let r=0,i="";ob(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ob(this.data_)){const r=this.data_,i=LF(r,e,n);return i===null?null:new mi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mi(r,!0)}}static getBlob(...e){if(d_()){const n=e.map(r=>r instanceof mi?r.data_:r);return new mi(MF.apply(null,n))}else{const n=e.map(o=>h_(o)?KI(Un.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new mi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){let e;try{e=JSON.parse(t)}catch{return null}return kF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $F(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function JI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t,e){return e}class qt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||WF}}let th=null;function HF(t){return!h_(t)||t.length<2?t:JI(t)}function ZI(){if(th)return th;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(s,o){return HF(o)}const n=new qt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new qt("size");return i.xform=r,t.push(i),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),th=t,th}function qF(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new wn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function KF(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return qF(r,t),r}function eC(t,e,n){const r=XI(e);return r===null?null:KF(t,r,n)}function GF(t,e,n,r){const i=XI(e);if(i===null||!h_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+o(u)+"/o/"+o(d),p=f_(f,n,r),y=qI({alt:"media",token:c});return p+y})[0]}function YF(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class tC{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){if(!t)throw u_()}function QF(t,e){function n(r,i){const s=eC(t,i,e);return nC(s!==null),s}return n}function XF(t,e){function n(r,i){const s=eC(t,i,e);return nC(s!==null),GF(s,i,t.host,t._protocol)}return n}function rC(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=hF():i=uF():n.getStatus()===402?i=cF(t.bucket):n.getStatus()===403?i=dF(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function JF(t){const e=rC(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=lF(t.path)),s.serverResponse=i.serverResponse,s}return n}function ZF(t,e,n){const r=e.fullServerUrl(),i=f_(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new tC(i,s,XF(t,n),o);return a.errorHandler=JF(e),a}function e6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function t6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e6(null,e)),r}function n6(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=t6(e,r,i),u=YF(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=mi.getBlob(d,r,f);if(p===null)throw vF();const y={name:c.fullPath},v=f_(s,t.host,t._protocol),x="POST",_=t.maxUploadRetryTime,w=new tC(v,x,QF(t,n),_);return w.urlParams=y,w.headers=o,w.body=p.uploadData(),w.errorHandler=rC(e),w}class r6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ms.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ms.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ms.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw rl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class i6 extends r6{initXhr(){this.xhr_.responseType="text"}}function iC(){return new i6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this._service=e,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ys(e,n)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JI(this._location.path)}get storage(){return this._service}get parent(){const e=zF(this._location.path);if(e===null)return null;const n=new wn(this._location.bucket,e);return new Ys(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xF(e)}}function s6(t,e,n){t._throwIfRoot("uploadBytes");const r=n6(t.storage,t._location,ZI(),new mi(e,!0),n);return t.storage.makeRequestWithTokens(r,iC).then(i=>({metadata:i,ref:t}))}function o6(t,e,n=Un.RAW,r){t._throwIfRoot("uploadString");const i=KI(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),s6(t,i.data,s)}function a6(t){t._throwIfRoot("getDownloadURL");const e=ZF(t.storage,t._location,ZI());return t.storage.makeRequestWithTokens(e,iC).then(n=>{if(n===null)throw _F();return n})}function l6(t,e){const n=$F(t._location.path,e),r=new wn(t._location.bucket,n);return new Ys(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){return/^[A-Za-z]+:\/\//.test(t)}function u6(t,e){return new Ys(t,e)}function sC(t,e){if(t instanceof p_){const n=t;if(n._bucket==null)throw yF();const r=new Ys(n,n._bucket);return e!=null?sC(r,e):r}else return e!==void 0?l6(t,e):t}function h6(t,e){if(e&&c6(e)){if(t instanceof p_)return u6(t,e);throw Hm("To use ref(service, url), the first argument must be a Storage instance.")}else return sC(t,e)}function lb(t,e){const n=e==null?void 0:e[WI];return n==null?null:wn.makeFromBucketSpec(n,t)}function d6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:TS(i,t.app.options.projectId))}class p_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=$I,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oF,this._maxUploadRetryTime=aF,this._requests=new Set,i!=null?this._bucket=wn.makeFromBucketSpec(i,this._host):this._bucket=lb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=lb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ab("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ab("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ys(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new bF(HI());{const o=DF(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const cb="@firebase/storage",ub="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="storage";function f6(t,e,n,r){return t=ft(t),o6(t,e,n,r)}function p6(t){return t=ft(t),a6(t)}function g6(t,e){return t=ft(t),h6(t,e)}function m6(t=xv(),e){t=ft(t);const r=bf(t,oC).getImmediate({identifier:e}),i=xS("storage");return i&&y6(r,...i),r}function y6(t,e,n,r={}){d6(t,e,n,r)}function v6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new p_(n,r,i,e,eo)}function _6(){Ws(new Ui(oC,v6,"PUBLIC").setMultipleInstances(!0)),lr(cb,ub,""),lr(cb,ub,"esm2017")}_6();const w6={apiKey:"AIzaSyCAI2nZzcRP09Vmugb61ztxKZG1FC9lpYg",authDomain:"event-planner-f074c.firebaseapp.com",projectId:"event-planner-f074c",storageBucket:"event-planner-f074c.appspot.com",messagingSenderId:"228038484139",appId:"1:228038484139:web:55676fda81a746d38757ee",databaseURL:"https://event-planner-f074c-default-rtdb.europe-west1.firebasedatabase.app/"},g_=IS(w6),x6=Ns(g_),st=e_(g_),b6=m6(g_),aC=M.createContext(),E6=({children:t})=>{const{user:e}=so(),[n,r]=M.useState([]),[i,s]=M.useState([]),[o,a]=M.useState({}),[l,c]=M.useState(""),u=async()=>{if(e)try{const _=Gn(st,`users/${e.uid}/favorites`),E=(await Gs(_)).docs.map(I=>({id:I.id,...I.data()}));s(E)}catch(_){console.error("Error fetching favorites:",_)}},d=async()=>{if(e)try{const _=Gn(st,`users/${e.uid}/attendees`),w=await Gs(_),E={};w.docs.forEach(I=>{E[I.id]=I.data().attendees||[]}),a(E)}catch(_){console.error("Error fetching attendees:",_)}};M.useEffect(()=>{e&&(u(),d())},[e]);const f=_=>{r(_)},p=async _=>{if(e)try{const w=Yt(st,`users/${e.uid}/favorites`,_.id);await OI(w,_),s(E=>[...E,_])}catch(w){console.error("Error adding favorite:",w)}},y=async _=>{if(e)try{const w=Yt(st,`users/${e.uid}/favorites`,_);await Xc(w),s(E=>E.filter(I=>I.id!==_))}catch(w){console.error("Error removing favorite:",w)}},v=async(_,w)=>{if(e)try{const E=Yt(st,`users/${e.uid}/attendees`,_);await Bd(E,{attendees:Cj(w)}),a(I=>({...I,[_]:[...I[_]||[],w]}))}catch(E){console.error("Error adding attendee:",E)}},x=_=>{c(_)};return M.useEffect(()=>{if(l){const _=n.filter(w=>{var E;return w.name.toLowerCase().includes(l.toLowerCase())||((E=w.location)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))});r(_)}},[l,n]),m.jsx(aC.Provider,{value:{searchResults:n,setSearchResults:r,setSearchData:f,favorites:i,addFavorite:p,removeFavorite:y,addAttendee:v,attendees:o,searchTerm:l,handleSearch:x},children:t})},Jc=()=>M.useContext(aC);function T6(){const{searchResults:t,setSearchData:e}=Jc(),[n,r]=M.useState({category:"",town:""}),[i,s]=M.useState(!1),[o,a]=M.useState(""),[l,c]=M.useState(8),u=y=>{const{name:v,value:x}=y.target;r({...n,[v]:x}),o&&a("")},d=async()=>{var w;const y="mOFr2N2LO0CuZBIXgKd9m8lJBRf1IFy7",{category:v,town:x}=n,_=`https://app.ticketmaster.com/discovery/v2/events.json?apikey=${y}&keyword=${encodeURIComponent(v)}&city=${encodeURIComponent(x)}`;try{s(!0),a("");const E=await fetch(_);if(!E.ok)throw new Error("Failed to fetch events");const N=((w=(await E.json())._embedded)==null?void 0:w.events)||[];e(N),c(8)}catch{a("Unable to fetch events. Please try again.")}finally{s(!1)}},f=y=>{if(y.preventDefault(),!n.category.trim()||!n.town.trim()){a("Both category and town fields are required.");return}d()},p=()=>{c(y=>y+8)};return m.jsxs("div",{className:"container mx-auto mt-10 px-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-100",children:"Find an Event!"}),m.jsxs("form",{onSubmit:f,className:"flex flex-col gap-4 md:flex-row md:gap-6 items-center justify-center",children:[m.jsxs("div",{className:"flex-1 w-full",children:[m.jsx("label",{className:"block text-gray-300 mb-1",children:"Category"}),m.jsx("input",{type:"text",name:"category",value:n.category,onChange:u,className:"w-full p-3 border border-gray-500 rounded bg-gray-800 text-white focus:ring-2 focus:ring-accent",placeholder:"e.g., Music, Sports"})]}),m.jsxs("div",{className:"flex-1 w-full",children:[m.jsx("label",{className:"block text-gray-300 mb-1",children:"Town"}),m.jsx("input",{type:"text",name:"town",value:n.town,onChange:u,className:"w-full p-3 border border-gray-500 rounded bg-gray-800 text-white focus:ring-2 focus:ring-accent",placeholder:"e.g., New York, Los Angeles"})]}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded hover:bg-blue-700 transition",children:"Search"})]}),i&&m.jsx("p",{className:"mt-4 text-blue-600 text-center",children:"Loading events..."}),o&&m.jsx("p",{className:"mt-4 text-red-600 text-center",children:o}),t.length>0&&!i&&m.jsxs("p",{className:"text-lg font-medium mb-4 mt-4 text-center text-gray-200",children:[t.length," event",t.length!==1?"s":""," found"]}),t.length===0&&!i&&!o&&m.jsx("p",{className:"mt-4 text-gray-400 text-center",children:"No events found. Please try a different search."}),m.jsxs("div",{className:"mt-6",children:[m.jsx("ul",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:t.slice(0,l).map((y,v)=>{var w,E,I,N,O,S,T;const x=((E=(w=y.images)==null?void 0:w[0])==null?void 0:E.url)||"placeholder.jpg",_=`${y.id}-${v}`;return m.jsxs("li",{className:"border border-gray-700 p-4 rounded-lg bg-gray-800 text-white shadow-lg transition-transform hover:scale-105",children:[m.jsx("h4",{className:"font-bold text-lg mb-2",children:y.name}),m.jsx("img",{src:x,alt:y.name,className:"w-full h-48 object-cover rounded mb-4"}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",y.dates.start.localDate]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"Venue:"})," ",((N=(I=y._embedded)==null?void 0:I.venues[0])==null?void 0:N.name)||"Unknown"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-semibold",children:"City:"})," ",((T=(S=(O=y._embedded)==null?void 0:O.venues[0])==null?void 0:S.city)==null?void 0:T.name)||"Unknown"]}),m.jsx(fc,{to:`/event/${y.id}`,state:{event:y},className:"block mt-4 px-4 py-2 bg-blue-600 text-center text-white rounded hover:bg-blue-700",children:"View Details"})]},_)})}),l<t.length&&m.jsx("div",{className:"text-center mt-6",children:m.jsx("button",{onClick:p,className:"px-6 py-3 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Load More"})})]})]})}function S6(){const{searchResults:t}=Jc(),[e,n]=M.useState({}),[r,i]=M.useState([]),[s,o]=M.useState(4),[a,l]=M.useState(!0);return M.useEffect(()=>{const c=t.reduce((u,d)=>{const f=new Date(d.dates.start.localDate).toDateString();return u[f]||(u[f]=[]),u[f].push(d),u},{});n(c)},[t]),M.useEffect(()=>{(async()=>{var y;const u=localStorage.getItem("lastSearch");if(!u)return;const{category:d,town:f}=JSON.parse(u),p="mOFr2N2LO0CuZBIXgKd9m8lJBRf1IFy7";try{const v=`https://app.ticketmaster.com/discovery/v2/events.json?apikey=${p}&keyword=${encodeURIComponent(d)}&city=${encodeURIComponent(f)}`,w=((y=(await(await fetch(v)).json())._embedded)==null?void 0:y.events)||[];i(w),l(!1)}catch(v){console.error("Failed to fetch event suggestions:",v),l(!1)}})()},[]),m.jsx("div",{className:"eventcontainer",children:m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-primary text-white min-h-screen relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"bg-gradient-to-br from-purple-600 via-pink-500 to-indigo-500 h-full w-full opacity-40"}),m.jsx("div",{className:"absolute w-96 h-96 bg-accent opacity-30 blur-3xl -top-20 -left-10 animate-pulse"}),m.jsx("div",{className:"absolute w-72 h-72 bg-secondary opacity-30 blur-2xl -bottom-10 -right-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 py-6 md:py-10 rounded-lg shadow-lg mb-8",children:[m.jsxs("h1",{className:"text-2xl sm:text-4xl font-extrabold text-center text-white tracking-wide animate-fadeIn",children:["Find Your Next ",m.jsx("span",{className:"text-accent",children:"Event"})]}),m.jsx("p",{className:"text-center mt-2 text-sm sm:text-lg text-light",children:"Browse, search, and plan your perfect day out."})]}),m.jsx("div",{className:"flex flex-col gap-4 md: md:gap-6 items-center justify-center",children:m.jsx(T6,{})}),a?m.jsxs("div",{className:"mt-8 text-center",children:[m.jsx("div",{className:"animate-spin inline-block w-12 h-12 border-4 border-solid border-accent border-t-transparent rounded-full"}),m.jsx("p",{className:"mt-4 text-light",children:"Loading event suggestions..."})]}):m.jsxs("div",{className:"mt-12",children:[m.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-accent mb-6",children:"Event Suggestions"}),m.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 lg:gap-6",children:r.slice(0,s).map(c=>{var u,d,f;return m.jsxs("div",{className:"bg-gradient-to-b from-secondary via-primary to-secondary p-4 rounded-lg shadow-lg hover:shadow-xl transition-transform transform hover:scale-105",children:[((u=c.images)==null?void 0:u[0])&&m.jsx("img",{src:c.images[0].url,alt:c.name,className:"w-full h-32 sm:h-48 object-cover rounded-md mb-4"}),m.jsx("h4",{className:"text-lg sm:text-xl font-bold text-accent mb-2",children:c.name}),m.jsxs("p",{className:"text-light text-sm sm:text-base mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Venue:"})," ",((f=(d=c._embedded)==null?void 0:d.venues[0])==null?void 0:f.name)||"Unknown Venue"]}),m.jsxs("p",{className:"text-light text-sm sm:text-base mb-2",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date(c.dates.start.localDate).toLocaleDateString()]}),m.jsx(fc,{to:`/event/${c.id}`,state:{event:c},className:"block mt-2 text-center px-4 py-2 bg-accent text-white text-sm sm:text-base rounded-lg hover:bg-opacity-80",children:"View Details"})]},c.id)})}),s<r.length&&m.jsx("div",{className:"text-center mt-6",children:m.jsx("button",{onClick:()=>o(c=>c+4),className:"mt-4 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-800 text-white rounded hover:opacity-90 shadow-md",children:"Show More"})})]})]})})}function k6({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const I6=M.forwardRef(k6),lC=()=>{const t=Sn(),e=()=>{t(-1)};return m.jsxs("button",{onClick:e,className:"flex items-center space-x-2 p-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[m.jsx(I6,{className:"h-5 w-5"}),m.jsx("span",{})]})};function C6(){const[t,e]=M.useState([]),[n,r]=M.useState(""),[i,s]=M.useState(!0),{user:o}=so(),a=Sn(),l=async()=>{s(!0),r("");try{const d=Ns().currentUser;if(!d||!d.uid)throw new Error("User is not logged in.");const f=Gn(st,`users/${d.uid}/events`),y=(await Gs(f)).docs.map(v=>{const x=v.data(),_=(x.ticketQuantity||0)-(x.ticketsSold||0);return{id:v.id,...x,ticketsRemaining:_}});e(y)}catch(u){console.error("Error fetching events:",u),r("Failed to fetch events. Please try again later.")}finally{s(!1)}},c=async u=>{if(window.confirm("Are you sure you want to delete this event?"))try{await Xc(Yt(st,"events",u)),e(f=>f.filter(p=>p.id!==u))}catch(f){console.error("Error deleting event:",f),r("Failed to delete the event. Please try again later.")}};return M.useEffect(()=>{l()},[o]),m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 min-h-screen text-white",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-80 h-80 bg-indigo-500 opacity-30 blur-2xl -top-20 -left-10 animate-pulse"}),m.jsx("div",{className:"absolute w-72 h-72 bg-pink-400 opacity-30 blur-2xl -bottom-10 -right-10 animate-pulse"})]}),m.jsx("div",{className:"mb-6",children:m.jsx(lC,{})}),m.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide text-center mb-6",children:["Manage ",m.jsx("span",{className:"text-accent",children:"Events"})]}),n&&m.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded-lg text-center mb-4",children:n}),i?m.jsx("p",{className:"text-lg text-center animate-pulse",children:"Loading events..."}):t.length===0?m.jsx("p",{className:"text-lg text-center mt-10",children:"No events available. Create some to see them here!"}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>m.jsxs("div",{className:"bg-gradient-to-b from-purple-700 via-indigo-700 to-purple-800 p-4 rounded-lg shadow-lg hover:shadow-xl transition-transform transform hover:scale-105 relative",children:[u.eventImage&&m.jsx("img",{src:u.eventImage,alt:u.eventName,className:"w-full h-48 object-cover rounded-lg mb-4"}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:u.eventName}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Location:"})," ",u.location]}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",u.date]}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Time:"})," ",u.time]}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Tickets Remaining:"})," ",u.ticketsRemaining]}),m.jsxs("p",{className:"text-sm",children:[m.jsx("span",{className:"font-semibold",children:"Price:"})," $",u.ticketPrice]})]}),m.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[m.jsx("button",{onClick:()=>a("/events/view-details/:eventId",{state:{eventId:u.id}}),className:"px-4 py-2 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600",children:"View Details"}),u.isOwned&&m.jsx("button",{onClick:()=>a(`/edit-event/${u.id}`,{state:{event:u}}),className:"px-4 py-2 bg-yellow-500 text-white rounded-md shadow-md hover:bg-yellow-600",children:"Edit"}),m.jsx("button",{onClick:()=>a("/manage-reservations",{state:{eventId:u.id}}),className:"px-4 py-2 bg-green-500 text-white rounded-md shadow-md hover:bg-green-600",children:"Manage Reservations"}),u.isOwned&&m.jsx("button",{onClick:()=>c(u.id),className:"px-4 py-2 bg-red-500 text-white rounded-md shadow-md hover:bg-red-600",children:"Delete"})]})]},u.id))})]})}function P6(){var f,p,y,v,x,_,w;const t=Qr(),e=Sn(),{event:n}=t.state||{},{favorites:r,addFavorite:i,removeFavorite:s}=Jc(),[o,a]=M.useState(!1);if(M.useEffect(()=>{if(n){const E=r.some(I=>I.id===n.id);a(E)}},[n,r]),!n)return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-indigo-700 via-purple-800 to-blue-600 text-white",children:[m.jsx("h2",{className:"text-3xl font-bold",children:"Event Not Found"}),m.jsx("button",{onClick:()=>e("/manage-events"),className:"mt-6 px-6 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-700",children:"Go to Manage Events"})]});const l=(p=(f=n._embedded)==null?void 0:f.venues)==null?void 0:p[0],c=((v=(y=n.images)==null?void 0:y[0])==null?void 0:v.url)||"https://via.placeholder.com/300",u=()=>{var I,N,O,S,T,k,P,R,D;const E={id:n.id,name:n.name||"Unnamed Event",location:((O=(N=(I=n._embedded)==null?void 0:I.venues)==null?void 0:N[0])==null?void 0:O.name)||"Location not available",date:((T=(S=n.dates)==null?void 0:S.start)==null?void 0:T.localDate)||"Date not available",time:((P=(k=n.dates)==null?void 0:k.start)==null?void 0:P.localTime)||"Time not available",image:((D=(R=n.images)==null?void 0:R[0])==null?void 0:D.url)||"https://via.placeholder.com/150",description:n.info||"No description available",priceRange:n.priceRanges?`${n.priceRanges[0].min} - ${n.priceRanges[0].max}`:"Price not available"};i(E),a(!0)},d=()=>{s(n),a(!1)};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-700 via-purple-800 to-blue-600 text-white px-6 py-10",children:[m.jsxs("nav",{className:"mb-8 text-lg",children:[m.jsx("button",{onClick:()=>e("/manage-events"),className:"text-blue-300 hover:underline",children:"Manage Events"})," > ",m.jsx("span",{className:"text-gray-300",children:n.name})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 text-black",children:[m.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 mb-6",children:n.name}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("img",{src:c,alt:n.name,className:"w-full h-64 object-cover rounded-lg shadow-lg"}),l&&m.jsxs("div",{className:"mt-6",children:[m.jsxs("p",{className:"text-gray-700",children:[m.jsx("strong",{children:"Venue:"})," ",l.name]}),m.jsxs("p",{className:"text-gray-700",children:[m.jsx("strong",{children:"City:"})," ",l.city.name]}),m.jsxs("p",{className:"text-gray-700",children:[m.jsx("strong",{children:"Address:"})," ",(x=l.address)==null?void 0:x.line1]})]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-gray-700 mb-4",children:[m.jsx("strong",{children:"Date:"})," ",((w=(_=n.dates)==null?void 0:_.start)==null?void 0:w.localDate)||"Date not available"]}),m.jsxs("p",{className:"text-gray-700 mb-4",children:[m.jsx("strong",{children:"Description:"})," ",n.info||"No description available."]}),n.priceRanges&&m.jsxs("p",{className:"text-gray-700 mb-4",children:[m.jsx("strong",{children:"Price Range:"})," $",n.priceRanges[0].min," - $",n.priceRanges[0].max]}),m.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-green-500 text-white rounded-md hover:bg-green-700",children:"Buy Tickets"})]})]}),m.jsxs("div",{className:"mt-8 flex flex-wrap items-center space-x-4",children:[m.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-700",children:"Back to Events"}),n.isOwned&&m.jsx("button",{onClick:()=>e(`/edit-event/${n.id}`,{state:{event:n}}),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-700",children:"Edit Event"}),m.jsx("button",{onClick:o?d:u,className:`px-4 py-2 rounded-md text-white ${o?"bg-red-500 hover:bg-red-700":"bg-blue-500 hover:bg-blue-700"}`,children:o?"Remove from Favorites":"Add to Favorites"})]})]})]})}function cC(){const[t,e]=M.useState({eventName:"",location:"",date:"",time:"",ticketQuantity:"",ticketPrice:"",eventImage:""}),[n,r]=M.useState({}),[i,s]=M.useState(""),o=Sn(),a=Ns(),l=f=>{const{name:p,value:y}=f.target;e({...t,[p]:y})},c=f=>{const p=f.target.files[0],y=new FileReader;y.onload=()=>{e({...t,eventImage:y.result})},p&&y.readAsDataURL(p)},u=()=>{const f={};return t.eventName||(f.eventName="Event name is required."),t.location||(f.location="Location is required."),t.date||(f.date="Date is required."),t.time||(f.time="Time is required."),(!t.ticketQuantity||isNaN(t.ticketQuantity)||t.ticketQuantity<=0)&&(f.ticketQuantity="Ticket quantity must be a positive number."),(!t.ticketPrice||isNaN(t.ticketPrice)||t.ticketPrice<=0)&&(f.ticketPrice="Ticket price must be a positive number."),f},d=async f=>{f.preventDefault();const p=u();if(Object.keys(p).length>0){r(p);return}r({});try{const y=a.currentUser;if(!y||!y.uid)throw new Error("User is not logged in.");let v="";if(t.eventImage){const _=g6(b6,`event-images/${Date.now()}`);await f6(_,t.eventImage,"data_url"),v=await p6(_)}const x=Gn(st,`users/${y.uid}/events`);await Wf(x,{eventName:t.eventName,location:t.location,date:t.date,time:t.time,ticketQuantity:parseInt(t.ticketQuantity),ticketPrice:parseFloat(t.ticketPrice),eventImage:v,createdAt:at.now()}),s("Event created successfully!"),e({eventName:"",location:"",date:"",time:"",ticketQuantity:"",ticketPrice:"",eventImage:""}),setTimeout(()=>{s(""),o("/manage-events")},2e3)}catch(y){console.error("Error creating event:",y),r({general:"An error occurred while creating the event. Please ensure you are logged in and try again."})}};return m.jsxs("div",{className:"container mx-auto mt-10 px-4 sm:px-6 md:px-8 bg-gray-900 text-white",children:[m.jsx("h1",{className:"text-3xl font-semibold mb-6 text-center",children:"Create New Event"}),i&&m.jsx("p",{className:"text-green-500 mb-4 text-center",children:i}),n.general&&m.jsx("p",{className:"text-red-500 mb-4 text-center",children:n.general}),m.jsxs("form",{onSubmit:d,className:"space-y-6 max-w-2xl mx-auto bg-gray-800 p-6 rounded-lg shadow-lg",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Event Image"}),m.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),t.eventImage&&m.jsx("img",{src:t.eventImage,alt:"Event Preview",className:"w-32 h-32 object-cover mt-4 rounded border-2 border-gray-600"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Event Name"}),m.jsx("input",{type:"text",name:"eventName",value:t.eventName,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.eventName&&m.jsx("p",{className:"text-red-500",children:n.eventName})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Location"}),m.jsx("input",{type:"text",name:"location",value:t.location,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.location&&m.jsx("p",{className:"text-red-500",children:n.location})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Date"}),m.jsx("input",{type:"date",name:"date",value:t.date,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.date&&m.jsx("p",{className:"text-red-500",children:n.date})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Time"}),m.jsx("input",{type:"time",name:"time",value:t.time,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.time&&m.jsx("p",{className:"text-red-500",children:n.time})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Ticket Quantity"}),m.jsx("input",{type:"number",name:"ticketQuantity",value:t.ticketQuantity,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.ticketQuantity&&m.jsx("p",{className:"text-red-500",children:n.ticketQuantity})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Ticket Price"}),m.jsx("input",{type:"number",name:"ticketPrice",value:t.ticketPrice,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.ticketPrice&&m.jsx("p",{className:"text-red-500",children:n.ticketPrice})]}),m.jsx("button",{type:"submit",className:"w-full py-3 mt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Event"})]})]})}function A6(){const{id:t}=rN(),e=Sn(),[n,r]=M.useState({eventName:"",location:"",date:"",time:"",ticketQuantity:"",ticketPrice:"",eventImage:""}),[i,s]=M.useState({}),[o,a]=M.useState(""),[l,c]=M.useState(!0),u=()=>{c(!0);const v=(JSON.parse(localStorage.getItem("events"))||[]).find(x=>x.id===parseInt(t));v?(r(v),c(!1)):(c(!1),e("/manage-events"))};M.useEffect(()=>{t&&u()},[t]);const d=y=>{const{name:v,value:x}=y.target;r(_=>({..._,[v]:x}))},f=()=>{const y={};return n.eventName||(y.eventName="Event name is required."),n.location||(y.location="Location is required."),n.date||(y.date="Date is required."),n.time||(y.time="Time is required."),(!n.ticketQuantity||isNaN(n.ticketQuantity)||n.ticketQuantity<=0)&&(y.ticketQuantity="Ticket quantity must be a positive number."),(!n.ticketPrice||isNaN(n.ticketPrice)||n.ticketPrice<=0)&&(y.ticketPrice="Ticket price must be a positive number."),y},p=y=>{y.preventDefault();const v=f();if(Object.keys(v).length>0){s(v);return}s({});const _=(JSON.parse(localStorage.getItem("events"))||[]).map(w=>w.id===parseInt(t)?{...w,...n}:w);localStorage.setItem("events",JSON.stringify(_)),a("Event updated successfully!"),setTimeout(()=>a(""),3e3),e("/manage-events")};return m.jsx("div",{className:"edit-event-page",children:m.jsxs("div",{className:"edit-event-container",children:[m.jsx("h1",{className:"page-title",children:"Edit Event"}),o&&m.jsx("p",{className:"success-message",children:o}),l?m.jsx("p",{className:"loading-message",children:"Loading event details..."}):m.jsxs("form",{onSubmit:p,className:"edit-event-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Event Name"}),m.jsx("input",{type:"text",name:"eventName",value:n.eventName,onChange:d,placeholder:"Enter event name"}),i.eventName&&m.jsx("p",{className:"error-text",children:i.eventName})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Location"}),m.jsx("input",{type:"text",name:"location",value:n.location,onChange:d,placeholder:"Enter location"}),i.location&&m.jsx("p",{className:"error-text",children:i.location})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Date"}),m.jsx("input",{type:"date",name:"date",value:n.date,onChange:d}),i.date&&m.jsx("p",{className:"error-text",children:i.date})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Time"}),m.jsx("input",{type:"time",name:"time",value:n.time,onChange:d}),i.time&&m.jsx("p",{className:"error-text",children:i.time})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Ticket Quantity"}),m.jsx("input",{type:"number",name:"ticketQuantity",value:n.ticketQuantity,onChange:d,placeholder:"Enter ticket quantity"}),i.ticketQuantity&&m.jsx("p",{className:"error-text",children:i.ticketQuantity})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Ticket Price"}),m.jsx("input",{type:"number",name:"ticketPrice",value:n.ticketPrice,onChange:d,placeholder:"Enter ticket price"}),i.ticketPrice&&m.jsx("p",{className:"error-text",children:i.ticketPrice})]}),m.jsx("button",{type:"submit",className:"submit-btn",children:"Update Event"})]})]})})}function R6(){const{user:t}=so(),[e,n]=M.useState([]),[r,i]=M.useState(null),[s,o]=M.useState({}),[a,l]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(""),p=async()=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}console.log("Fetching events for user:",t.uid);try{const E=Gn(st,"users",t.uid,"events"),I=await Gs(E);console.log("All fetched documents:",I.docs.map(O=>O.data()));const N=I.docs.map(O=>({id:O.id,...O.data()}));console.log("Filtered events for user:",N),n(N)}catch(E){console.error("Error fetching events:",E),f("Failed to load events. Please try again later.")}},y=async E=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}try{const I=Gn(st,"users",t.uid,"events"),N=await Wf(I,E);n(O=>[...O,{id:N.id,...E}])}catch(I){console.error("Error creating event:",I),f("Failed to create the event. Please try again later.")}},v=async E=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}try{await Xc(Yt(st,"users",t.uid,"events",E)),n(I=>I.filter(N=>N.id!==E))}catch(I){console.error("Error deleting event:",I),f("Failed to delete the event. Please try again later.")}},x=E=>{i(E),o(E),l(!0)},_=async()=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}try{await Bd(Yt(st,"users",t.uid,"events",r.id),s),n(E=>E.map(I=>I.id===r.id?{id:r.id,...s}:I)),l(!1),i(null)}catch(E){console.error("Error updating event:",E),f("Failed to update the event. Please try again later.")}},w=E=>{const{name:I,value:N}=E.target;o({...s,[I]:N})};return M.useEffect(()=>{p()},[t]),m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-500 min-h-screen text-white relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-96 h-96 bg-indigo-400 opacity-30 blur-3xl -top-10 -left-10 animate-pulse"}),m.jsx("div",{className:"absolute w-72 h-72 bg-pink-500 opacity-30 blur-2xl -bottom-10 -right-20 animate-pulse"})]}),m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide",children:["My ",m.jsx("span",{className:"text-accent",children:"Events"})]}),m.jsx("button",{onClick:()=>u(E=>!E),className:"px-6 py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold rounded-lg shadow-lg hover:opacity-90 transition-transform transform hover:scale-105",children:c?"Cancel":"Create Event"})]}),c&&m.jsx(cC,{onEventCreated:y}),d&&m.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded-lg text-center mb-4",children:d}),m.jsx("h2",{className:"text-3xl font-semibold mb-4",children:"Created Events"}),e.length>0?m.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(E=>m.jsxs("li",{className:"bg-gradient-to-b from-purple-600 via-indigo-600 to-purple-700 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105",children:[E.eventImage&&m.jsx("img",{src:E.eventImage,alt:E.eventName,className:"w-full h-48 object-cover rounded-md mb-4"}),m.jsx("h3",{className:"text-xl font-bold text-accent mb-2",children:E.eventName}),m.jsxs("p",{className:"text-light mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Location:"})," ",E.location]}),m.jsxs("p",{className:"text-light mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",E.date]}),m.jsxs("p",{className:"text-light mb-2",children:[m.jsx("span",{className:"font-semibold",children:"Time:"})," ",E.time]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:()=>x(E),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg shadow-md hover:opacity-90",children:"Edit"}),m.jsx("button",{onClick:()=>v(E.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg shadow-md hover:opacity-90",children:"Delete"})]})]},E.id))}):m.jsx("p",{className:"text-lg text-center mt-10",children:"No events created yet!"}),a&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white text-gray-800 p-6 rounded-lg shadow-lg w-96",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Event"}),m.jsxs("form",{children:[m.jsx("input",{type:"text",name:"eventName",value:s.eventName,onChange:w,placeholder:"Event Name",className:"w-full px-4 py-2 border rounded-lg mb-4"}),m.jsx("button",{type:"button",onClick:_,className:"w-full px-4 py-2 bg-green-500 text-white font-bold rounded-lg hover:bg-green-600",children:"Save"})]})]})})]})}function N6(){const{favorites:t,removeFavorite:e,handleSearch:n,searchTerm:r}=Jc(),{user:i}=so(),s=e_(),[o,a]=M.useState(!1),[l,c]=M.useState(null),[u,d]=M.useState(1),f=5,p=Sn(),y=u*f,v=y-f,x=t.slice(v,y),_=O=>{c(O),a(!0)},w=async()=>{if(l)try{const O=Yt(s,`users/${i.uid}/favorites`,l.id);await Xc(O),e(l.id),a(!1),c(null)}catch(O){console.error("Error removing favorite from Firestore:",O)}},E=()=>{u<Math.ceil(t.length/f)&&d(u+1)},I=()=>{u>1&&d(u-1)},N=()=>{p(-1)};return m.jsxs("div",{className:"container mx-auto mt-10 px-6 py-8 bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800 min-h-screen text-white",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-96 h-96 bg-indigo-500 opacity-30 blur-3xl -top-32 -left-20 animate-pulse"}),m.jsx("div",{className:"absolute w-80 h-80 bg-purple-400 opacity-30 blur-3xl -bottom-16 -right-16 animate-pulse"})]}),m.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide text-center mb-8",children:["My ",m.jsx("span",{className:"text-yellow-400",children:"Favorite"})," Events"]}),m.jsx("div",{className:"mb-8",children:m.jsx("input",{type:"text",placeholder:"Search by name or location...",value:r,onChange:O=>n(O.target.value),className:"w-full p-4 text-black rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-yellow-500"})}),x.length>0?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(O=>m.jsxs("div",{className:"bg-gradient-to-b from-gray-700 via-gray-800 to-gray-900 rounded-lg shadow-lg overflow-hidden transform hover:scale-105 transition-transform",children:[m.jsx("img",{src:O.image||"https://via.placeholder.com/150",alt:O.name||"Unnamed Event",className:"w-full h-48 object-cover"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-2xl font-bold mb-2 text-yellow-400",children:O.name||"Unnamed Event"}),m.jsxs("p",{className:"mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Location:"})," ",O.location||"N/A"]}),m.jsxs("p",{className:"mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",O.date||"N/A"]}),m.jsxs("p",{className:"mb-3",children:[m.jsx("span",{className:"font-semibold",children:"Time:"})," ",O.time||"N/A"]}),m.jsx("button",{onClick:()=>_(O),className:"w-full py-2 bg-red-600 rounded-lg text-white hover:bg-red-700",children:"Remove from Favorites"})]})]},O.id))}):m.jsx("p",{className:"text-center text-gray-200 text-lg mt-16",children:"No favorite events yet. Add some from the events list!"}),m.jsxs("div",{className:"flex justify-between items-center mt-12",children:[m.jsx("button",{onClick:I,disabled:u===1,className:"px-6 py-2 bg-gray-600 rounded-lg hover:bg-gray-700 disabled:opacity-50",children:"Previous"}),m.jsxs("p",{className:"text-lg",children:["Page ",u," of ",Math.ceil(t.length/f)]}),m.jsx("button",{onClick:E,disabled:u===Math.ceil(t.length/f),className:"px-6 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Next"})]}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx("button",{onClick:N,className:"px-6 py-3 bg-yellow-500 rounded-lg text-black font-bold hover:bg-yellow-600",children:"Go Back"})}),o&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96 text-black",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Confirm Removal"}),m.jsxs("p",{className:"mb-4",children:["Are you sure you want to remove"," ",m.jsx("span",{className:"font-semibold text-indigo-600",children:l==null?void 0:l.name}),"?"]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("button",{onClick:w,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, Remove"}),m.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2 bg-gray-400 rounded-lg hover:bg-gray-500",children:"Cancel"})]})]})})]})}const D6=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!O6(i,s)&&r||Object.defineProperty(t,n,s)},O6=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},M6=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},L6=(t,e)=>`/* Wrapped ${t}*/
${e}`,V6=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),j6=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),F6=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=L6.bind(null,r,e.toString());Object.defineProperty(i,"name",j6),Object.defineProperty(t,"toString",{...V6,value:i})},U6=(t,e,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=t;for(const i of Reflect.ownKeys(e))D6(t,e,i,n);return M6(t,e),F6(t,e,r),t};var B6=U6,qm={exports:{}},z6=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};(function(t,e){var n=Cu&&Cu.__awaiter||function(o,a,l,c){return new(l||(l=Promise))(function(u,d){function f(v){try{y(c.next(v))}catch(x){d(x)}}function p(v){try{y(c.throw(v))}catch(x){d(x)}}function y(v){v.done?u(v.value):new l(function(x){x(v.value)}).then(f,p)}y((c=c.apply(o,a||[])).next())})},r=Cu&&Cu.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(z6);function s(o,a="maxAge"){let l,c,u;const d=()=>n(this,void 0,void 0,function*(){if(l!==void 0)return;const y=v=>n(this,void 0,void 0,function*(){u=i.default();const x=v[1][a]-Date.now();if(x<=0){o.delete(v[0]),u.resolve();return}return l=v[0],c=setTimeout(()=>{o.delete(v[0]),u&&u.resolve()},x),typeof c.unref=="function"&&c.unref(),u.promise});try{for(const v of o)yield y(v)}catch{}l=void 0}),f=()=>{l=void 0,c!==void 0&&(clearTimeout(c),c=void 0),u!==void 0&&(u.reject(void 0),u=void 0)},p=o.set.bind(o);return o.set=(y,v)=>{o.has(y)&&o.delete(y);const x=p(y,v);return l&&l===y&&f(),d(),x},d(),o}e.default=s,t.exports=s,t.exports.default=s})(qm,qm.exports);var $6=qm.exports;const W6=B6,H6=$6,ig=new WeakMap,uC=new WeakMap,Hd=(t,{cacheKey:e,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&H6(n);const i=function(...s){const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s);return n.set(o,{data:l,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),l};return W6(i,t,{ignoreNonConfigurable:!0}),uC.set(i,n),i};Hd.decorator=(t={})=>(e,n,r)=>{const i=e[n];if(typeof i!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!ig.has(this)){const s=Hd(i,t);return ig.set(this,s),s}return ig.get(this)}};Hd.clear=t=>{const e=uC.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var q6=Hd;const hC=G1(q6);function K6(t){return typeof t=="string"}function G6(t,e,n){return n.indexOf(t)===e}function Y6(t){return t.toLowerCase()===t}function hb(t){return t.indexOf(",")===-1?t:t.split(",")}function Km(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return Km(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return Km(n)}if(t.indexOf("-")===-1||!Y6(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function Q6(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,u=a;c<u.length;c++){var d=u[c];l=l.concat(hb(d))}var f=navigator.language,p=f&&hb(f);o=o.concat(l,p)}return r&&o.push(s),o.filter(K6).map(Km).filter(G6)}var X6=hC(Q6,{cacheKey:JSON.stringify});function J6(t){return X6(t)[0]||null}var dC=hC(J6,{cacheKey:JSON.stringify});function Jr(t,e,n){return function(i,s){s===void 0&&(s=n);var o=t(i)+s;return e(o)}}function Zc(t){return function(n){return new Date(t(n).getTime()-1)}}function eu(t,e){return function(r){return[t(r),e(r)]}}function Ue(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function ts(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function Gf(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function Ia(t){var e=Ue(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var Z6=Jr(Ue,Ia,-100),fC=Jr(Ue,Ia,100),m_=Zc(fC),e5=Jr(Ue,m_,-100),pC=eu(Ia,m_);function ns(t){var e=Ue(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var gC=Jr(Ue,ns,-10),y_=Jr(Ue,ns,10),Yf=Zc(y_),mC=Jr(Ue,Yf,-10),yC=eu(ns,Yf);function Ca(t){var e=Ue(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var vC=Jr(Ue,Ca,-1),v_=Jr(Ue,Ca,1),Qf=Zc(v_),_C=Jr(Ue,Qf,-1),t5=eu(Ca,Qf);function __(t,e){return function(r,i){i===void 0&&(i=e);var s=Ue(r),o=ts(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function oo(t){var e=Ue(t),n=ts(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}var wC=__(oo,-1),w_=__(oo,1),tu=Zc(w_),xC=__(tu,-1),n5=eu(oo,tu);function r5(t,e){return function(r,i){i===void 0&&(i=e);var s=Ue(r),o=ts(r),a=Gf(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function nu(t){var e=Ue(t),n=ts(t),r=Gf(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}var i5=r5(nu,1),x_=Zc(i5),s5=eu(nu,x_);function bC(t){return Gf(tu(t))}var kt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},o5={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},b_=[0,1,2,3,4,5,6],sg=new Map;function a5(t){return function(n,r){var i=n||dC();sg.has(i)||sg.set(i,new Map);var s=sg.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function l5(t){var e=new Date(t);return new Date(e.setHours(12))}function ao(t){return function(e,n){return a5(t)(e,l5(n))}}var c5={day:"numeric"},u5={day:"numeric",month:"long",year:"numeric"},h5={month:"long"},d5={month:"long",year:"numeric"},f5={weekday:"short"},p5={weekday:"long"},g5={year:"numeric"},m5=ao(c5),y5=ao(u5),v5=ao(h5),EC=ao(d5),_5=ao(f5),w5=ao(p5),Xf=ao(g5),x5=b_[0],b5=b_[5],db=b_[6];function Sc(t,e){e===void 0&&(e=kt.ISO_8601);var n=t.getDay();switch(e){case kt.ISO_8601:return(n+6)%7;case kt.ISLAMIC:return(n+1)%7;case kt.HEBREW:case kt.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function E5(t){var e=Ia(t);return Ue(e)}function T5(t){var e=ns(t);return Ue(e)}function Gm(t,e){e===void 0&&(e=kt.ISO_8601);var n=Ue(t),r=ts(t),i=t.getDate()-Sc(t,e);return new Date(n,r,i)}function S5(t,e){e===void 0&&(e=kt.ISO_8601);var n=e===kt.GREGORY?kt.GREGORY:kt.ISO_8601,r=Gm(t,e),i=Ue(t)+1,s,o;do s=new Date(i,0,n===kt.ISO_8601?4:1),o=Gm(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Ls(t,e){switch(t){case"century":return Ia(e);case"decade":return ns(e);case"year":return Ca(e);case"month":return oo(e);case"day":return nu(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function k5(t,e){switch(t){case"century":return Z6(e);case"decade":return gC(e);case"year":return vC(e);case"month":return wC(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function TC(t,e){switch(t){case"century":return fC(e);case"decade":return y_(e);case"year":return v_(e);case"month":return w_(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function I5(t,e){switch(t){case"decade":return gC(e,-100);case"year":return vC(e,-10);case"month":return wC(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function C5(t,e){switch(t){case"decade":return y_(e,100);case"year":return v_(e,10);case"month":return w_(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function SC(t,e){switch(t){case"century":return m_(e);case"decade":return Yf(e);case"year":return Qf(e);case"month":return tu(e);case"day":return x_(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function P5(t,e){switch(t){case"century":return e5(e);case"decade":return mC(e);case"year":return _C(e);case"month":return xC(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function A5(t,e){switch(t){case"decade":return mC(e,-100);case"year":return _C(e,-10);case"month":return xC(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function fb(t,e){switch(t){case"century":return pC(e);case"decade":return yC(e);case"year":return t5(e);case"month":return n5(e);case"day":return s5(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function R5(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Ls(t,r[0]),SC(t,r[1])]}function kC(t,e,n){return n.map(function(r){return(e||Xf)(t,r)}).join("  ")}function N5(t,e,n){return kC(t,e,pC(n))}function IC(t,e,n){return kC(t,e,yC(n))}function D5(t){return t.getDay()===new Date().getDay()}function CC(t,e){e===void 0&&(e=kt.ISO_8601);var n=t.getDay();switch(e){case kt.ISLAMIC:case kt.HEBREW:return n===b5||n===db;case kt.ISO_8601:case kt.GREGORY:return n===db||n===x5;default:throw new Error("Unsupported calendar type.")}}var er="react-calendar__navigation";function O5(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?EC:r,s=t.formatYear,o=s===void 0?Xf:s,a=t.locale,l=t.maxDate,c=t.minDate,u=t.navigationAriaLabel,d=u===void 0?"":u,f=t.navigationAriaLive,p=t.navigationLabel,y=t.next2AriaLabel,v=y===void 0?"":y,x=t.next2Label,_=x===void 0?"":x,w=t.nextAriaLabel,E=w===void 0?"":w,I=t.nextLabel,N=I===void 0?"":I,O=t.prev2AriaLabel,S=O===void 0?"":O,T=t.prev2Label,k=T===void 0?"":T,P=t.prevAriaLabel,R=P===void 0?"":P,D=t.prevLabel,A=D===void 0?"":D,Z=t.setActiveStartDate,Y=t.showDoubleView,G=t.view,re=t.views,U=re.indexOf(G)>0,W=G!=="century",H=k5(G,e),ie=W?I5(G,e):void 0,X=TC(G,e),ne=W?C5(G,e):void 0,me=function(){if(H.getFullYear()<0)return!0;var Be=P5(G,e);return c&&c>=Be}(),be=W&&function(){if(ie.getFullYear()<0)return!0;var Be=A5(G,e);return c&&c>=Be}(),Ee=l&&l<X,et=W&&l&&l<ne;function yr(){Z(H,"prev")}function Qn(){Z(ie,"prev2")}function Zr(){Z(X,"next")}function ei(){Z(ne,"next2")}function ti(Be){var vr=function(){switch(G){case"century":return N5(a,o,Be);case"decade":return IC(a,o,Be);case"year":return o(a,Be);case"month":return i(a,Be);default:throw new Error("Invalid view: ".concat(G,"."))}}();return p?p({date:Be,label:vr,locale:a||dC()||void 0,view:G}):vr}function is(){var Be="".concat(er,"__label");return m.jsxs("button",{"aria-label":d,"aria-live":f,className:Be,disabled:!U,onClick:n,style:{flexGrow:1},type:"button",children:[m.jsx("span",{className:"".concat(Be,"__labelText ").concat(Be,"__labelText--from"),children:ti(e)}),Y?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"".concat(Be,"__divider"),children:"  "}),m.jsx("span",{className:"".concat(Be,"__labelText ").concat(Be,"__labelText--to"),children:ti(X)})]}):null]})}return m.jsxs("div",{className:er,children:[k!==null&&W?m.jsx("button",{"aria-label":S,className:"".concat(er,"__arrow ").concat(er,"__prev2-button"),disabled:be,onClick:Qn,type:"button",children:k}):null,A!==null&&m.jsx("button",{"aria-label":R,className:"".concat(er,"__arrow ").concat(er,"__prev-button"),disabled:me,onClick:yr,type:"button",children:A}),is(),N!==null&&m.jsx("button",{"aria-label":E,className:"".concat(er,"__arrow ").concat(er,"__next-button"),disabled:Ee,onClick:Zr,type:"button",children:N}),_!==null&&W?m.jsx("button",{"aria-label":v,className:"".concat(er,"__arrow ").concat(er,"__next2-button"),disabled:et,onClick:ei,type:"button",children:_}):null]})}var Fo=function(){return Fo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fo.apply(this,arguments)},M5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function pb(t){return"".concat(t,"%")}function E_(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=M5(t,["children","className","count","direction","offset","style","wrap"]);return m.jsx("div",Fo({className:n,style:Fo({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l,{children:M.Children.map(e,function(c,u){var d=s&&u===0?pb(100*s/r):null;return M.cloneElement(c,Fo(Fo({},c.props),{style:{flexBasis:pb(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:d,marginInlineStart:d,marginInlineEnd:0}}))})}))}function L5(t,e,n){return e&&e>t?e:n&&n<t?n:t}function kc(t,e){return e[0]<=t&&e[1]>=t}function V5(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function PC(t,e){return kc(t[0],e)||kc(t[1],e)}function gb(t,e,n){var r=PC(e,t),i=[];if(r){i.push(n);var s=kc(t[0],e),o=kc(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function j5(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function F5(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var p=t.dateType;if(!p)throw new Error("dateType is required when date is not an array of two dates");return fb(p,n)}();if(kc(o,a)&&s.push("".concat(i,"--now")),!e||!j5(e))return s;var l=function(){if(Array.isArray(e))return e;var p=t.valueType;if(!p)throw new Error("valueType is required when value is not an array of two dates");return fb(p,e)}();V5(l,a)?s.push("".concat(i,"--active")):PC(l,a)&&s.push("".concat(i,"--hasActive"));var c=gb(l,a,"".concat(i,"--range"));s.push.apply(s,c);var u=Array.isArray(e)?e:[e];if(r&&u.length===1){var d=r>l[0]?[l[0],r]:[r,l[0]],f=gb(d,a,"".concat(i,"--hover"));s.push.apply(s,f)}return s}function Jf(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,u=t.start,d=t.step,f=d===void 0?1:d,p=t.value,y=t.valueType,v=[],x=u;x<=o;x+=f){var _=i(x);v.push(c({classes:F5({date:_,dateType:s,hover:a,value:p,valueType:y}),date:_}))}return m.jsx(E_,{className:e,count:r,offset:l,wrap:!0,children:v})}function Zf(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,u=t.minDateTransform,d=t.onClick,f=t.onMouseOver,p=t.style,y=t.tileClassName,v=t.tileContent,x=t.tileDisabled,_=t.view,w=M.useMemo(function(){var I={activeStartDate:e,date:i,view:_};return typeof y=="function"?y(I):y},[e,i,y,_]),E=M.useMemo(function(){var I={activeStartDate:e,date:i,view:_};return typeof v=="function"?v(I):v},[e,i,v,_]);return m.jsxs("button",{className:An(r,w),disabled:c&&u(c)>i||a&&l(a)<i||(x==null?void 0:x({activeStartDate:e,date:i,view:_})),onClick:d?function(I){return d(i,I)}:void 0,onFocus:f?function(){return f(i)}:void 0,onMouseOver:f?function(){return f(i)}:void 0,style:p,type:"button",children:[s?m.jsx("abbr",{"aria-label":s(o,i),children:n}):n,E]})}var Ym=function(){return Ym=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ym.apply(this,arguments)},U5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},mb="react-calendar__century-view__decades__decade";function B5(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Xf:i,o=U5(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(mb),Ia(a).getFullYear()!==r&&c.push("".concat(mb,"--neighboringCentury")),m.jsx(Zf,Ym({},o,{classes:c,maxDateTransform:Yf,minDateTransform:ns,view:"century",children:IC(l,s,a)}))}var Qm=function(){return Qm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qm.apply(this,arguments)},yb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function z5(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=yb(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=E5(e),l=a+(r?119:99);return m.jsx(Jf,{className:"react-calendar__century-view__decades",dateTransform:ns,dateType:"decade",end:l,hover:n,renderTile:function(c){var u=c.date,d=yb(c,["date"]);return m.jsx(B5,Qm({},o,d,{activeStartDate:e,currentCentury:a,date:u}),u.getTime())},start:a,step:10,value:i,valueType:s})}var Xm=function(){return Xm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xm.apply(this,arguments)};function $5(t){function e(){return m.jsx(z5,Xm({},t))}return m.jsx("div",{className:"react-calendar__century-view",children:e()})}var Jm=function(){return Jm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jm.apply(this,arguments)},W5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},vb="react-calendar__decade-view__years__year";function H5(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Xf:i,o=W5(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(vb),ns(a).getFullYear()!==r&&c.push("".concat(vb,"--neighboringDecade")),m.jsx(Zf,Jm({},o,{classes:c,maxDateTransform:Qf,minDateTransform:Ca,view:"decade",children:s(l,a)}))}var Zm=function(){return Zm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zm.apply(this,arguments)},_b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function q5(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=_b(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=T5(e),l=a+(r?11:9);return m.jsx(Jf,{className:"react-calendar__decade-view__years",dateTransform:Ca,dateType:"year",end:l,hover:n,renderTile:function(c){var u=c.date,d=_b(c,["date"]);return m.jsx(H5,Zm({},o,d,{activeStartDate:e,currentDecade:a,date:u}),u.getTime())},start:a,value:i,valueType:s})}var ey=function(){return ey=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ey.apply(this,arguments)};function K5(t){function e(){return m.jsx(q5,ey({},t))}return m.jsx("div",{className:"react-calendar__decade-view",children:e()})}var ty=function(){return ty=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ty.apply(this,arguments)},G5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},wb=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},Y5="react-calendar__year-view__months__month";function Q5(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?v5:r,s=t.formatMonthYear,o=s===void 0?EC:s,a=G5(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return m.jsx(Zf,ty({},a,{classes:wb(wb([],n,!0),[Y5],!1),formatAbbr:o,maxDateTransform:tu,minDateTransform:oo,view:"year",children:i(c,l)}))}var ny=function(){return ny=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ny.apply(this,arguments)},xb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function X5(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=xb(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=Ue(e);return m.jsx(Jf,{className:"react-calendar__year-view__months",dateTransform:function(c){var u=new Date;return u.setFullYear(l,c,1),oo(u)},dateType:"month",end:a,hover:n,renderTile:function(c){var u=c.date,d=xb(c,["date"]);return m.jsx(Q5,ny({},s,d,{activeStartDate:e,date:u}),u.getTime())},start:o,value:r,valueType:i})}var ry=function(){return ry=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ry.apply(this,arguments)};function J5(t){function e(){return m.jsx(X5,ry({},t))}return m.jsx("div",{className:"react-calendar__year-view",children:e()})}var iy=function(){return iy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},iy.apply(this,arguments)},Z5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},og="react-calendar__month-view__days__day";function e3(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?m5:s,a=t.formatLongDate,l=a===void 0?y5:a,c=Z5(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=c.date,d=c.locale,f=[];return r&&f.push.apply(f,r),f.push(og),CC(u,e)&&f.push("".concat(og,"--weekend")),u.getMonth()!==i&&f.push("".concat(og,"--neighboringMonth")),m.jsx(Zf,iy({},c,{classes:f,formatAbbr:l,maxDateTransform:x_,minDateTransform:nu,view:"month",children:o(d,u)}))}var sy=function(){return sy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},sy.apply(this,arguments)},bb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function t3(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=bb(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=Ue(e),u=ts(e),d=i||s,f=Sc(e,n),p=d?0:f,y=(d?-f:0)+1,v=function(){if(i)return y+6*7-1;var x=bC(e);if(s){var _=new Date;_.setFullYear(c,u,x),_.setHours(0,0,0,0);var w=7-Sc(_,n)-1;return x+w}return x}();return m.jsx(Jf,{className:"react-calendar__month-view__days",count:7,dateTransform:function(x){var _=new Date;return _.setFullYear(c,u,x),nu(_)},dateType:"day",hover:r,end:v,renderTile:function(x){var _=x.date,w=bb(x,["date"]);return m.jsx(e3,sy({},l,w,{activeStartDate:e,calendarType:n,currentMonthIndex:u,date:_}),_.getTime())},offset:p,start:y,value:o,valueType:a})}var AC="react-calendar__month-view__weekdays",ag="".concat(AC,"__weekday");function n3(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?_5:n,i=t.formatWeekday,s=i===void 0?w5:i,o=t.locale,a=t.onMouseLeave,l=new Date,c=oo(l),u=Ue(c),d=ts(c),f=[],p=1;p<=7;p+=1){var y=new Date(u,d,p-Sc(c,e)),v=s(o,y);f.push(m.jsx("div",{className:An(ag,D5(y)&&"".concat(ag,"--current"),CC(y,e)&&"".concat(ag,"--weekend")),children:m.jsx("abbr",{"aria-label":v,title:v,children:r(o,y).replace(".","")})},p))}return m.jsx(E_,{className:AC,count:7,onFocus:a,onMouseOver:a,children:f})}var qd=function(){return qd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qd.apply(this,arguments)},Eb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Tb="react-calendar__tile";function r3(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=m.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=Eb(t,["date","onClickWeekNumber","weekNumber"]);return m.jsx("button",qd({},a,{className:Tb,onClick:function(l){return s(o,i,l)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=Eb(t,["date","onClickWeekNumber","weekNumber"]);return m.jsx("div",qd({},a,{className:Tb,children:r}))}}function i3(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=bC(e),u=Sc(e,n),d=c-(7-u);return 1+Math.ceil(d/7)}(),a=function(){for(var c=Ue(e),u=ts(e),d=Gf(e),f=[],p=0;p<o;p+=1)f.push(Gm(new Date(c,u,d+p*7),n));return f}(),l=a.map(function(c){return S5(c,n)});return m.jsx(E_,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,u){var d=a[u];if(!d)throw new Error("date is not defined");return m.jsx(r3,{date:d,onClickWeekNumber:r,weekNumber:c},c)})})}var oy=function(){return oy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},oy.apply(this,arguments)},s3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function o3(t){if(t)for(var e=0,n=Object.entries(o5);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return kt.ISO_8601}function a3(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?o3(n):s,a=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,u=t.showWeekNumbers,d=s3(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function f(){return m.jsx(n3,{calendarType:o,formatShortWeekday:a,formatWeekday:l,locale:n,onMouseLeave:r})}function p(){return u?m.jsx(i3,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function y(){return m.jsx(t3,oy({calendarType:o},d))}var v="react-calendar__month-view";return m.jsx("div",{className:An(v,u?"".concat(v,"--weekNumbers"):""),children:m.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[p(),m.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[f(),y()]})]})})}var Uo=function(){return Uo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Uo.apply(this,arguments)},nh="react-calendar",Bh=["century","decade","year","month"],l3=["decade","year","month","day"],T_=new Date;T_.setFullYear(1,0,1);T_.setHours(0,0,0,0);var c3=new Date(864e13);function _l(t){return t instanceof Date?t:new Date(t)}function RC(t,e){return Bh.slice(Bh.indexOf(t),Bh.indexOf(e)+1)}function u3(t,e,n){var r=RC(e,n);return r.indexOf(t)!==-1}function S_(t,e,n){return t&&u3(t,e,n)?t:n}function NC(t){var e=Bh.indexOf(t);return l3[e]}function h3(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=_l(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function DC(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=h3(n,e);if(!o)return null;var a=NC(s),l=function(){switch(e){case 0:return Ls(a,o);case 1:return SC(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return L5(l,r,i)}var k_=function(t){return DC(t,0)},OC=function(t){return DC(t,1)},d3=function(t){return[k_,OC].map(function(e){return e(t)})};function MC(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=S_(o,i,n),l=k_({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Ls(a,l)}function f3(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,u=t.view,d=S_(u,l,o),f=e||n;return f?Ls(d,f):MC({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:u||i})}function lg(t){return t&&(!Array.isArray(t)||t.length===1)}function rh(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var p3=M.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,u=e.formatDay,d=e.formatLongDate,f=e.formatMonth,p=e.formatMonthYear,y=e.formatShortWeekday,v=e.formatWeekday,x=e.formatYear,_=e.goToRangeStartOnSelect,w=_===void 0?!0:_,E=e.inputRef,I=e.locale,N=e.maxDate,O=N===void 0?c3:N,S=e.maxDetail,T=S===void 0?"month":S,k=e.minDate,P=k===void 0?T_:k,R=e.minDetail,D=R===void 0?"century":R,A=e.navigationAriaLabel,Z=e.navigationAriaLive,Y=e.navigationLabel,G=e.next2AriaLabel,re=e.next2Label,U=e.nextAriaLabel,W=e.nextLabel,H=e.onActiveStartDateChange,ie=e.onChange,X=e.onClickDay,ne=e.onClickDecade,me=e.onClickMonth,be=e.onClickWeekNumber,Ee=e.onClickYear,et=e.onDrillDown,yr=e.onDrillUp,Qn=e.onViewChange,Zr=e.prev2AriaLabel,ei=e.prev2Label,ti=e.prevAriaLabel,is=e.prevLabel,Be=e.returnValue,vr=Be===void 0?"start":Be,$t=e.selectRange,co=e.showDoubleView,ou=e.showFixedNumberOfWeeks,Pa=e.showNavigation,Aa=Pa===void 0?!0:Pa,au=e.showNeighboringCentury,op=e.showNeighboringDecade,uo=e.showNeighboringMonth,Ra=uo===void 0?!0:uo,lu=e.showWeekNumbers,pt=e.tileClassName,xt=e.tileContent,ho=e.tileDisabled,fo=e.value,Na=e.view,cu=M.useState(a),ss=cu[0],os=cu[1],Da=M.useState(null),Oa=Da[0],uu=Da[1],hu=M.useState(Array.isArray(l)?l.map(function(le){return le!==null?_l(le):null}):l!=null?_l(l):null),as=hu[0],du=hu[1],Ma=M.useState(c),ls=Ma[0],po=Ma[1],gt=r||ss||f3({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:O,maxDetail:T,minDate:P,minDetail:D,value:fo,view:Na}),Ge=function(){var le=function(){return $t&&lg(as)?as:fo!==void 0?fo:as}();return le?Array.isArray(le)?le.map(function(xe){return xe!==null?_l(xe):null}):le!==null?_l(le):null:null}(),cs=NC(T),Ie=S_(Na||ls,D,T),hn=RC(D,T),us=$t?Oa:null,go=hn.indexOf(Ie)<hn.length-1,mt=hn.indexOf(Ie)>0,La=M.useCallback(function(le){var xe=function(){switch(vr){case"start":return k_;case"end":return OC;case"range":return d3;default:throw new Error("Invalid returnValue.")}}();return xe({maxDate:O,maxDetail:T,minDate:P,value:le})},[O,T,P,vr]),_r=M.useCallback(function(le,xe){os(le);var ze={action:xe,activeStartDate:le,value:Ge,view:Ie};H&&!rh(gt,le)&&H(ze)},[gt,H,Ge,Ie]),Xn=M.useCallback(function(le,xe){var ze=function(){switch(Ie){case"century":return ne;case"decade":return Ee;case"year":return me;case"month":return X;default:throw new Error("Invalid view: ".concat(Ie,"."))}}();ze&&ze(le,xe)},[X,ne,me,Ee,Ie]),Va=M.useCallback(function(le,xe){if(go){Xn(le,xe);var ze=hn[hn.indexOf(Ie)+1];if(!ze)throw new Error("Attempted to drill down from the lowest view.");os(le),po(ze);var Zt={action:"drillDown",activeStartDate:le,value:Ge,view:ze};H&&!rh(gt,le)&&H(Zt),Qn&&Ie!==ze&&Qn(Zt),et&&et(Zt)}},[gt,go,H,Xn,et,Qn,Ge,Ie,hn]),ja=M.useCallback(function(){if(mt){var le=hn[hn.indexOf(Ie)-1];if(!le)throw new Error("Attempted to drill up from the highest view.");var xe=Ls(le,gt);os(xe),po(le);var ze={action:"drillUp",activeStartDate:xe,value:Ge,view:le};H&&!rh(gt,xe)&&H(ze),Qn&&Ie!==le&&Qn(ze),yr&&yr(ze)}},[gt,mt,H,yr,Qn,Ge,Ie,hn]),Jn=M.useCallback(function(le,xe){var ze=Ge;Xn(le,xe);var Zt=$t&&!lg(ze),Wt;if($t)if(Zt)Wt=Ls(cs,le);else{if(!ze)throw new Error("previousValue is required");if(Array.isArray(ze))throw new Error("previousValue must not be an array");Wt=R5(cs,ze,le)}else Wt=La(le);var ds=!$t||Zt||w?MC({maxDate:O,maxDetail:T,minDate:P,minDetail:D,value:Wt,view:Ie}):null;xe.persist(),os(ds),du(Wt);var pu={action:"onChange",activeStartDate:ds,value:Wt,view:Ie};if(H&&!rh(gt,ds)&&H(pu),ie)if($t){var gu=lg(Wt);if(!gu)ie(Wt||null,xe);else if(i){if(Array.isArray(Wt))throw new Error("value must not be an array");ie([Wt||null,null],xe)}}else ie(Wt||null,xe)},[gt,i,La,w,O,T,P,D,H,ie,Xn,$t,Ge,cs,Ie]);function ap(le){uu(le)}function Fa(){uu(null)}M.useImperativeHandle(n,function(){return{activeStartDate:gt,drillDown:Va,drillUp:ja,onChange:Jn,setActiveStartDate:_r,value:Ge,view:Ie}},[gt,Va,ja,Jn,_r,Ge,Ie]);function hs(le){var xe=le?TC(Ie,gt):Ls(Ie,gt),ze=go?Va:Jn,Zt={activeStartDate:xe,hover:us,locale:I,maxDate:O,minDate:P,onClick:ze,onMouseOver:$t?ap:void 0,tileClassName:pt,tileContent:xt,tileDisabled:ho,value:Ge,valueType:cs};switch(Ie){case"century":return m.jsx($5,Uo({formatYear:x,showNeighboringCentury:au},Zt));case"decade":return m.jsx(K5,Uo({formatYear:x,showNeighboringDecade:op},Zt));case"year":return m.jsx(J5,Uo({formatMonth:f,formatMonthYear:p},Zt));case"month":return m.jsx(a3,Uo({calendarType:s,formatDay:u,formatLongDate:d,formatShortWeekday:y,formatWeekday:v,onClickWeekNumber:be,onMouseLeave:$t?Fa:void 0,showFixedNumberOfWeeks:typeof ou<"u"?ou:co,showNeighboringMonth:Ra,showWeekNumbers:lu},Zt));default:throw new Error("Invalid view: ".concat(Ie,"."))}}function fu(){return Aa?m.jsx(O5,{activeStartDate:gt,drillUp:ja,formatMonthYear:p,formatYear:x,locale:I,maxDate:O,minDate:P,navigationAriaLabel:A,navigationAriaLive:Z,navigationLabel:Y,next2AriaLabel:G,next2Label:re,nextAriaLabel:U,nextLabel:W,prev2AriaLabel:Zr,prev2Label:ei,prevAriaLabel:ti,prevLabel:is,setActiveStartDate:_r,showDoubleView:co,view:Ie,views:hn}):null}var Ua=Array.isArray(Ge)?Ge:[Ge];return m.jsxs("div",{className:An(nh,$t&&Ua.length===1&&"".concat(nh,"--selectRange"),co&&"".concat(nh,"--doubleView"),o),ref:E,children:[fu(),m.jsxs("div",{className:"".concat(nh,"__viewContainer"),onBlur:$t?Fa:void 0,onMouseLeave:$t?Fa:void 0,children:[hs(),co?hs(!0):null]})]})});function g3(){var o;const{searchResults:t}=Jc(),[e,n]=M.useState({}),[r,i]=M.useState(null);M.useEffect(()=>{const a=t.reduce((l,c)=>{const u=new Date(c.dates.start.localDate).toDateString();return l[u]||(l[u]=[]),l[u].push(c),l},{});n(a)},[t]);const s=a=>{i(a.toDateString())};return m.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-indigo-700 via-purple-800 to-blue-600 text-white px-6 py-8",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-96 h-96 bg-blue-500 opacity-30 blur-3xl -top-24 -left-16 animate-pulse"}),m.jsx("div",{className:"absolute w-80 h-80 bg-purple-400 opacity-30 blur-3xl bottom-0 right-0 animate-pulse"})]}),m.jsx("div",{className:"mb-8",children:m.jsx(lC,{})}),m.jsxs("div",{className:"text-center mb-10",children:[m.jsxs("h1",{className:"text-5xl font-extrabold tracking-wide",children:["Event ",m.jsx("span",{className:"text-yellow-400",children:"Calendar"})]}),m.jsx("p",{className:"text-lg mt-4 text-gray-200",children:"Click a date to view events or scroll through all events below."})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-black",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Calendar"}),m.jsx(p3,{onChange:s,tileClassName:({date:a})=>{const l=a.toDateString();return e[l]?"bg-blue-500 text-white rounded-full":""},className:"w-full"})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-black overflow-y-auto max-h-[75vh]",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6",children:r?`Events on ${r}`:"Select a Date"}),r&&((o=e[r])==null?void 0:o.length)>0?m.jsx("ul",{className:"space-y-6",children:e[r].map(a=>{var l,c,u;return m.jsxs("li",{className:"flex items-start space-x-4",children:[((l=a.images)==null?void 0:l[0])&&m.jsx("img",{src:a.images[0].url,alt:a.name,className:"w-20 h-20 object-cover rounded-md shadow-lg"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800",children:a.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",a.dates.start.localDate]}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Venue: ",((u=(c=a._embedded)==null?void 0:c.venues[0])==null?void 0:u.name)||"Unknown"]}),m.jsx(fc,{to:`/event/${a.id}`,state:{event:a},className:"text-indigo-600 hover:underline text-sm mt-2 block",children:"View Details"})]})]},a.id)})}):r?m.jsx("p",{className:"text-gray-600",children:"No events found for this date."}):m.jsx("p",{className:"text-gray-600",children:"Select a date to view events."})]})]}),m.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mt-10 text-black",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"All Events"}),Object.keys(e).length>0?Object.keys(e).map(a=>m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:a}),m.jsx("ul",{className:"space-y-4",children:e[a].map(l=>{var c,u,d;return m.jsxs("li",{className:"flex items-start space-x-4 border-b pb-4 last:border-none",children:[((c=l.images)==null?void 0:c[0])&&m.jsx("img",{src:l.images[0].url,alt:l.name,className:"w-16 h-16 object-cover rounded-md"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-medium text-gray-800",children:l.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",l.dates.start.localDate]}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Venue: ",((d=(u=l._embedded)==null?void 0:u.venues[0])==null?void 0:d.name)||"Unknown"]}),m.jsx(fc,{to:`/event/${l.id}`,state:{event:l},className:"text-blue-500 hover:underline text-sm mt-2 block",children:"View Details"})]})]},l.id)})})]},a)):m.jsx("p",{className:"text-gray-600",children:"No events found."})]})]})}function m3(){const t=Qr(),{eventId:e}=t.state||{},[n,r]=M.useState(null),[i,s]=M.useState([]),[o,a]=M.useState(""),[l,c]=M.useState(!0),[u,d]=M.useState({name:"",ticketCount:"",specialRequirements:""}),[f,p]=M.useState(""),[y,v]=M.useState("");M.useEffect(()=>{(async()=>{if(!e){a("No event ID provided!"),c(!1);return}try{const k=Ns().currentUser;if(!k||!k.uid)throw new Error("User is not logged in.");const P=Yt(st,`users/${k.uid}/events`,e),R=await l_(P);if(!R.exists()){a("No such event found!"),c(!1);return}const D=R.data();console.log("Fetched event data:",D),r({id:R.id,...D,totalTickets:D.totalTickets||D.ticketQuantity||0});const A=Gn(st,`users/${k.uid}/events/${e}/attendees`),Y=(await Gs(A)).docs.map(G=>({id:G.id,...G.data()}));console.log("Fetched attendees:",Y),s(Y)}catch(T){console.error("Error fetching event or attendees:",T),a("An error occurred while fetching the event or attendees.")}finally{c(!1)}})()},[e]);const x=S=>{const{name:T,value:k}=S.target;d({...u,[T]:k})},_=async S=>{if(S.preventDefault(),!u.name||!u.ticketCount||isNaN(u.ticketCount)){p("Please provide a valid name and ticket count.");return}const T=parseInt(u.ticketCount);if(T<=0){p("Ticket count must be a positive number.");return}if(n.ticketQuantity<T){p("Not enough tickets available.");return}p(""),v("");try{const P=Ns().currentUser;if(!P||!P.uid)throw new Error("User is not logged in.");const R=Yt(st,`users/${P.uid}/events`,e),D=n.ticketQuantity-T,A=(n.ticketsSold||0)+T;console.log("Updating Firestore with:",{ticketQuantity:D,ticketsSold:A}),await Bd(R,{ticketQuantity:D,ticketsSold:A,totalTickets:n.totalTickets});const Z=Gn(st,`users/${P.uid}/events/${e}/attendees`);await Wf(Z,{name:u.name,ticketCount:T,specialRequirements:u.specialRequirements||""}),r(Y=>{const G={...Y,ticketQuantity:D,ticketsSold:A};return console.log("Updated event state:",G),G}),s(Y=>{const G=[...Y,{name:u.name,ticketCount:T,specialRequirements:u.specialRequirements||""}];return console.log("Updated attendees state:",G),G}),v("Tickets purchased successfully!"),d({name:"",ticketCount:"",specialRequirements:""})}catch(k){console.error("Error processing ticket purchase:",k),p("An error occurred while purchasing tickets. Please try again.")}},w=async(S,T)=>{try{const P=Ns().currentUser;if(!P||!P.uid)throw new Error("User is not logged in.");const R=Yt(st,`users/${P.uid}/events/${e}/attendees`,S);await Xc(R);const D=Yt(st,`users/${P.uid}/events`,e),A=n.ticketQuantity+T,Z=n.ticketsSold-T;await Bd(D,{ticketQuantity:A,ticketsSold:Z,totalTickets:n.totalTickets}),r(Y=>{const G={...Y,ticketQuantity:A,ticketsSold:Z};return console.log("Updated event state after removal:",G),G}),s(Y=>Y.filter(G=>G.id!==S))}catch(k){console.error("Error removing attendee:",k),a("An error occurred while removing the attendee.")}},E=(n==null?void 0:n.totalTickets)||0,I=(n==null?void 0:n.ticketQuantity)||0,N=E>0?Math.round((E-I)/E*100):0;console.log(`Tickets Left: ${I}, Total Tickets: ${E}, Progress: ${N}`);const O=N>50?"green":N>20?"orange":"red";return m.jsx("div",{className:"container mx-auto mt-10 px-4 sm:px-6 md:px-8 bg-gray-900 text-white",children:o?m.jsx("p",{className:"text-red-500 text-center",children:o}):l?m.jsx("p",{className:"text-gray-500 text-center",children:"Loading event and attendees..."}):n?m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-semibold mb-6 text-center",children:["Attendees for ",n.eventName]}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("p",{children:["Tickets Sold: ",E-I," of ",E]}),m.jsx("div",{className:"w-full bg-gray-700 rounded-full h-6 mt-4 overflow-hidden",children:m.jsxs("div",{className:"h-6 text-sm text-center text-white",style:{width:`${N}%`,backgroundColor:O},children:[N,"% Sold"]})})]}),m.jsxs("form",{onSubmit:_,className:"space-y-4 max-w-xl mx-auto bg-gray-800 p-6 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Purchase Tickets"}),f&&m.jsx("p",{className:"text-red-500",children:f}),y&&m.jsx("p",{className:"text-green-500",children:y}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Name"}),m.jsx("input",{type:"text",name:"name",value:u.name,onChange:x,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Number of Tickets"}),m.jsx("input",{type:"number",name:"ticketCount",value:u.ticketCount,onChange:x,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Special Requirements"}),m.jsx("textarea",{name:"specialRequirements",value:u.specialRequirements,onChange:x,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"})]}),m.jsx("button",{type:"submit",className:"w-full py-3 mt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Purchase Tickets"})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Attendees List"}),i.length>0?m.jsx("ul",{className:"space-y-4",children:i.map(S=>m.jsxs("li",{className:"flex justify-between items-center bg-gray-800 p-4 rounded-lg mb-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold",children:S.name}),m.jsxs("p",{className:"text-sm text-gray-400",children:["Tickets: ",S.ticketCount]}),S.specialRequirements&&m.jsxs("p",{className:"text-sm text-gray-400",children:["Special Requirements:"," ",S.specialRequirements]})]}),m.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:()=>w(S.id,S.ticketCount),children:"Remove"})]},S.id))}):m.jsx("p",{className:"text-gray-500",children:"No attendees registered yet."})]})]}):m.jsx("p",{className:"text-gray-500 text-center",children:"No event details available."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ru(t){return t+.5|0}const xi=(t,e,n)=>Math.max(Math.min(t,n),e);function wl(t){return xi(ru(t*2.55),0,255)}function Vi(t){return xi(ru(t*255),0,255)}function Ir(t){return xi(ru(t/2.55)/100,0,1)}function Sb(t){return xi(ru(t*100),0,100)}const kn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ay=[..."0123456789ABCDEF"],y3=t=>ay[t&15],v3=t=>ay[(t&240)>>4]+ay[t&15],ih=t=>(t&240)>>4===(t&15),_3=t=>ih(t.r)&&ih(t.g)&&ih(t.b)&&ih(t.a);function w3(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&kn[t[1]]*17,g:255&kn[t[2]]*17,b:255&kn[t[3]]*17,a:e===5?kn[t[4]]*17:255}:(e===7||e===9)&&(n={r:kn[t[1]]<<4|kn[t[2]],g:kn[t[3]]<<4|kn[t[4]],b:kn[t[5]]<<4|kn[t[6]],a:e===9?kn[t[7]]<<4|kn[t[8]]:255})),n}const x3=(t,e)=>t<255?e(t):"";function b3(t){var e=_3(t)?y3:v3;return t?"#"+e(t.r)+e(t.g)+e(t.b)+x3(t.a,e):void 0}const E3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function LC(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function T3(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function S3(t,e,n){const r=LC(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function k3(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function I_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=k3(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function C_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Vi)}function P_(t,e,n){return C_(LC,t,e,n)}function I3(t,e,n){return C_(S3,t,e,n)}function C3(t,e,n){return C_(T3,t,e,n)}function VC(t){return(t%360+360)%360}function P3(t){const e=E3.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?wl(+e[5]):Vi(+e[5]));const i=VC(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=I3(i,s,o):e[1]==="hsv"?r=C3(i,s,o):r=P_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function A3(t,e){var n=I_(t);n[0]=VC(n[0]+e),n=P_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function R3(t){if(!t)return;const e=I_(t),n=e[0],r=Sb(e[1]),i=Sb(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ir(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const kb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ib={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function N3(){const t={},e=Object.keys(Ib),n=Object.keys(kb);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,kb[s]);s=parseInt(Ib[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let sh;function D3(t){sh||(sh=N3(),sh.transparent=[0,0,0,0]);const e=sh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const O3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function M3(t){const e=O3.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?wl(o):xi(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?wl(r):xi(r,0,255)),i=255&(e[4]?wl(i):xi(i,0,255)),s=255&(e[6]?wl(s):xi(s,0,255)),{r,g:i,b:s,a:n}}}function L3(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ir(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const cg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function V3(t,e,n){const r=wo(Ir(t.r)),i=wo(Ir(t.g)),s=wo(Ir(t.b));return{r:Vi(cg(r+n*(wo(Ir(e.r))-r))),g:Vi(cg(i+n*(wo(Ir(e.g))-i))),b:Vi(cg(s+n*(wo(Ir(e.b))-s))),a:t.a+n*(e.a-t.a)}}function oh(t,e,n){if(t){let r=I_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=P_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function jC(t,e){return t&&Object.assign(e||{},t)}function Cb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Vi(t[3]))):(e=jC(t,{r:0,g:0,b:0,a:1}),e.a=Vi(e.a)),e}function j3(t){return t.charAt(0)==="r"?M3(t):P3(t)}class Ic{constructor(e){if(e instanceof Ic)return e;const n=typeof e;let r;n==="object"?r=Cb(e):n==="string"&&(r=w3(e)||D3(e)||j3(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=jC(this._rgb);return e&&(e.a=Ir(e.a)),e}set rgb(e){this._rgb=Cb(e)}rgbString(){return this._valid?L3(this._rgb):void 0}hexString(){return this._valid?b3(this._rgb):void 0}hslString(){return this._valid?R3(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=V3(this._rgb,e._rgb,n)),this}clone(){return new Ic(this.rgb)}alpha(e){return this._rgb.a=Vi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ru(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return oh(this._rgb,2,e),this}darken(e){return oh(this._rgb,2,-e),this}saturate(e){return oh(this._rgb,1,e),this}desaturate(e){return oh(this._rgb,1,-e),this}rotate(e){return A3(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function br(){}const F3=(()=>{let t=0;return()=>t++})();function _e(t){return t==null}function je(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function pn(t,e){return Xe(t)?t:e}function ae(t,e){return typeof t>"u"?e:t}const U3=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,FC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Se(t,e,n,r){let i,s,o;if(je(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(fe(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Kd(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Gd(t){if(je(t))return t.map(Gd);if(fe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Gd(t[n[i]]);return e}return t}function UC(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function B3(t,e,n,r){if(!UC(t))return;const i=e[t],s=n[t];fe(i)&&fe(s)?Cc(i,s,r):e[t]=Gd(s)}function Cc(t,e,n){const r=je(e)?e:[e],i=r.length;if(!fe(t))return t;n=n||{};const s=n.merger||B3;let o;for(let a=0;a<i;++a){if(o=r[a],!fe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function zl(t,e){return Cc(t,e,{merger:z3})}function z3(t,e,n){if(!UC(t))return;const r=e[t],i=n[t];fe(r)&&fe(i)?zl(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Gd(i))}const Pb={"":t=>t,x:t=>t.x,y:t=>t.y};function $3(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function W3(t){const e=$3(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function qi(t,e){return(Pb[e]||(Pb[e]=W3(e)))(t)}function A_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Pc=t=>typeof t<"u",Ki=t=>typeof t=="function",Ab=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function H3(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Me=Math.PI,Oe=2*Me,q3=Oe+Me,Yd=Number.POSITIVE_INFINITY,K3=Me/180,rt=Me/2,ms=Me/4,Rb=Me*2/3,bi=Math.log10,fr=Math.sign;function $l(t,e,n){return Math.abs(t-e)<n}function Nb(t){const e=Math.round(t);t=$l(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(bi(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function G3(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function pa(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Y3(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function BC(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Bn(t){return t*(Me/180)}function R_(t){return t*(180/Me)}function Db(t){if(!Xe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function zC(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Me&&(s+=Oe),{angle:s,distance:i}}function ly(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Q3(t,e){return(t-e+q3)%Oe-Me}function mn(t){return(t%Oe+Oe)%Oe}function Ac(t,e,n,r){const i=mn(t),s=mn(e),o=mn(n),a=mn(s-i),l=mn(o-i),c=mn(i-s),u=mn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function _t(t,e,n){return Math.max(e,Math.min(n,t))}function X3(t){return _t(t,-32768,32767)}function Dr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function N_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Or=(t,e,n,r)=>N_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),J3=(t,e,n)=>N_(t,n,r=>t[r][e]>=n);function Z3(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const $C=["push","pop","shift","splice","unshift"];function eU(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),$C.forEach(n=>{const r="_onData"+A_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Ob(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&($C.forEach(s=>{delete t[s]}),delete t._chartjs)}function WC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const HC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function qC(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,HC.call(window,()=>{r=!1,t.apply(e,n)}))}}function tU(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const D_=t=>t==="start"?"left":t==="end"?"right":"center",Mt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,nU=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function KC(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(i=_t(Math.min(Or(a,l,c).lo,n?r:Or(e,l,o.getPixelForValue(c)).lo),0,r-1)),f?s=_t(Math.max(Or(a,o.axis,u,!0).hi+1,n?0:Or(e,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function GC(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const ah=t=>t===0||t===1,Mb=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Oe/n)),Lb=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Oe/n)+1,Wl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*rt)+1,easeOutSine:t=>Math.sin(t*rt),easeInOutSine:t=>-.5*(Math.cos(Me*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ah(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ah(t)?t:Mb(t,.075,.3),easeOutElastic:t=>ah(t)?t:Lb(t,.075,.3),easeInOutElastic(t){return ah(t)?t:t<.5?.5*Mb(t*2,.1125,.45):.5+.5*Lb(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Wl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Wl.easeInBounce(t*2)*.5:Wl.easeOutBounce(t*2-1)*.5+.5};function O_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Vb(t){return O_(t)?t:new Ic(t)}function ug(t){return O_(t)?t:new Ic(t).saturate(.5).darken(.1).hexString()}const rU=["x","y","borderWidth","radius","tension"],iU=["color","borderColor","backgroundColor"];function sU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:iU},numbers:{type:"number",properties:rU}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function oU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const jb=new Map;function aU(t,e){e=e||{};const n=t+JSON.stringify(e);let r=jb.get(n);return r||(r=new Intl.NumberFormat(t,e),jb.set(n,r)),r}function iu(t,e,n){return aU(e,n).format(t)}const YC={values(t){return je(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=lU(t,n)}const o=bi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),iu(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(bi(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?YC.numeric.call(this,t,e,n):""}};function lU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ep={formatters:YC};function cU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ep.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Qs=Object.create(null),cy=Object.create(null);function Hl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function hg(t,e,n){return typeof e=="string"?Cc(Hl(t,e),n):Cc(Hl(t,""),e)}class uU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>ug(i.backgroundColor),this.hoverBorderColor=(r,i)=>ug(i.borderColor),this.hoverColor=(r,i)=>ug(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return hg(this,e,n)}get(e){return Hl(this,e)}describe(e,n){return hg(cy,e,n)}override(e,n){return hg(Qs,e,n)}route(e,n,r,i){const s=Hl(this,e),o=Hl(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return fe(l)?Object.assign({},c,l):ae(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new uU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sU,oU,cU]);function hU(t){return!t||_e(t.size)||_e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Qd(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function dU(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!je(d))o=Qd(t,i,s,o,d);else if(je(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!je(f)&&(o=Qd(t,i,s,o,f));t.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[s[l]];s.splice(0,p)}return o}function ys(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Fb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function uy(t,e,n,r){QC(t,e,n,r,null)}function QC(t,e,n,r,i){let s,o,a,l,c,u,d,f;const p=e.pointStyle,y=e.rotation,v=e.radius;let x=(y||0)*K3;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,v,0,0,Oe):t.arc(n,r,v,0,Oe),t.closePath();break;case"triangle":u=i?i/2:v,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=Rb,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=Rb,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(x+ms)*l,d=Math.cos(x+ms)*(i?i/2-c:l),a=Math.sin(x+ms)*l,f=Math.sin(x+ms)*(i?i/2-c:l),t.arc(n-d,r-a,c,x-Me,x-rt),t.arc(n+f,r-o,c,x-rt,x),t.arc(n+d,r+a,c,x,x+rt),t.arc(n-f,r+o,c,x+rt,x+Me),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=ms;case"rectRot":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":x+=ms;case"cross":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),x+=ms,d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,f=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(x)*v,a=Math.sin(x)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:v),r+Math.sin(x)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Mr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function tp(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function np(t){t.restore()}function fU(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function pU(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function gU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function mU(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function yU(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xs(t,e,n,r,i,s={}){const o=je(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,gU(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&yU(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_e(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),mU(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Rc(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Me,Me,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Me,rt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,rt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-rt,!0),t.lineTo(n+o.topLeft,r)}const vU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_U=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wU(t,e){const n=(""+t).match(vU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const xU=t=>+t||0;function M_(t,e){const n={},r=fe(e),i=r?Object.keys(e):e,s=fe(t)?r?o=>ae(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=xU(s(o));return n}function XC(t){return M_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Vs(t){return M_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function zt(t){const e=XC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ht(t,e){t=t||{},e=e||Fe.font;let n=ae(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ae(t.style,e.style);r&&!(""+r).match(_U)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ae(t.family,e.family),lineHeight:wU(ae(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ae(t.weight,e.weight),string:""};return i.string=hU(i),i}function xl(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function bU(t,e,n){const{min:r,max:i}=t,s=FC(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function rs(t,e){return Object.assign(Object.create(t),e)}function L_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=tP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>L_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return ZC(a,l,()=>AU(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Bb(a).includes(l)},ownKeys(a){return Bb(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function ga(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:JC(t,r),setContext:s=>ga(t,s,n,r),override:s=>ga(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return ZC(s,o,()=>TU(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function JC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Ki(n)?n:()=>n,isIndexable:Ki(r)?r:()=>r}}const EU=(t,e)=>t?t+A_(e):e,V_=(t,e)=>fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ZC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function TU(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Ki(a)&&o.isScriptable(e)&&(a=SU(e,a,t,n)),je(a)&&a.length&&(a=kU(e,a,t,o.isIndexable)),V_(e,a)&&(a=ga(a,i,s&&s[e],o)),a}function SU(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),V_(t,l)&&(l=j_(i._scopes,i,t,l)),l}function kU(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(fe(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=j_(c,i,t,u);e.push(ga(d,s,o&&o[t],a))}}return e}function eP(t,e,n){return Ki(t)?t(e,n):t}const IU=(t,e)=>t===!0?e:typeof t=="string"?qi(e,t):void 0;function CU(t,e,n,r,i){for(const s of e){const o=IU(n,s);if(o){t.add(o);const a=eP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function j_(t,e,n,r){const i=e._rootScopes,s=eP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Ub(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Ub(a,o,s,l,r),l===null)?!1:L_(Array.from(a),[""],i,s,()=>PU(e,n,r))}function Ub(t,e,n,r,i){for(;n;)n=CU(t,e,n,r,i);return n}function PU(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return je(i)&&fe(n)?n:i||{}}function AU(t,e,n,r){let i;for(const s of e)if(i=tP(EU(s,t),n),typeof i<"u")return V_(t,i)?j_(n,r,t,i):i}function tP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Bb(t){let e=t._keys;return e||(e=t._keys=RU(t._scopes)),e}function RU(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function nP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(qi(u,s),c)};return o}const NU=Number.EPSILON||1e-14,ma=(t,e)=>e<t.length&&!t[e].skip&&t[e],rP=t=>t==="x"?"y":"x";function DU(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=ly(s,i),l=ly(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,f=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function OU(t,e,n){const r=t.length;let i,s,o,a,l,c=ma(t,0);for(let u=0;u<r-1;++u)if(l=c,c=ma(t,u+1),!(!l||!c)){if($l(e[u],0,NU)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function MU(t,e,n="x"){const r=rP(n),i=t.length;let s,o,a,l=ma(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ma(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function LU(t,e="x"){const n=rP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ma(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ma(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?fr(i[o-1])!==fr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}OU(t,i,s),MU(t,s,e)}function lh(t,e,n){return Math.max(Math.min(t,n),e)}function VU(t,e){let n,r,i,s,o,a=Mr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Mr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=lh(i.cp1x,e.left,e.right),i.cp1y=lh(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=lh(i.cp2x,e.left,e.right),i.cp2y=lh(i.cp2y,e.top,e.bottom)))}function jU(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")LU(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=DU(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&VU(t,n)}function F_(){return typeof window<"u"&&typeof document<"u"}function U_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Xd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const rp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function FU(t,e){return rp(t).getPropertyValue(e)}const UU=["top","right","bottom","left"];function js(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=UU[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const BU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function zU(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(BU(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Es(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=rp(n),s=i.boxSizing==="border-box",o=js(i,"padding"),a=js(i,"border","width"),{x:l,y:c,box:u}=zU(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-f)/y*n.height/r)}}function $U(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&U_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=rp(s),l=js(a,"border","width"),c=js(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Xd(a.maxWidth,s,"clientWidth"),i=Xd(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Yd,maxHeight:i||Yd}}const ch=t=>Math.round(t*10)/10;function WU(t,e,n,r){const i=rp(t),s=js(i,"margin"),o=Xd(i.maxWidth,t,"clientWidth")||Yd,a=Xd(i.maxHeight,t,"clientHeight")||Yd,l=$U(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=js(i,"border","width"),p=js(i,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=ch(Math.min(c,o,l.maxWidth)),u=ch(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ch(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=ch(Math.floor(u*r))),{width:c,height:u}}function zb(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const HU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};F_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function $b(t,e){const n=FU(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ts(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function qU(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function KU(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ts(t,i,n),a=Ts(i,s,n),l=Ts(s,e,n),c=Ts(o,a,n),u=Ts(a,l,n);return Ts(c,u,n)}const GU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},YU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Xo(t,e,n){return t?GU(e,n):YU()}function iP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function sP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function oP(t){return t==="angle"?{between:Ac,compare:Q3,normalize:mn}:{between:Dr,compare:(e,n)=>e-n,normalize:e=>e}}function Wb({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function QU(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=oP(r),l=e.length;let{start:c,end:u,loop:d}=t,f,p;if(d){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function aP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=oP(r),{start:u,end:d,loop:f,style:p}=QU(t,e,n),y=[];let v=!1,x=null,_,w,E;const I=()=>l(i,E,_)&&a(i,E)!==0,N=()=>a(s,_)===0||l(s,E,_),O=()=>v||I(),S=()=>!v||N();for(let T=u,k=u;T<=d;++T)w=e[T%o],!w.skip&&(_=c(w[r]),_!==E&&(v=l(_,i,s),x===null&&O()&&(x=a(_,i)===0?T:k),x!==null&&S()&&(y.push(Wb({start:x,end:T,loop:f,count:o,style:p})),x=null),k=T,E=_));return x!==null&&y.push(Wb({start:x,end:d,loop:f,count:o,style:p})),y}function lP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=aP(r[i],t.points,e);s.length&&n.push(...s)}return n}function XU(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function JU(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function ZU(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=XU(n,i,s,r);if(r===!0)return Hb(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Hb(t,JU(n,o,l,c),n,e)}function Hb(t,e,n,r){return!r||!r.setContext||!n?e:eB(t,e,n,r)}function eB(t,e,n,r){const i=t._chart.getContext(),s=qb(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,f=d;function p(y,v,x,_){const w=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=w;for(;n[v%l].skip;)v+=w;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:x,style:_}),u=_,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],x;for(f=d+1;f<=y.end;f++){const _=n[f%l];x=qb(r.setContext(rs(i,{type:"segment",p0:v,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),tB(x,u)&&p(d,f-1,y.loop,u),v=_,u=x}d<f-1&&p(d,f-1,y.loop,u)}return c}function qb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function tB(t,e){if(!e)return!1;const n=[],r=function(i,s){return O_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class nB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=HC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Er=new nB;const Kb="transparent",rB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Vb(t||Kb),i=r.valid&&Vb(e||Kb);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class iB{constructor(e,n,r,i){const s=n[r];i=xl([e.to,i,s,e.from]);const o=xl([e.from,s,i]);this._active=!0,this._fn=e.fn||rB[e.type||typeof o],this._easing=Wl[e.easing]||Wl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=xl([e.to,n,i,e.from]),this._from=xl([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class cP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!fe(e))return;const n=Object.keys(Fe.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!fe(s))return;const o={};for(const a of n)o[a]=s[a];(je(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=oB(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&sB(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=d=new iB(f,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Er.add(this._chart,r),!0}}function sB(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function oB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Gb(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function aB(t,e,n){if(n===!1)return!1;const r=Gb(t,n),i=Gb(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function lB(t){let e,n,r,i;return fe(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function uP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Yb(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Xe(c)&&(s||e===0||fr(e)===fr(c))&&(e+=c)}return!u&&!r.all?0:e}function cB(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function dg(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function uB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function hB(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function dB(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Qb(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Xb(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=uB(s,o,r),d=e.length;let f;for(let p=0;p<d;++p){const y=e[p],{[l]:v,[c]:x}=y,_=y._stacks||(y._stacks={});f=_[c]=dB(i,u,v),f[a]=x,f._top=Qb(f,o,!0,r.type),f._bottom=Qb(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[a]=x}}function fg(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function fB(t,e){return rs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function pB(t,e,n){return rs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function il(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const pg=t=>t==="reset"||t==="none",Jb=(t,e)=>e?t:Object.assign({},t),gB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:uP(n,!0),values:null};class Wn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&il(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,p,y)=>d==="x"?f:d==="r"?y:p,s=n.xAxisID=ae(r.xAxisID,fg(e,"x")),o=n.yAxisID=ae(r.yAxisID,fg(e,"y")),a=n.rAxisID=ae(r.rAxisID,fg(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ob(this._data,this),e._stacked&&il(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(fe(n)){const i=this._cachedMeta;this._data=cB(n,i)}else if(r!==n){if(r){Ob(r,this);const i=this._cachedMeta;il(i),i._parsed=[]}n&&Object.isExtensible(n)&&eU(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=dg(n.vScale,n),n.stack!==r.stack&&(i=!0,il(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Xb(this,n._parsed),n._stacked=dg(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{je(i[e])?f=this.parseArrayData(r,i,e,n):fe(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=f[u],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&Xb(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let f,p,y;for(f=0,p=i;f<p;++f)y=f+r,d[f]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+r,p=n[f],c[u]={x:s.parse(qi(p,a),f),y:o.parse(qi(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:uP(i,!0),values:n._stacks[e.axis]._visualValues};return Yb(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=Yb(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=gB(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=hB(a);let f,p;function y(){p=i[f];const v=p[a.axis];return!Xe(p[e.axis])||u>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Xe(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=lB(ae(this.options.clip,aB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=pB(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=fB(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Pc(r);if(a)return Jb(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(Fe.elements[e]),y=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,p,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(Jb(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,r,n))}const c=new cP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||pg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){pg(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!pg(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&il(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$(Wn,"defaults",{}),$(Wn,"datasetElementType",null),$(Wn,"dataElementType",null);function mB(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=WC(r.sort((i,s)=>i-s))}return t._cache.$bar}function yB(t){const e=t.iScale,n=mB(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Pc(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function vB(t,e,n,r){const i=n.barThickness;let s,o;return _e(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function _B(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function wB(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function hP(t,e,n,r){return je(t)?wB(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Zb(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,f;for(c=n,u=n+r;c<u;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(hP(f,d,s,c));return l}function gg(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function xB(t,e,n){return t!==0?fr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function bB(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function EB(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=bB(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[e1(u,o,a,l)]=!0,i=c)),s[e1(i,o,a,l)]=!0,t.borderSkipped=s}function e1(t,e,n,r){return r?(t=TB(t,e,n),t=t1(t,n,e)):t=t1(t,e,n),t}function TB(t,e,n){return t===e?n:t===n?e:t}function t1(t,e,n){return t==="start"?e:t==="end"?n:t}function SB(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ql extends Wn{parsePrimitiveData(e,n,r,i){return Zb(e,n,r,i)}parseArrayData(e,n,r,i){return Zb(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,p,y,v;for(f=r,p=r+i;f<p;++f)v=n[f],y={},y[s.axis]=s.parse(qi(v,c),f),d.push(hP(qi(v,u),y,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=gg(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let p=n;p<n+r;p++){const y=this.getParsed(p),v=s||_e(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),x=this._calculateBarIndexPixels(p,u),_=(y._stacks||{})[a.axis],w={horizontal:c,base:v.base,enableBorderRadius:!_||gg(y._custom)||o===_._top||o===_._bottom,x:c?v.head:x.center,y:c?x.center:v.head,height:c?x.size:Math.abs(v.size),width:c?Math.abs(v.size):x.size};f&&(w.options=d||this.resolveDataElementOptions(p,e[p].active?"active":i));const E=w.options||e[p].options;EB(w,E,_,o),SB(w,E,u.ratio),this.updateElement(e[p],p,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(p=>p[r.axis]===l),f=d&&d[u.vScale.axis];if(_e(f)||isNaN(f))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||yB(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=gg(c);let d=l[n.axis],f=0,p=r?this.applyStack(n,l,r):d,y,v;p!==d&&(f=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&fr(d)!==fr(c.barEnd)&&(f=0),f+=d);const x=!_e(s)&&!u?s:f;let _=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+p):y=_,v=y-_,Math.abs(v)<o){v=xB(v,n,a)*o,d===a&&(_-=v/2);const w=n.getPixelForDecimal(0),E=n.getPixelForDecimal(1),I=Math.min(w,E),N=Math.max(w,E);_=Math.max(Math.min(_,N),I),y=_+v,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const w=fr(v)*n.getLineWidthForValue(a)/2;_+=w,v-=w}return{size:v,base:_,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ae(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,u=i.barThickness==="flex"?_B(e,n,i,c):vB(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=u.start+u.chunk*d+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}$(ql,"id","bar"),$(ql,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$(ql,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class zh extends Wn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ae(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ae(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,d=a.axis;for(let f=n;f<n+r;f++){const p=e[f],y=!s&&this.getParsed(f),v={},x=v[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[u]),_=v[d]=s?a.getBasePixel():a.getPixelForValue(y[d]);v.skip=isNaN(x)||isNaN(_),c&&(v.options=l||this.resolveDataElementOptions(f,p.active?"active":i),s&&(v.options.radius=0)),this.updateElement(p,f,v,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ae(r&&r._custom,s),i}}$(zh,"id","bubble"),$(zh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),$(zh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function kB(t,e,n){let r=1,i=1,s=0,o=0;if(e<Oe){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(E,I,N)=>Ac(E,a,l,!0)?1:Math.max(I,I*n,N,N*n),y=(E,I,N)=>Ac(E,a,l,!0)?-1:Math.min(I,I*n,N,N*n),v=p(0,c,d),x=p(rt,u,f),_=y(Me,c,d),w=y(Me+rt,u,f);r=(v-_)/2,i=(x-w)/2,s=-(v+_)/2,o=-(x+w)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Ps extends Wn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(fe(r[e])){const{key:l="value"}=this._parsing;s=c=>+qi(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Bn(this.options.rotation-90)}_getCircumference(){return Bn(this.options.circumference)}_getRotationExtents(){let e=Oe,n=-Oe;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(U3(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:y,offsetY:v}=kB(d,u,l),x=(r.width-o)/f,_=(r.height-o)/p,w=Math.max(Math.min(x,_)/2,0),E=FC(this.options.radius,w),I=Math.max(E*l,0),N=(E-I)/this._getVisibleDatasetWeightTotal();this.offsetX=y*E,this.offsetY=v*E,i.total=this.calculateTotal(),this.outerRadius=E-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Oe)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,p=f?0:this.innerRadius,y=f?0:this.outerRadius,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(n,i);let _=this._getRotation(),w;for(w=0;w<n;++w)_+=this._circumference(w,s);for(w=n;w<n+r;++w){const E=this._circumference(w,s),I=e[w],N={x:u+this.offsetX,y:d+this.offsetY,startAngle:_,endAngle:_+E,circumference:E,outerRadius:y,innerRadius:p};x&&(N.options=v||this.resolveDataElementOptions(w,I.active?"active":i)),_+=E,this.updateElement(I,w,N,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Oe*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=iu(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ae(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$(Ps,"id","doughnut"),$(Ps,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$(Ps,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),$(Ps,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class $h extends Wn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=KC(n,i,o);this._drawStart=a,this._drawCount=l,GC(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:y,segment:v}=this.options,x=pa(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none",w=n+r,E=e.length;let I=n>0&&this.getParsed(n-1);for(let N=0;N<E;++N){const O=e[N],S=_?O:{};if(N<n||N>=w){S.skip=!0;continue}const T=this.getParsed(N),k=_e(T[p]),P=S[f]=o.getPixelForValue(T[f],N),R=S[p]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],N);S.skip=isNaN(P)||isNaN(R)||k,S.stop=N>0&&Math.abs(T[f]-I[f])>x,v&&(S.parsed=T,S.raw=c.data[N]),d&&(S.options=u||this.resolveDataElementOptions(N,O.active?"active":i)),_||this.updateElement(O,N,S,i),I=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}$($h,"id","line"),$($h,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),$($h,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Kl extends Wn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=iu(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return nP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Me;let p=f,y;const v=360/this.countVisibleElements();for(y=0;y<n;++y)p+=this._computeAngle(y,i,v);for(y=n;y<n+r;y++){const x=e[y];let _=p,w=p+this._computeAngle(y,i,v),E=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;p=w,s&&(l.animateScale&&(E=0),l.animateRotate&&(_=w=f));const I={x:u,y:d,innerRadius:0,outerRadius:E,startAngle:_,endAngle:w,options:this.resolveDataElementOptions(y,x.active?"active":i)};this.updateElement(x,y,I,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Bn(this.resolveDataElementOptions(e,n).angle||r):0}}$(Kl,"id","polarArea"),$(Kl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),$(Kl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class hy extends Ps{}$(hy,"id","pie"),$(hy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Wh extends Wn{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return nP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:u.x,f=o?s.yCenter:u.y,p={x:d,y:f,angle:u.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}$(Wh,"id","radar"),$(Wh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),$(Wh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Hh extends Wn{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=KC(n,r,i);if(this._drawStart=s,this._drawCount=o,GC(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(u),f=this.includeOptions(i,d),p=o.axis,y=a.axis,{spanGaps:v,segment:x}=this.options,_=pa(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none";let E=n>0&&this.getParsed(n-1);for(let I=n;I<n+r;++I){const N=e[I],O=this.getParsed(I),S=w?N:{},T=_e(O[y]),k=S[p]=o.getPixelForValue(O[p],I),P=S[y]=s||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[y],I);S.skip=isNaN(k)||isNaN(P)||T,S.stop=I>0&&Math.abs(O[p]-E[p])>_,x&&(S.parsed=O,S.raw=c.data[I]),f&&(S.options=d||this.resolveDataElementOptions(I,N.active?"active":i)),w||this.updateElement(N,I,S,i),E=O}this.updateSharedOptions(d,i,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}$(Hh,"id","scatter"),$(Hh,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),$(Hh,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var IB=Object.freeze({__proto__:null,BarController:ql,BubbleController:zh,DoughnutController:Ps,LineController:$h,PieController:hy,PolarAreaController:Kl,RadarController:Wh,ScatterController:Hh});function vs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class B_{constructor(e){$(this,"options");this.options=e||{}}static override(e){Object.assign(B_.prototype,e)}init(){}formats(){return vs()}parse(){return vs()}format(){return vs()}add(){return vs()}diff(){return vs()}startOf(){return vs()}endOf(){return vs()}}var CB={_date:B_};function PB(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?J3:Or;if(r){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(s,e,n-u),f=l(s,e,n+u);return{lo:d.lo,hi:f.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function su(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:f}=PB(s[a],e,o,i);for(let p=d;p<=f;++p){const y=u[p];y.skip||r(y,c,p)}}}function AB(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function mg(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||su(t,n,e,function(a,l,c){!i&&!Mr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function RB(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=zC(o,{x:e.x,y:e.y});Ac(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return su(t,n,e,s),i}function NB(t,e,n,r,i,s){let o=[];const a=AB(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!p)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:d,index:f}],l=x):x===l&&o.push({element:u,datasetIndex:d,index:f})}return su(t,n,e,c),o}function yg(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?RB(t,e,n,i):NB(t,e,n,r,i,s)}function n1(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return su(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var DB={evaluateInteractionItems:su,modes:{index(t,e,n,r){const i=Es(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mg(t,i,s,r,o):yg(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mg(t,i,s,r,o):yg(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return mg(t,i,s,r,o)},nearest(t,e,n,r){const i=Es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return yg(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Es(e,t);return n1(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Es(e,t);return n1(t,i,"y",n.intersect,r)}}};const dP=["left","top","right","bottom"];function sl(t,e){return t.filter(n=>n.pos===e)}function r1(t,e){return t.filter(n=>dP.indexOf(n.pos)===-1&&n.box.axis===e)}function ol(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function OB(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function MB(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!dP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function LB(t,e){const n=MB(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function VB(t){const e=OB(t),n=ol(e.filter(c=>c.box.fullSize),!0),r=ol(sl(e,"left"),!0),i=ol(sl(e,"right")),s=ol(sl(e,"top"),!0),o=ol(sl(e,"bottom")),a=r1(e,"x"),l=r1(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:sl(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function i1(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function fP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function jB(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!fe(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&fP(o,s.getPadding());const a=Math.max(0,e.outerWidth-i1(o,t,"left","right")),l=Math.max(0,e.outerHeight-i1(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function FB(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function UB(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function bl(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,UB(a.horizontal,e));const{same:d,other:f}=jB(e,n,a,r);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&bl(i,e,n,r)||u}function uh(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function s1(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Pc(c.start)&&(o=c.start),l.fullSize?uh(l,i.left,o,n.outerWidth-i.right-i.left,f):uh(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Pc(c.start)&&(s=c.start),l.fullSize?uh(l,s,i.top,f,n.outerHeight-i.bottom-i.top):uh(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Ft={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=zt(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=VB(t.boxes),l=a.vertical,c=a.horizontal;Se(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,x)=>x.box.options&&x.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);fP(f,zt(r));const p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=LB(l.concat(c),d);bl(a.fullSize,p,d,y),bl(l,p,d,y),bl(c,p,d,y)&&bl(l,p,d,y),FB(p),s1(a.leftAndTop,p,d,y),p.x+=p.w,p.y+=p.h,s1(a.rightAndBottom,p,d,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Se(a.chartArea,v=>{const x=v.box;Object.assign(x,t.chartArea),x.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class pP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class BB extends pP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const qh="$chartjs",zB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},o1=t=>t===null||t==="";function $B(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[qh]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",o1(i)){const s=$b(t,"width");s!==void 0&&(t.width=s)}if(o1(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=$b(t,"height");s!==void 0&&(t.height=s)}return t}const gP=HU?{passive:!0}:!1;function WB(t,e,n){t&&t.addEventListener(e,n,gP)}function HB(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,gP)}function qB(t,e){const n=zB[t.type]||t.type,{x:r,y:i}=Es(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Jd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function KB(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Jd(a.addedNodes,r),o=o&&!Jd(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function GB(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Jd(a.removedNodes,r),o=o&&!Jd(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Nc=new Map;let a1=0;function mP(){const t=window.devicePixelRatio;t!==a1&&(a1=t,Nc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function YB(t,e){Nc.size||window.addEventListener("resize",mP),Nc.set(t,e)}function QB(t){Nc.delete(t),Nc.size||window.removeEventListener("resize",mP)}function XB(t,e,n){const r=t.canvas,i=r&&U_(r);if(!i)return;const s=qC((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),YB(t,s),o}function vg(t,e,n){n&&n.disconnect(),e==="resize"&&QB(t)}function JB(t,e,n){const r=t.canvas,i=qC(s=>{t.ctx!==null&&n(qB(s,t))},t);return WB(r,e,i),i}class ZB extends pP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?($B(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[qh])return!1;const r=n[qh].initial;["height","width"].forEach(s=>{const o=r[s];_e(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[qh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:KB,detach:GB,resize:XB}[n]||JB;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:vg,detach:vg,resize:vg}[n]||HB)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return WU(e,n,r,i)}isAttached(e){const n=e&&U_(e);return!!(n&&n.isConnected)}}function ez(t){return!F_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?BB:ZB}class Yn{constructor(){$(this,"x");$(this,"y");$(this,"active",!1);$(this,"options");$(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return pa(this.x)&&pa(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}$(Yn,"defaults",{}),$(Yn,"defaultRoutes");function tz(t,e){const n=t.options.ticks,r=nz(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?iz(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return sz(e,c,s,o/i),c;const u=rz(s,e,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(hh(e,c,u,_e(p)?0:a-p,a),d=0,f=o-1;d<f;d++)hh(e,c,u,s[d],s[d+1]);return hh(e,c,u,l,_e(p)?e.length:l+p),c}return hh(e,c,u),c}function nz(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function rz(t,e,n){const r=oz(t),i=e.length/n;if(!r)return Math.max(i,1);const s=G3(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function iz(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function sz(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function hh(t,e,n,r,i){const s=ae(r,0),o=Math.min(ae(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function oz(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const az=t=>t==="left"?"right":t==="right"?"left":t,l1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,c1=(t,e)=>Math.min(e||t,t);function u1(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function lz(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function cz(t,e){Se(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function al(t){return t.drawTicks?t.tickLength:0}function h1(t,e){if(!t.display)return 0;const n=ht(t.font,e),r=zt(t.padding);return(je(t.text)?t.text.length:1)*n.lineHeight+r.height}function uz(t,e){return rs(t,{scale:e,type:"scale"})}function hz(t,e,n){return rs(t,{tick:n,index:e,type:"tick"})}function dz(t,e,n){let r=D_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=az(r)),r}function fz(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,p,y;const v=o-i,x=a-s;if(t.isHorizontal()){if(p=Mt(r,s,a),fe(n)){const _=Object.keys(n)[0],w=n[_];y=u[_].getPixelForValue(w)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=l1(t,n,e);f=a-s}else{if(fe(n)){const _=Object.keys(n)[0],w=n[_];p=u[_].getPixelForValue(w)-x+e}else n==="center"?p=(c.left+c.right)/2-x+e:p=l1(t,n,e);y=Mt(r,o,i),d=n==="left"?-rt:rt}return{titleX:p,titleY:y,maxWidth:f,rotation:d}}class lo extends Yn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=pn(e,Number.POSITIVE_INFINITY),n=pn(n,Number.NEGATIVE_INFINITY),r=pn(r,Number.POSITIVE_INFINITY),i=pn(i,Number.NEGATIVE_INFINITY),{min:pn(e,r),max:pn(n,i),minDefined:Xe(e),maxDefined:Xe(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:pn(n,pn(r,n)),max:pn(r,pn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bU(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?u1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=tz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Pe(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=c1(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=_t(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-al(e.grid)-n.padding-h1(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=R_(Math.min(Math.asin(_t((u.highest.height+6)/a,-1,1)),Math.asin(_t(l/c,-1,1))-Math.asin(_t(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=h1(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=al(s)+l):(e.height=this.maxHeight,e.width=al(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),p=r.padding*2,y=Bn(this.labelRotation),v=Math.cos(y),x=Math.sin(y);if(a){const _=r.mirror?0:x*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+_+p)}else{const _=r.mirror?0:v*d.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(c,u,x,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*e.width,p=r*n.height):(f=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_e(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=u1(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/c1(n,r));let c=0,u=0,d,f,p,y,v,x,_,w,E,I,N;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),i.font=x=v.string,_=s[x]=s[x]||{data:{},gc:[]},w=v.lineHeight,E=I=0,!_e(y)&&!je(y))E=Qd(i,_.data,_.gc,E,y),I=w;else if(je(y))for(f=0,p=y.length;f<p;++f)N=y[f],!_e(N)&&!je(N)&&(E=Qd(i,_.data,_.gc,E,N),I+=w);o.push(E),a.push(I),c=Math.max(E,c),u=Math.max(I,u)}cz(s,n);const O=o.indexOf(c),S=a.indexOf(u),T=k=>({width:o[k]||0,height:a[k]||0});return{first:T(0),last:T(n-1),widest:T(O),highest:T(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return X3(this._alignToPixels?ys(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=hz(this.getContext(),e,r))}return this.$context||(this.$context=uz(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Bn(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=al(s),p=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,x=v/2,_=function(G){return ys(r,G,v)};let w,E,I,N,O,S,T,k,P,R,D,A;if(o==="top")w=_(this.bottom),S=this.bottom-f,k=w-x,R=_(e.top)+x,A=e.bottom;else if(o==="bottom")w=_(this.top),R=e.top,A=_(e.bottom)-x,S=w+x,k=this.top+f;else if(o==="left")w=_(this.right),O=this.right-f,T=w-x,P=_(e.left)+x,D=e.right;else if(o==="right")w=_(this.left),P=e.left,D=_(e.right)-x,O=w+x,T=this.left+f;else if(n==="x"){if(o==="center")w=_((e.top+e.bottom)/2+.5);else if(fe(o)){const G=Object.keys(o)[0],re=o[G];w=_(this.chart.scales[G].getPixelForValue(re))}R=e.top,A=e.bottom,S=w+x,k=S+f}else if(n==="y"){if(o==="center")w=_((e.left+e.right)/2);else if(fe(o)){const G=Object.keys(o)[0],re=o[G];w=_(this.chart.scales[G].getPixelForValue(re))}O=w-x,T=O-f,P=e.left,D=e.right}const Z=ae(i.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/Z));for(E=0;E<d;E+=Y){const G=this.getContext(E),re=s.setContext(G),U=a.setContext(G),W=re.lineWidth,H=re.color,ie=U.dash||[],X=U.dashOffset,ne=re.tickWidth,me=re.tickColor,be=re.tickBorderDash||[],Ee=re.tickBorderDashOffset;I=lz(this,E,l),I!==void 0&&(N=ys(r,I,W),c?O=T=P=D=N:S=k=R=A=N,p.push({tx1:O,ty1:S,tx2:T,ty2:k,x1:P,y1:R,x2:D,y2:A,width:W,color:H,borderDash:ie,borderDashOffset:X,tickWidth:ne,tickColor:me,tickBorderDash:be,tickBorderDashOffset:Ee}))}return this._ticksLength=d,this._borderValue=w,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,f=al(r.grid),p=f+u,y=d?-u:p,v=-Bn(this.labelRotation),x=[];let _,w,E,I,N,O,S,T,k,P,R,D,A="middle";if(i==="top")O=this.bottom-y,S=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+y,S=this._getXAxisLabelAlignment();else if(i==="left"){const Y=this._getYAxisLabelAlignment(f);S=Y.textAlign,N=Y.x}else if(i==="right"){const Y=this._getYAxisLabelAlignment(f);S=Y.textAlign,N=Y.x}else if(n==="x"){if(i==="center")O=(e.top+e.bottom)/2+p;else if(fe(i)){const Y=Object.keys(i)[0],G=i[Y];O=this.chart.scales[Y].getPixelForValue(G)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")N=(e.left+e.right)/2-p;else if(fe(i)){const Y=Object.keys(i)[0],G=i[Y];N=this.chart.scales[Y].getPixelForValue(G)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const Z=this._getLabelSizes();for(_=0,w=a.length;_<w;++_){E=a[_],I=E.label;const Y=s.setContext(this.getContext(_));T=this.getPixelForTick(_)+s.labelOffset,k=this._resolveTickFontOptions(_),P=k.lineHeight,R=je(I)?I.length:1;const G=R/2,re=Y.color,U=Y.textStrokeColor,W=Y.textStrokeWidth;let H=S;o?(N=T,S==="inner"&&(_===w-1?H=this.options.reverse?"left":"right":_===0?H=this.options.reverse?"right":"left":H="center"),i==="top"?c==="near"||v!==0?D=-R*P+P/2:c==="center"?D=-Z.highest.height/2-G*P+P:D=-Z.highest.height+P/2:c==="near"||v!==0?D=P/2:c==="center"?D=Z.highest.height/2-G*P:D=Z.highest.height-R*P,d&&(D*=-1),v!==0&&!Y.showLabelBackdrop&&(N+=P/2*Math.sin(v))):(O=T,D=(1-R)*P/2);let ie;if(Y.showLabelBackdrop){const X=zt(Y.backdropPadding),ne=Z.heights[_],me=Z.widths[_];let be=D-X.top,Ee=0-X.left;switch(A){case"middle":be-=ne/2;break;case"bottom":be-=ne;break}switch(S){case"center":Ee-=me/2;break;case"right":Ee-=me;break;case"inner":_===w-1?Ee-=me:_>0&&(Ee-=me/2);break}ie={left:Ee,top:be,width:me+X.width,height:ne+X.height,color:Y.backdropColor}}x.push({label:I,font:k,textOffset:D,options:{rotation:v,color:re,strokeColor:U,strokeWidth:W,textAlign:H,textBaseline:A,translation:[N,O],backdrop:ie}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Bn(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=ys(e,this.left,o)-o/2,u=ys(e,this.right,a)+a/2,d=f=l):(d=ys(e,this.top,o)-o/2,f=ys(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&tp(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Xs(r,c,0,u,l,a)}i&&np(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ht(r.font),o=zt(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||fe(n)?(l+=o.bottom,je(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=fz(this,l,n,a);Xs(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:dz(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ae(e.grid&&e.grid.z,-1),i=ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==lo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ht(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class dh{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;mz(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,pz(e,o,r),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Fe[i]&&(delete Fe[i][r],this.override&&delete Qs[r])}}function pz(t,e,n){const r=Cc(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,r),t.defaultRoutes&&gz(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function gz(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(s,i,l,a)})}function mz(t){return"id"in t&&"defaults"in t}class yz{constructor(){this.controllers=new dh(Wn,"datasets",!0),this.elements=new dh(Yn,"elements"),this.plugins=new dh(Object,"plugins"),this.scales=new dh(lo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Se(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=A_(e);Pe(r["before"+i],[],r),n[e](r),Pe(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var rr=new yz;class vz{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Pe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ae(r.options&&r.options.plugins,{}),s=_z(r);return i===!1&&!n?[]:xz(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function _z(t){const e={},n=[],r=Object.keys(rr.plugins.items);for(let s=0;s<r.length;s++)n.push(rr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function wz(t,e){return!e&&t===!1?null:t===!0?{}:t}function xz(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=wz(r[l],i);c!==null&&s.push({plugin:a,options:bz(t.config,{plugin:a,local:n[l]},c,o)})}return s}function bz(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dy(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Ez(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Tz(t,e){return t===e?"_index_":"_value_"}function d1(t){if(t==="x"||t==="y"||t==="r")return t}function Sz(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function fy(t,...e){if(d1(t))return t;for(const n of e){const r=n.axis||Sz(n.position)||t.length>1&&d1(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function f1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function kz(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return f1(t,"x",n[0])||f1(t,"y",n[0])}return{}}function Iz(t,e){const n=Qs[t.type]||{scales:{}},r=e.scales||{},i=dy(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=fy(o,a,kz(o,t),Fe.scales[a.type]),c=Tz(l,i),u=n.scales||{};s[o]=zl(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||dy(a,e),u=(Qs[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=Ez(d,l),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),zl(s[p],[{axis:f},r[p],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];zl(a,[Fe.scales[a.type],Fe.scale])}),s}function yP(t){const e=t.options||(t.options={});e.plugins=ae(e.plugins,{}),e.scales=Iz(t,e)}function vP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Cz(t){return t=t||{},t.data=vP(t.data),yP(t),t}const p1=new Map,_P=new Set;function fh(t,e){let n=p1.get(t);return n||(n=e(),p1.set(t,n),_P.add(n)),n}const ll=(t,e,n)=>{const r=qi(e,n);r!==void 0&&t.add(r)};class Pz{constructor(e){this._config=Cz(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=vP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return fh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return fh(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return fh(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return fh(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>ll(l,e,d))),u.forEach(d=>ll(l,i,d)),u.forEach(d=>ll(l,Qs[s]||{},d)),u.forEach(d=>ll(l,Fe,d)),u.forEach(d=>ll(l,cy,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),_P.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Qs[n]||{},Fe.datasets[n]||{},{type:n},Fe,cy]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=g1(this._resolverCache,e,i);let l=o;if(Rz(o,n)){s.$shared=!1,r=Ki(r)?r():r;const c=this.createResolver(e,r,a);l=ga(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=g1(this._resolverCache,e,r);return fe(n)?ga(s,n,void 0,i):s}}function g1(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:L_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Az=t=>fe(t)&&Object.getOwnPropertyNames(t).some(e=>Ki(t[e]));function Rz(t,e){const{isScriptable:n,isIndexable:r}=JC(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Ki(a)||Az(a))||o&&je(a))return!0}return!1}var Nz="4.4.7";const Dz=["top","bottom","left","right","chartArea"];function m1(t,e){return t==="top"||t==="bottom"||Dz.indexOf(t)===-1&&e==="x"}function y1(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function v1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Pe(n&&n.onComplete,[t],e)}function Oz(t){const e=t.chart,n=e.options.animation;Pe(n&&n.onProgress,[t],e)}function wP(t){return F_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Kh={},_1=t=>{const e=wP(t);return Object.values(Kh).filter(n=>n.canvas===e).pop()};function Mz(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Lz(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function ph(t,e,n){return t.options.clip?t[n]:e[n]}function Vz(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:ph(n,e,"left"),right:ph(n,e,"right"),top:ph(r,e,"top"),bottom:ph(r,e,"bottom")}:e}var ai;let ip=(ai=class{static register(...e){rr.add(...e),w1()}static unregister(...e){rr.remove(...e),w1()}constructor(e,n){const r=this.config=new Pz(n),i=wP(e),s=_1(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||ez(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=F3(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new vz,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=tU(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Kh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Er.listen(this,"complete",v1),Er.listen(this,"progress",Oz),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return _e(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fb(this.canvas,this.ctx),this}stop(){return Er.stop(this),this}resize(e,n){Er.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Se(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=fy(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Se(s,o=>{const a=o.options,l=a.id,c=fy(l,a),u=ae(a.type,o.dtype);(a.position===void 0||m1(a.position,c)!==m1(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const f=rr.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Se(i,(o,a)=>{o||delete r[a]}),Se(r,o=>{Ft.configure(this,o,o.options),Ft.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(y1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||dy(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:c,dataElementType:u}=Fe.datasets[a];Object.assign(l,{dataElementType:rr.getElement(u),datasetElementType:c&&rr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Se(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(y1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Se(this.scales,e=>{Ft.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Ab(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Mz(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Ab(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ft.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Se(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ki(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Er.has(this)?this.attached&&!Er.running(this)&&Er.start(this):(this.draw(),v1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Vz(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&tp(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&np(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Mr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=DB.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=rs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Pc(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Er.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Fb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Kh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Se(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Se(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Se(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Kd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=H3(e),c=Lz(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Pe(s.onHover,[e,a,this],this),l&&Pe(s.onClick,[e,a,this],this));const u=!Kd(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},$(ai,"defaults",Fe),$(ai,"instances",Kh),$(ai,"overrides",Qs),$(ai,"registry",rr),$(ai,"version",Nz),$(ai,"getChart",_1),ai);function w1(){return Se(ip.instances,t=>t._plugins.invalidate())}function jz(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+rt,r-rt),t.closePath(),t.clip()}function Fz(t){return M_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Uz(t,e,n,r){const i=Fz(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return _t(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:_t(i.innerStart,0,o),innerEnd:_t(i.innerEnd,0,o)}}function xo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Zd(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let p=0;const y=i-l;if(r){const Y=u>0?u-r:0,G=d>0?d-r:0,re=(Y+G)/2,U=re!==0?y*re/(re+r):y;p=(y-U)/2}const v=Math.max(.001,y*d-n/Me)/d,x=(y-v)/2,_=l+x+p,w=i-x-p,{outerStart:E,outerEnd:I,innerStart:N,innerEnd:O}=Uz(e,f,d,w-_),S=d-E,T=d-I,k=_+E/S,P=w-I/T,R=f+N,D=f+O,A=_+N/R,Z=w-O/D;if(t.beginPath(),s){const Y=(k+P)/2;if(t.arc(o,a,d,k,Y),t.arc(o,a,d,Y,P),I>0){const W=xo(T,P,o,a);t.arc(W.x,W.y,I,P,w+rt)}const G=xo(D,w,o,a);if(t.lineTo(G.x,G.y),O>0){const W=xo(D,Z,o,a);t.arc(W.x,W.y,O,w+rt,Z+Math.PI)}const re=(w-O/f+(_+N/f))/2;if(t.arc(o,a,f,w-O/f,re,!0),t.arc(o,a,f,re,_+N/f,!0),N>0){const W=xo(R,A,o,a);t.arc(W.x,W.y,N,A+Math.PI,_-rt)}const U=xo(S,_,o,a);if(t.lineTo(U.x,U.y),E>0){const W=xo(S,k,o,a);t.arc(W.x,W.y,E,_-rt,k)}}else{t.moveTo(o,a);const Y=Math.cos(k)*d+o,G=Math.sin(k)*d+a;t.lineTo(Y,G);const re=Math.cos(P)*d+o,U=Math.sin(P)*d+a;t.lineTo(re,U)}t.closePath()}function Bz(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Zd(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Oe||Oe))}return Zd(t,e,n,r,l,i),t.fill(),l}function zz(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let y=e.endAngle;if(s){Zd(t,e,n,r,y,i);for(let v=0;v<s;++v)t.stroke();isNaN(a)||(y=o+(a%Oe||Oe))}p&&jz(t,e,y),s||(Zd(t,e,n,r,y,i),t.stroke())}class El extends Yn{constructor(n){super();$(this,"circumference");$(this,"endAngle");$(this,"fullCircles");$(this,"innerRadius");$(this,"outerRadius");$(this,"pixelMargin");$(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=zC(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,y=ae(f,c-l),v=Ac(o,l,c)&&l!==c,x=y>=Oe||v,_=Dr(a,u+p,d+p);return x&&_}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Oe?Math.floor(i/Oe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Me,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Bz(n,this,u,o,a),zz(n,this,u,o,a),n.restore()}}$(El,"id","arc"),$(El,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),$(El,"defaultRoutes",{backgroundColor:"backgroundColor"}),$(El,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function xP(t,e,n=e){t.lineCap=ae(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ae(n.borderDash,e.borderDash)),t.lineDashOffset=ae(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ae(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ae(n.borderWidth,e.borderWidth),t.strokeStyle=ae(n.borderColor,e.borderColor)}function $z(t,e,n){t.lineTo(n.x,n.y)}function Wz(t){return t.stepped?fU:t.tension||t.cubicInterpolationMode==="monotone"?pU:$z}function bP(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Hz(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=bP(i,n,r),u=Wz(s);let{move:d=!0,reverse:f}=r||{},p,y,v;for(p=0;p<=c;++p)y=i[(a+(f?c-p:p))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):u(t,v,y,f,s.stepped),v=y);return l&&(y=i[(a+(f?c:0))%o],u(t,v,y,f,s.stepped)),!!l}function qz(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=bP(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,f,p,y,v,x,_;const w=I=>(o+(c?a-I:I))%s,E=()=>{v!==x&&(t.lineTo(u,x),t.lineTo(u,v),t.lineTo(u,_))};for(l&&(p=i[w(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[w(f)],p.skip)continue;const I=p.x,N=p.y,O=I|0;O===y?(N<v?v=N:N>x&&(x=N),u=(d*u+I)/++d):(E(),t.lineTo(I,N),y=O,d=0,v=x=N),_=N}E()}function py(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?qz:Hz}function Kz(t){return t.stepped?qU:t.tension||t.cubicInterpolationMode==="monotone"?KU:Ts}function Gz(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),xP(t,e.options),t.stroke(i)}function Yz(t,e,n,r){const{segments:i,options:s}=e,o=py(e);for(const a of i)xP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Qz=typeof Path2D=="function";function Xz(t,e,n,r){Qz&&!e.options.segment?Gz(t,e,n,r):Yz(t,e,n,r)}class Ei extends Yn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;jU(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=lP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Kz(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],p=s[d],y=s[f];if(p===y){a.push(p);continue}const v=Math.abs((i-p[n])/(y[n]-p[n])),x=l(p,y,v,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return py(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=py(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Xz(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}$(Ei,"id","line"),$(Ei,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),$(Ei,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),$(Ei,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function x1(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Gh extends Yn{constructor(n){super();$(this,"parsed");$(this,"skip");$(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return x1(this,n,"x",r)}inYRange(n,r){return x1(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Mr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,uy(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}$(Gh,"id","point"),$(Gh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),$(Gh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function EP(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Ti(t,e,n,r){return t?0:_t(e,n,r)}function Jz(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=XC(r);return{t:Ti(i.top,s.top,0,n),r:Ti(i.right,s.right,0,e),b:Ti(i.bottom,s.bottom,0,n),l:Ti(i.left,s.left,0,e)}}function Zz(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Vs(i),o=Math.min(e,n),a=t.borderSkipped,l=r||fe(i);return{topLeft:Ti(!l||a.top||a.left,s.topLeft,0,o),topRight:Ti(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ti(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ti(!l||a.bottom||a.right,s.bottomRight,0,o)}}function e9(t){const e=EP(t),n=e.right-e.left,r=e.bottom-e.top,i=Jz(t,n/2,r/2),s=Zz(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function _g(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&EP(t,r);return a&&(i||Dr(e,a.left,a.right))&&(s||Dr(n,a.top,a.bottom))}function t9(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function n9(t,e){t.rect(e.x,e.y,e.w,e.h)}function wg(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Yh extends Yn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=e9(this),a=t9(o.radius)?Rc:n9;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,wg(o,n,s)),e.clip(),a(e,wg(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,wg(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return _g(this,e,n,r)}inXRange(e,n){return _g(this,e,null,n)}inYRange(e,n){return _g(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}$(Yh,"id","bar"),$(Yh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$(Yh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var r9=Object.freeze({__proto__:null,ArcElement:El,BarElement:Yh,LineElement:Ei,PointElement:Gh});const gy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],b1=gy.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function TP(t){return gy[t%gy.length]}function SP(t){return b1[t%b1.length]}function i9(t,e){return t.borderColor=TP(e),t.backgroundColor=SP(e),++e}function s9(t,e){return t.backgroundColor=t.data.map(()=>TP(e++)),e}function o9(t,e){return t.backgroundColor=t.data.map(()=>SP(e++)),e}function a9(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Ps?e=s9(n,e):i instanceof Kl?e=o9(n,e):i&&(e=i9(n,e))}}function E1(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function l9(t){return t&&(t.borderColor||t.backgroundColor)}function c9(){return Fe.borderColor!=="rgba(0,0,0,0.1)"||Fe.backgroundColor!=="rgba(0,0,0,0.1)"}var u9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=E1(r)||l9(i)||s&&E1(s)||c9();if(!n.forceOverride&&o)return;const a=a9(t);r.forEach(a)}};function h9(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u=e,d,f,p,y,v;for(o[l++]=t[u],d=0;d<s-2;d++){let x=0,_=0,w;const E=Math.floor((d+1)*a)+1+e,I=Math.min(Math.floor((d+2)*a)+1,n)+e,N=I-E;for(w=E;w<I;w++)x+=t[w].x,_+=t[w].y;x/=N,_/=N;const O=Math.floor(d*a)+1+e,S=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:T,y:k}=t[u];for(p=y=-1,w=O;w<S;w++)y=.5*Math.abs((T-x)*(t[w].y-k)-(T-t[w].x)*(_-k)),y>p&&(p=y,f=t[w],v=w);o[l++]=f,u=v}return o[l++]=t[c],o}function d9(t,e,n,r){let i=0,s=0,o,a,l,c,u,d,f,p,y,v;const x=[],_=e+n-1,w=t[e].x,I=t[_].x-w;for(o=e;o<e+n;++o){a=t[o],l=(a.x-w)/I*r,c=a.y;const N=l|0;if(N===u)c<y?(y=c,d=o):c>v&&(v=c,f=o),i=(s*i+a.x)/++s;else{const O=o-1;if(!_e(d)&&!_e(f)){const S=Math.min(d,f),T=Math.max(d,f);S!==p&&S!==O&&x.push({...t[S],x:i}),T!==p&&T!==O&&x.push({...t[T],x:i})}o>0&&O!==p&&x.push(t[O]),x.push(a),u=N,s=0,y=v=c,d=f=p=o}}return x}function kP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function T1(t){t.data.datasets.forEach(e=>{kP(e)})}function f9(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=_t(Or(e,s.axis,o).lo,0,n-1)),c?i=_t(Or(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var p9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){T1(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(xl([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:f}=f9(l,c);const p=n.threshold||4*r;if(f<=p){kP(i);return}_e(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let y;switch(n.algorithm){case"lttb":y=h9(c,d,f,r,n);break;case"min-max":y=d9(c,d,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=y})},destroy(t){T1(t)}};function g9(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=z_(l,c,i);const u=my(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=lP(e,u);for(const f of d){const p=my(n,s[f.start],s[f.end],f.loop),y=aP(a,i,p);for(const v of y)o.push({source:v,target:f,start:{[n]:S1(u,p,"start",Math.max)},end:{[n]:S1(u,p,"end",Math.min)}})}}return o}function my(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=mn(i),s=mn(s)),{property:t,start:i,end:s}}function m9(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=z_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function z_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function S1(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function IP(t,e){let n=[],r=!1;return je(t)?(r=!0,n=t):n=m9(t,e),n.length?new Ei({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function k1(t){return t&&t.fill!==!1}function y9(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Xe(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function v9(t,e,n){const r=b9(t);if(fe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Xe(i)&&Math.floor(i)===i?_9(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function _9(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function w9(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:fe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function x9(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:fe(t)?r=t.value:r=e.getBaseValue(),r}function b9(t){const e=t.options,n=e.fill;let r=ae(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function E9(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=T9(e,n);a.push(IP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)S9(i,o[u],a)}return new Ei({points:i,options:{}})}function T9(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function S9(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=k9(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function k9(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],f=o[u.end][n];if(Dr(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:r}}class CP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Oe},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function I9(t){const{chart:e,fill:n,line:r}=t;if(Xe(n))return C9(e,n);if(n==="stack")return E9(t);if(n==="shape")return!0;const i=P9(t);return i instanceof CP?i:IP(i,r)}function C9(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function P9(t){return(t.scale||{}).getPointPositionForValue?R9(t):A9(t)}function A9(t){const{scale:e={},fill:n}=t,r=w9(n,e);if(Xe(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function R9(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=x9(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new CP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function xg(t,e,n){const r=I9(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};r&&i.points.length&&(tp(t,n),N9(t,{line:i,target:r,above:u,below:d,area:n,scale:s,axis:o}),np(t))}function N9(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(I1(t,r,o.top),C1(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),I1(t,r,o.bottom)),C1(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function I1(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[z_(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function C1(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=g9(n,r,i);for(const{source:l,target:c,start:u,end:d}of a){const{style:{backgroundColor:f=s}={}}=l,p=r!==!0;t.save(),t.fillStyle=f,D9(t,o,p&&my(i,u,d)),t.beginPath();const y=!!n.pathSegment(t,l);let v;if(p){y?t.closePath():P1(t,r,d,i);const x=!!r.pathSegment(t,c,{move:y,reverse:!0});v=y&&x,v||P1(t,r,u,i)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function D9(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function P1(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var O9={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Ei&&(l={visible:t.isDatasetVisible(o),index:o,fill:v9(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=y9(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&xg(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;k1(s)&&xg(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!k1(r)||n.drawTime!=="beforeDatasetDraw"||xg(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const A1=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},M9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class R1 extends Yn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ht(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=A1(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((y,v)=>{const x=r+n/2+s.measureText(y.text).width;(v===0||c[c.length-1]+x+2*a>o)&&(d+=u,c[c.length-(v>0?0:1)]=0,p+=u,f++),l[v]={left:0,top:p,row:f,width:x,height:i},c[c.length-1]+=x+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,p=0,y=0,v=0;return this.legendItems.forEach((x,_)=>{const{itemWidth:w,itemHeight:E}=L9(r,n,s,x,i);_>0&&p+E+2*a>u&&(d+=f+a,c.push({width:f,height:p}),y+=f+a,v++,f=p=0),l[_]={left:y,top:p,col:v,width:w,height:E},f=Math.max(f,w),p+=E+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Xo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Mt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Mt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Mt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Mt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;tp(e,this),this._draw(),np(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Fe.color,l=Xo(e.rtl,this.left,this.width),c=ht(o.font),{padding:u}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:x}=A1(o,d),_=function(O,S,T){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const k=ae(T.lineWidth,1);if(i.fillStyle=ae(T.fillStyle,a),i.lineCap=ae(T.lineCap,"butt"),i.lineDashOffset=ae(T.lineDashOffset,0),i.lineJoin=ae(T.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=ae(T.strokeStyle,a),i.setLineDash(ae(T.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:k},R=l.xPlus(O,y/2),D=S+f;QC(i,P,R,D,o.pointStyleWidth&&y)}else{const P=S+Math.max((d-v)/2,0),R=l.leftForLtr(O,y),D=Vs(T.borderRadius);i.beginPath(),Object.values(D).some(A=>A!==0)?Rc(i,{x:R,y:P,w:y,h:v,radius:D}):i.rect(R,P,y,v),i.fill(),k!==0&&i.stroke()}i.restore()},w=function(O,S,T){Xs(i,T.text,O,S+x/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},E=this.isHorizontal(),I=this._computeTitleHeight();E?p={x:Mt(s,this.left+u,this.right-r[0]),y:this.top+u+I,line:0}:p={x:this.left+u,y:Mt(s,this.top+I+u,this.bottom-n[0].height),line:0},iP(this.ctx,e.textDirection);const N=x+u;this.legendItems.forEach((O,S)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const T=i.measureText(O.text).width,k=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),P=y+f+T;let R=p.x,D=p.y;l.setWidth(this.width),E?S>0&&R+P+u>this.right&&(D=p.y+=N,p.line++,R=p.x=Mt(s,this.left+u,this.right-r[p.line])):S>0&&D+N>this.bottom&&(R=p.x=R+n[p.line].width+u,p.line++,D=p.y=Mt(s,this.top+I+u,this.bottom-n[p.line].height));const A=l.x(R);if(_(A,D,O),R=nU(k,R+y+f,E?R+P:this.right,e.rtl),w(l.x(R),D,O),E)p.x+=P+u;else if(typeof O.text!="string"){const Z=c.lineHeight;p.y+=PP(O,Z)+u}else p.y+=N}),sP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ht(n.font),i=zt(n.padding);if(!n.display)return;const s=Xo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Mt(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,x)=>Math.max(v,x.height),0);u=c+Mt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Mt(a,d,d+f);o.textAlign=s.textAlign(D_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Xs(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=ht(e.font),r=zt(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Dr(e,this.left,this.right)&&Dr(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Dr(e,i.left,i.left+i.width)&&Dr(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!F9(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=M9(i,r);i&&!s&&Pe(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Pe(n.onHover,[e,r,this],this)}else r&&Pe(n.onClick,[e,r,this],this)}}function L9(t,e,n,r,i){const s=V9(r,t,e,n),o=j9(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function V9(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function j9(t,e,n){let r=t;return typeof e.text!="string"&&(r=PP(e,n)),r}function PP(t,e){const n=t.text?t.text.length:0;return e*n}function F9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var U9={id:"legend",_element:R1,start(t,e,n){const r=t.legend=new R1({ctx:t.ctx,options:n,chart:t});Ft.configure(t,r,n),Ft.addBox(t,r)},stop(t){Ft.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ft.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=zt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class $_ extends Yn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=je(r.text)?r.text.length:1;this._padding=zt(r.padding);const s=i*ht(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Mt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Mt(a,i,n),l=Me*-.5):(u=s-e,d=Mt(a,n,i),l=Me*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ht(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Xs(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:D_(n.align),textBaseline:"middle",translation:[o,a]})}}function B9(t,e){const n=new $_({ctx:t.ctx,options:e,chart:t});Ft.configure(t,n,e),Ft.addBox(t,n),t.titleBlock=n}var z9={id:"title",_element:$_,start(t,e,n){B9(t,n)},stop(t){const e=t.titleBlock;Ft.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ft.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gh=new WeakMap;var $9={id:"subtitle",start(t,e,n){const r=new $_({ctx:t.ctx,options:n,chart:t});Ft.configure(t,r,n),Ft.addBox(t,r),gh.set(t,r)},stop(t){Ft.removeBox(t,gh.get(t)),gh.delete(t)},beforeUpdate(t,e,n){const r=gh.get(t);Ft.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tl={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ly(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tr(t,e){return e&&(je(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Tr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function W9(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function N1(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ht(e.bodyFont),c=ht(e.titleFont),u=ht(e.footerFont),d=s.length,f=i.length,p=r.length,y=zt(e.padding);let v=y.height,x=0,_=r.reduce((I,N)=>I+N.before.length+N.lines.length+N.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const I=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*I+(_-p)*l.lineHeight+(_-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let w=0;const E=function(I){x=Math.max(x,n.measureText(I).width+w)};return n.save(),n.font=c.string,Se(t.title,E),n.font=l.string,Se(t.beforeBody.concat(t.afterBody),E),w=e.displayColors?o+2+e.boxPadding:0,Se(r,I=>{Se(I.before,E),Se(I.lines,E),Se(I.after,E)}),w=0,n.font=u.string,Se(t.footer,E),n.restore(),x+=y.width,{width:x,height:v}}function H9(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function q9(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function K9(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),q9(c,t,e,n)&&(c="center"),c}function D1(t,e,n){const r=n.yAlign||e.yAlign||H9(t,n);return{xAlign:n.xAlign||e.xAlign||K9(t,e,n,r),yAlign:r}}function G9(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Y9(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function O1(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=Vs(o);let y=G9(e,a);const v=Y9(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,f)+i:a==="right"&&(y+=Math.max(d,p)+i),{x:_t(y,0,r.width-e.width),y:_t(v,0,r.height-e.height)}}function mh(t,e,n){const r=zt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function M1(t){return tr([],Tr(t))}function Q9(t,e,n){return rs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function L1(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const AP={beforeTitle:br,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:br,beforeBody:br,beforeLabel:br,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _e(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:br,afterBody:br,beforeFooter:br,footer:br,afterFooter:br};function en(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?AP[e].call(n,r):i}class yy extends Yn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new cP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Q9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=en(r,"beforeTitle",this,e),s=en(r,"title",this,e),o=en(r,"afterTitle",this,e);let a=[];return a=tr(a,Tr(i)),a=tr(a,Tr(s)),a=tr(a,Tr(o)),a}getBeforeBody(e,n){return M1(en(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Se(e,s=>{const o={before:[],lines:[],after:[]},a=L1(r,s);tr(o.before,Tr(en(a,"beforeLabel",this,s))),tr(o.lines,en(a,"label",this,s)),tr(o.after,Tr(en(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return M1(en(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=en(r,"beforeFooter",this,e),s=en(r,"footer",this,e),o=en(r,"afterFooter",this,e);let a=[];return a=tr(a,Tr(i)),a=tr(a,Tr(s)),a=tr(a,Tr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(W9(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),Se(a,u=>{const d=L1(e.callbacks,u);i.push(en(d,"labelColor",this,u)),s.push(en(d,"labelPointStyle",this,u)),o.push(en(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Tl[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=N1(this,r),c=Object.assign({},a,l),u=D1(this.chart,r,c),d=O1(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Vs(a),{x:f,y:p}=e,{width:y,height:v}=n;let x,_,w,E,I,N;return s==="center"?(I=p+v/2,i==="left"?(x=f,_=x-o,E=I+o,N=I-o):(x=f+y,_=x+o,E=I-o,N=I+o),w=x):(i==="left"?_=f+Math.max(l,u)+o:i==="right"?_=f+y-Math.max(c,d)-o:_=this.caretX,s==="top"?(E=p,I=E-o,x=_-o,w=_+o):(E=p+v,I=E+o,x=_+o,w=_-o),N=E),{x1:x,x2:_,x3:w,y1:E,y2:I,y3:N}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Xo(r.rtl,this.x,this.width);for(e.x=mh(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ht(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=ht(s.bodyFont),d=mh(this,"left",s),f=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(f,c)+c/2,_=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,uy(e,v,x,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,uy(e,v,x,_)}else{e.lineWidth=fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),x=i.leftForLtr(i.xPlus(f,1),c-2),_=Vs(o.borderRadius);Object.values(_).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Rc(e,{x:v,y,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Rc(e,{x,y:y+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=ht(r.bodyFont);let f=d.lineHeight,p=0;const y=Xo(r.rtl,this.x,this.width),v=function(T){n.fillText(T,y.x(e.x+p),e.y+f/2),e.y+=f+s},x=y.textAlign(o);let _,w,E,I,N,O,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=mh(this,x,r),n.fillStyle=r.bodyColor,Se(this.beforeBody,v),p=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,I=0,O=i.length;I<O;++I){for(_=i[I],w=this.labelTextColors[I],n.fillStyle=w,Se(_.before,v),E=_.lines,a&&E.length&&(this._drawColorBox(n,e,I,y,r),f=Math.max(d.lineHeight,l)),N=0,S=E.length;N<S;++N)v(E[N]),f=d.lineHeight;Se(_.after,v)}p=0,f=d.lineHeight,Se(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Xo(r.rtl,this.x,this.width);for(e.x=mh(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ht(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:y}=Vs(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Tl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=N1(this,e),l=Object.assign({},o,this._size),c=D1(n,e,l),u=O1(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=zt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),iP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),sP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Kd(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Kd(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Tl[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}$(yy,"positioners",Tl);var X9={id:"tooltip",_element:yy,positioners:Tl,afterInit(t,e,n){n&&(t.tooltip=new yy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:AP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},J9=Object.freeze({__proto__:null,Colors:u9,Decimation:p9,Filler:O9,Legend:U9,SubTitle:$9,Title:z9,Tooltip:X9});const Z9=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function e8(t,e,n,r){const i=t.indexOf(e);if(i===-1)return Z9(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const t8=(t,e)=>t===null?null:_t(Math.round(t),0,e);function V1(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class vy extends lo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_e(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:e8(r,e,ae(n,e),this._addedLabels),t8(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return V1.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$(vy,"id","category"),$(vy,"defaults",{ticks:{callback:V1}});function n8(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=s||1,y=u-1,{min:v,max:x}=e,_=!_e(o),w=!_e(a),E=!_e(c),I=(x-v)/(d+1);let N=Nb((x-v)/y/p)*p,O,S,T,k;if(N<1e-14&&!_&&!w)return[{value:v},{value:x}];k=Math.ceil(x/N)-Math.floor(v/N),k>y&&(N=Nb(k*N/y/p)*p),_e(l)||(O=Math.pow(10,l),N=Math.ceil(N*O)/O),i==="ticks"?(S=Math.floor(v/N)*N,T=Math.ceil(x/N)*N):(S=v,T=x),_&&w&&s&&Y3((a-o)/s,N/1e3)?(k=Math.round(Math.min((a-o)/N,u)),N=(a-o)/k,S=o,T=a):E?(S=_?o:S,T=w?a:T,k=c-1,N=(T-S)/k):(k=(T-S)/N,$l(k,Math.round(k),N/1e3)?k=Math.round(k):k=Math.ceil(k));const P=Math.max(Db(N),Db(S));O=Math.pow(10,_e(l)?P:l),S=Math.round(S*O)/O,T=Math.round(T*O)/O;let R=0;for(_&&(f&&S!==o?(n.push({value:o}),S<o&&R++,$l(Math.round((S+R*N)*O)/O,o,j1(o,I,t))&&R++):S<o&&R++);R<k;++R){const D=Math.round((S+R*N)*O)/O;if(w&&D>a)break;n.push({value:D})}return w&&f&&T!==a?n.length&&$l(n[n.length-1].value,a,j1(a,I,t))?n[n.length-1].value=a:n.push({value:a}):(!w||T===a)&&n.push({value:T}),n}function j1(t,e,{horizontal:n,minRotation:r}){const i=Bn(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ef extends lo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=fr(i),c=fr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=n8(i,s);return e.bounds==="ticks"&&BC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return iu(e,this.chart.options.locale,this.options.ticks.format)}}class _y extends ef{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xe(e)?e:0,this.max=Xe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Bn(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}$(_y,"id","linear"),$(_y,"defaults",{ticks:{callback:ep.formatters.numeric}});const Dc=t=>Math.floor(bi(t)),_s=(t,e)=>Math.pow(10,Dc(t)+e);function F1(t){return t/Math.pow(10,Dc(t))===1}function U1(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function r8(t,e){const n=e-t;let r=Dc(n);for(;U1(t,e,r)>10;)r++;for(;U1(t,e,r)<10;)r--;return Math.min(r,Dc(t))}function i8(t,{min:e,max:n}){e=pn(t.min,e);const r=[],i=Dc(e);let s=r8(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),f=pn(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;f<n;)r.push({value:f,major:F1(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+u+d*Math.pow(10,s))*o)/o;const p=pn(t.max,f);return r.push({value:p,major:F1(p),significand:d}),r}class wy extends lo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ef.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Xe(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xe(e)?Math.max(0,e):null,this.max=Xe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xe(this._userMin)&&(this.min=e===_s(this.min,0)?_s(this.min,-1):_s(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(_s(r,-1)),o(_s(i,1)))),r<=0&&s(_s(i,-1)),i<=0&&o(_s(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=i8(n,this);return e.bounds==="ticks"&&BC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":iu(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=bi(e),this._valueRange=bi(this.max)-bi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(bi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}$(wy,"id","logarithmic"),$(wy,"defaults",{ticks:{callback:ep.formatters.logarithmic,major:{enabled:!0}}});function xy(t){const e=t.ticks;if(e.display&&t.display){const n=zt(e.backdropPadding);return ae(e.font&&e.font.size,Fe.font.size)+n.height}return 0}function s8(t,e,n){return n=je(n)?n:[n],{w:dU(t,e.string,n),h:n.length*e.lineHeight}}function B1(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function o8(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Me/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=ht(c.font),f=s8(t.ctx,d,t._pointLabels[l]);r[l]=f;const p=mn(t.getIndexAngle(l)+a),y=Math.round(R_(p)),v=B1(y,u.x,f.w,0,180),x=B1(y,u.y,f.h,90,270);a8(n,e,p,v,x)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=u8(t,r,i)}function a8(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function l8(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(R_(mn(l.angle+rt))),u=f8(l.y,a.h,c),d=h8(c),f=d8(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function c8(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Mr({x:n,y:r},e)||Mr({x:n,y:s},e)||Mr({x:i,y:r},e)||Mr({x:i,y:s},e))}function u8(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:xy(s)/2,additionalAngle:o?Me/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=l8(t,u,l);r.push(d),a==="auto"&&(d.visible=c8(d,c),d.visible&&(c=d))}return r}function h8(t){return t===0||t===180?"center":t<180?"left":"right"}function d8(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function f8(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function p8(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!_e(a)){const l=Vs(e.borderRadius),c=zt(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,f=s-r+c.width,p=o-i+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),Rc(t,{x:u,y:d,w:f,h:p,radius:l}),t.fill()):t.fillRect(u,d,f,p)}}function g8(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));p8(n,o,s);const a=ht(o.font),{x:l,y:c,textAlign:u}=s;Xs(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function RP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Oe);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function m8(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),RP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function y8(t,e,n){return rs(t,{label:n,index:e,type:"pointLabel"})}class Sl extends ef{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=zt(xy(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Xe(e)&&!isNaN(e)?e:0,this.max=Xe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xy(this.options))}generateTickLabels(e){ef.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Pe(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?o8(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Oe/(this._pointLabels.length||1),r=this.options.startAngle||0;return mn(e*n+Bn(r))}getDistanceFromCenterForValue(e){if(_e(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(_e(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return y8(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-rt+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),RP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&g8(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),p=i.setContext(f),y=s.setContext(f);m8(this,p,l,o,y)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=ht(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=zt(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Xs(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}$(Sl,"id","radialLinear"),$(Sl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ep.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),$(Sl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),$(Sl,"descriptors",{angleLines:{_fallback:"grid"}});const sp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sn=Object.keys(sp);function z1(t,e){return t-e}function $1(t,e){if(_e(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Xe(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(pa(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function W1(t,e,n,r){const i=sn.length;for(let s=sn.indexOf(t);s<i-1;++s){const o=sp[sn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return sn[s]}return sn[i-1]}function v8(t,e,n,r,i){for(let s=sn.length-1;s>=sn.indexOf(n);s--){const o=sn[s];if(sp[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return sn[n?sn.indexOf(n):0]}function _8(t){for(let e=sn.indexOf(t)+1,n=sn.length;e<n;++e)if(sp[sn[e]].common)return sn[e]}function H1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=N_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function w8(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function q1(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:w8(t,r,i,n)}class Oc extends lo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new CB._date(e.adapters.date);i.init(n),zl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:$1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Xe(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Xe(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Z3(i,s,o);return this._unit=n.unit||(r.autoSkip?W1(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):v8(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:_8(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),q1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=_t(n,0,o),r=_t(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||W1(s.minUnit,n,r,this._getLabelCapacity(n)),a=ae(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=pa(l)||l===!0,u={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<r;f=+e.add(f,a,o),p++)H1(u,f,y);return(f===r||i.bounds==="ticks"||p===1)&&H1(u,f,y),Object.keys(u).sort(z1).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Pe(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=r[n],p=c&&d&&f&&f.major;return this._adapter.format(e,i||(p?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Bn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,q1(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push($1(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return WC(e.sort(z1))}}$(Oc,"id","time"),$(Oc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function yh(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Or(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Or(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class by extends Oc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=yh(n,this.min),this._tableRange=yh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(yh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return yh(this._table,r*this._tableRange+this._minPos,!0)}}$(by,"id","timeseries"),$(by,"defaults",Oc.defaults);var x8=Object.freeze({__proto__:null,CategoryScale:vy,LinearScale:_y,LogarithmicScale:wy,RadialLinearScale:Sl,TimeScale:Oc,TimeSeriesScale:by});const b8=[IB,r9,J9,x8],NP="label";function K1(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function E8(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function DP(t,e){t.labels=e}function OP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NP;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function T8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NP;const n={labels:[],datasets:[]};return DP(n,t.labels),OP(n,t.datasets,e),n}function S8(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,p=M.useRef(null),y=M.useRef(null),v=()=>{p.current&&(y.current=new ip(p.current,{type:o,data:T8(a,s),options:l&&{...l},plugins:c}),K1(e,y.current))},x=()=>{K1(e,null),y.current&&(y.current.destroy(),y.current=null)};return M.useEffect(()=>{!i&&y.current&&l&&E8(y.current,l)},[i,l]),M.useEffect(()=>{!i&&y.current&&DP(y.current.config.data,a.labels)},[i,a.labels]),M.useEffect(()=>{!i&&y.current&&a.datasets&&OP(y.current.config.data,a.datasets,s)},[i,a.datasets]),M.useEffect(()=>{y.current&&(i?(x(),setTimeout(v)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),M.useEffect(()=>{y.current&&(x(),setTimeout(v))},[o]),M.useEffect(()=>(v(),()=>x()),[]),ce.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},u)}const k8=M.forwardRef(S8);function I8(t,e){return ip.register(e),M.forwardRef((n,r)=>ce.createElement(k8,{...n,ref:r,type:t}))}const C8=I8("bar",ql);ip.register(...b8);function P8(){var _;const t=Qr(),e=Sn(),{eventId:n}=t.state||{},[r,i]=M.useState(null),[s,o]=M.useState([]),[a,l]=M.useState(0),[c,u]=M.useState(0),[d,f]=M.useState(0);M.useState(""),M.useState(""),M.useState({name:"",ticketCount:"",specialRequirements:""});const p=(_=x6.currentUser)==null?void 0:_.uid;if(!n||!p)return m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 text-center text-white",children:[m.jsx("h1",{className:"text-4xl font-bold",children:"Event Not Found"}),m.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 mt-4 bg-gray-500 rounded-md text-white",children:"Go Back"})]});const y=async()=>{try{const w=Yt(st,`users/${p}/events`,n),E=await l_(w);if(E.exists()){const I=E.data();i({id:E.id,...I});const S=new Date(I.date)-new Date,T=Math.ceil(S/(1e3*60*60*24));f(T),v(n,I.ticketPrice||0)}else console.log("No such event found!")}catch(w){console.error("Error fetching event data:",w)}},v=async(w,E)=>{try{const I=Gn(st,`users/${p}/events/${w}/attendees`),O=(await Gs(I)).docs.map(k=>({...k.data(),id:k.id,specialRequirements:k.data().specialRequirements||"None"})),S=O.reduce((k,P)=>k+(P.ticketCount||0),0),T=O.reduce((k,P)=>k+(P.ticketCount||0)*E,0);o(O),l(S),u(T)}catch(I){console.error("Error fetching attendees:",I)}};M.useEffect(()=>{y()},[p,n]);const x={labels:s.map(w=>w.name),datasets:[{label:"Tickets Purchased",data:s.map(w=>w.ticketCount||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]};return m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 min-h-screen text-white",children:[m.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-gray-500 rounded-md text-white mb-6",children:"Go Back"}),r?m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:r.eventName}),m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Days Left to Event"}),m.jsxs("p",{className:"text-4xl font-bold mt-4",children:[d," days"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[m.jsxs("div",{className:"bg-purple-800 p-6 rounded-lg text-center shadow-lg",children:[m.jsx(tF,{size:36,className:"mx-auto mb-3 text-blue-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:"Number of Attendees"}),m.jsx("p",{className:"text-3xl font-bold",children:s.length})]}),m.jsxs("div",{className:"bg-purple-800 p-6 rounded-lg text-center shadow-lg",children:[m.jsx(Zj,{size:36,className:"mx-auto mb-3 text-green-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:"Total Tickets Sold"}),m.jsx("p",{className:"text-3xl font-bold",children:a})]}),m.jsxs("div",{className:"bg-purple-800 p-6 rounded-lg text-center shadow-lg",children:[m.jsx(Qj,{size:36,className:"mx-auto mb-3 text-yellow-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:"Total Revenue"}),m.jsxs("p",{className:"text-3xl font-bold",children:["$",c]})]})]}),m.jsxs("div",{className:"bg-purple-900 p-6 rounded-lg shadow-lg mb-10",children:[m.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Tickets Purchased per Attendee"}),s.length>0?m.jsx(C8,{data:x,options:{responsive:!0}}):m.jsx("p",{className:"text-center",children:"No attendees yet."})]}),m.jsxs("div",{className:"bg-purple-900 p-6 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Attendee List"}),s.length>0?m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"table-auto min-w-full text-left",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2",children:"Name"}),m.jsx("th",{className:"px-4 py-2",children:"Tickets Purchased"}),m.jsx("th",{className:"px-4 py-2",children:"Amount Paid"}),m.jsx("th",{className:"px-4 py-2",children:"Special Requirements"})]})}),m.jsx("tbody",{children:s.map((w,E)=>m.jsxs("tr",{className:`${E%2===0?"bg-purple-800":"bg-purple-700"}`,children:[m.jsx("td",{className:"px-4 py-2",children:w.name||"N/A"}),m.jsx("td",{className:"px-4 py-2",children:w.ticketCount||0}),m.jsxs("td",{className:"px-4 py-2",children:["$",w.ticketCount?w.ticketCount*(r.ticketPrice||0):0]}),m.jsx("td",{className:"px-4 py-2",children:w.specialRequirements||"None"})]},E))})]})}):m.jsx("p",{className:"text-center",children:"No attendees yet."})]})]}):m.jsx("p",{children:"Loading event details..."})]})}const oi=({isAllowed:t,children:e})=>t?e:m.jsx(vN,{to:"/not-authorized",replace:!0}),A8=()=>{const t=Sn();return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-80",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Access Restricted"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"You need to log in or register to access this feature."}),m.jsxs("div",{className:"flex justify-end",children:[m.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2",onClick:()=>t("/login"),children:"Login/Register"}),m.jsx("button",{className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",onClick:()=>t("/"),children:"Close"})]})]})})},R8=({onClose:t})=>m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-80",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Access Restricted"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Please register or login to access this feature."}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2",onClick:t,children:"Close"})})]})});function N8(){const{user:t,login:e,register:n,logout:r}=so(),[i,s]=M.useState([]),[o,a]=M.useState(!1),[l,c]=M.useState(!1);Sn();const u=!!t,d=()=>{c(!1)},f=p=>{s(y=>y.filter(v=>v.id!==p))};return M.useEffect(()=>{const p=localStorage.getItem("favorites");p&&s(JSON.parse(p))},[]),M.useEffect(()=>{localStorage.setItem("favorites",JSON.stringify(i))},[i]),m.jsx(E6,{children:m.jsxs("div",{className:"App",children:[m.jsx(nF,{user:t,onLogin:()=>c(!0),onLogout:r}),m.jsx(Uj,{}),m.jsxs(wN,{children:[m.jsx(fn,{path:"/",element:m.jsx(rF,{})}),m.jsx(fn,{path:"/event",element:m.jsx(S6,{})}),m.jsx(fn,{path:"/event/:eventId",element:m.jsx(P6,{})}),m.jsx(fn,{path:"/not-authorized",element:m.jsx(A8,{})}),m.jsx(fn,{path:"/create-event",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(cC,{})})}),m.jsx(fn,{path:"/manage-events",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(C6,{})})}),m.jsx(fn,{path:"/events/view-details/:eventId",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(P8,{})})}),m.jsx(fn,{path:"/edit-event/:id",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(A6,{})})}),m.jsx(fn,{path:"/my-events",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(R6,{favoriteEvents:i,onRemoveEvent:f})})}),m.jsx(fn,{path:"/favorites",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(N6,{})})}),m.jsx(fn,{path:"/calendar",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(g3,{})})}),m.jsx(fn,{path:"/manage-reservations",element:m.jsx(oi,{isAllowed:u,onRestrictedAccess:()=>c(!0),children:m.jsx(m3,{})})})]}),o&&m.jsx(R8,{onClose:()=>a(!1)}),l&&m.jsx(c_,{onClose:d})]})})}bg.createRoot(document.getElementById("root")).render(m.jsx(CN,{basename:"/Event-Planner",children:m.jsx(Bj,{children:m.jsx(N8,{})})}));
