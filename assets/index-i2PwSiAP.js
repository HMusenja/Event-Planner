var XP=Object.defineProperty;var JP=(t,e,n)=>e in t?XP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>JP(t,typeof e!="symbol"?e+"":e,n);function ZP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K1={exports:{}},Xd={},G1={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc=Symbol.for("react.element"),eA=Symbol.for("react.portal"),tA=Symbol.for("react.fragment"),nA=Symbol.for("react.strict_mode"),rA=Symbol.for("react.profiler"),iA=Symbol.for("react.provider"),sA=Symbol.for("react.context"),oA=Symbol.for("react.forward_ref"),aA=Symbol.for("react.suspense"),lA=Symbol.for("react.memo"),cA=Symbol.for("react.lazy"),w0=Symbol.iterator;function uA(t){return t===null||typeof t!="object"?null:(t=w0&&t[w0]||t["@@iterator"],typeof t=="function"?t:null)}var Y1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q1=Object.assign,X1={};function ma(t,e,n){this.props=t,this.context=e,this.refs=X1,this.updater=n||Y1}ma.prototype.isReactComponent={};ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function J1(){}J1.prototype=ma.prototype;function yy(t,e,n){this.props=t,this.context=e,this.refs=X1,this.updater=n||Y1}var vy=yy.prototype=new J1;vy.constructor=yy;Q1(vy,ma.prototype);vy.isPureReactComponent=!0;var x0=Array.isArray,Z1=Object.prototype.hasOwnProperty,_y={current:null},eE={key:!0,ref:!0,__self:!0,__source:!0};function tE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Z1.call(e,r)&&!eE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dc,type:t,key:s,ref:o,props:i,_owner:_y.current}}function hA(t,e){return{$$typeof:Dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dc}function dA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var b0=/\/+/g;function hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dA(""+t.key):e.toString(36)}function mh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dc:case eA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hp(o,0):r,x0(i)?(n="",t!=null&&(n=t.replace(b0,"$&/")+"/"),mh(i,e,n,"",function(c){return c})):i!=null&&(wy(i)&&(i=hA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(b0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",x0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+hp(s,a);o+=mh(s,e,n,l,i)}else if(l=uA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+hp(s,a++),o+=mh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Iu(t,e,n){if(t==null)return t;var r=[],i=0;return mh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function fA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xt={current:null},yh={transition:null},pA={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:yh,ReactCurrentOwner:_y};function nE(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Iu,forEach:function(t,e,n){Iu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Iu(t,function(){e++}),e},toArray:function(t){return Iu(t,function(e){return e})||[]},only:function(t){if(!wy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=ma;ue.Fragment=tA;ue.Profiler=rA;ue.PureComponent=yy;ue.StrictMode=nA;ue.Suspense=aA;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pA;ue.act=nE;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_y.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Z1.call(e,l)&&!eE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Dc,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:sA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iA,_context:t},t.Consumer=t};ue.createElement=tE;ue.createFactory=function(t){var e=tE.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:oA,render:t}};ue.isValidElement=wy;ue.lazy=function(t){return{$$typeof:cA,_payload:{_status:-1,_result:t},_init:fA}};ue.memo=function(t,e){return{$$typeof:lA,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=yh.transition;yh.transition={};try{t()}finally{yh.transition=e}};ue.unstable_act=nE;ue.useCallback=function(t,e){return Xt.current.useCallback(t,e)};ue.useContext=function(t){return Xt.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Xt.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Xt.current.useEffect(t,e)};ue.useId=function(){return Xt.current.useId()};ue.useImperativeHandle=function(t,e,n){return Xt.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Xt.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Xt.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Xt.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Xt.current.useReducer(t,e,n)};ue.useRef=function(t){return Xt.current.useRef(t)};ue.useState=function(t){return Xt.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Xt.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Xt.current.useTransition()};ue.version="18.3.1";G1.exports=ue;var M=G1.exports;const ce=q1(M),gA=ZP({__proto__:null,default:ce},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=M,yA=Symbol.for("react.element"),vA=Symbol.for("react.fragment"),_A=Object.prototype.hasOwnProperty,wA=mA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xA={key:!0,ref:!0,__self:!0,__source:!0};function rE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_A.call(e,r)&&!xA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yA,type:t,key:s,ref:o,props:i,_owner:wA.current}}Xd.Fragment=vA;Xd.jsx=rE;Xd.jsxs=rE;K1.exports=Xd;var m=K1.exports,mg={},iE={exports:{}},En={},sE={exports:{}},oE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var H=U.length;U.push(W);e:for(;0<H;){var ie=H-1>>>1,X=U[ie];if(0<i(X,W))U[ie]=W,U[H]=X,H=ie;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],H=U.pop();if(H!==W){U[0]=H;e:for(var ie=0,X=U.length,ne=X>>>1;ie<ne;){var me=2*(ie+1)-1,be=U[me],Ee=me+1,Ze=U[Ee];if(0>i(be,H))Ee<X&&0>i(Ze,be)?(U[ie]=Ze,U[Ee]=H,ie=Ee):(U[ie]=be,U[me]=H,ie=me);else if(Ee<X&&0>i(Ze,H))U[ie]=Ze,U[Ee]=H,ie=Ee;else break e}}return W}function i(U,W){var H=U.sortIndex-W.sortIndex;return H!==0?H:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,f=3,p=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(U){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=U)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function I(U){if(v=!1,E(U),!y)if(n(l)!==null)y=!0,G(N);else{var W=n(c);W!==null&&re(I,W.startTime-U)}}function N(U,W){y=!1,v&&(v=!1,_(T),T=-1),p=!0;var H=f;try{for(E(W),d=n(l);d!==null&&(!(d.expirationTime>W)||U&&!R());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var X=ie(d.expirationTime<=W);W=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),E(W)}else r(l);d=n(l)}if(d!==null)var ne=!0;else{var me=n(c);me!==null&&re(I,me.startTime-W),ne=!1}return ne}finally{d=null,f=H,p=!1}}var O=!1,S=null,T=-1,k=5,P=-1;function R(){return!(t.unstable_now()-P<k)}function D(){if(S!==null){var U=t.unstable_now();P=U;var W=!0;try{W=S(!0,U)}finally{W?A():(O=!1,S=null)}}else O=!1}var A;if(typeof w=="function")A=function(){w(D)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Y=Z.port2;Z.port1.onmessage=D,A=function(){Y.postMessage(null)}}else A=function(){b(D,0)};function G(U){S=U,O||(O=!0,A())}function re(U,W){T=b(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,G(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var H=f;f=W;try{return U()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var H=f;f=U;try{return W()}finally{f=H}},t.unstable_scheduleCallback=function(U,W,H){var ie=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ie+H:ie):H=ie,U){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=H+X,U={id:h++,callback:W,priorityLevel:U,startTime:H,expirationTime:X,sortIndex:-1},H>ie?(U.sortIndex=H,e(c,U),n(l)===null&&U===n(c)&&(v?(_(T),T=-1):v=!0,re(I,H-ie))):(U.sortIndex=X,e(l,U),y||p||(y=!0,G(N))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var W=f;return function(){var H=f;f=W;try{return U.apply(this,arguments)}finally{f=H}}}})(oE);sE.exports=oE;var bA=sE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA=M,bn=bA;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aE=new Set,Kl={};function Js(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(Kl[t]=e,t=0;t<e.length;t++)aE.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yg=Object.prototype.hasOwnProperty,TA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E0={},T0={};function SA(t){return yg.call(T0,t)?!0:yg.call(E0,t)?!1:TA.test(t)?T0[t]=!0:(E0[t]=!0,!1)}function kA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IA(t,e,n,r){if(e===null||typeof e>"u"||kA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xy=/[\-:]([a-z])/g;function by(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xy,by);Pt[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xy,by);Pt[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xy,by);Pt[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ey(t,e,n,r){var i=Pt.hasOwnProperty(e)?Pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IA(e,n,i,r)&&(n=null),r||i===null?SA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kr=EA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),ko=Symbol.for("react.portal"),Io=Symbol.for("react.fragment"),Ty=Symbol.for("react.strict_mode"),vg=Symbol.for("react.profiler"),lE=Symbol.for("react.provider"),cE=Symbol.for("react.context"),Sy=Symbol.for("react.forward_ref"),_g=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),ky=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),uE=Symbol.for("react.offscreen"),S0=Symbol.iterator;function Ga(t){return t===null||typeof t!="object"?null:(t=S0&&t[S0]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,dp;function ll(t){if(dp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dp=e&&e[1]||""}return`
`+dp+t}var fp=!1;function pp(t,e){if(!t||fp)return"";fp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ll(t):""}function CA(t){switch(t.tag){case 5:return ll(t.type);case 16:return ll("Lazy");case 13:return ll("Suspense");case 19:return ll("SuspenseList");case 0:case 2:case 15:return t=pp(t.type,!1),t;case 11:return t=pp(t.type.render,!1),t;case 1:return t=pp(t.type,!0),t;default:return""}}function xg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Io:return"Fragment";case ko:return"Portal";case vg:return"Profiler";case Ty:return"StrictMode";case _g:return"Suspense";case wg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cE:return(t.displayName||"Context")+".Consumer";case lE:return(t._context.displayName||"Context")+".Provider";case Sy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ky:return e=t.displayName||null,e!==null?e:xg(t.type)||"Memo";case oi:e=t._payload,t=t._init;try{return xg(t(e))}catch{}}return null}function PA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xg(e);case 8:return e===Ty?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AA(t){var e=hE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pu(t){t._valueTracker||(t._valueTracker=AA(t))}function dE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bg(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function k0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fE(t,e){e=e.checked,e!=null&&Ey(t,"checked",e,!1)}function Eg(t,e){fE(t,e);var n=Li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tg(t,e.type,Li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tg(t,e,n){(e!=="number"||Gh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cl=Array.isArray;function Bo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Li(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(cl(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Li(n)}}function pE(t,e){var n=Li(e.value),r=Li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function P0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Au,mE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Au=Au||document.createElement("div"),Au.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Au.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RA=["Webkit","ms","Moz","O"];Object.keys(Sl).forEach(function(t){RA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sl[e]=Sl[t]})});function yE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sl.hasOwnProperty(t)&&Sl[t]?(""+e).trim():e+"px"}function vE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NA=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ig(t,e){if(e){if(NA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Cg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pg=null;function Iy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ag=null,zo=null,$o=null;function A0(t){if(t=Lc(t)){if(typeof Ag!="function")throw Error(B(280));var e=t.stateNode;e&&(e=nf(e),Ag(t.stateNode,t.type,e))}}function _E(t){zo?$o?$o.push(t):$o=[t]:zo=t}function wE(){if(zo){var t=zo,e=$o;if($o=zo=null,A0(t),e)for(t=0;t<e.length;t++)A0(e[t])}}function xE(t,e){return t(e)}function bE(){}var gp=!1;function EE(t,e,n){if(gp)return t(e,n);gp=!0;try{return xE(t,e,n)}finally{gp=!1,(zo!==null||$o!==null)&&(bE(),wE())}}function Yl(t,e){var n=t.stateNode;if(n===null)return null;var r=nf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Rg=!1;if(Fr)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){Rg=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{Rg=!1}function DA(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var kl=!1,Yh=null,Qh=!1,Ng=null,OA={onError:function(t){kl=!0,Yh=t}};function MA(t,e,n,r,i,s,o,a,l){kl=!1,Yh=null,DA.apply(OA,arguments)}function LA(t,e,n,r,i,s,o,a,l){if(MA.apply(this,arguments),kl){if(kl){var c=Yh;kl=!1,Yh=null}else throw Error(B(198));Qh||(Qh=!0,Ng=c)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R0(t){if(Zs(t)!==t)throw Error(B(188))}function VA(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return R0(i),t;if(s===r)return R0(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function SE(t){return t=VA(t),t!==null?kE(t):null}function kE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kE(t);if(e!==null)return e;t=t.sibling}return null}var IE=bn.unstable_scheduleCallback,N0=bn.unstable_cancelCallback,jA=bn.unstable_shouldYield,FA=bn.unstable_requestPaint,tt=bn.unstable_now,UA=bn.unstable_getCurrentPriorityLevel,Cy=bn.unstable_ImmediatePriority,CE=bn.unstable_UserBlockingPriority,Xh=bn.unstable_NormalPriority,BA=bn.unstable_LowPriority,PE=bn.unstable_IdlePriority,Jd=null,or=null;function zA(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Jd,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:HA,$A=Math.log,WA=Math.LN2;function HA(t){return t>>>=0,t===0?32:31-($A(t)/WA|0)|0}var Ru=64,Nu=4194304;function ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ul(a):(s&=o,s!==0&&(r=ul(s)))}else o=n&~i,o!==0?r=ul(o):s!==0&&(r=ul(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),i=1<<n,r|=t[n],e&=~i;return r}function qA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=qA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Dg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AE(){var t=Ru;return Ru<<=1,!(Ru&4194240)&&(Ru=64),t}function mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function GA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function RE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NE,Ay,DE,OE,ME,Og=!1,Du=[],Ei=null,Ti=null,Si=null,Ql=new Map,Xl=new Map,li=[],YA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D0(t,e){switch(t){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Si=null;break;case"pointerover":case"pointerout":Ql.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(e.pointerId)}}function Qa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Lc(e),e!==null&&Ay(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function QA(t,e,n,r,i){switch(e){case"focusin":return Ei=Qa(Ei,t,e,n,r,i),!0;case"dragenter":return Ti=Qa(Ti,t,e,n,r,i),!0;case"mouseover":return Si=Qa(Si,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ql.set(s,Qa(Ql.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xl.set(s,Qa(Xl.get(s)||null,t,e,n,r,i)),!0}return!1}function LE(t){var e=Ss(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=TE(n),e!==null){t.blockedOn=e,ME(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pg=r,n.target.dispatchEvent(r),Pg=null}else return e=Lc(n),e!==null&&Ay(e),t.blockedOn=n,!1;e.shift()}return!0}function O0(t,e,n){vh(t)&&n.delete(e)}function XA(){Og=!1,Ei!==null&&vh(Ei)&&(Ei=null),Ti!==null&&vh(Ti)&&(Ti=null),Si!==null&&vh(Si)&&(Si=null),Ql.forEach(O0),Xl.forEach(O0)}function Xa(t,e){t.blockedOn===e&&(t.blockedOn=null,Og||(Og=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,XA)))}function Jl(t){function e(i){return Xa(i,t)}if(0<Du.length){Xa(Du[0],t);for(var n=1;n<Du.length;n++){var r=Du[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ei!==null&&Xa(Ei,t),Ti!==null&&Xa(Ti,t),Si!==null&&Xa(Si,t),Ql.forEach(e),Xl.forEach(e),n=0;n<li.length;n++)r=li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<li.length&&(n=li[0],n.blockedOn===null);)LE(n),n.blockedOn===null&&li.shift()}var Wo=Kr.ReactCurrentBatchConfig,Zh=!0;function JA(t,e,n,r){var i=ke,s=Wo.transition;Wo.transition=null;try{ke=1,Ry(t,e,n,r)}finally{ke=i,Wo.transition=s}}function ZA(t,e,n,r){var i=ke,s=Wo.transition;Wo.transition=null;try{ke=4,Ry(t,e,n,r)}finally{ke=i,Wo.transition=s}}function Ry(t,e,n,r){if(Zh){var i=Mg(t,e,n,r);if(i===null)kp(t,e,r,ed,n),D0(t,r);else if(QA(i,t,e,n,r))r.stopPropagation();else if(D0(t,r),e&4&&-1<YA.indexOf(t)){for(;i!==null;){var s=Lc(i);if(s!==null&&NE(s),s=Mg(t,e,n,r),s===null&&kp(t,e,r,ed,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else kp(t,e,r,null,n)}}var ed=null;function Mg(t,e,n,r){if(ed=null,t=Iy(r),t=Ss(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function VE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UA()){case Cy:return 1;case CE:return 4;case Xh:case BA:return 16;case PE:return 536870912;default:return 16}default:return 16}}var gi=null,Ny=null,_h=null;function jE(){if(_h)return _h;var t,e=Ny,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return _h=i.slice(t,1<r?1-r:void 0)}function wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ou(){return!0}function M0(){return!1}function Tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ou:M0,this.isPropagationStopped=M0,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ou)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ou)},persist:function(){},isPersistent:Ou}),e}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dy=Tn(ya),Mc=He({},ya,{view:0,detail:0}),eR=Tn(Mc),yp,vp,Ja,Zd=He({},Mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(yp=t.screenX-Ja.screenX,vp=t.screenY-Ja.screenY):vp=yp=0,Ja=t),yp)},movementY:function(t){return"movementY"in t?t.movementY:vp}}),L0=Tn(Zd),tR=He({},Zd,{dataTransfer:0}),nR=Tn(tR),rR=He({},Mc,{relatedTarget:0}),_p=Tn(rR),iR=He({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),sR=Tn(iR),oR=He({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aR=Tn(oR),lR=He({},ya,{data:0}),V0=Tn(lR),cR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hR[t])?!!e[t]:!1}function Oy(){return dR}var fR=He({},Mc,{key:function(t){if(t.key){var e=cR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oy,charCode:function(t){return t.type==="keypress"?wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pR=Tn(fR),gR=He({},Zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j0=Tn(gR),mR=He({},Mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oy}),yR=Tn(mR),vR=He({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),_R=Tn(vR),wR=He({},Zd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xR=Tn(wR),bR=[9,13,27,32],My=Fr&&"CompositionEvent"in window,Il=null;Fr&&"documentMode"in document&&(Il=document.documentMode);var ER=Fr&&"TextEvent"in window&&!Il,FE=Fr&&(!My||Il&&8<Il&&11>=Il),F0=" ",U0=!1;function UE(t,e){switch(t){case"keyup":return bR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function TR(t,e){switch(t){case"compositionend":return BE(e);case"keypress":return e.which!==32?null:(U0=!0,F0);case"textInput":return t=e.data,t===F0&&U0?null:t;default:return null}}function SR(t,e){if(Co)return t==="compositionend"||!My&&UE(t,e)?(t=jE(),_h=Ny=gi=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FE&&e.locale!=="ko"?null:e.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kR[t.type]:e==="textarea"}function zE(t,e,n,r){_E(r),e=td(e,"onChange"),0<e.length&&(n=new Dy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cl=null,Zl=null;function IR(t){ZE(t,0)}function ef(t){var e=Ro(t);if(dE(e))return t}function CR(t,e){if(t==="change")return e}var $E=!1;if(Fr){var wp;if(Fr){var xp="oninput"in document;if(!xp){var z0=document.createElement("div");z0.setAttribute("oninput","return;"),xp=typeof z0.oninput=="function"}wp=xp}else wp=!1;$E=wp&&(!document.documentMode||9<document.documentMode)}function $0(){Cl&&(Cl.detachEvent("onpropertychange",WE),Zl=Cl=null)}function WE(t){if(t.propertyName==="value"&&ef(Zl)){var e=[];zE(e,Zl,t,Iy(t)),EE(IR,e)}}function PR(t,e,n){t==="focusin"?($0(),Cl=e,Zl=n,Cl.attachEvent("onpropertychange",WE)):t==="focusout"&&$0()}function AR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ef(Zl)}function RR(t,e){if(t==="click")return ef(e)}function NR(t,e){if(t==="input"||t==="change")return ef(e)}function DR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:DR;function ec(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yg.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function W0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H0(t,e){var n=W0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W0(n)}}function HE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qE(){for(var t=window,e=Gh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gh(t.document)}return e}function Ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OR(t){var e=qE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&HE(n.ownerDocument.documentElement,n)){if(r!==null&&Ly(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=H0(n,s);var o=H0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MR=Fr&&"documentMode"in document&&11>=document.documentMode,Po=null,Lg=null,Pl=null,Vg=!1;function q0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vg||Po==null||Po!==Gh(r)||(r=Po,"selectionStart"in r&&Ly(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pl&&ec(Pl,r)||(Pl=r,r=td(Lg,"onSelect"),0<r.length&&(e=new Dy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function Mu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ao={animationend:Mu("Animation","AnimationEnd"),animationiteration:Mu("Animation","AnimationIteration"),animationstart:Mu("Animation","AnimationStart"),transitionend:Mu("Transition","TransitionEnd")},bp={},KE={};Fr&&(KE=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function tf(t){if(bp[t])return bp[t];if(!Ao[t])return t;var e=Ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KE)return bp[t]=e[n];return t}var GE=tf("animationend"),YE=tf("animationiteration"),QE=tf("animationstart"),XE=tf("transitionend"),JE=new Map,K0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(t,e){JE.set(t,e),Js(e,[t])}for(var Ep=0;Ep<K0.length;Ep++){var Tp=K0[Ep],LR=Tp.toLowerCase(),VR=Tp[0].toUpperCase()+Tp.slice(1);qi(LR,"on"+VR)}qi(GE,"onAnimationEnd");qi(YE,"onAnimationIteration");qi(QE,"onAnimationStart");qi("dblclick","onDoubleClick");qi("focusin","onFocus");qi("focusout","onBlur");qi(XE,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);Js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Js("onBeforeInput",["compositionend","keypress","textInput","paste"]);Js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jR=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function G0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LA(r,e,void 0,t),t.currentTarget=null}function ZE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;G0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;G0(i,a,c),s=l}}}if(Qh)throw t=Ng,Qh=!1,Ng=null,t}function Ne(t,e){var n=e[zg];n===void 0&&(n=e[zg]=new Set);var r=t+"__bubble";n.has(r)||(eT(e,t,2,!1),n.add(r))}function Sp(t,e,n){var r=0;e&&(r|=4),eT(n,t,r,e)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function tc(t){if(!t[Lu]){t[Lu]=!0,aE.forEach(function(n){n!=="selectionchange"&&(jR.has(n)||Sp(n,!1,t),Sp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lu]||(e[Lu]=!0,Sp("selectionchange",!1,e))}}function eT(t,e,n,r){switch(VE(e)){case 1:var i=JA;break;case 4:i=ZA;break;default:i=Ry}n=i.bind(null,e,n,t),i=void 0,!Rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ss(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}EE(function(){var c=s,h=Iy(n),d=[];e:{var f=JE.get(t);if(f!==void 0){var p=Dy,y=t;switch(t){case"keypress":if(wh(n)===0)break e;case"keydown":case"keyup":p=pR;break;case"focusin":y="focus",p=_p;break;case"focusout":y="blur",p=_p;break;case"beforeblur":case"afterblur":p=_p;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=L0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=nR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=yR;break;case GE:case YE:case QE:p=sR;break;case XE:p=_R;break;case"scroll":p=eR;break;case"wheel":p=xR;break;case"copy":case"cut":case"paste":p=aR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=j0}var v=(e&4)!==0,b=!v&&t==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var w=c,E;w!==null;){E=w;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,_!==null&&(I=Yl(w,_),I!=null&&v.push(nc(w,I,E)))),b)break;w=w.return}0<v.length&&(f=new p(f,y,null,n,h),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Pg&&(y=n.relatedTarget||n.fromElement)&&(Ss(y)||y[Ur]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?Ss(y):null,y!==null&&(b=Zs(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=L0,I="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=j0,I="onPointerLeave",_="onPointerEnter",w="pointer"),b=p==null?f:Ro(p),E=y==null?f:Ro(y),f=new v(I,w+"leave",p,n,h),f.target=b,f.relatedTarget=E,I=null,Ss(h)===c&&(v=new v(_,w+"enter",y,n,h),v.target=E,v.relatedTarget=b,I=v),b=I,p&&y)t:{for(v=p,_=y,w=0,E=v;E;E=_o(E))w++;for(E=0,I=_;I;I=_o(I))E++;for(;0<w-E;)v=_o(v),w--;for(;0<E-w;)_=_o(_),E--;for(;w--;){if(v===_||_!==null&&v===_.alternate)break t;v=_o(v),_=_o(_)}v=null}else v=null;p!==null&&Y0(d,f,p,v,!1),y!==null&&b!==null&&Y0(d,b,y,v,!0)}}e:{if(f=c?Ro(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=CR;else if(B0(f))if($E)N=NR;else{N=AR;var O=PR}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=RR);if(N&&(N=N(t,c))){zE(d,N,n,h);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Tg(f,"number",f.value)}switch(O=c?Ro(c):window,t){case"focusin":(B0(O)||O.contentEditable==="true")&&(Po=O,Lg=c,Pl=null);break;case"focusout":Pl=Lg=Po=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,q0(d,n,h);break;case"selectionchange":if(MR)break;case"keydown":case"keyup":q0(d,n,h)}var S;if(My)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Co?UE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(FE&&n.locale!=="ko"&&(Co||T!=="onCompositionStart"?T==="onCompositionEnd"&&Co&&(S=jE()):(gi=h,Ny="value"in gi?gi.value:gi.textContent,Co=!0)),O=td(c,T),0<O.length&&(T=new V0(T,t,null,n,h),d.push({event:T,listeners:O}),S?T.data=S:(S=BE(n),S!==null&&(T.data=S)))),(S=ER?TR(t,n):SR(t,n))&&(c=td(c,"onBeforeInput"),0<c.length&&(h=new V0("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=S))}ZE(d,e)})}function nc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yl(t,n),s!=null&&r.unshift(nc(t,s,i)),s=Yl(t,e),s!=null&&r.push(nc(t,s,i))),t=t.return}return r}function _o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Yl(n,s),l!=null&&o.unshift(nc(n,l,a))):i||(l=Yl(n,s),l!=null&&o.push(nc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FR=/\r\n?/g,UR=/\u0000|\uFFFD/g;function Q0(t){return(typeof t=="string"?t:""+t).replace(FR,`
`).replace(UR,"")}function Vu(t,e,n){if(e=Q0(e),Q0(t)!==e&&n)throw Error(B(425))}function nd(){}var jg=null,Fg=null;function Ug(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bg=typeof setTimeout=="function"?setTimeout:void 0,BR=typeof clearTimeout=="function"?clearTimeout:void 0,X0=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof X0<"u"?function(t){return X0.resolve(null).then(t).catch($R)}:Bg;function $R(t){setTimeout(function(){throw t})}function Ip(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jl(e)}function ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function J0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var va=Math.random().toString(36).slice(2),ir="__reactFiber$"+va,rc="__reactProps$"+va,Ur="__reactContainer$"+va,zg="__reactEvents$"+va,WR="__reactListeners$"+va,HR="__reactHandles$"+va;function Ss(t){var e=t[ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ur]||n[ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J0(t);t!==null;){if(n=t[ir])return n;t=J0(t)}return e}t=n,n=t.parentNode}return null}function Lc(t){return t=t[ir]||t[Ur],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function nf(t){return t[rc]||null}var $g=[],No=-1;function Ki(t){return{current:t}}function De(t){0>No||(t.current=$g[No],$g[No]=null,No--)}function Ae(t,e){No++,$g[No]=t.current,t.current=e}var Vi={},Bt=Ki(Vi),an=Ki(!1),Fs=Vi;function Zo(t,e){var n=t.type.contextTypes;if(!n)return Vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function rd(){De(an),De(Bt)}function Z0(t,e,n){if(Bt.current!==Vi)throw Error(B(168));Ae(Bt,e),Ae(an,n)}function tT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,PA(t)||"Unknown",i));return He({},n,r)}function id(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vi,Fs=Bt.current,Ae(Bt,t),Ae(an,an.current),!0}function ew(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=tT(t,e,Fs),r.__reactInternalMemoizedMergedChildContext=t,De(an),De(Bt),Ae(Bt,t)):De(an),Ae(an,n)}var kr=null,rf=!1,Cp=!1;function nT(t){kr===null?kr=[t]:kr.push(t)}function qR(t){rf=!0,nT(t)}function Gi(){if(!Cp&&kr!==null){Cp=!0;var t=0,e=ke;try{var n=kr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,rf=!1}catch(i){throw kr!==null&&(kr=kr.slice(t+1)),IE(Cy,Gi),i}finally{ke=e,Cp=!1}}return null}var Do=[],Oo=0,sd=null,od=0,In=[],Cn=0,Us=null,Cr=1,Pr="";function ws(t,e){Do[Oo++]=od,Do[Oo++]=sd,sd=t,od=e}function rT(t,e,n){In[Cn++]=Cr,In[Cn++]=Pr,In[Cn++]=Us,Us=t;var r=Cr;t=Pr;var i=32-zn(r)-1;r&=~(1<<i),n+=1;var s=32-zn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Cr=1<<32-zn(e)+i|n<<i|r,Pr=s+t}else Cr=1<<s|n<<i|r,Pr=t}function Vy(t){t.return!==null&&(ws(t,1),rT(t,1,0))}function jy(t){for(;t===sd;)sd=Do[--Oo],Do[Oo]=null,od=Do[--Oo],Do[Oo]=null;for(;t===Us;)Us=In[--Cn],In[Cn]=null,Pr=In[--Cn],In[Cn]=null,Cr=In[--Cn],In[Cn]=null}var xn=null,yn=null,Le=!1,Fn=null;function iT(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,yn=ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:Cr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,yn=null,!0):!1;default:return!1}}function Wg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hg(t){if(Le){var e=yn;if(e){var n=e;if(!tw(t,e)){if(Wg(t))throw Error(B(418));e=ki(n.nextSibling);var r=xn;e&&tw(t,e)?iT(r,n):(t.flags=t.flags&-4097|2,Le=!1,xn=t)}}else{if(Wg(t))throw Error(B(418));t.flags=t.flags&-4097|2,Le=!1,xn=t}}}function nw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function ju(t){if(t!==xn)return!1;if(!Le)return nw(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ug(t.type,t.memoizedProps)),e&&(e=yn)){if(Wg(t))throw sT(),Error(B(418));for(;e;)iT(t,e),e=ki(e.nextSibling)}if(nw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=xn?ki(t.stateNode.nextSibling):null;return!0}function sT(){for(var t=yn;t;)t=ki(t.nextSibling)}function ea(){yn=xn=null,Le=!1}function Fy(t){Fn===null?Fn=[t]:Fn.push(t)}var KR=Kr.ReactCurrentBatchConfig;function Za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Fu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rw(t){var e=t._init;return e(t._payload)}function oT(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Ai(_,w),_.index=0,_.sibling=null,_}function s(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,E,I){return w===null||w.tag!==6?(w=Mp(E,_.mode,I),w.return=_,w):(w=i(w,E),w.return=_,w)}function l(_,w,E,I){var N=E.type;return N===Io?h(_,w,E.props.children,I,E.key):w!==null&&(w.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===oi&&rw(N)===w.type)?(I=i(w,E.props),I.ref=Za(_,w,E),I.return=_,I):(I=Ih(E.type,E.key,E.props,null,_.mode,I),I.ref=Za(_,w,E),I.return=_,I)}function c(_,w,E,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Lp(E,_.mode,I),w.return=_,w):(w=i(w,E.children||[]),w.return=_,w)}function h(_,w,E,I,N){return w===null||w.tag!==7?(w=Rs(E,_.mode,I,N),w.return=_,w):(w=i(w,E),w.return=_,w)}function d(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Mp(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cu:return E=Ih(w.type,w.key,w.props,null,_.mode,E),E.ref=Za(_,null,w),E.return=_,E;case ko:return w=Lp(w,_.mode,E),w.return=_,w;case oi:var I=w._init;return d(_,I(w._payload),E)}if(cl(w)||Ga(w))return w=Rs(w,_.mode,E,null),w.return=_,w;Fu(_,w)}return null}function f(_,w,E,I){var N=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:a(_,w,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cu:return E.key===N?l(_,w,E,I):null;case ko:return E.key===N?c(_,w,E,I):null;case oi:return N=E._init,f(_,w,N(E._payload),I)}if(cl(E)||Ga(E))return N!==null?null:h(_,w,E,I,null);Fu(_,E)}return null}function p(_,w,E,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(E)||null,a(w,_,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Cu:return _=_.get(I.key===null?E:I.key)||null,l(w,_,I,N);case ko:return _=_.get(I.key===null?E:I.key)||null,c(w,_,I,N);case oi:var O=I._init;return p(_,w,E,O(I._payload),N)}if(cl(I)||Ga(I))return _=_.get(E)||null,h(w,_,I,N,null);Fu(w,I)}return null}function y(_,w,E,I){for(var N=null,O=null,S=w,T=w=0,k=null;S!==null&&T<E.length;T++){S.index>T?(k=S,S=null):k=S.sibling;var P=f(_,S,E[T],I);if(P===null){S===null&&(S=k);break}t&&S&&P.alternate===null&&e(_,S),w=s(P,w,T),O===null?N=P:O.sibling=P,O=P,S=k}if(T===E.length)return n(_,S),Le&&ws(_,T),N;if(S===null){for(;T<E.length;T++)S=d(_,E[T],I),S!==null&&(w=s(S,w,T),O===null?N=S:O.sibling=S,O=S);return Le&&ws(_,T),N}for(S=r(_,S);T<E.length;T++)k=p(S,_,T,E[T],I),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?T:k.key),w=s(k,w,T),O===null?N=k:O.sibling=k,O=k);return t&&S.forEach(function(R){return e(_,R)}),Le&&ws(_,T),N}function v(_,w,E,I){var N=Ga(E);if(typeof N!="function")throw Error(B(150));if(E=N.call(E),E==null)throw Error(B(151));for(var O=N=null,S=w,T=w=0,k=null,P=E.next();S!==null&&!P.done;T++,P=E.next()){S.index>T?(k=S,S=null):k=S.sibling;var R=f(_,S,P.value,I);if(R===null){S===null&&(S=k);break}t&&S&&R.alternate===null&&e(_,S),w=s(R,w,T),O===null?N=R:O.sibling=R,O=R,S=k}if(P.done)return n(_,S),Le&&ws(_,T),N;if(S===null){for(;!P.done;T++,P=E.next())P=d(_,P.value,I),P!==null&&(w=s(P,w,T),O===null?N=P:O.sibling=P,O=P);return Le&&ws(_,T),N}for(S=r(_,S);!P.done;T++,P=E.next())P=p(S,_,T,P.value,I),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),w=s(P,w,T),O===null?N=P:O.sibling=P,O=P);return t&&S.forEach(function(D){return e(_,D)}),Le&&ws(_,T),N}function b(_,w,E,I){if(typeof E=="object"&&E!==null&&E.type===Io&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Cu:e:{for(var N=E.key,O=w;O!==null;){if(O.key===N){if(N=E.type,N===Io){if(O.tag===7){n(_,O.sibling),w=i(O,E.props.children),w.return=_,_=w;break e}}else if(O.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===oi&&rw(N)===O.type){n(_,O.sibling),w=i(O,E.props),w.ref=Za(_,O,E),w.return=_,_=w;break e}n(_,O);break}else e(_,O);O=O.sibling}E.type===Io?(w=Rs(E.props.children,_.mode,I,E.key),w.return=_,_=w):(I=Ih(E.type,E.key,E.props,null,_.mode,I),I.ref=Za(_,w,E),I.return=_,_=I)}return o(_);case ko:e:{for(O=E.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(_,w.sibling),w=i(w,E.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Lp(E,_.mode,I),w.return=_,_=w}return o(_);case oi:return O=E._init,b(_,w,O(E._payload),I)}if(cl(E))return y(_,w,E,I);if(Ga(E))return v(_,w,E,I);Fu(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(_,w.sibling),w=i(w,E),w.return=_,_=w):(n(_,w),w=Mp(E,_.mode,I),w.return=_,_=w),o(_)):n(_,w)}return b}var ta=oT(!0),aT=oT(!1),ad=Ki(null),ld=null,Mo=null,Uy=null;function By(){Uy=Mo=ld=null}function zy(t){var e=ad.current;De(ad),t._currentValue=e}function qg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ho(t,e){ld=t,Uy=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Uy!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(ld===null)throw Error(B(308));Mo=t,ld.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var ks=null;function $y(t){ks===null?ks=[t]:ks.push(t)}function lT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$y(e)):(n.next=i.next,i.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ai=!1;function Wy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Br(t,n)}return i=r.interleaved,i===null?(e.next=e,$y(r)):(e.next=i.next,i.next=e),r.interleaved=e,Br(t,n)}function xh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Py(t,n)}}function iw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,r){var i=t.updateQueue;ai=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=He({},d,f);break e;case 2:ai=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zs|=o,t.lanes=o,t.memoizedState=d}}function sw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Vc={},ar=Ki(Vc),ic=Ki(Vc),sc=Ki(Vc);function Is(t){if(t===Vc)throw Error(B(174));return t}function Hy(t,e){switch(Ae(sc,e),Ae(ic,t),Ae(ar,Vc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kg(e,t)}De(ar),Ae(ar,e)}function na(){De(ar),De(ic),De(sc)}function uT(t){Is(sc.current);var e=Is(ar.current),n=kg(e,t.type);e!==n&&(Ae(ic,t),Ae(ar,n))}function qy(t){ic.current===t&&(De(ar),De(ic))}var $e=Ki(0);function ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pp=[];function Ky(){for(var t=0;t<Pp.length;t++)Pp[t]._workInProgressVersionPrimary=null;Pp.length=0}var bh=Kr.ReactCurrentDispatcher,Ap=Kr.ReactCurrentBatchConfig,Bs=0,We=null,ct=null,_t=null,hd=!1,Al=!1,oc=0,GR=0;function Dt(){throw Error(B(321))}function Gy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Yy(t,e,n,r,i,s){if(Bs=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bh.current=t===null||t.memoizedState===null?JR:ZR,t=n(r,i),Al){s=0;do{if(Al=!1,oc=0,25<=s)throw Error(B(301));s+=1,_t=ct=null,e.updateQueue=null,bh.current=e2,t=n(r,i)}while(Al)}if(bh.current=dd,e=ct!==null&&ct.next!==null,Bs=0,_t=ct=We=null,hd=!1,e)throw Error(B(300));return t}function Qy(){var t=oc!==0;return oc=0,t}function nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?We.memoizedState=_t=t:_t=_t.next=t,_t}function On(){if(ct===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=_t===null?We.memoizedState:_t.next;if(e!==null)_t=e,ct=t;else{if(t===null)throw Error(B(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},_t===null?We.memoizedState=_t=t:_t=_t.next=t}return _t}function ac(t,e){return typeof e=="function"?e(t):e}function Rp(t){var e=On(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Bs&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,We.lanes|=h,zs|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,zs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Np(t){var e=On(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hT(){}function dT(t,e){var n=We,r=On(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,Xy(gT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,lc(9,pT.bind(null,n,r,i,e),void 0,null),xt===null)throw Error(B(349));Bs&30||fT(n,e,i)}return i}function fT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pT(t,e,n,r){e.value=n,e.getSnapshot=r,mT(e)&&yT(t)}function gT(t,e,n){return n(function(){mT(e)&&yT(t)})}function mT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function yT(t){var e=Br(t,1);e!==null&&$n(e,t,1,-1)}function ow(t){var e=nr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:t},e.queue=t,t=t.dispatch=XR.bind(null,We,t),[e.memoizedState,t]}function lc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vT(){return On().memoizedState}function Eh(t,e,n,r){var i=nr();We.flags|=t,i.memoizedState=lc(1|e,n,void 0,r===void 0?null:r)}function sf(t,e,n,r){var i=On();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&Gy(r,o.deps)){i.memoizedState=lc(e,n,s,r);return}}We.flags|=t,i.memoizedState=lc(1|e,n,s,r)}function aw(t,e){return Eh(8390656,8,t,e)}function Xy(t,e){return sf(2048,8,t,e)}function _T(t,e){return sf(4,2,t,e)}function wT(t,e){return sf(4,4,t,e)}function xT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bT(t,e,n){return n=n!=null?n.concat([t]):null,sf(4,4,xT.bind(null,e,t),n)}function Jy(){}function ET(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TT(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ST(t,e,n){return Bs&21?(Hn(n,e)||(n=AE(),We.lanes|=n,zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function YR(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Ap.transition;Ap.transition={};try{t(!1),e()}finally{ke=n,Ap.transition=r}}function kT(){return On().memoizedState}function QR(t,e,n){var r=Pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IT(t))CT(e,n);else if(n=lT(t,e,n,r),n!==null){var i=Qt();$n(n,t,r,i),PT(n,e,r)}}function XR(t,e,n){var r=Pi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IT(t))CT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=e.interleaved;l===null?(i.next=i,$y(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=lT(t,e,i,r),n!==null&&(i=Qt(),$n(n,t,r,i),PT(n,e,r))}}function IT(t){var e=t.alternate;return t===We||e!==null&&e===We}function CT(t,e){Al=hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Py(t,n)}}var dd={readContext:Dn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},JR={readContext:Dn,useCallback:function(t,e){return nr().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:aw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Eh(4194308,4,xT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Eh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eh(4,2,t,e)},useMemo:function(t,e){var n=nr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QR.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=nr();return t={current:t},e.memoizedState=t},useState:ow,useDebugValue:Jy,useDeferredValue:function(t){return nr().memoizedState=t},useTransition:function(){var t=ow(!1),e=t[0];return t=YR.bind(null,t[1]),nr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=nr();if(Le){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),xt===null)throw Error(B(349));Bs&30||fT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,aw(gT.bind(null,r,s,t),[t]),r.flags|=2048,lc(9,pT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nr(),e=xt.identifierPrefix;if(Le){var n=Pr,r=Cr;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZR={readContext:Dn,useCallback:ET,useContext:Dn,useEffect:Xy,useImperativeHandle:bT,useInsertionEffect:_T,useLayoutEffect:wT,useMemo:TT,useReducer:Rp,useRef:vT,useState:function(){return Rp(ac)},useDebugValue:Jy,useDeferredValue:function(t){var e=On();return ST(e,ct.memoizedState,t)},useTransition:function(){var t=Rp(ac)[0],e=On().memoizedState;return[t,e]},useMutableSource:hT,useSyncExternalStore:dT,useId:kT,unstable_isNewReconciler:!1},e2={readContext:Dn,useCallback:ET,useContext:Dn,useEffect:Xy,useImperativeHandle:bT,useInsertionEffect:_T,useLayoutEffect:wT,useMemo:TT,useReducer:Np,useRef:vT,useState:function(){return Np(ac)},useDebugValue:Jy,useDeferredValue:function(t){var e=On();return ct===null?e.memoizedState=t:ST(e,ct.memoizedState,t)},useTransition:function(){var t=Np(ac)[0],e=On().memoizedState;return[t,e]},useMutableSource:hT,useSyncExternalStore:dT,useId:kT,unstable_isNewReconciler:!1};function Vn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Kg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var of={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=Pi(t),s=Lr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&($n(e,t,i,r),xh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=Pi(t),s=Lr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ii(t,s,i),e!==null&&($n(e,t,i,r),xh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=Pi(t),i=Lr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ii(t,i,r),e!==null&&($n(e,t,r,n),xh(e,t,r))}};function lw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ec(n,r)||!ec(i,s):!0}function AT(t,e,n){var r=!1,i=Vi,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(i=ln(e)?Fs:Bt.current,r=e.contextTypes,s=(r=r!=null)?Zo(t,i):Vi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=of,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&of.enqueueReplaceState(e,e.state,null)}function Gg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dn(s):(s=ln(e)?Fs:Bt.current,i.context=Zo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&of.enqueueReplaceState(i,i.state,null),cd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ra(t,e){try{var n="",r=e;do n+=CA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var t2=typeof WeakMap=="function"?WeakMap:Map;function RT(t,e,n){n=Lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pd||(pd=!0,sm=r),Yg(t,e)},n}function NT(t,e,n){n=Lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yg(t,e),typeof r!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new t2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=g2.bind(null,t,e,n),e.then(t,t))}function hw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lr(-1,1),e.tag=2,Ii(n,e,1))),n.lanes|=1),t)}var n2=Kr.ReactCurrentOwner,on=!1;function Kt(t,e,n,r){e.child=t===null?aT(e,null,n,r):ta(e,t.child,n,r)}function fw(t,e,n,r,i){n=n.render;var s=e.ref;return Ho(e,i),r=Yy(t,e,n,r,s,i),n=Qy(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(Le&&n&&Vy(e),e.flags|=1,Kt(t,e,r,i),e.child)}function pw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ov(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,DT(t,e,s,r,i)):(t=Ih(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ec,n(o,r)&&t.ref===e.ref)return zr(t,e,i)}return e.flags|=1,t=Ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function DT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ec(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,zr(t,e,i)}return Qg(t,e,n,r,i)}function OT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Vo,gn),gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Vo,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Vo,gn),gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Vo,gn),gn|=r;return Kt(t,e,i,n),e.child}function MT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qg(t,e,n,r,i){var s=ln(n)?Fs:Bt.current;return s=Zo(e,s),Ho(e,i),n=Yy(t,e,n,r,s,i),r=Qy(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zr(t,e,i)):(Le&&r&&Vy(e),e.flags|=1,Kt(t,e,n,i),e.child)}function gw(t,e,n,r,i){if(ln(n)){var s=!0;id(e)}else s=!1;if(Ho(e,i),e.stateNode===null)Th(t,e),AT(e,n,r),Gg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Dn(c):(c=ln(n)?Fs:Bt.current,c=Zo(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&cw(e,o,r,c),ai=!1;var f=e.memoizedState;o.state=f,cd(e,r,o,i),l=e.memoizedState,a!==r||f!==l||an.current||ai?(typeof h=="function"&&(Kg(e,n,h,r),l=e.memoizedState),(a=ai||lw(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Vn(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=ln(n)?Fs:Bt.current,l=Zo(e,l));var p=n.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&cw(e,o,r,l),ai=!1,f=e.memoizedState,o.state=f,cd(e,r,o,i);var y=e.memoizedState;a!==d||f!==y||an.current||ai?(typeof p=="function"&&(Kg(e,n,p,r),y=e.memoizedState),(c=ai||lw(e,n,c,r,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Xg(t,e,n,r,s,i)}function Xg(t,e,n,r,i,s){MT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ew(e,n,!1),zr(t,e,s);r=e.stateNode,n2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ta(e,t.child,null,s),e.child=ta(e,null,a,s)):Kt(t,e,a,s),e.memoizedState=r.state,i&&ew(e,n,!0),e.child}function LT(t){var e=t.stateNode;e.pendingContext?Z0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Z0(t,e.context,!1),Hy(t,e.containerInfo)}function mw(t,e,n,r,i){return ea(),Fy(i),e.flags|=256,Kt(t,e,n,r),e.child}var Jg={dehydrated:null,treeContext:null,retryLane:0};function Zg(t){return{baseLanes:t,cachePool:null,transitions:null}}function VT(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae($e,i&1),t===null)return Hg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cf(o,r,0,null),t=Rs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Zg(n),e.memoizedState=Jg,t):Zy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return r2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ai(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ai(a,s):(s=Rs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Zg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Jg,r}return s=t.child,t=s.sibling,r=Ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zy(t,e){return e=cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uu(t,e,n,r){return r!==null&&Fy(r),ta(e,t.child,null,n),t=Zy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function r2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dp(Error(B(422))),Uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cf({mode:"visible",children:r.children},i,0,null),s=Rs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ta(e,t.child,null,o),e.child.memoizedState=Zg(o),e.memoizedState=Jg,s);if(!(e.mode&1))return Uu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=Dp(s,r,void 0),Uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=xt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Br(t,i),$n(r,t,i,-1))}return sv(),r=Dp(Error(B(421))),Uu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=m2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=ki(i.nextSibling),xn=e,Le=!0,Fn=null,t!==null&&(In[Cn++]=Cr,In[Cn++]=Pr,In[Cn++]=Us,Cr=t.id,Pr=t.overflow,Us=e),e=Zy(e,r.children),e.flags|=4096,e)}function yw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),qg(t.return,e,n)}function Op(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Kt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yw(t,n,e);else if(t.tag===19)yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ud(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Op(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ud(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Op(e,!0,n,null,s);break;case"together":Op(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Th(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function i2(t,e,n){switch(e.tag){case 3:LT(e),ea();break;case 5:uT(e);break;case 1:ln(e.type)&&id(e);break;case 4:Hy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(ad,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?VT(t,e,n):(Ae($e,$e.current&1),t=zr(t,e,n),t!==null?t.sibling:null);Ae($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,OT(t,e,n)}return zr(t,e,n)}var FT,em,UT,BT;FT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};em=function(){};UT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Is(ar.current);var s=null;switch(n){case"input":i=bg(t,i),r=bg(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=Sg(t,i),r=Sg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nd)}Ig(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};BT=function(t,e,n,r){n!==r&&(e.flags|=4)};function el(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function s2(t,e,n){var r=e.pendingProps;switch(jy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return ln(e.type)&&rd(),Ot(e),null;case 3:return r=e.stateNode,na(),De(an),De(Bt),Ky(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ju(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(lm(Fn),Fn=null))),em(t,e),Ot(e),null;case 5:qy(e);var i=Is(sc.current);if(n=e.type,t!==null&&e.stateNode!=null)UT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return Ot(e),null}if(t=Is(ar.current),ju(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ir]=e,r[rc]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<hl.length;i++)Ne(hl[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":k0(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":C0(r,s),Ne("invalid",r)}Ig(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vu(r.textContent,a,t),i=["children",""+a]):Kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Pu(r),I0(r,s,!0);break;case"textarea":Pu(r),P0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=nd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ir]=e,t[rc]=r,FT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cg(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<hl.length;i++)Ne(hl[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":k0(t,r),i=bg(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":C0(t,r),i=Sg(t,r),Ne("invalid",t);break;default:i=r}Ig(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?vE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Gl(t,l):typeof l=="number"&&Gl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ne("scroll",t):l!=null&&Ey(t,s,l,o))}switch(n){case"input":Pu(t),I0(t,r,!1);break;case"textarea":Pu(t),P0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Li(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Bo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Bo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)BT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Is(sc.current),Is(ar.current),ju(e)){if(r=e.stateNode,n=e.memoizedProps,r[ir]=e,(s=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Vu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ir]=e,e.stateNode=r}return Ot(e),null;case 13:if(De($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&yn!==null&&e.mode&1&&!(e.flags&128))sT(),ea(),e.flags|=98560,s=!1;else if(s=ju(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[ir]=e}else ea(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),s=!1}else Fn!==null&&(lm(Fn),Fn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ht===0&&(ht=3):sv())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return na(),em(t,e),t===null&&tc(e.stateNode.containerInfo),Ot(e),null;case 10:return zy(e.type._context),Ot(e),null;case 17:return ln(e.type)&&rd(),Ot(e),null;case 19:if(De($e),s=e.memoizedState,s===null)return Ot(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)el(s,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ud(t),o!==null){for(e.flags|=128,el(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>ia&&(e.flags|=128,r=!0,el(s,!1),e.lanes=4194304)}else{if(!r)if(t=ud(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),el(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return Ot(e),null}else 2*tt()-s.renderingStartTime>ia&&n!==1073741824&&(e.flags|=128,r=!0,el(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=$e.current,Ae($e,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return iv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function o2(t,e){switch(jy(e),e.tag){case 1:return ln(e.type)&&rd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return na(),De(an),De(Bt),Ky(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qy(e),null;case 13:if(De($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De($e),null;case 4:return na(),null;case 10:return zy(e.type._context),null;case 22:case 23:return iv(),null;case 24:return null;default:return null}}var Bu=!1,jt=!1,a2=typeof WeakSet=="function"?WeakSet:Set,K=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(t,e,r)}else n.current=null}function tm(t,e,n){try{n()}catch(r){Ye(t,e,r)}}var vw=!1;function l2(t,e){if(jg=Zh,t=qE(),Ly(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++h===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fg={focusedElem:t,selectionRange:n},Zh=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Vn(e.type,v),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(I){Ye(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return y=vw,vw=!1,y}function Rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&tm(e,n,s)}i=i.next}while(i!==r)}}function af(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function nm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zT(t){var e=t.alternate;e!==null&&(t.alternate=null,zT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[rc],delete e[zg],delete e[WR],delete e[HR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $T(t){return t.tag===5||t.tag===3||t.tag===4}function _w(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$T(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(r!==4&&(t=t.child,t!==null))for(rm(t,e,n),t=t.sibling;t!==null;)rm(t,e,n),t=t.sibling}function im(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(im(t,e,n),t=t.sibling;t!==null;)im(t,e,n),t=t.sibling}var Tt=null,jn=!1;function ni(t,e,n){for(n=n.child;n!==null;)WT(t,e,n),n=n.sibling}function WT(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Jd,n)}catch{}switch(n.tag){case 5:jt||Lo(n,e);case 6:var r=Tt,i=jn;Tt=null,ni(t,e,n),Tt=r,jn=i,Tt!==null&&(jn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(jn?(t=Tt,n=n.stateNode,t.nodeType===8?Ip(t.parentNode,n):t.nodeType===1&&Ip(t,n),Jl(t)):Ip(Tt,n.stateNode));break;case 4:r=Tt,i=jn,Tt=n.stateNode.containerInfo,jn=!0,ni(t,e,n),Tt=r,jn=i;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&tm(n,e,o),i=i.next}while(i!==r)}ni(t,e,n);break;case 1:if(!jt&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,e,a)}ni(t,e,n);break;case 21:ni(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,ni(t,e,n),jt=r):ni(t,e,n);break;default:ni(t,e,n)}}function ww(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new a2),e.forEach(function(r){var i=y2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tt=a.stateNode,jn=!1;break e;case 3:Tt=a.stateNode.containerInfo,jn=!0;break e;case 4:Tt=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(Tt===null)throw Error(B(160));WT(s,o,i),Tt=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HT(e,t),e=e.sibling}function HT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Zn(t),r&4){try{Rl(3,t,t.return),af(3,t)}catch(v){Ye(t,t.return,v)}try{Rl(5,t,t.return)}catch(v){Ye(t,t.return,v)}}break;case 1:Ln(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(Ln(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{Gl(i,"")}catch(v){Ye(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fE(i,s),Cg(a,o);var c=Cg(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?vE(i,d):h==="dangerouslySetInnerHTML"?mE(i,d):h==="children"?Gl(i,d):Ey(i,h,d,c)}switch(a){case"input":Eg(i,s);break;case"textarea":pE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Bo(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Bo(i,!!s.multiple,s.defaultValue,!0):Bo(i,!!s.multiple,s.multiple?[]:"",!1))}i[rc]=s}catch(v){Ye(t,t.return,v)}}break;case 6:if(Ln(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ye(t,t.return,v)}}break;case 3:if(Ln(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jl(e.containerInfo)}catch(v){Ye(t,t.return,v)}break;case 4:Ln(e,t),Zn(t);break;case 13:Ln(e,t),Zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nv=tt())),r&4&&ww(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||h,Ln(e,t),jt=c):Ln(e,t),Zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(d=K=h;K!==null;){switch(f=K,p=f.child,f.tag){case 0:case 11:case 14:case 15:Rl(4,f,f.return);break;case 1:Lo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ye(r,n,v)}}break;case 5:Lo(f,f.return);break;case 22:if(f.memoizedState!==null){bw(d);continue}}p!==null?(p.return=f,K=p):bw(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yE("display",o))}catch(v){Ye(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ye(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ln(e,t),Zn(t),r&4&&ww(t);break;case 21:break;default:Ln(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($T(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Gl(i,""),r.flags&=-33);var s=_w(t);im(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=_w(t);rm(t,a,o);break;default:throw Error(B(161))}}catch(l){Ye(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c2(t,e,n){K=t,qT(t)}function qT(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Bu;var c=jt;if(Bu=o,(jt=l)&&!c)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Ew(i):l!==null?(l.return=o,K=l):Ew(i);for(;s!==null;)K=s,qT(s),s=s.sibling;K=i,Bu=a,jt=c}xw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):xw(t)}}function xw(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||af(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}jt||e.flags&512&&nm(e)}catch(f){Ye(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function bw(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Ew(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{af(4,e)}catch(l){Ye(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ye(e,i,l)}}var s=e.return;try{nm(e)}catch(l){Ye(e,s,l)}break;case 5:var o=e.return;try{nm(e)}catch(l){Ye(e,o,l)}}}catch(l){Ye(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var u2=Math.ceil,fd=Kr.ReactCurrentDispatcher,ev=Kr.ReactCurrentOwner,Rn=Kr.ReactCurrentBatchConfig,ve=0,xt=null,ot=null,Ct=0,gn=0,Vo=Ki(0),ht=0,cc=null,zs=0,lf=0,tv=0,Nl=null,nn=null,nv=0,ia=1/0,Sr=null,pd=!1,sm=null,Ci=null,zu=!1,mi=null,gd=0,Dl=0,om=null,Sh=-1,kh=0;function Qt(){return ve&6?tt():Sh!==-1?Sh:Sh=tt()}function Pi(t){return t.mode&1?ve&2&&Ct!==0?Ct&-Ct:KR.transition!==null?(kh===0&&(kh=AE()),kh):(t=ke,t!==0||(t=window.event,t=t===void 0?16:VE(t.type)),t):1}function $n(t,e,n,r){if(50<Dl)throw Dl=0,om=null,Error(B(185));Oc(t,n,r),(!(ve&2)||t!==xt)&&(t===xt&&(!(ve&2)&&(lf|=n),ht===4&&ci(t,Ct)),cn(t,r),n===1&&ve===0&&!(e.mode&1)&&(ia=tt()+500,rf&&Gi()))}function cn(t,e){var n=t.callbackNode;KA(t,e);var r=Jh(t,t===xt?Ct:0);if(r===0)n!==null&&N0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&N0(n),e===1)t.tag===0?qR(Tw.bind(null,t)):nT(Tw.bind(null,t)),zR(function(){!(ve&6)&&Gi()}),n=null;else{switch(RE(r)){case 1:n=Cy;break;case 4:n=CE;break;case 16:n=Xh;break;case 536870912:n=PE;break;default:n=Xh}n=eS(n,KT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KT(t,e){if(Sh=-1,kh=0,ve&6)throw Error(B(327));var n=t.callbackNode;if(qo()&&t.callbackNode!==n)return null;var r=Jh(t,t===xt?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=md(t,r);else{e=r;var i=ve;ve|=2;var s=YT();(xt!==t||Ct!==e)&&(Sr=null,ia=tt()+500,As(t,e));do try{f2();break}catch(a){GT(t,a)}while(!0);By(),fd.current=s,ve=i,ot!==null?e=0:(xt=null,Ct=0,e=ht)}if(e!==0){if(e===2&&(i=Dg(t),i!==0&&(r=i,e=am(t,i))),e===1)throw n=cc,As(t,0),ci(t,r),cn(t,tt()),n;if(e===6)ci(t,r);else{if(i=t.current.alternate,!(r&30)&&!h2(i)&&(e=md(t,r),e===2&&(s=Dg(t),s!==0&&(r=s,e=am(t,s))),e===1))throw n=cc,As(t,0),ci(t,r),cn(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:xs(t,nn,Sr);break;case 3:if(ci(t,r),(r&130023424)===r&&(e=nv+500-tt(),10<e)){if(Jh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Bg(xs.bind(null,t,nn,Sr),e);break}xs(t,nn,Sr);break;case 4:if(ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*u2(r/1960))-r,10<r){t.timeoutHandle=Bg(xs.bind(null,t,nn,Sr),r);break}xs(t,nn,Sr);break;case 5:xs(t,nn,Sr);break;default:throw Error(B(329))}}}return cn(t,tt()),t.callbackNode===n?KT.bind(null,t):null}function am(t,e){var n=Nl;return t.current.memoizedState.isDehydrated&&(As(t,e).flags|=256),t=md(t,e),t!==2&&(e=nn,nn=n,e!==null&&lm(e)),t}function lm(t){nn===null?nn=t:nn.push.apply(nn,t)}function h2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ci(t,e){for(e&=~tv,e&=~lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function Tw(t){if(ve&6)throw Error(B(327));qo();var e=Jh(t,0);if(!(e&1))return cn(t,tt()),null;var n=md(t,e);if(t.tag!==0&&n===2){var r=Dg(t);r!==0&&(e=r,n=am(t,r))}if(n===1)throw n=cc,As(t,0),ci(t,e),cn(t,tt()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xs(t,nn,Sr),cn(t,tt()),null}function rv(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(ia=tt()+500,rf&&Gi())}}function $s(t){mi!==null&&mi.tag===0&&!(ve&6)&&qo();var e=ve;ve|=1;var n=Rn.transition,r=ke;try{if(Rn.transition=null,ke=1,t)return t()}finally{ke=r,Rn.transition=n,ve=e,!(ve&6)&&Gi()}}function iv(){gn=Vo.current,De(Vo)}function As(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BR(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(jy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rd();break;case 3:na(),De(an),De(Bt),Ky();break;case 5:qy(r);break;case 4:na();break;case 13:De($e);break;case 19:De($e);break;case 10:zy(r.type._context);break;case 22:case 23:iv()}n=n.return}if(xt=t,ot=t=Ai(t.current,null),Ct=gn=e,ht=0,cc=null,tv=lf=zs=0,nn=Nl=null,ks!==null){for(e=0;e<ks.length;e++)if(n=ks[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return t}function GT(t,e){do{var n=ot;try{if(By(),bh.current=dd,hd){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hd=!1}if(Bs=0,_t=ct=We=null,Al=!1,oc=0,ev.current=null,n===null||n.return===null){ht=1,cc=e,ot=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=hw(o);if(p!==null){p.flags&=-257,dw(p,o,a,s,e),p.mode&1&&uw(s,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){uw(s,c,e),sv();break e}l=Error(B(426))}}else if(Le&&a.mode&1){var b=hw(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),dw(b,o,a,s,e),Fy(ra(l,a));break e}}s=l=ra(l,a),ht!==4&&(ht=2),Nl===null?Nl=[s]:Nl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=RT(s,l,e);iw(s,_);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ci===null||!Ci.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=NT(s,a,e);iw(s,I);break e}}s=s.return}while(s!==null)}XT(n)}catch(N){e=N,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function YT(){var t=fd.current;return fd.current=dd,t===null?dd:t}function sv(){(ht===0||ht===3||ht===2)&&(ht=4),xt===null||!(zs&268435455)&&!(lf&268435455)||ci(xt,Ct)}function md(t,e){var n=ve;ve|=2;var r=YT();(xt!==t||Ct!==e)&&(Sr=null,As(t,e));do try{d2();break}catch(i){GT(t,i)}while(!0);if(By(),ve=n,fd.current=r,ot!==null)throw Error(B(261));return xt=null,Ct=0,ht}function d2(){for(;ot!==null;)QT(ot)}function f2(){for(;ot!==null&&!jA();)QT(ot)}function QT(t){var e=ZT(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?XT(t):ot=e,ev.current=null}function XT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=o2(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,ot=null;return}}else if(n=s2(n,e,gn),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ht===0&&(ht=5)}function xs(t,e,n){var r=ke,i=Rn.transition;try{Rn.transition=null,ke=1,p2(t,e,n,r)}finally{Rn.transition=i,ke=r}return null}function p2(t,e,n,r){do qo();while(mi!==null);if(ve&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(GA(t,s),t===xt&&(ot=xt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zu||(zu=!0,eS(Xh,function(){return qo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Rn.transition,Rn.transition=null;var o=ke;ke=1;var a=ve;ve|=4,ev.current=null,l2(t,n),HT(n,t),OR(Fg),Zh=!!jg,Fg=jg=null,t.current=n,c2(n),FA(),ve=a,ke=o,Rn.transition=s}else t.current=n;if(zu&&(zu=!1,mi=t,gd=i),s=t.pendingLanes,s===0&&(Ci=null),zA(n.stateNode),cn(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pd)throw pd=!1,t=sm,sm=null,t;return gd&1&&t.tag!==0&&qo(),s=t.pendingLanes,s&1?t===om?Dl++:(Dl=0,om=t):Dl=0,Gi(),null}function qo(){if(mi!==null){var t=RE(gd),e=Rn.transition,n=ke;try{if(Rn.transition=null,ke=16>t?16:t,mi===null)var r=!1;else{if(t=mi,mi=null,gd=0,ve&6)throw Error(B(331));var i=ve;for(ve|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Rl(8,h,s)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var f=h.sibling,p=h.return;if(zT(h),h===c){K=null;break}if(f!==null){f.return=p,K=f;break}K=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Rl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,K=_;break e}K=s.return}}var w=t.current;for(K=w;K!==null;){o=K;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,K=E;else e:for(o=w;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:af(9,a)}}catch(N){Ye(a,a.return,N)}if(a===o){K=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,K=I;break e}K=a.return}}if(ve=i,Gi(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Jd,t)}catch{}r=!0}return r}finally{ke=n,Rn.transition=e}}return!1}function Sw(t,e,n){e=ra(n,e),e=RT(t,e,1),t=Ii(t,e,1),e=Qt(),t!==null&&(Oc(t,1,e),cn(t,e))}function Ye(t,e,n){if(t.tag===3)Sw(t,t,n);else for(;e!==null;){if(e.tag===3){Sw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ci===null||!Ci.has(r))){t=ra(n,t),t=NT(e,t,1),e=Ii(e,t,1),t=Qt(),e!==null&&(Oc(e,1,t),cn(e,t));break}}e=e.return}}function g2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(Ct&n)===n&&(ht===4||ht===3&&(Ct&130023424)===Ct&&500>tt()-nv?As(t,0):tv|=n),cn(t,e)}function JT(t,e){e===0&&(t.mode&1?(e=Nu,Nu<<=1,!(Nu&130023424)&&(Nu=4194304)):e=1);var n=Qt();t=Br(t,e),t!==null&&(Oc(t,e,n),cn(t,n))}function m2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JT(t,n)}function y2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),JT(t,n)}var ZT;ZT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,i2(t,e,n);on=!!(t.flags&131072)}else on=!1,Le&&e.flags&1048576&&rT(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Th(t,e),t=e.pendingProps;var i=Zo(e,Bt.current);Ho(e,n),i=Yy(null,e,r,t,i,n);var s=Qy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(s=!0,id(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wy(e),i.updater=of,e.stateNode=i,i._reactInternals=e,Gg(e,r,t,n),e=Xg(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&Vy(e),Kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Th(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_2(r),t=Vn(r,t),i){case 0:e=Qg(null,e,r,t,n);break e;case 1:e=gw(null,e,r,t,n);break e;case 11:e=fw(null,e,r,t,n);break e;case 14:e=pw(null,e,r,Vn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),Qg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),gw(t,e,r,i,n);case 3:e:{if(LT(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cT(t,e),cd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ra(Error(B(423)),e),e=mw(t,e,r,n,i);break e}else if(r!==i){i=ra(Error(B(424)),e),e=mw(t,e,r,n,i);break e}else for(yn=ki(e.stateNode.containerInfo.firstChild),xn=e,Le=!0,Fn=null,n=aT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ea(),r===i){e=zr(t,e,n);break e}Kt(t,e,r,n)}e=e.child}return e;case 5:return uT(e),t===null&&Hg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ug(r,i)?o=null:s!==null&&Ug(r,s)&&(e.flags|=32),MT(t,e),Kt(t,e,o,n),e.child;case 6:return t===null&&Hg(e),null;case 13:return VT(t,e,n);case 4:return Hy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ta(e,null,r,n):Kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),fw(t,e,r,i,n);case 7:return Kt(t,e,e.pendingProps,n),e.child;case 8:return Kt(t,e,e.pendingProps.children,n),e.child;case 12:return Kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(ad,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!an.current){e=zr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Lr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),qg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ho(e,n),i=Dn(i),r=r(i),e.flags|=1,Kt(t,e,r,n),e.child;case 14:return r=e.type,i=Vn(r,e.pendingProps),i=Vn(r.type,i),pw(t,e,r,i,n);case 15:return DT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vn(r,i),Th(t,e),e.tag=1,ln(r)?(t=!0,id(e)):t=!1,Ho(e,n),AT(e,r,i),Gg(e,r,i,n),Xg(null,e,r,!0,t,n);case 19:return jT(t,e,n);case 22:return OT(t,e,n)}throw Error(B(156,e.tag))};function eS(t,e){return IE(t,e)}function v2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new v2(t,e,n,r)}function ov(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _2(t){if(typeof t=="function")return ov(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sy)return 11;if(t===ky)return 14}return 2}function Ai(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ih(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ov(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Io:return Rs(n.children,i,s,e);case Ty:o=8,i|=8;break;case vg:return t=Pn(12,n,e,i|2),t.elementType=vg,t.lanes=s,t;case _g:return t=Pn(13,n,e,i),t.elementType=_g,t.lanes=s,t;case wg:return t=Pn(19,n,e,i),t.elementType=wg,t.lanes=s,t;case uE:return cf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lE:o=10;break e;case cE:o=9;break e;case Sy:o=11;break e;case ky:o=14;break e;case oi:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Rs(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function cf(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=uE,t.lanes=n,t.stateNode={isHidden:!1},t}function Mp(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function Lp(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mp(0),this.expirationTimes=mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function av(t,e,n,r,i,s,o,a,l){return t=new w2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wy(s),t}function x2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tS(t){if(!t)return Vi;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(ln(n))return tT(t,n,e)}return e}function nS(t,e,n,r,i,s,o,a,l){return t=av(n,r,!0,t,i,s,o,a,l),t.context=tS(null),n=t.current,r=Qt(),i=Pi(n),s=Lr(r,i),s.callback=e??null,Ii(n,s,i),t.current.lanes=i,Oc(t,i,r),cn(t,r),t}function uf(t,e,n,r){var i=e.current,s=Qt(),o=Pi(i);return n=tS(n),e.context===null?e.context=n:e.pendingContext=n,e=Lr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ii(i,e,o),t!==null&&($n(t,i,o,s),xh(t,i,o)),o}function yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lv(t,e){kw(t,e),(t=t.alternate)&&kw(t,e)}function b2(){return null}var rS=typeof reportError=="function"?reportError:function(t){console.error(t)};function cv(t){this._internalRoot=t}hf.prototype.render=cv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));uf(t,e,null,null)};hf.prototype.unmount=cv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){uf(null,t,null,null)}),e[Ur]=null}};function hf(t){this._internalRoot=t}hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=OE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<li.length&&e!==0&&e<li[n].priority;n++);li.splice(n,0,t),n===0&&LE(t)}};function uv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Iw(){}function E2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=yd(o);s.call(c)}}var o=nS(e,r,t,0,null,!1,!1,"",Iw);return t._reactRootContainer=o,t[Ur]=o.current,tc(t.nodeType===8?t.parentNode:t),$s(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=yd(l);a.call(c)}}var l=av(t,0,!1,null,null,!1,!1,"",Iw);return t._reactRootContainer=l,t[Ur]=l.current,tc(t.nodeType===8?t.parentNode:t),$s(function(){uf(e,l,n,r)}),l}function ff(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=yd(o);a.call(l)}}uf(e,o,t,i)}else o=E2(n,e,t,i,r);return yd(o)}NE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ul(e.pendingLanes);n!==0&&(Py(e,n|1),cn(e,tt()),!(ve&6)&&(ia=tt()+500,Gi()))}break;case 13:$s(function(){var r=Br(t,1);if(r!==null){var i=Qt();$n(r,t,1,i)}}),lv(t,1)}};Ay=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=Qt();$n(e,t,134217728,n)}lv(t,134217728)}};DE=function(t){if(t.tag===13){var e=Pi(t),n=Br(t,e);if(n!==null){var r=Qt();$n(n,t,e,r)}lv(t,e)}};OE=function(){return ke};ME=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Ag=function(t,e,n){switch(e){case"input":if(Eg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nf(r);if(!i)throw Error(B(90));dE(r),Eg(r,i)}}}break;case"textarea":pE(t,n);break;case"select":e=n.value,e!=null&&Bo(t,!!n.multiple,e,!1)}};xE=rv;bE=$s;var T2={usingClientEntryPoint:!1,Events:[Lc,Ro,nf,_E,wE,rv]},tl={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S2={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SE(t),t===null?null:t.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||b2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{Jd=$u.inject(S2),or=$u}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T2;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uv(e))throw Error(B(200));return x2(t,e,null,n)};En.createRoot=function(t,e){if(!uv(t))throw Error(B(299));var n=!1,r="",i=rS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=av(t,1,!1,null,null,n,!1,r,i),t[Ur]=e.current,tc(t.nodeType===8?t.parentNode:t),new cv(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=SE(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return $s(t)};En.hydrate=function(t,e,n){if(!df(e))throw Error(B(200));return ff(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!uv(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nS(e,null,t,1,n??null,i,!1,s,o),t[Ur]=e.current,tc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hf(e)};En.render=function(t,e,n){if(!df(e))throw Error(B(200));return ff(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!df(t))throw Error(B(40));return t._reactRootContainer?($s(function(){ff(null,null,t,!1,function(){t._reactRootContainer=null,t[Ur]=null})}),!0):!1};En.unstable_batchedUpdates=rv;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!df(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return ff(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function iS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iS)}catch(t){console.error(t)}}iS(),iE.exports=En;var k2=iE.exports,Cw=k2;mg.createRoot=Cw.createRoot,mg.hydrateRoot=Cw.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(this,arguments)}var yi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yi||(yi={}));const Pw="popstate";function I2(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return cm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vd(i)}return P2(e,n,null,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function sS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C2(){return Math.random().toString(36).substr(2,8)}function Aw(t,e){return{usr:t.state,key:t.key,idx:e}}function cm(t,e,n,r){return n===void 0&&(n=null),uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_a(e):e,{state:n,key:e&&e.key||r||C2()})}function vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _a(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function P2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=yi.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(uc({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=yi.Pop;let b=h(),_=b==null?null:b-c;c=b,l&&l({action:a,location:v.location,delta:_})}function f(b,_){a=yi.Push;let w=cm(v.location,b,_);c=h()+1;let E=Aw(w,c),I=v.createHref(w);try{o.pushState(E,"",I)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(I)}s&&l&&l({action:a,location:v.location,delta:1})}function p(b,_){a=yi.Replace;let w=cm(v.location,b,_);c=h();let E=Aw(w,c),I=v.createHref(w);o.replaceState(E,"",I),s&&l&&l({action:a,location:v.location,delta:0})}function y(b){let _=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:vd(b);return w=w.replace(/ $/,"%20"),rt(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let v={get action(){return a},get location(){return t(i,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Pw,d),l=b,()=>{i.removeEventListener(Pw,d),l=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let _=y(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:p,go(b){return o.go(b)}};return v}var Rw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rw||(Rw={}));function A2(t,e,n){return n===void 0&&(n="/"),R2(t,e,n,!1)}function R2(t,e,n,r){let i=typeof e=="string"?_a(e):e,s=hv(i.pathname||"/",n);if(s==null)return null;let o=oS(t);N2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=$2(s);a=B2(o[l],c,r)}return a}function oS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(rt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ri([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(rt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),oS(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:F2(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of aS(s.path))i(s,o,l)}),e}function aS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=aS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function N2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:U2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const D2=/^:[\w-]+$/,O2=3,M2=2,L2=1,V2=10,j2=-2,Nw=t=>t==="*";function F2(t,e){let n=t.split("/"),r=n.length;return n.some(Nw)&&(r+=j2),e&&(r+=M2),n.filter(i=>!Nw(i)).reduce((i,s)=>i+(D2.test(s)?O2:s===""?L2:V2),r)}function U2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function B2(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Dw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=Dw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ri([s,d.pathname]),pathnameBase:K2(Ri([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ri([s,d.pathnameBase]))}return o}function Dw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=z2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function z2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),sS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function $2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function W2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_a(t):t;return{pathname:n?n.startsWith("/")?n:H2(n,e):e,search:G2(r),hash:Y2(i)}}function H2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dv(t,e){let n=q2(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_a(t):(i=uc({},t),rt(!i.pathname||!i.pathname.includes("?"),Vp("?","pathname","search",i)),rt(!i.pathname||!i.pathname.includes("#"),Vp("#","pathname","hash",i)),rt(!i.search||!i.search.includes("#"),Vp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=W2(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Ri=t=>t.join("/").replace(/\/\/+/g,"/"),K2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),G2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Q2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lS=["post","put","patch","delete"];new Set(lS);const X2=["get",...lS];new Set(X2);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hc(){return hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hc.apply(this,arguments)}const pv=M.createContext(null),J2=M.createContext(null),Yi=M.createContext(null),pf=M.createContext(null),Gr=M.createContext({outlet:null,matches:[],isDataRoute:!1}),cS=M.createContext(null);function Z2(t,e){let{relative:n}=e===void 0?{}:e;wa()||rt(!1);let{basename:r,navigator:i}=M.useContext(Yi),{hash:s,pathname:o,search:a}=hS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ri([r,o])),i.createHref({pathname:l,search:a,hash:s})}function wa(){return M.useContext(pf)!=null}function Qi(){return wa()||rt(!1),M.useContext(pf).location}function uS(t){M.useContext(Yi).static||M.useLayoutEffect(t)}function Sn(){let{isDataRoute:t}=M.useContext(Gr);return t?fN():eN()}function eN(){wa()||rt(!1);let t=M.useContext(pv),{basename:e,future:n,navigator:r}=M.useContext(Yi),{matches:i}=M.useContext(Gr),{pathname:s}=Qi(),o=JSON.stringify(dv(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return uS(()=>{a.current=!0}),M.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=fv(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ri([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function tN(){let{matches:t}=M.useContext(Gr),e=t[t.length-1];return e?e.params:{}}function hS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(Yi),{matches:i}=M.useContext(Gr),{pathname:s}=Qi(),o=JSON.stringify(dv(i,r.v7_relativeSplatPath));return M.useMemo(()=>fv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function nN(t,e){return rN(t,e)}function rN(t,e,n,r){wa()||rt(!1);let{navigator:i}=M.useContext(Yi),{matches:s}=M.useContext(Gr),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Qi(),h;if(e){var d;let b=typeof e=="string"?_a(e):e;l==="/"||(d=b.pathname)!=null&&d.startsWith(l)||rt(!1),h=b}else h=c;let f=h.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=A2(t,{pathname:p}),v=lN(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Ri([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Ri([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return e&&v?M.createElement(pf.Provider,{value:{location:hc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:yi.Pop}},v):v}function iN(){let t=dN(),e=Q2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const sN=M.createElement(iN,null);class oN extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Gr.Provider,{value:this.props.routeContext},M.createElement(cS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aN(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(pv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Gr.Provider,{value:e},r)}function lN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||rt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:f,errors:p}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let p,y=!1,v=null,b=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||sN,l&&(c<0&&f===0?(y=!0,b=null):c===f&&(y=!0,b=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),w=()=>{let E;return p?E=v:y?E=b:d.route.Component?E=M.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,M.createElement(aN,{match:d,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(oN,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var dS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dS||{}),_d=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_d||{});function cN(t){let e=M.useContext(pv);return e||rt(!1),e}function uN(t){let e=M.useContext(J2);return e||rt(!1),e}function hN(t){let e=M.useContext(Gr);return e||rt(!1),e}function fS(t){let e=hN(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function dN(){var t;let e=M.useContext(cS),n=uN(_d.UseRouteError),r=fS(_d.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fN(){let{router:t}=cN(dS.UseNavigateStable),e=fS(_d.UseNavigateStable),n=M.useRef(!1);return uS(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hc({fromRouteId:e},s)))},[t,e])}const Ow={};function pN(t,e){Ow[e]||(Ow[e]=!0,console.warn(e))}const Mw=(t,e,n)=>pN(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function gN(t,e){t!=null&&t.v7_startTransition||Mw("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&Mw("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function mN(t){let{to:e,replace:n,state:r,relative:i}=t;wa()||rt(!1);let{future:s,static:o}=M.useContext(Yi),{matches:a}=M.useContext(Gr),{pathname:l}=Qi(),c=Sn(),h=fv(e,dv(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return M.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function fn(t){rt(!1)}function yN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=yi.Pop,navigator:s,static:o=!1,future:a}=t;wa()&&rt(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:s,static:o,future:hc({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=_a(r));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:y="default"}=r,v=M.useMemo(()=>{let b=hv(h,l);return b==null?null:{location:{pathname:b,search:d,hash:f,state:p,key:y},navigationType:i}},[l,h,d,f,p,y,i]);return v==null?null:M.createElement(Yi.Provider,{value:c},M.createElement(pf.Provider,{children:n,value:v}))}function vN(t){let{children:e,location:n}=t;return nN(um(e),n)}new Promise(()=>{});function um(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,um(r.props.children,s));return}r.type!==fn&&rt(!1),!r.props.index||!r.props.children||rt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=um(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hm(){return hm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hm.apply(this,arguments)}function _N(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xN(t,e){return t.button===0&&(!e||e==="_self")&&!wN(t)}const bN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],EN="6";try{window.__reactRouterVersion=EN}catch{}const TN="startTransition",Lw=gA[TN];function SN(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=I2({window:i,v5Compat:!0}));let o=s.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=M.useCallback(d=>{c&&Lw?Lw(()=>l(d)):l(d)},[l,c]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>gN(r),[r]),M.createElement(yN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const kN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lt=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,f=_N(e,bN),{basename:p}=M.useContext(Yi),y,v=!1;if(typeof c=="string"&&IN.test(c)&&(y=c,kN))try{let E=new URL(window.location.href),I=c.startsWith("//")?new URL(E.protocol+c):new URL(c),N=hv(I.pathname,p);I.origin===E.origin&&N!=null?c=N+I.search+I.hash:v=!0}catch{}let b=Z2(c,{relative:i}),_=CN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function w(E){r&&r(E),E.defaultPrevented||_(E)}return M.createElement("a",hm({},f,{href:y||b,onClick:v||s?r:w,ref:n,target:l}))});var Vw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Vw||(Vw={}));var jw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jw||(jw={}));function CN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Sn(),c=Qi(),h=hS(t,{relative:o});return M.useCallback(d=>{if(xN(d,n)){d.preventDefault();let f=r!==void 0?r:vd(c)===vd(h);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var Fw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},gS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(f=64)),r.push(n[h],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new AN;const f=s<<2|a>>4;if(r.push(f),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RN=function(t){const e=pS(t);return gS.encodeByteArray(e,!0)},wd=function(t){return RN(t).replace(/\./g,"")},mS=function(t){try{return gS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=()=>NN().__FIREBASE_DEFAULTS__,ON=()=>{if(typeof process>"u"||typeof Fw>"u")return;const t=Fw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mS(t[1]);return e&&JSON.parse(e)},gf=()=>{try{return DN()||ON()||MN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yS=t=>{var e,n;return(n=(e=gf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vS=t=>{const e=yS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_S=()=>{var t;return(t=gf())===null||t===void 0?void 0:t.config},wS=t=>{var e;return(e=gf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wd(JSON.stringify(n)),wd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function jN(){var t;const e=(t=gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $N(){return!jN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WN(){try{return typeof indexedDB=="object"}catch{return!1}}function HN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="FirebaseError";class mr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qN,Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jc.prototype.create)}}class jc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?KN(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new mr(i,a,r)}}function KN(t,e){return t.replace(GN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GN=/\{\$([^}]+)}/g;function YN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Uw(s)&&Uw(o)){if(!dc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Uw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QN(t,e){const n=new XN(t,e);return n.subscribe.bind(n)}class XN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jp),i.error===void 0&&(i.error=jp),i.complete===void 0&&(i.complete=jp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tD(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eD(t){return t===bs?void 0:t}function tD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const rD={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},iD=he.INFO,sD={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},oD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gv{constructor(e){this.name=e,this._logLevel=iD,this._logHandler=oD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const aD=(t,e)=>e.some(n=>t instanceof n);let Bw,zw;function lD(){return Bw||(Bw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cD(){return zw||(zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,dm=new WeakMap,ES=new WeakMap,Fp=new WeakMap,mv=new WeakMap;function uD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ni(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&bS.set(n,t)}).catch(()=>{}),mv.set(e,t),e}function hD(t){if(dm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});dm.set(t,e)}let fm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ES.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dD(t){fm=t(fm)}function fD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Up(this),e,...n);return ES.set(r,e.sort?e.sort():[e]),Ni(r)}:cD().includes(t)?function(...e){return t.apply(Up(this),e),Ni(bS.get(this))}:function(...e){return Ni(t.apply(Up(this),e))}}function pD(t){return typeof t=="function"?fD(t):(t instanceof IDBTransaction&&hD(t),aD(t,lD())?new Proxy(t,fm):t)}function Ni(t){if(t instanceof IDBRequest)return uD(t);if(Fp.has(t))return Fp.get(t);const e=pD(t);return e!==t&&(Fp.set(t,e),mv.set(e,t)),e}const Up=t=>mv.get(t);function gD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ni(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ni(o.result),l.oldVersion,l.newVersion,Ni(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mD=["get","getKey","getAll","getAllKeys","count"],yD=["put","add","delete","clear"],Bp=new Map;function $w(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Bp.set(e,s),s}dD(t=>({...t,get:(e,n,r)=>$w(e,n)||t.get(e,n,r),has:(e,n)=>!!$w(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_D(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _D(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",Ww="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new gv("@firebase/app"),wD="@firebase/app-compat",xD="@firebase/analytics-compat",bD="@firebase/analytics",ED="@firebase/app-check-compat",TD="@firebase/app-check",SD="@firebase/auth",kD="@firebase/auth-compat",ID="@firebase/database",CD="@firebase/data-connect",PD="@firebase/database-compat",AD="@firebase/functions",RD="@firebase/functions-compat",ND="@firebase/installations",DD="@firebase/installations-compat",OD="@firebase/messaging",MD="@firebase/messaging-compat",LD="@firebase/performance",VD="@firebase/performance-compat",jD="@firebase/remote-config",FD="@firebase/remote-config-compat",UD="@firebase/storage",BD="@firebase/storage-compat",zD="@firebase/firestore",$D="@firebase/vertexai",WD="@firebase/firestore-compat",HD="firebase",qD="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",KD={[pm]:"fire-core",[wD]:"fire-core-compat",[bD]:"fire-analytics",[xD]:"fire-analytics-compat",[TD]:"fire-app-check",[ED]:"fire-app-check-compat",[SD]:"fire-auth",[kD]:"fire-auth-compat",[ID]:"fire-rtdb",[CD]:"fire-data-connect",[PD]:"fire-rtdb-compat",[AD]:"fire-fn",[RD]:"fire-fn-compat",[ND]:"fire-iid",[DD]:"fire-iid-compat",[OD]:"fire-fcm",[MD]:"fire-fcm-compat",[LD]:"fire-perf",[VD]:"fire-perf-compat",[jD]:"fire-rc",[FD]:"fire-rc-compat",[UD]:"fire-gcs",[BD]:"fire-gcs-compat",[zD]:"fire-fst",[WD]:"fire-fst-compat",[$D]:"fire-vertex","fire-js":"fire-js",[HD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,GD=new Map,mm=new Map;function Hw(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ws(t){const e=t.name;if(mm.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,t);for(const n of xd.values())Hw(n,t);for(const n of GD.values())Hw(n,t);return!0}function mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new jc("app","Firebase",YD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=qD;function TS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Di.create("bad-app-name",{appName:String(i)});if(n||(n=_S()),!n)throw Di.create("no-options");const s=xd.get(i);if(s){if(dc(n,s.options)&&dc(r,s.config))return s;throw Di.create("duplicate-app",{appName:i})}const o=new nD(i);for(const l of mm.values())o.addComponent(l);const a=new QD(n,r,o);return xd.set(i,a),a}function yv(t=gm){const e=xd.get(t);if(!e&&t===gm&&_S())return TS();if(!e)throw Di.create("no-app",{appName:t});return e}function lr(t,e,n){var r;let i=(r=KD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(a.join(" "));return}Ws(new ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="firebase-heartbeat-database",JD=1,fc="firebase-heartbeat-store";let zp=null;function SS(){return zp||(zp=gD(XD,JD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Di.create("idb-open",{originalErrorMessage:t.message})})),zp}async function ZD(t){try{const n=(await SS()).transaction(fc),r=await n.objectStore(fc).get(kS(t));return await n.done,r}catch(e){if(e instanceof mr)$r.warn(e.message);else{const n=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function qw(t,e){try{const r=(await SS()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,kS(t)),await r.done}catch(n){if(n instanceof mr)$r.warn(n.message);else{const r=Di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(r.message)}}}function kS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=1024,tO=30*24*60*60*1e3;class nO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=tO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kw(),{heartbeatsToSend:r,unsentEntries:i}=rO(this._heartbeatsCache.heartbeats),s=wd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $r.warn(n),""}}}function Kw(){return new Date().toISOString().substring(0,10)}function rO(t,e=eO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Gw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WN()?HN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Gw(t){return wd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){Ws(new ji("platform-logger",e=>new vD(e),"PRIVATE")),Ws(new ji("heartbeat",e=>new nO(e),"PRIVATE")),lr(pm,Ww,t),lr(pm,Ww,"esm2017"),lr("fire-js","")}sO("");function vv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function IS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oO=IS,CS=new jc("auth","Firebase",IS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new gv("@firebase/auth");function aO(t,...e){bd.logLevel<=he.WARN&&bd.warn(`Auth (${eo}): ${t}`,...e)}function Ch(t,...e){bd.logLevel<=he.ERROR&&bd.error(`Auth (${eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw _v(t,...e)}function cr(t,...e){return _v(t,...e)}function PS(t,e,n){const r=Object.assign(Object.assign({},oO()),{[e]:n});return new jc("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return PS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _v(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CS.create(t,...e)}function ee(t,e,...n){if(!t)throw _v(e,...n)}function Ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ch(e),new Error(e)}function Wr(t,e){t||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lO(){return Yw()==="http:"||Yw()==="https:"}function Yw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lO()||UN()||"connection"in navigator)?navigator.onLine:!0}function uO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=VN()||BN()}get(){return cO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Uc(3e4,6e4);function Xi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ji(t,e,n,r,i={}){return RS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Fc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return FN()||(c.referrerPolicy="no-referrer"),AS.fetch()(NS(t,t.config.apiHost,n,a),c)})}async function RS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hO),e);try{const i=new pO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw PS(t,h,c);qn(t,h)}}catch(i){if(i instanceof mr)throw i;qn(t,"network-request-failed",{message:String(i)})}}async function Bc(t,e,n,r,i={}){const s=await Ji(t,e,n,r,i);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function NS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?wv(t.config,i):`${t.config.apiScheme}://${i}`}function fO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cr(this.auth,"network-request-failed")),dO.get())})}}function Wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cr(t,e,r);return i.customData._tokenResponse=n,i}function Qw(t){return t!==void 0&&t.enterprise!==void 0}class gO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mO(t,e){return Ji(t,"GET","/v2/recaptchaConfig",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(t,e){return Ji(t,"POST","/v1/accounts:delete",e)}async function DS(t,e){return Ji(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vO(t,e=!1){const n=pt(t),r=await n.getIdToken(e),i=xv(r);ee(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ol($p(i.auth_time)),issuedAtTime:Ol($p(i.iat)),expirationTime:Ol($p(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $p(t){return Number(t)*1e3}function xv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const i=mS(n);return i?JSON.parse(i):(Ch("Failed to decode base64 JWT payload"),null)}catch(i){return Ch("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Xw(t){const e=xv(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mr&&_O(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _O({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t){var e;const n=t.auth,r=await t.getIdToken(),i=await pc(t,DS(n,{idToken:r}));ee(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?OS(s.providerUserInfo):[],a=bO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function xO(t){const e=pt(t);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function OS(t){return t.map(e=>{var{providerId:n}=e,r=vv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(t,e){const n=await RS(t,{},async()=>{const r=Fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=NS(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",AS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TO(t,e){return Ji(t,"POST","/v2/accounts:revokeToken",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=Xw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await EO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ko;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ko,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await pc(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vO(this,e)}reload(){return xO(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ed(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await pc(this,yO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:I,isAnonymous:N,providerData:O,stsTokenManager:S}=n;ee(E&&S,e,"internal-error");const T=Ko.fromJSON(this.name,S);ee(typeof E=="string",e,"internal-error"),ri(d,e.name),ri(f,e.name),ee(typeof I=="boolean",e,"internal-error"),ee(typeof N=="boolean",e,"internal-error"),ri(p,e.name),ri(y,e.name),ri(v,e.name),ri(b,e.name),ri(_,e.name),ri(w,e.name);const k=new Rr({uid:E,auth:e,email:f,emailVerified:I,displayName:d,isAnonymous:N,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:T,createdAt:_,lastLoginAt:w});return O&&Array.isArray(O)&&(k.providerData=O.map(P=>Object.assign({},P))),b&&(k._redirectEventId=b),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ko;i.updateFromServerResponse(n);const s=new Rr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ed(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ee(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?OS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ko;a.updateFromIdToken(r);const l=new Rr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new Map;function Nr(t){Wr(t instanceof Function,"Expected a class definition");let e=Jw.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Jw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MS.type="NONE";const Zw=MS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e,n){return`firebase:${t}:${e}:${n}`}class Go{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ph(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ph("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Go(Nr(Zw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Nr(Zw);const o=Ph(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Rr._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Go(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Go(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BS(e))return"Blackberry";if(zS(e))return"Webos";if(VS(e))return"Safari";if((e.includes("chrome/")||jS(e))&&!e.includes("edge/"))return"Chrome";if(US(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LS(t=zt()){return/firefox\//i.test(t)}function VS(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jS(t=zt()){return/crios\//i.test(t)}function FS(t=zt()){return/iemobile/i.test(t)}function US(t=zt()){return/android/i.test(t)}function BS(t=zt()){return/blackberry/i.test(t)}function zS(t=zt()){return/webos/i.test(t)}function bv(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SO(t=zt()){var e;return bv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kO(){return zN()&&document.documentMode===10}function $S(t=zt()){return bv(t)||US(t)||zS(t)||BS(t)||/windows phone/i.test(t)||FS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e=[]){let n;switch(t){case"Browser":n=ex(zt());break;case"Worker":n=`${ex(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e={}){return Ji(t,"GET","/v2/passwordPolicy",Xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=6;class AO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tx(this),this.idTokenSubscription=new tx(this),this.beforeStateQueue=new IO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await DS(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Vr(this));const n=e?pt(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CO(this),n=new AO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&aO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function to(t){return pt(t)}class tx{constructor(e){this.auth=e,this.observer=null,this.addObserver=QN(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NO(t){yf=t}function HS(t){return yf.loadJS(t)}function DO(){return yf.recaptchaEnterpriseScript}function OO(){return yf.gapiScript}function MO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class LO{constructor(){this.enterprise=new VO}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class VO{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jO="recaptcha-enterprise",qS="NO_RECAPTCHA";class FO{constructor(e){this.type=jO,this.auth=to(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{mO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new gO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Qw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(qS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LO().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Qw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=DO();l.length!==0&&(l+=a),HS(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function nx(t,e,n,r=!1,i=!1){const s=new FO(t);let o;if(i)o=qS;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _m(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await nx(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await nx(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t,e){const n=mf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(dc(s,e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}function BO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zO(t,e,n){const r=to(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=KS(e),{host:o,port:a}=$O(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),WO()}function KS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $O(t){const e=KS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:rx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:rx(o)}}}function rx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function HO(t,e){return Ji(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(t,e){return Bc(t,"POST","/v1/accounts:signInWithPassword",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}async function GO(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Ev{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new gc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _m(e,n,"signInWithPassword",qO);case"emailLink":return KO(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _m(e,r,"signUpPassword",HO);case"emailLink":return GO(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return Bc(t,"POST","/v1/accounts:signInWithIdp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO="http://localhost";class Hs extends Ev{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=vv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Hs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:YO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XO(t){const e=dl(fl(t)).link,n=e?dl(fl(e)).deep_link_id:null,r=dl(fl(t)).deep_link_id;return(r?dl(fl(r)).link:null)||r||n||e||t}class Tv{constructor(e){var n,r,i,s,o,a;const l=dl(fl(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=QO((i=l.mode)!==null&&i!==void 0?i:null);ee(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=XO(e);try{return new Tv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.providerId=xa.PROVIDER_ID}static credential(e,n){return gc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tv.parseLink(n);return ee(r,"argument-error"),gc._fromEmailAndCode(e,r.code,r.tenantId)}}xa.PROVIDER_ID="password";xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends GS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends zc{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hi.credential(n,r)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends zc{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends zc{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fi.credential(n,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(t,e){return Bc(t,"POST","/v1/accounts:signUp",Xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Rr._fromIdTokenResponse(e,r,i),o=ix(r);return new qs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ix(r);return new qs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ix(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends mr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Td(e,n,r,i)}}function YS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(t,s,e,r):s})}async function ZO(t,e,n=!1){const r=await pc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e,n=!1){const{auth:r}=t;if(sr(r.app))return Promise.reject(Vr(r));const i="reauthenticate";try{const s=await pc(t,YS(r,i,e,t),n);ee(s.idToken,r,"internal-error");const o=xv(s.idToken);ee(o,r,"internal-error");const{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),qs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e,n=!1){if(sr(t.app))return Promise.reject(Vr(t));const r="signIn",i=await YS(t,r,e),s=await qs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function tM(t,e){return QS(to(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t){const e=to(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nM(t,e,n){if(sr(t.app))return Promise.reject(Vr(t));const r=to(t),o=await _m(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&XS(t),l}),a=await qs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function rM(t,e,n){return sr(t.app)?Promise.reject(Vr(t)):tM(pt(t),xa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XS(t),r})}function iM(t,e,n,r){return pt(t).onIdTokenChanged(e,n,r)}function sM(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=1e3,aM=10;class ZS extends JS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$S(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);kO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZS.type="LOCAL";const lM=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek extends JS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ek.type="SESSION";const tk=ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new vf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await cM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Sv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function hM(t){ur().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function dM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pM(){return nk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="firebaseLocalStorageDb",gM=1,kd="firebaseLocalStorage",ik="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _f(t,e){return t.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function mM(){const t=indexedDB.deleteDatabase(rk);return new $c(t).toPromise()}function wm(){const t=indexedDB.open(rk,gM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kd,{keyPath:ik})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kd)?e(r):(r.close(),await mM(),e(await wm()))})})}async function sx(t,e,n){const r=_f(t,!0).put({[ik]:e,value:n});return new $c(r).toPromise()}async function yM(t,e){const n=_f(t,!1).get(e),r=await new $c(n).toPromise();return r===void 0?null:r.value}function ox(t,e){const n=_f(t,!0).delete(e);return new $c(n).toPromise()}const vM=800,_M=3;class sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_M)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(pM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dM(),!this.activeServiceWorker)return;this.sender=new uM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await sx(e,Sd,"1"),await ox(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ox(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=_f(i,!1).getAll();return new $c(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sk.type="LOCAL";const wM=sk;new Uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t,e){return e?Nr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Ev{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bM(t){return QS(t.auth,new kv(t),t.bypassAuthState)}function EM(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),eM(n,new kv(t),t.bypassAuthState)}async function TM(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),ZO(n,new kv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bM;case"linkViaPopup":case"linkViaRedirect":return TM;case"reauthViaPopup":case"reauthViaRedirect":return EM;default:qn(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=new Uc(2e3,1e4);class jo extends ok{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,jo.currentPopupAction&&jo.currentPopupAction.cancel(),jo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SM.get())};e()}}jo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="pendingRedirect",Ah=new Map;class IM extends ok{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ah.get(this.auth._key());if(!e){try{const r=await CM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ah.set(this.auth._key(),e)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CM(t,e){const n=RM(e),r=AM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PM(t,e){Ah.set(t._key(),e)}function AM(t){return Nr(t._redirectPersistence)}function RM(t){return Ph(kM,t.config.apiKey,t.name)}async function NM(t,e,n=!1){if(sr(t.app))return Promise.reject(Vr(t));const r=to(t),i=xM(r,e),o=await new IM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=10*60*1e3;class OM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ak(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DM&&this.cachedEventUids.clear(),this.cachedEventUids.has(ax(e))}saveEventToCache(e){this.cachedEventUids.add(ax(e)),this.lastProcessedEventTime=Date.now()}}function ax(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ak({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ak(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(t,e={}){return Ji(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jM=/^https?/;async function FM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LM(t);for(const n of e)try{if(UM(n))return}catch{}qn(t,"unauthorized-domain")}function UM(t){const e=ym(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jM.test(n))return!1;if(VM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new Uc(3e4,6e4);function lx(){const t=ur().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zM(t){return new Promise((e,n)=>{var r,i,s;function o(){lx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lx(),n(cr(t,"network-request-failed"))},timeout:BM.get()})}if(!((i=(r=ur().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ur().gapi)===null||s===void 0)&&s.load)o();else{const a=MO("iframefcb");return ur()[a]=()=>{gapi.load?o():n(cr(t,"network-request-failed"))},HS(`${OO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function $M(t){return Rh=Rh||zM(t),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new Uc(5e3,15e3),HM="__/auth/iframe",qM="emulator/auth/iframe",KM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YM(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wv(e,qM):`https://${t.config.authDomain}/${HM}`,r={apiKey:e.apiKey,appName:t.name,v:eo},i=GM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Fc(r).slice(1)}`}async function QM(t){const e=await $M(t),n=ur().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:YM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=cr(t,"network-request-failed"),a=ur().setTimeout(()=>{s(o)},WM.get());function l(){ur().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JM=500,ZM=600,eL="_blank",tL="http://localhost";class cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nL(t,e,n,r=JM,i=ZM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},XM),{width:r.toString(),height:i.toString(),top:s,left:o}),c=zt().toLowerCase();n&&(a=jS(c)?eL:n),LS(c)&&(e=e||tL,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(SO(c)&&a!=="_self")return rL(e||"",a),new cx(null);const d=window.open(e||"",a,h);ee(d,t,"popup-blocked");try{d.focus()}catch{}return new cx(d)}function rL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="__/auth/handler",sL="emulator/auth/handler",oL=encodeURIComponent("fac");async function ux(t,e,n,r,i,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:eo,eventId:i};if(e instanceof GS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof zc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${oL}=${encodeURIComponent(l)}`:"";return`${aL(t)}?${Fc(a).slice(1)}${c}`}function aL({config:t}){return t.emulator?wv(t,sL):`https://${t.authDomain}/${iL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="webStorageSupport";class lL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tk,this._completeRedirectFn=NM,this._overrideRedirectResult=PM}async _openPopup(e,n,r,i){var s;Wr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ux(e,n,r,ym(),i);return nL(e,o,Sv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ux(e,n,r,ym(),i);return hM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QM(e),r=new OM(e);return n.register("authEvent",i=>(ee(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wp,{type:Wp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Wp];o!==void 0&&n(!!o),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $S()||VS()||bv()}}const cL=lL;var hx="@firebase/auth",dx="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dL(t){Ws(new ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WS(t)},c=new RO(r,i,s,l);return BO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ws(new ji("auth-internal",e=>{const n=to(e.getProvider("auth").getImmediate());return(r=>new uL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(hx,dx,hL(t)),lr(hx,dx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=5*60,pL=wS("authIdTokenMaxAge")||fL;let fx=null;const gL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pL)return;const i=n==null?void 0:n.token;fx!==i&&(fx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ns(t=yv()){const e=mf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UO(t,{popupRedirectResolver:cL,persistence:[wM,lM,tk]}),r=wS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=gL(s.toString());sM(n,o,()=>o(n.currentUser)),iM(n,a=>o(a))}}const i=yS("auth");return i&&zO(n,`http://${i}`),n}function mL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=cr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dL("Browser");var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ds,lk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function k(){}k.prototype=T.prototype,S.D=T.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(P,R,D){for(var A=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)A[Z-2]=arguments[Z];return T.prototype[R].apply(P,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,k){k||(k=0);var P=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)P[R]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(R=0;16>R;++R)P[R]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=S.g[0],k=S.g[1],R=S.g[2];var D=S.g[3],A=T+(D^k&(R^D))+P[0]+3614090360&4294967295;T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[1]+3905402710&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[3]+3250441966&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+P[4]+4118548399&4294967295,T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[5]+1200080426&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[7]+4249261313&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+P[8]+1770035416&4294967295,T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[9]+2336552879&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[11]+2304563134&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(D^k&(R^D))+P[12]+1804603682&4294967295,T=k+(A<<7&4294967295|A>>>25),A=D+(R^T&(k^R))+P[13]+4254626195&4294967295,D=T+(A<<12&4294967295|A>>>20),A=R+(k^D&(T^k))+P[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=k+(T^R&(D^T))+P[15]+1236535329&4294967295,k=R+(A<<22&4294967295|A>>>10),A=T+(R^D&(k^R))+P[1]+4129170786&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[6]+3225465664&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[0]+3921069994&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^D&(k^R))+P[5]+3593408605&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[10]+38016083&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[4]+3889429448&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^D&(k^R))+P[9]+568446438&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[14]+3275163606&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[8]+1163531501&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(R^D&(k^R))+P[13]+2850285829&4294967295,T=k+(A<<5&4294967295|A>>>27),A=D+(k^R&(T^k))+P[2]+4243563512&4294967295,D=T+(A<<9&4294967295|A>>>23),A=R+(T^k&(D^T))+P[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=k+(D^T&(R^D))+P[12]+2368359562&4294967295,k=R+(A<<20&4294967295|A>>>12),A=T+(k^R^D)+P[5]+4294588738&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[8]+2272392833&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[14]+4259657740&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^D)+P[1]+2763975236&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[4]+1272893353&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[10]+3200236656&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^D)+P[13]+681279174&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[0]+3936430074&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[6]+76029189&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(k^R^D)+P[9]+3654602809&4294967295,T=k+(A<<4&4294967295|A>>>28),A=D+(T^k^R)+P[12]+3873151461&4294967295,D=T+(A<<11&4294967295|A>>>21),A=R+(D^T^k)+P[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=k+(R^D^T)+P[2]+3299628645&4294967295,k=R+(A<<23&4294967295|A>>>9),A=T+(R^(k|~D))+P[0]+4096336452&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[7]+1126891415&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[5]+4237533241&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~D))+P[12]+1700485571&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[3]+2399980690&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[1]+2240044497&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~D))+P[8]+1873313359&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[15]+4264355552&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[13]+1309151649&4294967295,k=R+(A<<21&4294967295|A>>>11),A=T+(R^(k|~D))+P[4]+4149444226&4294967295,T=k+(A<<6&4294967295|A>>>26),A=D+(k^(T|~R))+P[11]+3174756917&4294967295,D=T+(A<<10&4294967295|A>>>22),A=R+(T^(D|~k))+P[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=k+(D^(R|~T))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var k=T-this.blockSize,P=this.B,R=this.h,D=0;D<T;){if(R==0)for(;D<=k;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<T;)if(P[R++]=S.charCodeAt(D++),R==this.blockSize){i(this,P),R=0;break}}else for(;D<T;)if(P[R++]=S[D++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var k=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=k&255,k/=256;for(this.u(S),S=Array(16),T=k=0;4>T;++T)for(var P=0;32>P;P+=8)S[k++]=this.g[T]>>>P&255;return S};function s(S,T){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=T(S)}function o(S,T){this.h=T;for(var k=[],P=!0,R=S.length-1;0<=R;R--){var D=S[R]|0;P&&D==T||(k[R]=D,P=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return b(c(-S));for(var T=[],k=1,P=0;S>=k;P++)T[P]=S/k|0,k*=4294967296;return new o(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return b(h(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(T,8)),P=d,R=0;R<S.length;R+=8){var D=Math.min(8,S.length-R),A=parseInt(S.substring(R,R+D),T);8>D?(D=c(Math.pow(T,D)),P=P.j(D).add(c(A))):(P=P.j(k),P=P.add(c(A)))}return P}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-b(this).m();for(var S=0,T=1,k=0;k<this.g.length;k++){var P=this.i(k);S+=(0<=P?P:4294967296+P)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(v(this))return"-"+b(this).toString(S);for(var T=c(Math.pow(S,6)),k=this,P="";;){var R=I(k,T).g;k=_(k,R.j(T));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=R,y(k))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=_(this,S),v(S)?-1:y(S)?0:1};function b(S){for(var T=S.g.length,k=[],P=0;P<T;P++)k[P]=~S.g[P];return new o(k,~S.h).add(f)}t.abs=function(){return v(this)?b(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0,R=0;R<=T;R++){var D=P+(this.i(R)&65535)+(S.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);P=A>>>16,D&=65535,A&=65535,k[R]=A<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(S,T){return S.add(b(T))}t.j=function(S){if(y(this)||y(S))return d;if(v(this))return v(S)?b(this).j(b(S)):b(b(this).j(S));if(v(S))return b(this.j(b(S)));if(0>this.l(p)&&0>S.l(p))return c(this.m()*S.m());for(var T=this.g.length+S.g.length,k=[],P=0;P<2*T;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<S.g.length;R++){var D=this.i(P)>>>16,A=this.i(P)&65535,Z=S.i(R)>>>16,Y=S.i(R)&65535;k[2*P+2*R]+=A*Y,w(k,2*P+2*R),k[2*P+2*R+1]+=D*Y,w(k,2*P+2*R+1),k[2*P+2*R+1]+=A*Z,w(k,2*P+2*R+1),k[2*P+2*R+2]+=D*Z,w(k,2*P+2*R+2)}for(P=0;P<T;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=T;P<2*T;P++)k[P]=0;return new o(k,0)};function w(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function I(S,T){if(y(T))throw Error("division by zero");if(y(S))return new E(d,d);if(v(S))return T=I(b(S),T),new E(b(T.g),b(T.h));if(v(T))return T=I(S,b(T)),new E(b(T.g),T.h);if(30<S.g.length){if(v(S)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var k=f,P=T;0>=P.l(S);)k=N(k),P=N(P);var R=O(k,1),D=O(P,1);for(P=O(P,2),k=O(k,2);!y(P);){var A=D.add(P);0>=A.l(S)&&(R=R.add(k),D=A),P=O(P,1),k=O(k,1)}return T=_(S,R.j(T)),new E(R,T)}for(R=d;0<=S.l(T);){for(k=Math.max(1,Math.floor(S.m()/T.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(k),A=D.j(T);v(A)||0<A.l(S);)k-=P,D=c(k),A=D.j(T);y(D)&&(D=f),R=R.add(D),S=_(S,A)}return new E(R,S)}t.A=function(S){return I(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)&S.i(P);return new o(k,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)|S.i(P);return new o(k,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),k=[],P=0;P<T;P++)k[P]=this.i(P)^S.i(P);return new o(k,this.h^S.h)};function N(S){for(var T=S.g.length+1,k=[],P=0;P<T;P++)k[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(k,S.h)}function O(S,T){var k=T>>5;T%=32;for(var P=S.g.length-k,R=[],D=0;D<P;D++)R[D]=0<T?S.i(D+k)>>>T|S.i(D+k+1)<<32-T:S.i(D+k);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ds=o}).apply(typeof px<"u"?px:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ck,pl,uk,Nh,xm,hk,dk,fk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,x){return u==Array.prototype||u==Object.prototype||(u[g]=x.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var g=0;g<u.length;++g){var x=u[g];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var x=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var L=u[C];if(!(L in x))break e;x=x[L]}u=u[u.length-1],C=x[u],g=g(C),g!=C&&g!=null&&e(x,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var x=0,C=!1,L={next:function(){if(!C&&x<u.length){var V=x++;return{value:g(V,u[V]),done:!1}}return C=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(g,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function h(u,g,x){return u.call.apply(u.bind,arguments)}function d(u,g,x){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,C),u.apply(g,L)}}return function(){return u.apply(g,arguments)}}function f(u,g,x){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function p(u,g){var x=Array.prototype.slice.call(arguments,1);return function(){var C=x.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function y(u,g){function x(){}x.prototype=g.prototype,u.aa=g.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(C,L,V){for(var z=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)z[Ce-2]=arguments[Ce];return g.prototype[L].apply(C,z)}}function v(u){const g=u.length;if(0<g){const x=Array(g);for(let C=0;C<g;C++)x[C]=u[C];return x}return[]}function b(u,g){for(let x=1;x<arguments.length;x++){const C=arguments[x];if(l(C)){const L=u.length||0,V=C.length||0;u.length=L+V;for(let z=0;z<V;z++)u[L+z]=C[z]}else u.push(C)}}class _{constructor(g,x){this.i=g,this.j=x,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function I(u){return I[" "](u),u}I[" "]=function(){};var N=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(u,g,x){for(const C in u)g.call(x,u[C],C,u)}function S(u,g){for(const x in u)g.call(void 0,u[x],x,u)}function T(u){const g={};for(const x in u)g[x]=u[x];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let x,C;for(let L=1;L<arguments.length;L++){C=arguments[L];for(x in C)u[x]=C[x];for(let V=0;V<k.length;V++)x=k[V],Object.prototype.hasOwnProperty.call(C,x)&&(u[x]=C[x])}}function R(u){var g=1;u=u.split(":");const x=[];for(;0<g&&u.length;)x.push(u.shift()),g--;return u.length&&x.push(u.join(":")),x}function D(u){a.setTimeout(()=>{throw u},0)}function A(){var u=W;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Z{constructor(){this.h=this.g=null}add(g,x){const C=Y.get();C.set(g,x),this.h?this.h.next=C:this.g=C,this.h=C}}var Y=new _(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,x){this.h=g,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let re,U=!1,W=new Z,H=()=>{const u=a.Promise.resolve(void 0);re=()=>{u.then(ie)}};var ie=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(x){D(x)}var g=Y;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}U=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};a.addEventListener("test",x,g),a.removeEventListener("test",x,g)}catch{}return u}();function be(u,g){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(N){e:{try{I(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else x=="mouseover"?g=u.fromElement:x=="mouseout"&&(g=u.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ee[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&be.aa.h.call(this)}}y(be,ne);var Ee={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),yr=0;function Qn(u,g,x,C,L){this.listener=u,this.proxy=null,this.src=g,this.type=x,this.capture=!!C,this.ha=L,this.key=++yr,this.da=this.fa=!1}function Xr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Jr(u){this.src=u,this.g={},this.h=0}Jr.prototype.add=function(u,g,x,C,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var z=is(u,g,C,L);return-1<z?(g=u[z],x||(g.fa=!1)):(g=new Qn(g,this.src,V,!!C,L),g.fa=x,u.push(g)),g};function Zr(u,g){var x=g.type;if(x in u.g){var C=u.g[x],L=Array.prototype.indexOf.call(C,g,void 0),V;(V=0<=L)&&Array.prototype.splice.call(C,L,1),V&&(Xr(g),u.g[x].length==0&&(delete u.g[x],u.h--))}}function is(u,g,x,C){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==g&&V.capture==!!x&&V.ha==C)return L}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),vr={};function Wt(u,g,x,C,L){if(Array.isArray(g)){for(var V=0;V<g.length;V++)Wt(u,g[V],x,C,L);return null}return x=ou(x),u&&u[Ze]?u.K(g,x,c(C)?!!C.capture:!!C,L):co(u,g,x,!1,C,L)}function co(u,g,x,C,L,V){if(!g)throw Error("Invalid event type");var z=c(L)?!!L.capture:!!L,Ce=uo(u);if(Ce||(u[Be]=Ce=new Jr(u)),x=Ce.add(g,x,C,z,V),x.proxy)return x;if(C=iu(),x.proxy=C,C.src=u,C.listener=x,u.addEventListener)me||(L=z),L===void 0&&(L=!1),u.addEventListener(g.toString(),C,L);else if(u.attachEvent)u.attachEvent(su(g.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return x}function iu(){function u(x){return g.call(u.src,u.listener,x)}const g=ep;return u}function Ca(u,g,x,C,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)Ca(u,g[V],x,C,L);else C=c(C)?!!C.capture:!!C,x=ou(x),u&&u[Ze]?(u=u.i,g=String(g).toString(),g in u.g&&(V=u.g[g],x=is(V,x,C,L),-1<x&&(Xr(V[x]),Array.prototype.splice.call(V,x,1),V.length==0&&(delete u.g[g],u.h--)))):u&&(u=uo(u))&&(g=u.g[g.toString()],u=-1,g&&(u=is(g,x,C,L)),(x=-1<u?g[u]:null)&&Pa(x))}function Pa(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ze])Zr(g.i,u);else{var x=u.type,C=u.proxy;g.removeEventListener?g.removeEventListener(x,C,u.capture):g.detachEvent?g.detachEvent(su(x),C):g.addListener&&g.removeListener&&g.removeListener(C),(x=uo(g))?(Zr(x,u),x.h==0&&(x.src=null,g[Be]=null)):Xr(u)}}}function su(u){return u in vr?vr[u]:vr[u]="on"+u}function ep(u,g){if(u.da)u=!0;else{g=new be(g,this);var x=u.listener,C=u.ha||u.src;u.fa&&Pa(u),u=x.call(C,g)}return u}function uo(u){return u=u[Be],u instanceof Jr?u:null}var Aa="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(u){return typeof u=="function"?u:(u[Aa]||(u[Aa]=function(g){return u.handleEvent(g)}),u[Aa])}function gt(){X.call(this),this.i=new Jr(this),this.M=this,this.F=null}y(gt,X),gt.prototype[Ze]=!0,gt.prototype.removeEventListener=function(u,g,x,C){Ca(this,u,g,x,C)};function bt(u,g){var x,C=u.F;if(C)for(x=[];C;C=C.F)x.push(C);if(u=u.M,C=g.type||g,typeof g=="string")g=new ne(g,u);else if(g instanceof ne)g.target=g.target||u;else{var L=g;g=new ne(C,u),P(g,L)}if(L=!0,x)for(var V=x.length-1;0<=V;V--){var z=g.g=x[V];L=ho(z,C,!0,g)&&L}if(z=g.g=u,L=ho(z,C,!0,g)&&L,L=ho(z,C,!1,g)&&L,x)for(V=0;V<x.length;V++)z=g.g=x[V],L=ho(z,C,!1,g)&&L}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var x=u.g[g],C=0;C<x.length;C++)Xr(x[C]);delete u.g[g],u.h--}}this.F=null},gt.prototype.K=function(u,g,x,C){return this.i.add(String(u),g,!1,x,C)},gt.prototype.L=function(u,g,x,C){return this.i.add(String(u),g,!0,x,C)};function ho(u,g,x,C){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,V=0;V<g.length;++V){var z=g[V];if(z&&!z.da&&z.capture==x){var Ce=z.listener,Et=z.ha||z.src;z.fa&&Zr(u.i,z),L=Ce.call(Et,C)!==!1&&L}}return L&&!C.defaultPrevented}function fo(u,g,x){if(typeof u=="function")x&&(u=f(u,x));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ra(u){u.g=fo(()=>{u.g=null,u.i&&(u.i=!1,Ra(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class au extends X{constructor(g,x){super(),this.m=g,this.l=x,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ra(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(u){X.call(this),this.h=u,this.g={}}y(ss,X);var os=[];function Na(u){O(u.g,function(g,x){this.g.hasOwnProperty(x)&&Pa(g)},u),u.g={}}ss.prototype.N=function(){ss.aa.N.call(this),Na(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Da=a.JSON.stringify,lu=a.JSON.parse,cu=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function as(){}as.prototype.h=null;function uu(u){return u.h||(u.h=u.i())}function Oa(){}var ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function po(){ne.call(this,"d")}y(po,ne);function mt(){ne.call(this,"c")}y(mt,ne);var Ke={},cs=null;function Ie(){return cs=cs||new gt}Ke.La="serverreachability";function hn(u){ne.call(this,Ke.La,u)}y(hn,ne);function us(u){const g=Ie();bt(g,new hn(g))}Ke.STAT_EVENT="statevent";function go(u,g){ne.call(this,Ke.STAT_EVENT,u),this.stat=g}y(go,ne);function yt(u){const g=Ie();bt(g,new go(g,u))}Ke.Ma="timingevent";function Ma(u,g){ne.call(this,Ke.Ma,u),this.size=g}y(Ma,ne);function _r(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function La(u,g,x,C,L,V){u.info(function(){if(u.g)if(V)for(var z="",Ce=V.split("&"),Et=0;Et<Ce.length;Et++){var we=Ce[Et].split("=");if(1<we.length){var Rt=we[0];we=we[1];var Nt=Rt.split("_");z=2<=Nt.length&&Nt[1]=="type"?z+(Rt+"="+we+"&"):z+(Rt+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+C+") [attempt "+L+"]: "+g+`
`+x+`
`+z})}function Va(u,g,x,C,L,V,z){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+L+"]: "+g+`
`+x+`
`+V+" "+z})}function Jn(u,g,x,C){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ja(u,x)+(C?" "+C:"")})}function tp(u,g){u.info(function(){return"TIMEOUT: "+g})}Xn.prototype.info=function(){};function ja(u,g){if(!u.g)return g;if(!g)return null;try{var x=JSON.parse(g);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var C=x[u];if(!(2>C.length)){var L=C[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return Da(x)}catch{return g}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fa;function le(){}y(le,as),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},Fa=new le;function xe(u,g,x,C){this.j=u,this.i=g,this.l=x,this.R=C||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ze}function ze(){this.i=null,this.g="",this.h=!1}var Zt={},Ht={};function ds(u,g,x){u.L=1,u.v=yu(wr(g)),u.m=x,u.P=!0,du(u,null)}function du(u,g){u.F=Date.now(),pu(u),u.A=wr(u.v);var x=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),J_(x.i,"t",C),u.C=0,x=u.j.J,u.h=new ze,u.g=m0(u.j,x?g:null,!u.m),0<u.O&&(u.M=new au(f(u.Y,u,u.g),u.O)),g=u.U,x=u.g,C=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(os[0]=L.toString()),L=os);for(var V=0;V<L.length;V++){var z=Wt(x,L[V],C||g.handleEvent,!1,g.h||g);if(!z)break;g.g[z.key]=z}g=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),us(),La(u.i,u.u,u.A,u.l,u.R,u.m)}xe.prototype.ca=function(u){u=u.target;const g=this.M;g&&xr(u)==3?g.j():this.Y(u)},xe.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=xr(this.g);var g=this.g.Ba();const vo=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||s0(this.g)))){this.J||Nt!=4||g==7||(g==8||0>=vo?us(3):us(2)),np(this);var x=this.g.Z();this.X=x;t:if(fu(this)){var C=s0(this.g);u="";var L=C.length,V=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),Ua(this);var z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,u+=this.h.i.decode(C[g],{stream:!(V&&g==L-1)});C.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=x==200,Va(this.i,this.u,this.A,this.l,this.R,Nt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,Et=this.g;if((Ce=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ce)){var we=Ce;break t}}we=null}if(x=we)Jn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rp(this,x);else{this.o=!1,this.s=3,yt(12),fs(this),Ua(this);break e}}if(this.P){x=!0;let Mn;for(;!this.J&&this.C<z.length;)if(Mn=NP(this,z),Mn==Ht){Nt==4&&(this.s=4,yt(14),x=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Mn==Zt){this.s=4,yt(15),Jn(this.i,this.l,z,"[Invalid Chunk]"),x=!1;break}else Jn(this.i,this.l,Mn,null),rp(this,Mn);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||z.length!=0||this.h.h||(this.s=1,yt(16),x=!1),this.o=this.o&&x,!x)Jn(this.i,this.l,z,"[Invalid Chunked Response]"),fs(this),Ua(this);else if(0<z.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),cp(Rt),Rt.M=!0,yt(11))}}else Jn(this.i,this.l,z,null),rp(this,z);Nt==4&&fs(this),this.o&&!this.J&&(Nt==4?d0(this.j,this):(this.o=!1,pu(this)))}else YP(this.g),x==400&&0<z.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),fs(this),Ua(this)}}}catch{}finally{}};function fu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function NP(u,g){var x=u.C,C=g.indexOf(`
`,x);return C==-1?Ht:(x=Number(g.substring(x,C)),isNaN(x)?Zt:(C+=1,C+x>g.length?Ht:(g=g.slice(C,C+x),u.C=C+x,g)))}xe.prototype.cancel=function(){this.J=!0,fs(this)};function pu(u){u.S=Date.now()+u.I,U_(u,u.I)}function U_(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_r(f(u.ba,u),g)}function np(u){u.B&&(a.clearTimeout(u.B),u.B=null)}xe.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(tp(this.i,this.A),this.L!=2&&(us(),yt(17)),fs(this),this.s=2,Ua(this)):U_(this,this.S-u)};function Ua(u){u.j.G==0||u.J||d0(u.j,u)}function fs(u){np(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Na(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function rp(u,g){try{var x=u.j;if(x.G!=0&&(x.g==u||ip(x.h,u))){if(!u.K&&ip(x.h,u)&&x.G==3){try{var C=x.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var L=C;if(L[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)Eu(x),xu(x);else break e;lp(x),yt(18)}}else x.za=L[1],0<x.za-x.T&&37500>L[2]&&x.F&&x.v==0&&!x.C&&(x.C=_r(f(x.Za,x),6e3));if(1>=$_(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else gs(x,11)}else if((u.K||x.g==u)&&Eu(x),!w(g))for(L=x.Da.g.parse(g),g=0;g<L.length;g++){let we=L[g];if(x.T=we[0],we=we[1],x.G==2)if(we[0]=="c"){x.K=we[1],x.ia=we[2];const Rt=we[3];Rt!=null&&(x.la=Rt,x.j.info("VER="+x.la));const Nt=we[4];Nt!=null&&(x.Aa=Nt,x.j.info("SVER="+x.Aa));const vo=we[5];vo!=null&&typeof vo=="number"&&0<vo&&(C=1.5*vo,x.L=C,x.j.info("backChannelRequestTimeoutMs_="+C)),C=x;const Mn=u.g;if(Mn){const Su=Mn.g?Mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Su){var V=C.h;V.g||Su.indexOf("spdy")==-1&&Su.indexOf("quic")==-1&&Su.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(sp(V,V.h),V.h=null))}if(C.D){const up=Mn.g?Mn.g.getResponseHeader("X-HTTP-Session-Id"):null;up&&(C.ya=up,Re(C.I,C.D,up))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),C=x;var z=u;if(C.qa=g0(C,C.J?C.ia:null,C.W),z.K){W_(C.h,z);var Ce=z,Et=C.L;Et&&(Ce.I=Et),Ce.B&&(np(Ce),pu(Ce)),C.g=z}else u0(C);0<x.i.length&&bu(x)}else we[0]!="stop"&&we[0]!="close"||gs(x,7);else x.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?gs(x,7):ap(x):we[0]!="noop"&&x.l&&x.l.ta(we),x.v=0)}}us(4)}catch{}}var DP=class{constructor(u,g){this.g=u,this.map=g}};function B_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function z_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function $_(u){return u.h?1:u.g?u.g.size:0}function ip(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function sp(u,g){u.g?u.g.add(g):u.h=g}function W_(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}B_.prototype.cancel=function(){if(this.i=H_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function H_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const x of u.g.values())g=g.concat(x.D);return g}return v(u.i)}function OP(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],x=u.length,C=0;C<x;C++)g.push(u[C]);return g}g=[],x=0;for(C in u)g[x++]=u[C];return g}function MP(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var x=0;x<u;x++)g.push(x);return g}g=[],x=0;for(const C in u)g[x++]=C;return g}}}function q_(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var x=MP(u),C=OP(u),L=C.length,V=0;V<L;V++)g.call(void 0,C[V],x&&x[V],u)}var K_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LP(u,g){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var C=u[x].indexOf("="),L=null;if(0<=C){var V=u[x].substring(0,C);L=u[x].substring(C+1)}else V=u[x];g(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ps(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ps){this.h=u.h,gu(this,u.j),this.o=u.o,this.g=u.g,mu(this,u.s),this.l=u.l;var g=u.i,x=new $a;x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),G_(this,x),this.m=u.m}else u&&(g=String(u).match(K_))?(this.h=!1,gu(this,g[1]||"",!0),this.o=Ba(g[2]||""),this.g=Ba(g[3]||"",!0),mu(this,g[4]),this.l=Ba(g[5]||"",!0),G_(this,g[6]||"",!0),this.m=Ba(g[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}ps.prototype.toString=function(){var u=[],g=this.j;g&&u.push(za(g,Y_,!0),":");var x=this.g;return(x||g=="file")&&(u.push("//"),(g=this.o)&&u.push(za(g,Y_,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(za(x,x.charAt(0)=="/"?FP:jP,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",za(x,BP)),u.join("")};function wr(u){return new ps(u)}function gu(u,g,x){u.j=x?Ba(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function mu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function G_(u,g,x){g instanceof $a?(u.i=g,zP(u.i,u.h)):(x||(g=za(g,UP)),u.i=new $a(g,u.h))}function Re(u,g,x){u.i.set(g,x)}function yu(u){return Re(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ba(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function za(u,g,x){return typeof u=="string"?(u=encodeURI(u).replace(g,VP),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function VP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Y_=/[#\/\?@]/g,jP=/[#\?:]/g,FP=/[#\?]/g,UP=/[#\?@]/g,BP=/#/g;function $a(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function ei(u){u.g||(u.g=new Map,u.h=0,u.i&&LP(u.i,function(g,x){u.add(decodeURIComponent(g.replace(/\+/g," ")),x)}))}t=$a.prototype,t.add=function(u,g){ei(this),this.i=null,u=mo(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(g),this.h+=1,this};function Q_(u,g){ei(u),g=mo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function X_(u,g){return ei(u),g=mo(u,g),u.g.has(g)}t.forEach=function(u,g){ei(this),this.g.forEach(function(x,C){x.forEach(function(L){u.call(g,L,C,this)},this)},this)},t.na=function(){ei(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),x=[];for(let C=0;C<g.length;C++){const L=u[C];for(let V=0;V<L.length;V++)x.push(g[C])}return x},t.V=function(u){ei(this);let g=[];if(typeof u=="string")X_(this,u)&&(g=g.concat(this.g.get(mo(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)g=g.concat(u[x])}return g},t.set=function(u,g){return ei(this),this.i=null,u=mo(this,u),X_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function J_(u,g,x){Q_(u,g),0<x.length&&(u.i=null,u.g.set(mo(u,g),v(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var x=0;x<g.length;x++){var C=g[x];const V=encodeURIComponent(String(C)),z=this.V(C);for(C=0;C<z.length;C++){var L=V;z[C]!==""&&(L+="="+encodeURIComponent(String(z[C]))),u.push(L)}}return this.i=u.join("&")};function mo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function zP(u,g){g&&!u.j&&(ei(u),u.i=null,u.g.forEach(function(x,C){var L=C.toLowerCase();C!=L&&(Q_(this,C),J_(this,L,x))},u)),u.j=g}function $P(u,g){const x=new Xn;if(a.Image){const C=new Image;C.onload=p(ti,x,"TestLoadImage: loaded",!0,g,C),C.onerror=p(ti,x,"TestLoadImage: error",!1,g,C),C.onabort=p(ti,x,"TestLoadImage: abort",!1,g,C),C.ontimeout=p(ti,x,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else g(!1)}function WP(u,g){const x=new Xn,C=new AbortController,L=setTimeout(()=>{C.abort(),ti(x,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:C.signal}).then(V=>{clearTimeout(L),V.ok?ti(x,"TestPingServer: ok",!0,g):ti(x,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ti(x,"TestPingServer: error",!1,g)})}function ti(u,g,x,C,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),C(x)}catch{}}function HP(){this.g=new cu}function qP(u,g,x){const C=x||"";try{q_(u,function(L,V){let z=L;c(L)&&(z=Da(L)),g.push(C+V+"="+encodeURIComponent(z))})}catch(L){throw g.push(C+"type="+encodeURIComponent("_badmap")),L}}function vu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(vu,as),vu.prototype.g=function(){return new _u(this.l,this.j)},vu.prototype.i=function(u){return function(){return u}}({});function _u(u,g){gt.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(_u,gt),t=_u.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ha(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Z_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Z_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Wa(this):Ha(this),this.readyState==3&&Z_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Wa(this))},t.Qa=function(u){this.g&&(this.response=u,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ha(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var x=g.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=g.next();return u.join(`\r
`)};function Ha(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function e0(u){let g="";return O(u,function(x,C){g+=C,g+=":",g+=x,g+=`\r
`}),g}function op(u,g,x){e:{for(C in x){var C=!1;break e}C=!0}C||(x=e0(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):Re(u,g,x))}function Ge(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ge,gt);var KP=/^https?$/i,GP=["POST","PUT"];t=Ge.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,x,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fa.g(),this.v=this.o?uu(this.o):uu(Fa),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(V){t0(this,V);return}if(u=x||"",x=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var L in C)x.set(L,C[L]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const V of C.keys())x.set(V,C.get(V));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(x.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GP,g,void 0))||C||L||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of x)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{i0(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){t0(this,V)}};function t0(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,n0(u),wu(u)}function n0(u){u.A||(u.A=!0,bt(u,"complete"),bt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,bt(this,"complete"),bt(this,"abort"),wu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wu(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?r0(this):this.bb())},t.bb=function(){r0(this)};function r0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||xr(u)!=4||u.Z()!=2)){if(u.u&&xr(u)==4)fo(u.Ea,0,u);else if(bt(u,"readystatechange"),xr(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var x;if(!(x=g)){var C;if(C=z===0){var L=String(u.D).match(K_)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),C=!KP.test(L?L.toLowerCase():"")}x=C}if(x)bt(u,"complete"),bt(u,"success");else{u.m=6;try{var V=2<xr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",n0(u)}}finally{wu(u)}}}}function wu(u,g){if(u.g){i0(u);const x=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||bt(u,"ready");try{x.onreadystatechange=C}catch{}}}function i0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),lu(g)}};function s0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function YP(u){const g={};u=(u.g&&2<=xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(w(u[C]))continue;var x=R(u[C]);const L=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const V=g[L]||[];g[L]=V,V.push(x)}S(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(u,g,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||g}function o0(u){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,u),this.cb=qa("retryDelaySeedMs",1e4,u),this.Wa=qa("forwardChannelMaxRetries",2,u),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new B_(u&&u.concurrentRequestLimit),this.Da=new HP,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=o0.prototype,t.la=8,t.G=1,t.connect=function(u,g,x,C){yt(0),this.W=u,this.H=g||{},x&&C!==void 0&&(this.H.OSID=x,this.H.OAID=C),this.F=this.X,this.I=g0(this,null,this.W),bu(this)};function ap(u){if(a0(u),u.G==3){var g=u.U++,x=wr(u.I);if(Re(x,"SID",u.K),Re(x,"RID",g),Re(x,"TYPE","terminate"),Ka(u,x),g=new xe(u,u.j,g),g.L=2,g.v=yu(wr(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=g.v,x=!0),x||(g.g=m0(g.j,null),g.g.ea(g.v)),g.F=Date.now(),pu(g)}p0(u)}function xu(u){u.g&&(cp(u),u.g.cancel(),u.g=null)}function a0(u){xu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Eu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bu(u){if(!z_(u.h)&&!u.s){u.s=!0;var g=u.Ga;re||H(),U||(re(),U=!0),W.add(g,u),u.B=0}}function QP(u,g){return $_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_r(f(u.Ga,u,g),f0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new xe(this,this.j,u);let V=this.o;if(this.S&&(V?(V=T(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var g=0,x=0;x<this.i.length;x++){t:{var C=this.i[x];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=x;break e}if(g===4096||x===this.i.length-1){g=x+1;break e}}g=1e3}else g=1e3;g=c0(this,L,g),x=wr(this.I),Re(x,"RID",u),Re(x,"CVER",22),this.D&&Re(x,"X-HTTP-Session-Id",this.D),Ka(this,x),V&&(this.O?g="headers="+encodeURIComponent(String(e0(V)))+"&"+g:this.m&&op(x,this.m,V)),sp(this.h,L),this.Ua&&Re(x,"TYPE","init"),this.P?(Re(x,"$req",g),Re(x,"SID","null"),L.T=!0,ds(L,x,null)):ds(L,x,g),this.G=2}}else this.G==3&&(u?l0(this,u):this.i.length==0||z_(this.h)||l0(this))};function l0(u,g){var x;g?x=g.l:x=u.U++;const C=wr(u.I);Re(C,"SID",u.K),Re(C,"RID",x),Re(C,"AID",u.T),Ka(u,C),u.m&&u.o&&op(C,u.m,u.o),x=new xe(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),g&&(u.i=g.D.concat(u.i)),g=c0(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sp(u.h,x),ds(x,C,g)}function Ka(u,g){u.H&&O(u.H,function(x,C){Re(g,C,x)}),u.l&&q_({},function(x,C){Re(g,C,x)})}function c0(u,g,x){x=Math.min(u.i.length,x);var C=u.l?f(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const z=["count="+x];V==-1?0<x?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Ce=!0;for(let Et=0;Et<x;Et++){let we=L[Et].g;const Rt=L[Et].map;if(we-=V,0>we)V=Math.max(0,L[Et].g-100),Ce=!1;else try{qP(Rt,z,"req"+we+"_")}catch{C&&C(Rt)}}if(Ce){C=z.join("&");break e}}}return u=u.i.splice(0,x),g.D=u,C}function u0(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;re||H(),U||(re(),U=!0),W.add(g,u),u.v=0}}function lp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_r(f(u.Fa,u),f0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,h0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_r(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),xu(this),h0(this))};function cp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function h0(u){u.g=new xe(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=wr(u.qa);Re(g,"RID","rpc"),Re(g,"SID",u.K),Re(g,"AID",u.T),Re(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Re(g,"TO",u.ja),Re(g,"TYPE","xmlhttp"),Ka(u,g),u.m&&u.o&&op(g,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=yu(wr(g)),x.m=null,x.P=!0,du(x,u)}t.Za=function(){this.C!=null&&(this.C=null,xu(this),lp(this),yt(19))};function Eu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function d0(u,g){var x=null;if(u.g==g){Eu(u),cp(u),u.g=null;var C=2}else if(ip(u.h,g))x=g.D,W_(u.h,g),C=1;else return;if(u.G!=0){if(g.o)if(C==1){x=g.m?g.m.length:0,g=Date.now()-g.F;var L=u.B;C=Ie(),bt(C,new Ma(C,x)),bu(u)}else u0(u);else if(L=g.s,L==3||L==0&&0<g.X||!(C==1&&QP(u,g)||C==2&&lp(u)))switch(x&&0<x.length&&(g=u.h,g.i=g.i.concat(x)),L){case 1:gs(u,5);break;case 4:gs(u,10);break;case 3:gs(u,6);break;default:gs(u,2)}}}function f0(u,g){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*g}function gs(u,g){if(u.j.info("Error code "+g),g==2){var x=f(u.fb,u),C=u.Xa;const L=!C;C=new ps(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gu(C,"https"),yu(C),L?$P(C.toString(),x):WP(C.toString(),x)}else yt(2);u.G=0,u.l&&u.l.sa(g),p0(u),a0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function p0(u){if(u.G=0,u.ka=[],u.l){const g=H_(u.h);(g.length!=0||u.i.length!=0)&&(b(u.ka,g),b(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function g0(u,g,x){var C=x instanceof ps?wr(x):new ps(x);if(C.g!="")g&&(C.g=g+"."+C.g),mu(C,C.s);else{var L=a.location;C=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var V=new ps(null);C&&gu(V,C),g&&(V.g=g),L&&mu(V,L),x&&(V.l=x),C=V}return x=u.D,g=u.ya,x&&g&&Re(C,x,g),Re(C,"VER",u.la),Ka(u,C),C}function m0(u,g,x){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ge(new vu({eb:x})):new Ge(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y0(){}t=y0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tu(){}Tu.prototype.g=function(u,g){return new dn(u,g)};function dn(u,g){gt.call(this),this.g=new o0(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new yo(this)}y(dn,gt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){ap(this.g)},dn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=Da(u),u=x);g.i.push(new DP(g.Ya++,u)),g.G==3&&bu(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,ap(this.g),delete this.g,dn.aa.N.call(this)};function v0(u){po.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const x in g){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(v0,po);function _0(){mt.call(this),this.status=1}y(_0,mt);function yo(u){this.g=u}y(yo,y0),yo.prototype.ua=function(){bt(this.g,"a")},yo.prototype.ta=function(u){bt(this.g,new v0(u))},yo.prototype.sa=function(u){bt(this.g,new _0)},yo.prototype.ra=function(){bt(this.g,"b")},Tu.prototype.createWebChannel=Tu.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,fk=function(){return new Tu},dk=function(){return Ie()},hk=Ke,xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,Nh=hs,hu.COMPLETE="complete",uk=hu,Oa.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",gt.prototype.listen=gt.prototype.K,pl=Oa,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,ck=Ge}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const gx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new gv("@firebase/firestore");function bo(){return Ks.logLevel}function q(t,...e){if(Ks.logLevel<=he.DEBUG){const n=e.map(Iv);Ks.debug(`Firestore (${ba}): ${t}`,...n)}}function Hr(t,...e){if(Ks.logLevel<=he.ERROR){const n=e.map(Iv);Ks.error(`Firestore (${ba}): ${t}`,...n)}}function sa(t,...e){if(Ks.logLevel<=he.WARN){const n=e.map(Iv);Ks.warn(`Firestore (${ba}): ${t}`,...n)}}function Iv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw Hr(e),new Error(e)}function Te(t,e){t||te()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends mr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class vL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _L{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Te(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new pk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new Vt(e)}}class wL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Te(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Te(typeof n.token=="string"),this.R=n.token,new bL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new at(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new at(0,0))}static max(){return new se(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return mc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends mc{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const SL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends mc{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return SL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ve.fromString(e))}static fromName(e){return new J(Ve.fromString(e).popFirst(5))}static empty(){return new J(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ve(e.slice()))}}function kL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new at(n+1,0):new at(n,r));return new Fi(i,J.empty(),e)}function IL(t){return new Fi(t.readTime,t.key,-1)}class Fi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fi(se.min(),J.empty(),-1)}static max(){return new Fi(se.max(),J.empty(),-1)}}function CL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==PL)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function RL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wf.oe=-1;function xf(t){return t==null}function Id(t){return t===0&&1/t==-1/0}function NL(t){return typeof t=="number"&&Number.isInteger(t)&&!Id(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mx(e)),e=OL(t.get(n),e);return mx(e)}function OL(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function mx(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??St.RED,this.left=i??St.EMPTY,this.right=s??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new St(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return St.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vx(this.data.getIterator())}getIteratorFrom(e){return new vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new ft(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yk("Invalid base64 string: "+s):s}}(e);return new At(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const ML=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(t){if(Te(!!t),typeof t=="string"){let e=0;const n=ML.exec(t);if(Te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bi(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bf(t){const e=t.mapValue.fields.__previous_value__;return Cv(e)?bf(e):e}function yc(t){const e=Ui(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class vc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cv(t)?4:jL(t)?9007199254740991:VL(t)?10:11:te()}function pr(t,e){if(t===e)return!0;const n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yc(t).isEqual(yc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ui(i.timestampValue),a=Ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Bi(i.bytesValue).isEqual(Bi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),a=et(s.doubleValue);return o===a?Id(o)===Id(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(yx(o)!==yx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pr(o[l],a[l])))return!1;return!0}(t,e);default:return te()}}function _c(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function aa(t,e){if(t===e)return 0;const n=zi(t),r=zi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=et(s.integerValue||s.doubleValue),l=et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return _x(t.timestampValue,e.timestampValue);case 4:return _x(yc(t),yc(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Bi(s),l=Bi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ge(a[c],l[c]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(et(s.latitude),et(o.latitude));return a!==0?a:ge(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return wx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},f=o.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=ge(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return v!==0?v:wx(p,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ku.mapValue&&o===Ku.mapValue)return 0;if(s===Ku.mapValue)return 1;if(o===Ku.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ge(l[d],h[d]);if(f!==0)return f;const p=aa(a[l[d]],c[h[d]]);if(p!==0)return p}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function _x(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Ui(t),r=Ui(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function wx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=aa(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function la(t){return bm(t)}function bm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ui(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=bm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bm(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function Dh(t){switch(zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(t);return e?16+Dh(e):16;case 5:return 2*t.stringValue.length;case 6:return Bi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Dh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Zi(r.fields,(s,o)=>{i+=s.length+Dh(o)}),i}(t.mapValue);default:throw te()}}function Em(t){return!!t&&"integerValue"in t}function Pv(t){return!!t&&"arrayValue"in t}function xx(t){return!!t&&"nullValue"in t}function bx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oh(t){return!!t&&"mapValue"in t}function VL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ml(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ml(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ml(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ml(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rn(Ml(this.value))}}function vk(t){const e=[];return Zi(t.fields,(n,r)=>{const i=new kt([n]);if(Oh(r)){const s=vk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ft(e,0,se.min(),se.min(),se.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ft(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new Ft(e,2,n,se.min(),se.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,se.min(),se.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.position=e,this.inclusive=n}}function Ex(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=aa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n="asc"){this.field=e,this.dir=n}}function FL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{}class ut extends _k{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BL(e,n,r):n==="array-contains"?new WL(e,r):n==="in"?new HL(e,r):n==="not-in"?new qL(e,r):n==="array-contains-any"?new KL(e,r):new ut(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zL(e,r):new $L(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(aa(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends _k{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gr(e,n)}matches(e){return wk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wk(t){return t.op==="and"}function xk(t){return UL(t)&&wk(t)}function UL(t){for(const e of t.filters)if(e instanceof gr)return!1;return!0}function Tm(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+la(t.value);if(xk(t))return t.filters.map(e=>Tm(e)).join(",");{const e=t.filters.map(n=>Tm(n)).join(",");return`${t.op}(${e})`}}function bk(t,e){return t instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.field.isEqual(i.field)&&pr(r.value,i.value)}(t,e):t instanceof gr?function(r,i){return i instanceof gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bk(o,i.filters[a]),!0):!1}(t,e):void te()}function Ek(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(Ek).join(" ,")+"}"}(t):"Filter"}class BL extends ut{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class zL extends ut{constructor(e,n){super(e,"in",n),this.keys=Tk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $L extends ut{constructor(e,n){super(e,"not-in",n),this.keys=Tk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class WL extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pv(n)&&_c(n.arrayValue,this.value)}}class HL extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_c(this.value.arrayValue,n)}}class qL extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_c(this.value.arrayValue,n)}}class KL extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Sx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GL(t,e,n,r,i,s,o)}function Av(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>la(r)).join(",")),e.ue=n}return e.ue}function Rv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Tx(t.startAt,e.startAt)&&Tx(t.endAt,e.endAt)}function Sm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YL(t,e,n,r,i,s,o,a){return new Ef(t,e,n,r,i,s,o,a)}function Nv(t){return new Ef(t)}function kx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QL(t){return t.collectionGroup!==null}function Ll(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Pd(s,r))}),n.has(kt.keyField().canonicalString())||e.ce.push(new Pd(kt.keyField(),r))}return e.ce}function hr(t){const e=oe(t);return e.le||(e.le=XL(e,Ll(t))),e.le}function XL(t,e){if(t.limitType==="F")return Sx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pd(i.field,s)});const n=t.endAt?new Cd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cd(t.startAt.position,t.startAt.inclusive):null;return Sx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function km(t,e,n){return new Ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tf(t,e){return Rv(hr(t),hr(e))&&t.limitType===e.limitType}function Sk(t){return`${Av(hr(t))}|lt:${t.limitType}`}function Eo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ek(i)).join(", ")}]`),xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>la(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>la(i)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ll(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Ex(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ll(r),i)||r.endAt&&!function(o,a,l){const c=Ex(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ll(r),i))}(t,e)}function JL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kk(t){return(e,n)=>{let r=!1;for(const i of Ll(t)){const s=ZL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZL(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?aa(l,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return mk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=new qe(J.comparator);function qr(){return e4}const Ik=new qe(J.comparator);function gl(...t){let e=Ik;for(const n of t)e=e.insert(n.key,n);return e}function Ck(t){let e=Ik;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cs(){return Vl()}function Pk(){return Vl()}function Vl(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const t4=new qe(J.comparator),n4=new ft(J.comparator);function de(...t){let e=n4;for(const n of t)e=e.add(n);return e}const r4=new ft(ge);function i4(){return r4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function Ak(t){return{integerValue:""+t}}function s4(t,e){return NL(e)?Ak(e):Dv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function o4(t,e,n){return t instanceof Ad?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cv(s)&&(s=bf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ca?Nk(t,e):t instanceof wc?Dk(t,e):function(i,s){const o=Rk(i,s),a=Ix(o)+Ix(i.Pe);return Em(o)&&Em(i.Pe)?Ak(a):Dv(i.serializer,a)}(t,e)}function a4(t,e,n){return t instanceof ca?Nk(t,e):t instanceof wc?Dk(t,e):n}function Rk(t,e){return t instanceof Rd?function(r){return Em(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ad extends kf{}class ca extends kf{constructor(e){super(),this.elements=e}}function Nk(t,e){const n=Ok(e);for(const r of t.elements)n.some(i=>pr(i,r))||n.push(r);return{arrayValue:{values:n}}}class wc extends kf{constructor(e){super(),this.elements=e}}function Dk(t,e){let n=Ok(e);for(const r of t.elements)n=n.filter(i=>!pr(i,r));return{arrayValue:{values:n}}}class Rd extends kf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ix(t){return et(t.integerValue||t.doubleValue)}function Ok(t){return Pv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.field=e,this.transform=n}}function c4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ca&&i instanceof ca||r instanceof wc&&i instanceof wc?oa(r.elements,i.elements,pr):r instanceof Rd&&i instanceof Rd?pr(r.Pe,i.Pe):r instanceof Ad&&i instanceof Ad}(t.transform,e.transform)}class u4{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function Mk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ov(t.key,Nn.none()):new Wc(t.key,t.data,Nn.none());{const n=t.data,r=rn.empty();let i=new ft(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new es(t.key,r,new vn(i.toArray()),Nn.none())}}function h4(t,e,n){t instanceof Wc?function(i,s,o){const a=i.value.clone(),l=Px(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof es?function(i,s,o){if(!Mh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Px(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Lk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function jl(t,e,n,r){return t instanceof Wc?function(s,o,a,l){if(!Mh(s.precondition,o))return a;const c=s.value.clone(),h=Ax(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(s,o,a,l){if(!Mh(s.precondition,o))return a;const c=Ax(s.fieldTransforms,l,o),h=o.data;return h.setAll(Lk(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Mh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function d4(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Rk(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function Cx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oa(r,i,(s,o)=>c4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wc extends If{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends If{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Lk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Px(t,e,n){const r=new Map;Te(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,a4(o,a,n[i]))}return r}function Ax(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,o4(s,o,e))}return r}class Ov extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f4 extends If{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&h4(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=jl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Pk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Mk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,r)=>Cx(n,r))&&oa(this.baseMutations,e.baseMutations,(n,r)=>Cx(n,r))}}class Mv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Te(e.mutations.length===r.length);let i=function(){return t4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Mv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ye;function y4(t){switch(t){default:return te();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function Vk(t){if(t===void 0)return Hr("GRPC error has no .code"),F.UNKNOWN;switch(t){case it.OK:return F.OK;case it.CANCELLED:return F.CANCELLED;case it.UNKNOWN:return F.UNKNOWN;case it.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case it.INTERNAL:return F.INTERNAL;case it.UNAVAILABLE:return F.UNAVAILABLE;case it.UNAUTHENTICATED:return F.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case it.NOT_FOUND:return F.NOT_FOUND;case it.ALREADY_EXISTS:return F.ALREADY_EXISTS;case it.PERMISSION_DENIED:return F.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case it.ABORTED:return F.ABORTED;case it.OUT_OF_RANGE:return F.OUT_OF_RANGE;case it.UNIMPLEMENTED:return F.UNIMPLEMENTED;case it.DATA_LOSS:return F.DATA_LOSS;default:return te()}}(ye=it||(it={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new Ds([4294967295,4294967295],0);function Rx(t){const e=v4().encode(t),n=new lk;return n.update(e),new Uint8Array(n.digest())}function Nx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ds([n,r],0),new Ds([i,s],0)]}class Lv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ds.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Ds.fromNumber(r)));return i.compare(_4)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Rx(e),[r,i]=Nx(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Lv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Rx(e),[r,i]=Nx(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Cf(se.min(),i,new qe(ge),qr(),de())}}class Hc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hc(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class jk{constructor(e,n){this.targetId=e,this.me=n}}class Fk{constructor(e,n,r=At.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Dx{constructor(){this.fe=0,this.ge=Ox(),this.pe=At.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Hc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ox()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class w4{constructor(e){this.Le=e,this.Be=new Map,this.ke=qr(),this.qe=Gu(),this.Qe=Gu(),this.Ke=new qe(ge)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Sm(s))if(r===0){const o=new J(s.path);this.We(n,o,Ft.newNoDocument(o,se.min()))}else Te(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Bi(r).toUint8Array()}catch(l){if(l instanceof yk)return sa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Lv(o,i,s)}catch(l){return sa(l instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Sm(a.target)){const l=new J(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Ft.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Cf(e,n,this.Ke,this.ke,r);return this.ke=qr(),this.qe=Gu(),this.Qe=Gu(),this.Ke=new qe(ge),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Dx,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new ft(ge),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ft(ge),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Dx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Gu(){return new qe(J.comparator)}function Ox(){return new qe(J.comparator)}const x4={asc:"ASCENDING",desc:"DESCENDING"},b4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E4={and:"AND",or:"OR"};class T4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(t,e){return t.useProto3Json||xf(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function S4(t,e){return Nd(t,e.toTimestamp())}function dr(t){return Te(!!t),se.fromTimestamp(function(n){const r=Ui(n);return new at(r.seconds,r.nanos)}(t))}function Vv(t,e){return Cm(t,e).canonicalString()}function Cm(t,e){const n=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bk(t){const e=Ve.fromString(t);return Te(qk(e)),e}function Pm(t,e){return Vv(t.databaseId,e.path)}function Hp(t,e){const n=Bk(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J($k(n))}function zk(t,e){return Vv(t.databaseId,e)}function k4(t){const e=Bk(t);return e.length===4?Ve.emptyPath():$k(e)}function Am(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $k(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Mx(t,e,n){return{name:Pm(t,e),fields:n.value.mapValue.fields}}function I4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Te(h===void 0||typeof h=="string"),At.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array),At.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:Vk(c.code);return new Q(h,c.message||"")}(o);n=new Fk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hp(t,r.document.name),s=dr(r.document.updateTime),o=r.document.createTime?dr(r.document.createTime):se.min(),a=new rn({mapValue:{fields:r.document.fields}}),l=Ft.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Lh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hp(t,r.document),s=r.readTime?dr(r.readTime):se.min(),o=Ft.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Lh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hp(t,r.document),s=r.removedTargetIds||[];n=new Lh([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new m4(i,s),a=r.targetId;n=new jk(a,o)}}return n}function C4(t,e){let n;if(e instanceof Wc)n={update:Mx(t,e.key,e.value)};else if(e instanceof Ov)n={delete:Pm(t,e.key)};else if(e instanceof es)n={update:Mx(t,e.key,e.data),updateMask:V4(e.fieldMask)};else{if(!(e instanceof f4))return te();n={verify:Pm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ad)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ca)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:S4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function P4(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?dr(i.updateTime):dr(s);return o.isEqual(se.min())&&(o=dr(s)),new u4(o,i.transformResults||[])}(n,e))):[]}function A4(t,e){return{documents:[zk(t,e.path)]}}function R4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zk(t,i);const s=function(c){if(c.length!==0)return Hk(gr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:To(f.field),direction:O4(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Im(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function N4(t){let e=k4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Te(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=Wk(d);return f instanceof gr&&xk(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Pd(So(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,xf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Cd(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Cd(p,f)}(n.endAt)),YL(e,i,o,s,a,"F",l,c)}function D4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=So(n.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=So(n.unaryFilter.field);return ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=So(n.unaryFilter.field);return ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=So(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return ut.create(So(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(r=>Wk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function O4(t){return x4[t]}function M4(t){return b4[t]}function L4(t){return E4[t]}function To(t){return{fieldPath:t.canonicalString()}}function So(t){return kt.fromServerFormat(t.fieldPath)}function Hk(t){return t instanceof ut?function(n){if(n.op==="=="){if(bx(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NAN"}};if(xx(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bx(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NAN"}};if(xx(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(n.field),op:M4(n.op),value:n.value}}}(t):t instanceof gr?function(n){const r=n.getFilters().map(i=>Hk(i));return r.length===1?r[0]:{compositeFilter:{op:L4(n.op),filters:r}}}(t):te()}function V4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,r,i,s=se.min(),o=se.min(),a=At.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.ht=e}}function F4(t){const e=N4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.ln=new B4}addToCollectionParentIndex(e,n){return this.ln.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Fi.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class B4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ft(Ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tn{static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ua(0)}static Qn(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx([t,e],[n,r]){const i=ge(t,n);return i===0?ge(e,r):i}class z4{constructor(e){this.Gn=e,this.buffer=new ft(Vx),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Vx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ta(n)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Yn(3e5)})}}class W4{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return j.resolve(wf.oe);const r=new z4(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Lx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lx):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),bo()<=he.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function H4(t,e){return new W4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&jl(r.mutation,i,vn.empty(),at.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qr();const o=Vl(),a=function(){return Vl()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof es)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),jl(h.mutation,c,h.mutation.getFieldMask(),at.now())):o.set(c.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new K4(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Vl();let i=new qe((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||vn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=Pk();h.forEach(f=>{if(!s.has(f)){const p=Mk(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Cs());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,de())).next(h=>({batchId:a,changes:Ck(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gl();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,f){return new Ef(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ft.newInvalidDocument(h)))});let a=gl();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&jl(h.mutation,c,vn.empty(),at.now()),Sf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return j.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:F4(i.bundledQuery),readTime:dr(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.overlays=new qe(J.comparator),this.Er=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Cs();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Cs(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Cs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Cs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new g4(n,r));let s=this.Er.get(n);s===void 0&&(s=de(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.dr=new ft(vt.Ar),this.Rr=new ft(vt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new vt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new J(new Ve([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new J(new Ve([])),r=new vt(n,e),i=new vt(n,e+1);let s=de();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return J.comparator(e.key,n.key)||ge(e.br,n.br)}static Vr(e,n){return ge(e.br,n.br)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new ft(vt.Ar)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p4(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ft(ge);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),j.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new vt(new J(s),0);let a=new ft(ge);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),j.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Te(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return j.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new vt(n,0),i=this.vr.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.Nr=e,this.docs=function(){return new qe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ft.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qr();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CL(IL(h),r)<=0||(i.has(h.key)||Sf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Lr(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new eV(this)}getSize(e){return j.resolve(this.size)}}class eV extends q4{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.persistence=e,this.Br=new no(n=>Av(n),Rv),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.kr=0,this.qr=new jv,this.targetCount=0,this.Qr=ua.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),j.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new ua(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Un(n),j.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.Kr={},this.overlays={},this.$r=new wf(0),this.Ur=!1,this.Ur=!0,this.Wr=new X4,this.referenceDelegate=e(this),this.Gr=new tV(this),this.indexManager=new U4,this.remoteDocumentCache=function(i){return new Z4(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new j4(n),this.jr=new Y4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new J4(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new nV(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return j.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class nV extends AL{constructor(e){super(),this.currentSequenceNumber=e}}class Fv{constructor(e){this.persistence=e,this.Zr=new jv,this.Xr=null}static ei(e){return new Fv(e)}get ti(){if(this.Xr)return this.Xr;throw te()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),j.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ti,r=>{const i=J.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return j.or([()=>j.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Dd{constructor(e,n){this.persistence=e,this.ri=new no(r=>DL(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=H4(this,n)}static ei(e,n){return new Dd(e,n)}Hr(){}Jr(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return j.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?j.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dh(e.data.value)),n}ir(e,n,r){return j.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Uv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return $N()?8:RL(zt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new rV;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(bo()<=he.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Eo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),j.resolve()):(bo()<=he.DEBUG&&q("QueryEngine","Query:",Eo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(bo()<=he.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Eo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):j.resolve())}Xi(e,n){if(kx(n))return j.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=km(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,km(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return kx(n)||i.isEqual(se.min())?j.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?j.resolve(null):(bo()<=he.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eo(n)),this.os(e,o,n,kL(i,-1)).next(a=>a))})}rs(e,n){let r=new ft(kk(e));return n.forEach((i,s)=>{Sf(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return bo()<=he.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Eo(n)),this.Zi.getDocumentsMatchingQuery(e,n,Fi.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new qe(ge),this.cs=new no(s=>Av(s),Rv),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G4(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function oV(t,e,n,r){return new sV(t,e,n,r)}async function Gk(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function aV(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,f=d.keys();let p=j.resolve();return f.forEach(y=>{p=p.next(()=>h.getEntry(l,y)).next(v=>{const b=c.docVersions.get(y);Te(b!==null),v.version.compareTo(b)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),h.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yk(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function lV(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Gr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Gr.addMatchingKeys(s,h.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(At.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),i=i.insert(d,p),function(v,b,_){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,p,h)&&a.push(n.Gr.updateTargetData(s,p))});let l=qr(),c=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cV(s,o,e.documentUpdates).next(h=>{l=h.Is,c=h.Es})),!r.isEqual(se.min())){const h=n.Gr.getLastRemoteSnapshotVersion(s).next(d=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function cV(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function uV(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hV(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Rm(t,e,n){const r=oe(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ta(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function jx(t,e,n){const r=oe(t);let i=se.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=oe(l),f=d.cs.get(h);return f!==void 0?j.resolve(d.us.get(f)):d.Gr.getTargetData(c,h)}(r,o,hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:de())).next(a=>(dV(r,JL(e),a),{documents:a,ds:s})))}function dV(t,e,n){let r=t.ls.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class Fx{constructor(){this.activeTargetIds=i4()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fV{constructor(){this._o=new Fx,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Fx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function qp(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class yV extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=qp(),l=this.No(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw sa("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=gV[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=qp();return new Promise((o,a)=>{const l=new ck;l.setWithCredentials(!0),l.listenOnce(uk.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nh.NO_ERROR:const h=l.getResponseJson();q(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Nh.TIMEOUT:q(Mt,`RPC '${e}' ${s} timed out`),a(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const d=l.getStatus();if(q(Mt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(p.status);a(new Q(y,p.message))}else a(new Q(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Q(F.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{q(Mt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(Mt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=qp(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fk(),a=dk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");q(Mt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,p=!1;const y=new mV({Eo:b=>{p?q(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(q(Mt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),q(Mt,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Ao:()=>d.close()}),v=(b,_,w)=>{b.listen(_,E=>{try{w(E)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,pl.EventType.OPEN,()=>{p||(q(Mt,`RPC '${e}' stream ${i} transport opened.`),y.So())}),v(d,pl.EventType.CLOSE,()=>{p||(p=!0,q(Mt,`RPC '${e}' stream ${i} transport closed`),y.Do())}),v(d,pl.EventType.ERROR,b=>{p||(p=!0,sa(Mt,`RPC '${e}' stream ${i} transport errored:`,b),y.Do(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),v(d,pl.EventType.MESSAGE,b=>{var _;if(!p){const w=b.data[0];Te(!!w);const E=w,I=(E==null?void 0:E.error)||((_=E[0])===null||_===void 0?void 0:_.error);if(I){q(Mt,`RPC '${e}' stream ${i} received error:`,I);const N=I.status;let O=function(k){const P=it[k];if(P!==void 0)return Vk(P)}(N),S=I.message;O===void 0&&(O=F.INTERNAL,S="Unknown error status: "+N+" with message "+I.message),p=!0,y.Do(new Q(O,S)),d.close()}else q(Mt,`RPC '${e}' stream ${i} received:`,w),y.vo(w)}}),v(a,hk.STAT_EVENT,b=>{b.stat===xm.PROXY?q(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===xm.NOPROXY&&q(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.bo()},0),y}}function Kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t){return new T4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Qk(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Hr(n.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vV extends Xk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=I4(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?dr(o.readTime):se.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Am(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Sm(l)?{documents:A4(s,l)}:{query:R4(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Uk(s,o.resumeToken);const c=Im(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=Nd(s,o.snapshotVersion.toTimestamp());const c=Im(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=D4(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Am(this.serializer),n.removeTarget=e,this.c_(n)}}class _V extends Xk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=P4(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Am(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>C4(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Cm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Cm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class xV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Hr(n),this.C_=!1):q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{ro(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=oe(l);c.k_.add(4),await qc(c),c.K_.set("Unknown"),c.k_.delete(4),await Af(c)}(this))})}),this.K_=new xV(r,i)}}async function Af(t){if(ro(t))for(const e of t.q_)await e(!0)}async function qc(t){for(const e of t.q_)await e(!1)}function Jk(t,e){const n=oe(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Wv(n)?$v(n):Sa(n).s_()&&zv(n,e))}function Bv(t,e){const n=oe(t),r=Sa(n);n.B_.delete(e),r.s_()&&Zk(n,e),n.B_.size===0&&(r.s_()?r.a_():ro(n)&&n.K_.set("Unknown"))}function zv(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sa(t).V_(e)}function Zk(t,e){t.U_.xe(e),Sa(t).m_(e)}function $v(t){t.U_=new w4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Sa(t).start(),t.K_.F_()}function Wv(t){return ro(t)&&!Sa(t).i_()&&t.B_.size>0}function ro(t){return oe(t).k_.size===0}function eI(t){t.U_=void 0}async function EV(t){t.K_.set("Online")}async function TV(t){t.B_.forEach((e,n)=>{zv(t,e)})}async function SV(t,e){eI(t),Wv(t)?(t.K_.O_(e),$v(t)):t.K_.set("Unknown")}async function kV(t,e,n){if(t.K_.set("Online"),e instanceof Fk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Od(t,r)}else if(e instanceof Lh?t.U_.$e(e):e instanceof jk?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(se.min()))try{const r=await Yk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.B_.get(c);h&&s.B_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.B_.get(l);if(!h)return;s.B_.set(l,h.withResumeToken(At.EMPTY_BYTE_STRING,h.snapshotVersion)),Zk(s,l);const d=new vi(h.target,l,c,h.sequenceNumber);zv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Od(t,r)}}async function Od(t,e,n){if(!Ta(e))throw e;t.k_.add(1),await qc(t),t.K_.set("Offline"),n||(n=()=>Yk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Af(t)})}function tI(t,e){return e().catch(n=>Od(t,n,e))}async function Rf(t){const e=oe(t),n=$i(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;IV(e);)try{const i=await uV(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,CV(e,i)}catch(i){await Od(e,i)}nI(e)&&rI(e)}function IV(t){return ro(t)&&t.L_.length<10}function CV(t,e){t.L_.push(e);const n=$i(t);n.s_()&&n.f_&&n.g_(e.mutations)}function nI(t){return ro(t)&&!$i(t).i_()&&t.L_.length>0}function rI(t){$i(t).start()}async function PV(t){$i(t).w_()}async function AV(t){const e=$i(t);for(const n of t.L_)e.g_(n.mutations)}async function RV(t,e,n){const r=t.L_.shift(),i=Mv.from(r,e,n);await tI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rf(t)}async function NV(t,e){e&&$i(t).f_&&await async function(r,i){if(function(o){return y4(o)&&o!==F.ABORTED}(i.code)){const s=r.L_.shift();$i(r).__(),await tI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Rf(r)}}(t,e),nI(t)&&rI(t)}async function Bx(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ro(n);n.k_.add(3),await qc(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Af(n)}async function DV(t,e){const n=oe(t);e?(n.k_.delete(2),await Af(n)):e||(n.k_.add(2),await qc(n),n.K_.set("Unknown"))}function Sa(t){return t.W_||(t.W_=function(n,r,i){const s=oe(n);return s.b_(),new vV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:EV.bind(null,t),mo:TV.bind(null,t),po:SV.bind(null,t),R_:kV.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Wv(t)?$v(t):t.K_.set("Unknown")):(await t.W_.stop(),eI(t))})),t.W_}function $i(t){return t.G_||(t.G_=function(n,r,i){const s=oe(n);return s.b_(),new _V(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:PV.bind(null,t),po:NV.bind(null,t),p_:AV.bind(null,t),y_:RV.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Rf(t)):(await t.G_.stop(),t.L_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Hv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qv(t,e){if(Hr("AsyncQueue",`${e}: ${t}`),Ta(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=gl(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.z_=new qe(J.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):te():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ha{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ha(e,n,Qo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class MV{constructor(){this.queries=$x(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=$x(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function $x(){return new no(t=>Sk(t),Tf)}async function iI(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new OV,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=qv(o,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&Kv(n)}async function sI(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LV(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&Kv(n)}function VV(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function Kv(t){t.X_.forEach(e=>{e.next()})}var Nm,Wx;(Wx=Nm||(Nm={})).na="default",Wx.Cache="cache";class oI{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.key=e}}class lI{constructor(e){this.key=e}}class jV{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=de(),this.mutatedKeys=de(),this.Va=kk(e),this.ma=new Qo(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new zx,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),p=Sf(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;f&&p?f.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),b=!0):this.ya(f,p)||(r.track({type:2,doc:p}),b=!0,(l&&this.Va(p,l)>0||c&&this.Va(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),b=!0):f&&!p&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(p?(o=o.add(p),s=v?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,d)=>function(p,y){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return v(p)-v(y)}(h.type,d.type)||this.Va(h.doc,d.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new ha(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new zx,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=de(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new lI(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new aI(r))}),n}va(e){this.da=e.ds,this.Ra=de();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return ha.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class FV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UV{constructor(e){this.key=e,this.Fa=!1}}class BV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new no(a=>Sk(a),Tf),this.Oa=new Map,this.Na=new Set,this.La=new qe(J.comparator),this.Ba=new Map,this.ka=new jv,this.qa={},this.Qa=new Map,this.Ka=ua.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function zV(t,e,n=!0){const r=pI(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await cI(r,e,n,!0),i}async function $V(t,e){const n=pI(t);await cI(n,e,!0,!1)}async function cI(t,e,n,r){const i=await hV(t.localStore,hr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await WV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Jk(t.remoteStore,i),a}async function WV(t,e,n,r,i){t.Ua=(d,f,p)=>async function(v,b,_,w){let E=b.view.ga(_);E.ss&&(E=await jx(v.localStore,b.query,!1).then(({documents:S})=>b.view.ga(S,E)));const I=w&&w.targetChanges.get(b.targetId),N=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(E,v.isPrimaryClient,I,N);return qx(v,b.targetId,O.ba),O.snapshot}(t,d,f,p);const s=await jx(t.localStore,e,!0),o=new jV(e,s.ds),a=o.ga(s.documents),l=Hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);qx(t,n,c.ba);const h=new FV(e,n,o);return t.xa.set(e,h),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function HV(t,e,n){const r=oe(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Tf(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bv(r.remoteStore,i.targetId),Dm(r,i.targetId)}).catch(Ea)):(Dm(r,i.targetId),await Rm(r.localStore,i.targetId,!0))}async function qV(t,e){const n=oe(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bv(n.remoteStore,r.targetId))}async function KV(t,e,n){const r=ej(t);try{const i=await function(o,a){const l=oe(o),c=at.now(),h=a.reduce((p,y)=>p.add(y.key),de());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=qr(),v=de();return l.hs.getEntries(p,h).next(b=>{y=b,y.forEach((_,w)=>{w.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(b=>{d=b;const _=[];for(const w of a){const E=d4(w,d.get(w.key).overlayedDocument);E!=null&&_.push(new es(w.key,E,vk(E.value.mapValue),Nn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,_,a)}).next(b=>{f=b;const _=b.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(p,b.batchId,_)})}).then(()=>({batchId:f.batchId,changes:Ck(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new qe(ge)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Kc(r,i.changes),await Rf(r.remoteStore)}catch(i){const s=qv(i,"Failed to persist write");n.reject(s)}}async function uI(t,e){const n=oe(t);try{const r=await lV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Te(o.Fa):i.removedDocuments.size>0&&(Te(o.Fa),o.Fa=!1))}),await Kc(n,r,e)}catch(r){await Ea(r)}}function Hx(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.J_)f.ea(a)&&(c=!0)}),c&&Kv(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GV(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new qe(J.comparator);o=o.insert(s,Ft.newNoDocument(s,se.min()));const a=de().add(s),l=new Cf(se.min(),new Map,new qe(ge),o,a);await uI(r,l),r.La=r.La.remove(s),r.Ba.delete(e),Gv(r)}else await Rm(r.localStore,e,!1).then(()=>Dm(r,e,n)).catch(Ea)}async function YV(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await aV(n.localStore,e);dI(n,r,null),hI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Kc(n,i)}catch(i){await Ea(i)}}async function QV(t,e,n){const r=oe(t);try{const i=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Te(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);dI(r,e,n),hI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Kc(r,i)}catch(i){await Ea(i)}}function hI(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function dI(t,e,n){const r=oe(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Dm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||fI(t,r)})}function fI(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(Bv(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),Gv(t))}function qx(t,e,n){for(const r of n)r instanceof aI?(t.ka.addReference(r.key,e),XV(t,r)):r instanceof lI?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||fI(t,r.key)):te()}function XV(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Na.add(r),Gv(t))}function Gv(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new J(Ve.fromString(e)),r=t.Ka.next();t.Ba.set(r,new UV(n)),t.La=t.La.insert(n,r),Jk(t.remoteStore,new vi(hr(Nv(n.path)),r,"TargetPurposeLimboResolution",wf.oe))}}async function Kc(t,e,n){const r=oe(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Uv.zi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const h=oe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,f=>j.forEach(f.Wi,p=>h.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>j.forEach(f.Gi,p=>h.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Ta(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=h.us.get(f),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);h.us=h.us.insert(f,v)}}}(r.localStore,s))}async function JV(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await Gk(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Q(F.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kc(n,r.Ts)}}function ZV(t,e){const n=oe(t),r=n.Ba.get(e);if(r&&r.Fa)return de().add(r.key);{let i=de();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function pI(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GV.bind(null,e),e.Ma.R_=LV.bind(null,e.eventManager),e.Ma.Wa=VV.bind(null,e.eventManager),e}function ej(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QV.bind(null,e),e}class Md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return oV(this.persistence,new iV,e.initialUser,this.serializer)}ja(e){return new Kk(Fv.ei,this.serializer)}za(e){return new fV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Md.provider={build:()=>new Md};class tj extends Md{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Te(this.persistence.referenceDelegate instanceof Dd);const r=this.persistence.referenceDelegate.garbageCollector;return new $4(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Kk(r=>Dd.ei(r,n),this.serializer)}}class Om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JV.bind(null,this.syncEngine),await DV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MV}()}createDatastore(e){const n=Pf(e.databaseInfo.databaseId),r=function(s){return new yV(s)}(e.databaseInfo);return function(s,o,a,l){return new wV(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new bV(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Hx(this.syncEngine,n,0),function(){return Ux.p()?new Ux:new pV}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new BV(i,s,o,a,l,c);return h&&(d.$a=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await qc(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Om.provider={build:()=>new Om};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Vt.UNAUTHENTICATED,this.clientId=gk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rj(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Bx(e.remoteStore,i)),t._onlineComponents=e}async function rj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;sa("Error using user provided cache. Falling back to memory cache: "+n),await Gp(t,new Md)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Gp(t,new tj(void 0));return t._offlineComponents}async function mI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Kx(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Kx(t,new Om))),t._onlineComponents}function ij(t){return mI(t).then(e=>e.syncEngine)}async function yI(t){const e=await mI(t),n=e.eventManager;return n.onListen=zV.bind(null,e.syncEngine),n.onUnlisten=HV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$V.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qV.bind(null,e.syncEngine),n}function sj(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new gI({next:f=>{h.eu(),o.enqueueAndForget(()=>sI(s,d));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new oI(Nv(a.path),h,{includeMetadataChanges:!0,ua:!0});return iI(s,d)}(await yI(t),t.asyncQueue,e,n,r)),r.promise}function oj(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new gI({next:f=>{h.eu(),o.enqueueAndForget(()=>sI(s,d)),f.fromCache&&l.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new oI(a,h,{includeMetadataChanges:!0,ua:!0});return iI(s,d)}(await yI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aj(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yx(t){if(!J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qx(t){if(J.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yv(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yL;switch(r.type){case"firstParty":return new xL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gx.get(n);r&&(q("ComponentProvider","Removing Datastore"),Gx.delete(n),r.terminate())}(this),Promise.resolve()}}function lj(t,e,n,r={}){var i;const s=(t=Kn(t,Nf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Vt.MOCK_USER;else{a=xS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Vt(c)}t._authCredentials=new vL(new pk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Df(this.firestore,e,this._query)}}class un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class Oi extends Df{constructor(e,n,r){super(e,n,Nv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new J(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function Gn(t,e,...n){if(t=pt(t),_I("collection","path",e),t instanceof Nf){const r=Ve.fromString(e,...n);return Qx(r),new Oi(t,null,r)}{if(!(t instanceof un||t instanceof Oi))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Qx(r),new Oi(t.firestore,null,r)}}function Yt(t,e,...n){if(t=pt(t),arguments.length===1&&(e=gk.newId()),_I("doc","path",e),t instanceof Nf){const r=Ve.fromString(e,...n);return Yx(r),new un(t,null,new J(r))}{if(!(t instanceof un||t instanceof Oi))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Yx(r),new un(t.firestore,t instanceof Oi?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Qk(this,"async_queue_retry"),this.fu=()=>{const r=Kp();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Kp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Kp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new jr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ta(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=Hv.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class io extends Nf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Jx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jx(e),this._firestoreClient=void 0,await e}}}function Qv(t,e){const n=typeof t=="object"?t:yv(),r=typeof t=="string"?t:"(default)",i=mf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=vS("firestore");s&&lj(i,...s)}return i}function Xv(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cj(t),t._firestoreClient}function cj(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new LL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new nj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(At.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new da(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=/^__.*__$/;class hj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wc(e,this.data,n,this.fieldTransforms)}}class wI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new es(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class Lf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Lf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ld(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(xI(this.Mu)&&uj.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class dj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pf(e)}$u(e,n,r,i=!1){return new Lf({Mu:e,methodName:n,Ku:r,path:kt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e_(t){const e=t._freezeSettings(),n=Pf(t._databaseId);return new dj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bI(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);n_("Data must be an object, but it was:",o,r);const a=EI(r,o);let l,c;if(s.merge)l=new vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Mm(e,d,n);if(!o.contains(f))throw new Q(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);SI(h,f)||h.push(f)}l=new vn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new hj(new rn(a),l,c)}class Vf extends Mf{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vf}}function fj(t,e,n){return new Lf({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class t_ extends Mf{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=fj(this,e,!0),r=this.Uu.map(s=>Gc(s,n)),i=new ca(r);return new l4(e.path,i)}isEqual(e){return e instanceof t_&&dc(this.Uu,e.Uu)}}function pj(t,e,n,r){const i=t.$u(1,e,n);n_("Data must be an object, but it was:",i,r);const s=[],o=rn.empty();Zi(r,(l,c)=>{const h=r_(e,l,n);c=pt(c);const d=i.Bu(h);if(c instanceof Vf)s.push(h);else{const f=Gc(c,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new vn(s);return new wI(o,a,i.fieldTransforms)}function gj(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[Mm(e,r,n)],l=[i];if(s.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Mm(e,s[f])),l.push(s[f+1]);const c=[],h=rn.empty();for(let f=a.length-1;f>=0;--f)if(!SI(c,a[f])){const p=a[f];let y=l[f];y=pt(y);const v=o.Bu(p);if(y instanceof Vf)c.push(p);else{const b=Gc(y,v);b!=null&&(c.push(p),h.set(p,b))}}const d=new vn(c);return new wI(h,d,o.fieldTransforms)}function Gc(t,e){if(TI(t=pt(t)))return n_("Unsupported field value:",e,t),EI(t,e);if(t instanceof Mf)return function(r,i){if(!xI(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Gc(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=at.fromDate(r);return{timestampValue:Nd(i.serializer,s)}}if(r instanceof at){const s=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(i.serializer,s)}}if(r instanceof Jv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:Uk(i.serializer,r._byteString)};if(r instanceof un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return Dv(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Yv(r)}`)}(t,e)}function EI(t,e){const n={};return mk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,i)=>{const s=Gc(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof at||t instanceof Jv||t instanceof da||t instanceof un||t instanceof Mf||t instanceof Zv)}function n_(t,e,n){if(!TI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Yv(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function Mm(t,e,n){if((e=pt(e))instanceof Of)return e._internalPath;if(typeof e=="string")return r_(t,e);throw Ld("Field path arguments must be of type string or ",t,!1,void 0,n)}const mj=new RegExp("[~\\*/\\[\\]]");function r_(t,e,n){if(e.search(mj)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Of(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ld(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q(F.INVALID_ARGUMENT,a+t+l)}function SI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(II("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yj extends kI{data(){return super.data()}}function II(t,e){return typeof e=="string"?r_(t,e):e instanceof Of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _j{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>et(o.doubleValue));return new Zv(s)}convertGeoPoint(e){return new Jv(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){const n=Ui(e);return new at(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Te(qk(r));const i=new vc(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||Hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PI extends kI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(II("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Vh extends PI{data(e={}){return super.data(e)}}class wj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vh(this._firestore,this._userDataWriter,r.key,r,new yl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Vh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Vh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:xj(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){t=Kn(t,un);const e=Kn(t.firestore,io);return sj(Xv(e),t._key).then(n=>bj(e,t,n))}class AI extends _j{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,n)}}function Gs(t){t=Kn(t,Df);const e=Kn(t.firestore,io),n=Xv(e),r=new AI(e);return vj(t._query),oj(n,t._query).then(i=>new wj(e,r,t,i))}function RI(t,e,n){t=Kn(t,un);const r=Kn(t.firestore,io),i=CI(t.converter,e);return Ff(r,[bI(e_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nn.none())])}function Vd(t,e,n,...r){t=Kn(t,un);const i=Kn(t.firestore,io),s=e_(i);let o;return o=typeof(e=pt(e))=="string"||e instanceof Of?gj(s,"updateDoc",t._key,e,n,r):pj(s,"updateDoc",t._key,e),Ff(i,[o.toMutation(t._key,Nn.exists(!0))])}function Yc(t){return Ff(Kn(t.firestore,io),[new Ov(t._key,Nn.none())])}function jf(t,e){const n=Kn(t.firestore,io),r=Yt(t),i=CI(t.converter,e);return Ff(n,[bI(e_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Nn.exists(!1))]).then(()=>r)}function Ff(t,e){return function(r,i){const s=new jr;return r.asyncQueue.enqueueAndForget(async()=>KV(await ij(r),i,s)),s.promise}(Xv(t),e)}function bj(t,e,n){const r=n.docs.get(e._key),i=new AI(t);return new PI(t,i,e._key,r,new yl(n.hasPendingWrites,n.fromCache),e.converter)}function Ej(...t){return new t_("arrayUnion",t)}(function(e,n=!0){(function(i){ba=i})(eo),Ws(new ji("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new io(new _L(r.getProvider("auth-internal")),new EL(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lr(gx,"4.7.5",e),lr(gx,"4.7.5","esm2017")})();function NI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=NI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function An(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=NI(t))&&(r&&(r+=" "),r+=e);return r}const xc=t=>typeof t=="number"&&!isNaN(t),Os=t=>typeof t=="string",_n=t=>typeof t=="function",jh=t=>Os(t)||_n(t)?t:null,Lm=t=>M.isValidElement(t)||Os(t)||_n(t)||xc(t);function Tj(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Uf(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:h,nodeRef:d,isIn:f,playToast:p}=o;const y=r?`${e}--${l}`:e,v=r?`${n}--${l}`:n,b=M.useRef(0);return M.useLayoutEffect(()=>{const _=d.current,w=y.split(" "),E=I=>{I.target===d.current&&(p(),_.removeEventListener("animationend",E),_.removeEventListener("animationcancel",E),b.current===0&&I.type!=="animationcancel"&&_.classList.remove(...w))};_.classList.add(...w),_.addEventListener("animationend",E),_.addEventListener("animationcancel",E)},[]),M.useEffect(()=>{const _=d.current,w=()=>{_.removeEventListener("animationend",w),i?Tj(_,h,s):h()};f||(c?w():(b.current=1,_.className+=` ${v}`,_.addEventListener("animationend",w)))},[f]),ce.createElement(ce.Fragment,null,a)}}function Zx(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Gt=new Map;let bc=[];const Vm=new Set,Sj=t=>Vm.forEach(e=>e(t)),DI=()=>Gt.size>0;function OI(t,e){var n;if(e)return!((n=Gt.get(e))==null||!n.isToastActive(t));let r=!1;return Gt.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function MI(t,e){Lm(t)&&(DI()||bc.push({content:t,options:e}),Gt.forEach(n=>{n.buildToast(t,e)}))}function eb(t,e){Gt.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function kj(t){const{subscribe:e,getSnapshot:n,setProps:r}=M.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(h,d,f){let p=1,y=0,v=[],b=[],_=[],w=d;const E=new Map,I=new Set,N=()=>{_=Array.from(E.values()),I.forEach(T=>T())},O=T=>{b=T==null?[]:b.filter(k=>k!==T),N()},S=T=>{const{toastId:k,onOpen:P,updateId:R,children:D}=T.props,A=R==null;T.staleId&&E.delete(T.staleId),E.set(k,T),b=[...b,T.props.toastId].filter(Z=>Z!==T.staleId),N(),f(Zx(T,A?"added":"updated")),A&&_n(P)&&P(M.isValidElement(D)&&D.props)};return{id:h,props:w,observe:T=>(I.add(T),()=>I.delete(T)),toggle:(T,k)=>{E.forEach(P=>{k!=null&&k!==P.props.toastId||_n(P.toggle)&&P.toggle(T)})},removeToast:O,toasts:E,clearQueue:()=>{y-=v.length,v=[]},buildToast:(T,k)=>{if((X=>{let{containerId:ne,toastId:me,updateId:be}=X;const Ee=ne?ne!==h:h!==1,Ze=E.has(me)&&be==null;return Ee||Ze})(k))return;const{toastId:P,updateId:R,data:D,staleId:A,delay:Z}=k,Y=()=>{O(P)},G=R==null;G&&y++;const re={...w,style:w.toastStyle,key:p++,...Object.fromEntries(Object.entries(k).filter(X=>{let[ne,me]=X;return me!=null})),toastId:P,updateId:R,data:D,closeToast:Y,isIn:!1,className:jh(k.className||w.toastClassName),bodyClassName:jh(k.bodyClassName||w.bodyClassName),progressClassName:jh(k.progressClassName||w.progressClassName),autoClose:!k.isLoading&&(U=k.autoClose,W=w.autoClose,U===!1||xc(U)&&U>0?U:W),deleteToast(){const X=E.get(P),{onClose:ne,children:me}=X.props;_n(ne)&&ne(M.isValidElement(me)&&me.props),f(Zx(X,"removed")),E.delete(P),y--,y<0&&(y=0),v.length>0?S(v.shift()):N()}};var U,W;re.closeButton=w.closeButton,k.closeButton===!1||Lm(k.closeButton)?re.closeButton=k.closeButton:k.closeButton===!0&&(re.closeButton=!Lm(w.closeButton)||w.closeButton);let H=T;M.isValidElement(T)&&!Os(T.type)?H=M.cloneElement(T,{closeToast:Y,toastProps:re,data:D}):_n(T)&&(H=T({closeToast:Y,toastProps:re,data:D}));const ie={content:H,props:re,staleId:A};w.limit&&w.limit>0&&y>w.limit&&G?v.push(ie):xc(Z)?setTimeout(()=>{S(ie)},Z):S(ie)},setProps(T){w=T},setToggle:(T,k)=>{E.get(T).toggle=k},isToastActive:T=>b.some(k=>k===T),getSnapshot:()=>_}}(o,s,Sj);Gt.set(o,l);const c=l.observe(a);return bc.forEach(h=>MI(h.content,h.options)),bc=[],()=>{c(),Gt.delete(o)}},setProps(a){var l;(l=Gt.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Gt.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=M.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:OI,count:i==null?void 0:i.length}}function Ij(t){const[e,n]=M.useState(!1),[r,i]=M.useState(!1),s=M.useRef(null),o=M.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:h,closeOnClick:d}=t;var f,p;function y(){n(!0)}function v(){n(!1)}function b(E){const I=s.current;o.canDrag&&I&&(o.didMove=!0,e&&v(),o.delta=t.draggableDirection==="x"?E.clientX-o.start:E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1),I.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,I.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function _(){document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",_);const E=s.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}(p=Gt.get((f={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||p.setToggle(f.id,f.fn),M.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||v(),window.addEventListener("focus",y),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",y),window.removeEventListener("blur",v)}},[t.pauseOnFocusLoss]);const w={onPointerDown:function(E){if(t.draggable===!0||t.draggable===E.pointerType){o.didMove=!1,document.addEventListener("pointermove",b),document.addEventListener("pointerup",_);const I=s.current;o.canCloseOnClick=!0,o.canDrag=!0,I.style.transition="none",t.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=I.offsetWidth*(t.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=I.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(E){const{top:I,bottom:N,left:O,right:S}=s.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&t.pauseOnHover&&E.clientX>=O&&E.clientX<=S&&E.clientY>=I&&E.clientY<=N?v():y()}};return a&&l&&(w.onMouseEnter=v,t.stacked||(w.onMouseLeave=y)),d&&(w.onClick=E=>{h&&h(E),o.canCloseOnClick&&c()}),{playToast:y,pauseToast:v,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:w}}function Cj(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:c,rtl:h,isIn:d,theme:f}=t;const p=s||l&&c===0,y={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(y.transform=`scaleX(${c})`);const v=An("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":h}),b=_n(o)?o({rtl:h,type:i,defaultClassName:v}):An(v,o),_={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return ce.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ce.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${i}`}),ce.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:b,style:y,..._}))}let Pj=1;const LI=()=>""+Pj++;function Aj(t){return t&&(Os(t.toastId)||xc(t.toastId))?t.toastId:LI()}function Fl(t,e){return MI(t,e),e.toastId}function jd(t,e){return{...e,type:e&&e.type||t,toastId:Aj(e)}}function Qu(t){return(e,n)=>Fl(e,jd(t,n))}function pe(t,e){return Fl(t,jd("default",e))}pe.loading=(t,e)=>Fl(t,jd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),pe.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Os(i)?pe.loading(i,n):pe.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(h,d,f)=>{if(d==null)return void pe.dismiss(r);const p={type:h,...a,...n,data:f},y=Os(d)?{render:d}:d;return r?pe.update(r,{...p,...y}):pe(y.render,{...p,...y}),f},c=_n(t)?t():t;return c.then(h=>l("success",o,h)).catch(h=>l("error",s,h)),c},pe.success=Qu("success"),pe.info=Qu("info"),pe.error=Qu("error"),pe.warning=Qu("warning"),pe.warn=pe.warning,pe.dark=(t,e)=>Fl(t,jd("default",{theme:"dark",...e})),pe.dismiss=function(t){(function(e){var n;if(DI()){if(e==null||Os(n=e)||xc(n))Gt.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Gt.get(e.containerId);r?r.removeToast(e.id):Gt.forEach(i=>{i.removeToast(e.id)})}}else bc=bc.filter(r=>e!=null&&r.options.toastId!==e)})(t)},pe.clearWaitingQueue=function(t){t===void 0&&(t={}),Gt.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},pe.isActive=OI,pe.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=Gt.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:LI()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Fl(o,s)}},pe.done=t=>{pe.update(t,{progress:1})},pe.onChange=function(t){return Vm.add(t),()=>{Vm.delete(t)}},pe.play=t=>eb(!0,t),pe.pause=t=>eb(!1,t);const Rj=typeof window<"u"?M.useLayoutEffect:M.useEffect,Xu=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return ce.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},Yp={info:function(t){return ce.createElement(Xu,{...t},ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ce.createElement(Xu,{...t},ce.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ce.createElement(Xu,{...t},ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ce.createElement(Xu,{...t},ce.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ce.createElement("div",{className:"Toastify__spinner"})}},Nj=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=Ij(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:h,hideProgressBar:d,closeToast:f,transition:p,position:y,className:v,style:b,bodyClassName:_,bodyStyle:w,progressClassName:E,progressStyle:I,updateId:N,role:O,progress:S,rtl:T,toastId:k,deleteToast:P,isIn:R,isLoading:D,closeOnClick:A,theme:Z}=t,Y=An("Toastify__toast",`Toastify__toast-theme--${Z}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":A}),G=_n(v)?v({rtl:T,position:y,type:h,defaultClassName:Y}):An(Y,v),re=function(ie){let{theme:X,type:ne,isLoading:me,icon:be}=ie,Ee=null;const Ze={theme:X,type:ne};return be===!1||(_n(be)?Ee=be({...Ze,isLoading:me}):M.isValidElement(be)?Ee=M.cloneElement(be,Ze):me?Ee=Yp.spinner():(yr=>yr in Yp)(ne)&&(Ee=Yp[ne](Ze))),Ee}(t),U=!!S||!l,W={closeToast:f,type:h,theme:Z};let H=null;return o===!1||(H=_n(o)?o(W):M.isValidElement(o)?M.cloneElement(o,W):function(ie){let{closeToast:X,theme:ne,ariaLabel:me="close"}=ie;return ce.createElement("button",{className:`Toastify__close-button Toastify__close-button--${ne}`,type:"button",onClick:be=>{be.stopPropagation(),X(be)},"aria-label":me},ce.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ce.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(W)),ce.createElement(p,{isIn:R,done:P,position:y,preventExitTransition:n,nodeRef:r,playToast:s},ce.createElement("div",{id:k,onClick:c,"data-in":R,className:G,...i,style:b,ref:r},ce.createElement("div",{...R&&{role:O},className:_n(_)?_({type:h}):An("Toastify__toast-body",_),style:w},re!=null&&ce.createElement("div",{className:An("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!D})},re),ce.createElement("div",null,a)),H,ce.createElement(Cj,{...N&&!U?{key:`pb-${N}`}:{},rtl:T,theme:Z,delay:l,isRunning:e,isIn:R,closeToast:f,hide:d,type:h,style:I,className:E,controlledProgress:U,progress:S||0})))},Bf=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},Dj=Uf(Bf("bounce",!0));Uf(Bf("slide",!0));Uf(Bf("zoom"));Uf(Bf("flip"));const Oj={position:"top-right",transition:Dj,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function Mj(t){let e={...Oj,...t};const n=t.stacked,[r,i]=M.useState(!0),s=M.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=kj(e),{className:c,style:h,rtl:d,containerId:f}=e;function p(v){const b=An("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":d});return _n(c)?c({position:v,rtl:d,defaultClassName:b}):An(b,jh(c))}function y(){n&&(i(!0),pe.play())}return Rj(()=>{if(n){var v;const b=s.current.querySelectorAll('[data-in="true"]'),_=12,w=(v=e.position)==null?void 0:v.includes("top");let E=0,I=0;Array.from(b).reverse().forEach((N,O)=>{const S=N;S.classList.add("Toastify__toast--stacked"),O>0&&(S.dataset.collapsed=`${r}`),S.dataset.pos||(S.dataset.pos=w?"top":"bot");const T=E*(r?.2:1)+(r?0:_*O);S.style.setProperty("--y",`${w?T:-1*T}px`),S.style.setProperty("--g",`${_}`),S.style.setProperty("--s",""+(1-(r?I:0))),E+=S.offsetHeight,I+=.025})}},[r,l,n]),ce.createElement("div",{ref:s,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),pe.pause())},onMouseLeave:y},o((v,b)=>{const _=b.length?{...h}:{...h,pointerEvents:"none"};return ce.createElement("div",{className:p(v),style:_,key:`container-${v}`},b.map(w=>{let{content:E,props:I}=w;return ce.createElement(Nj,{...I,stacked:n,collapseAll:y,isIn:a(I.toastId,I.containerId),style:I.style,key:`toast-${I.key}`},E)}))}))}const VI=M.createContext(),Lj=({children:t})=>{const e=Ns(),n=Qv(),[r,i]=M.useState(null),[s,o]=M.useState(!0),a=Sn(),l=async y=>{try{const v=Yt(n,"users",y),b=await i_(v);b.exists()?i({uid:y,email:b.data().email,username:b.data().username}):console.error("No user data found!")}catch(v){console.error("Error fetching user data:",v),pe.error(v.message||"Failed to fetch user data.")}},c=async(y,v,b)=>{try{const _=await nM(e,y,v),{uid:w}=_.user,E=Yt(n,"users",w);await RI(E,{username:b,email:y,events:{}}),i({uid:w,email:y,username:b}),pe.success("User registered successfully!")}catch(_){console.error("Error registering user:",_),pe.error(_.message||"Failed to register user.")}},h=async(y,v)=>{try{const b=await rM(e,y,v),{uid:_}=b.user;await l(_),pe.success("Logged in successfully!")}catch(b){console.error("Error logging in:",b),pe.error(b.message||"Failed to log in.")}},d=async()=>{try{await e.signOut(),i(null),pe.success("Logged out successfully!"),a("/")}catch(y){console.error("Error logging out:",y),pe.error("Failed to log out.")}},f=async y=>{try{if(!r)throw new Error("User not authenticated!");const v=Gn(n,`users/${r.uid}/events`);await jf(v,y),pe.success("Event saved successfully!")}catch(v){console.error("Error saving event:",v),pe.error(v.message||"Failed to save event.")}},p=async()=>{try{if(!r)throw new Error("User not authenticated!");const y=Gn(n,`users/${r.uid}/events`);return(await Gs(y)).docs.map(_=>({id:_.id,..._.data()}))}catch(y){console.error("Error fetching user events:",y),pe.error(y.message||"Failed to fetch events.")}};return M.useEffect(()=>e.onAuthStateChanged(async v=>{v?await l(v.uid):i(null),o(!1)}),[]),m.jsx(VI.Provider,{value:{user:r,loading:s,register:c,login:h,logout:d,saveEvent:f,fetchUserEvents:p},children:t})},so=()=>M.useContext(VI);var jI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tb=ce.createContext&&ce.createContext(jI),Vj=["attr","size","title"];function jj(t,e){if(t==null)return{};var n=Fj(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fd(){return Fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fd.apply(this,arguments)}function nb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ud(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nb(Object(n),!0).forEach(function(r){Uj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uj(t,e,n){return e=Bj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bj(t){var e=zj(t,"string");return typeof e=="symbol"?e:e+""}function zj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FI(t){return t&&t.map((e,n)=>ce.createElement(e.tag,Ud({key:n},e.attr),FI(e.child)))}function Yr(t){return e=>ce.createElement($j,Fd({attr:Ud({},t.attr)},e),FI(t.child))}function $j(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=jj(t,Vj),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ce.createElement("svg",Fd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Ud(Ud({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ce.createElement("title",null,s),t.children)};return tb!==void 0?ce.createElement(tb.Consumer,null,n=>e(n)):e(jI)}function Wj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function Hj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(t)}function qj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function Kj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function rb(t){return Yr({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(t)}function Gj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(t)}function Yj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function jm(t){return Yr({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function Qj(t){return Yr({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const s_=({onClose:t})=>{const{login:e,register:n}=so(),[r,i]=M.useState(!0),[s,o]=M.useState({email:"",password:"",username:""}),a=c=>{o({...s,[c.target.name]:c.target.value})},l=async c=>{c.preventDefault();try{r?await e(s.email,s.password):await n(s.email,s.password,s.username),t()}catch(h){console.error(r?"Login error:":"Registration error:",h),alert(r?"Invalid login credentials":"Registration failed")}};return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96",children:[m.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:r?"Login":"Register"}),m.jsxs("form",{onSubmit:l,className:"space-y-4",children:[!r&&m.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[m.jsx(jm,{className:"mr-2 text-gray-500"}),m.jsx("input",{type:"text",name:"username",placeholder:"Username",value:s.username,onChange:a,className:"text-gray-600 w-full focus:outline-none",required:!r})]}),m.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[m.jsx(qj,{className:"mr-2 text-gray-800"}),m.jsx("input",{type:"email",name:"email",placeholder:"Email",value:s.email,onChange:a,className:"text-gray-600 w-full focus:outline-none",required:!0})]}),m.jsxs("div",{className:"flex items-center border rounded px-3 py-2",children:[m.jsx(Kj,{className:"mr-2 text-gray-500"}),m.jsx("input",{type:"password",name:"password",placeholder:"Password",value:s.password,onChange:a,className:"text-gray-600 w-full focus:outline-none",required:!0})]}),m.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:r?"Login":"Register"})]}),m.jsx("div",{className:"text-center mt-4",children:m.jsx("button",{className:"text-sm text-blue-500 hover:underline",onClick:()=>i(!r),children:r?"Don't have an account? Register":"Already have an account? Login"})}),m.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:t,children:"×"})]})})};function Xj(){const[t,e]=M.useState(!1),[n,r]=M.useState(!1),[i,s]=M.useState(!1),[o,a]=M.useState(""),{user:l,logout:c,loading:h}=so(),d=()=>e(!t),f=()=>r(!n),p=()=>{e(!1),r(!1)},y=b=>{a(b),s(!0)},v=()=>s(!1);return h?m.jsx("div",{children:"Loading..."}):m.jsxs("nav",{className:"sticky top-0 z-50 bg-gray-800 text-white shadow-md w-full",children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[m.jsx(lt,{to:"/",className:"text-2xl font-bold hover:text-gray-300",onClick:p,children:"EventPlanner"}),m.jsx("div",{className:"text-2xl cursor-pointer lg:hidden",onClick:d,children:t?m.jsx(Yj,{}):m.jsx(Wj,{})}),m.jsxs("ul",{className:"hidden lg:flex lg:items-center lg:space-x-6",children:[m.jsx("li",{children:m.jsx(lt,{to:"/",className:"hover:text-gray-300",onClick:p,children:"Home"})}),m.jsx("li",{children:m.jsx(lt,{to:"/event",className:"hover:text-gray-300",onClick:p,children:"Search Events"})}),m.jsxs("li",{className:"relative",children:[m.jsx("button",{onClick:f,className:" bg-gray-600 hover:text-gray-300 flex items-center focus:outline-none",children:"Manage"}),n&&m.jsxs("ul",{className:"absolute left-0 mt-2 bg-gray-700 text-white rounded shadow-lg py-2",children:[m.jsx("li",{children:m.jsx(lt,{to:"/manage-events",className:"block px-4 py-2 hover:bg-gray-600",onClick:p,children:"Manage Events"})}),m.jsx("li",{children:m.jsx(lt,{to:"/create-event",className:"block px-4 py-2 hover:bg-gray-600",onClick:p,children:"Create Events"})}),m.jsx("li",{children:m.jsx(lt,{to:"/my-events",className:"block px-4 py-2 hover:bg-gray-600",onClick:p,children:"My Events"})})]})]}),m.jsx("li",{children:m.jsx(lt,{to:"/favorites",className:"hover:text-gray-300",onClick:p,children:"Favorites"})}),m.jsx("li",{children:m.jsx(lt,{to:"/calendar",className:"hover:text-gray-300",onClick:p,children:"Calendar"})})]}),m.jsx("div",{className:"hidden lg:flex items-center space-x-4",children:l?m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"text-gray-300",children:["Welcome, ",l.username||"Guest","!"]}),m.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded",children:"Logout"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>y("login"),className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:[m.jsx(rb,{}),m.jsx("span",{children:"Login"})]}),m.jsxs("button",{onClick:()=>y("register"),className:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:[m.jsx(jm,{}),m.jsx("span",{children:"Register"})]})]})})]}),t&&m.jsxs("div",{className:"lg:hidden bg-gray-700 py-4 space-y-4 text-sm",children:[m.jsxs("ul",{className:"flex flex-wrap space-y-2",children:[m.jsx("li",{children:m.jsx(lt,{to:"/",className:"block px-4 py-2 hover:text-gray-300",onClick:p,children:"Home"})}),m.jsx("li",{children:m.jsx(lt,{to:"/event",className:"block px-4 py-2 hover:text-gray-300",onClick:p,children:"Search"})}),m.jsxs("li",{children:[m.jsx("button",{onClick:f,className:"bg-gray-600 block px-4 py-2 hover:text-gray-300",children:"Manage"}),n&&m.jsxs("ul",{className:" flex flex-wrappl-4 space-y-2",children:[m.jsx("li",{children:m.jsx(lt,{to:"/manage-events",className:"block px-4 py-2 hover:bg-gray-600",onClick:p,children:"Manage Events"})}),m.jsx("li",{children:m.jsx(lt,{to:"/create-event",className:"block px-4 py-2 hover:bg-gray-600",onClick:p,children:"Create Events"})}),m.jsx("li",{children:m.jsx(lt,{to:"/my-events",className:"block px-4 py-2 hover:bg-gray-600",onClick:p,children:"My Events"})})]})]}),m.jsx("li",{children:m.jsx(lt,{to:"/favorites",className:"block px-4 py-2 hover:text-gray-300",onClick:p,children:"Favorites"})}),m.jsx("li",{children:m.jsx(lt,{to:"/calendar",className:"block px-4 py-2 hover:text-gray-300",onClick:p,children:"Calendar"})})]}),!l&&m.jsxs("div",{className:"flex space-x-4 px-4",children:[m.jsxs("button",{onClick:()=>y("login"),className:"flex items-center space-x-2 bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded",children:[m.jsx(rb,{}),m.jsx("span",{children:"Login"})]}),m.jsxs("button",{onClick:()=>y("register"),className:"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",children:[m.jsx(jm,{}),m.jsx("span",{children:"Register"})]})]})]}),i&&m.jsx(s_,{mode:o,onClose:v})]})}function Jj(){const[t,e]=M.useState(!1),n=Sn(),r=()=>{e(!0)},i=()=>{n("/event")};return m.jsxs("div",{className:"bg-primary min-h-screen flex flex-col items-center justify-center text-center px-4 relative overflow-hidden",children:[t&&m.jsx(s_,{onClose:()=>e(!1)}),m.jsxs("div",{className:"hero-section animate-fadeIn bg-gray-200 p-20 rounded-full",children:[m.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold leading-tight mb-12",children:["Welcome to ",m.jsx("br",{}),m.jsx("span",{className:`relative inline-block text-transparent bg-clip-text bg-gradient-to-r 
                from-pink-500 via-purple-500 to-indigo-500 animate-textGlow`,children:"EventPlanner"})]}),m.jsx("p",{className:"text-lg md:text-xl text-textLight max-w-2xl mx-auto mb-8",children:"Your one-stop destination to discover, organize, and attend amazing events. Let’s make your events unforgettable."}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx("button",{onClick:r,className:"px-8 py-3 text-lg md:text-xl font-semibold text-white bg-blue-500 rounded-full hover:bg-blue-600 transition-transform transform hover:scale-105 shadow-lg",children:"Login"}),m.jsx("button",{onClick:i,className:"px-8 py-3 text-lg md:text-xl font-semibold text-gray-800 bg-gray-300 rounded-full hover:bg-gray-400 transition-transform transform hover:scale-105 shadow-lg",children:"Continue as Guest"})]})]}),m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"bg-gradient-to-b from-secondary to-primary h-full w-full opacity-50"}),m.jsx("div",{className:"absolute w-72 h-72 bg-accent rounded-full opacity-20 blur-2xl -top-10 -left-20 animate-pulse"}),m.jsx("div",{className:"absolute w-96 h-96 bg-secondary rounded-full opacity-20 blur-3xl -bottom-20 -right-20 animate-pulse"})]}),m.jsx("div",{className:"absolute top-20 left-10",children:m.jsx("div",{className:"w-6 h-6 bg-accent rounded-full animate-bounce"})}),m.jsx("div",{className:"absolute bottom-20 right-10",children:m.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full animate-bounce"})})]})}var Zj="firebase",eF="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(Zj,eF,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebasestorage.googleapis.com",BI="storageBucket",tF=2*60*1e3,nF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends mr{constructor(e,n,r=0){super(Qp(e),`Firebase Storage: ${n} (${Qp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function Qp(t){return"storage/"+t}function o_(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(Xe.UNKNOWN,t)}function rF(t){return new Je(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function iF(t){return new Je(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(Xe.UNAUTHENTICATED,t)}function oF(){return new Je(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aF(t){return new Je(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function lF(){return new Je(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cF(){return new Je(Xe.CANCELED,"User canceled the upload/download.")}function uF(t){return new Je(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function hF(t){return new Je(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dF(){return new Je(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BI+"' property when initializing the app?")}function fF(){return new Je(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pF(){return new Je(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function gF(t){return new Je(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fm(t){return new Je(Xe.INVALID_ARGUMENT,t)}function zI(){return new Je(Xe.APP_DELETED,"The Firebase app was deleted.")}function mF(t){return new Je(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ul(t,e){return new Je(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nl(t){throw new Je(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=wn.makeFromUrl(e,n)}catch{return new wn(e,"")}if(r.path==="")return r;throw hF(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},v=n===UI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",_=new RegExp(`^https?://${v}/${i}/${b}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:p,indices:y,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<E.length;I++){const N=E[I],O=N.regex.exec(e);if(O){const S=O[N.indices.bucket];let T=O[N.indices.path];T||(T=""),r=new wn(S,T),N.postModify(r);break}}if(r==null)throw uF(e);return r}}class yF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function h(...b){c||(c=!0,e.apply(null,b))}function d(b){i=setTimeout(()=>{i=null,t(p,l())},b)}function f(){s&&clearTimeout(s)}function p(b,..._){if(c){f();return}if(b){f(),h.call(null,b,..._);return}if(l()||o){f(),h.call(null,b,..._);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,d(E)}let y=!1;function v(b){y||(y=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),d(0)):b||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function _F(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t){return t!==void 0}function xF(t){return typeof t=="object"&&!Array.isArray(t)}function a_(t){return typeof t=="string"||t instanceof String}function ib(t){return l_()&&t instanceof Blob}function l_(){return typeof Blob<"u"}function sb(t,e,n,r){if(r<e)throw Fm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Fm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function $I(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ms;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ms||(Ms={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e,n,r,i,s,o,a,l,c,h,d,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,y)=>{this.resolve_=p,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ju(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ms.NO_ERROR,l=s.getStatus();if(!a||bF(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ms.ABORT;r(!1,new Ju(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ju(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());wF(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=o_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?zI():cF();o(l)}else{const l=lF();o(l)}};this.canceled_?n(!1,new Ju(!1,null,!0)):this.backoffId_=vF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_F(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ju{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function TF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function CF(t,e,n,r,i,s,o=!0){const a=$I(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return kF(c,e),TF(c,n),SF(c,s),IF(c,r),new EF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AF(...t){const e=PF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(l_())return new Blob(t);throw new Je(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function RF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t){if(typeof atob>"u")throw gF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xp{constructor(e,n){this.data=e,this.contentType=n||null}}function WI(t,e){switch(t){case Un.RAW:return new Xp(HI(e));case Un.BASE64:case Un.BASE64URL:return new Xp(qI(t,e));case Un.DATA_URL:return new Xp(OF(e),MF(e))}throw o_()}function HI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DF(t){let e;try{e=decodeURIComponent(t)}catch{throw Ul(Un.DATA_URL,"Malformed data URL.")}return HI(e)}function qI(t,e){switch(t){case Un.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ul(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Un.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ul(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=NF(e)}catch(i){throw i.message.includes("polyfill")?i:Ul(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class KI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ul(Un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=LF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function OF(t){const e=new KI(t);return e.base64?qI(Un.BASE64,e.rest):DF(e.rest)}function MF(t){return new KI(t).contentType}function LF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){let r=0,i="";ib(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(ib(this.data_)){const r=this.data_,i=RF(r,e,n);return i===null?null:new pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pi(r,!0)}}static getBlob(...e){if(l_()){const n=e.map(r=>r instanceof pi?r.data_:r);return new pi(AF.apply(null,n))}else{const n=e.map(o=>a_(o)?WI(Un.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){let e;try{e=JSON.parse(t)}catch{return null}return xF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function YI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t,e){return e}class qt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||FF}}let Zu=null;function UF(t){return!a_(t)||t.length<2?t:YI(t)}function QI(){if(Zu)return Zu;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(s,o){return UF(o)}const n=new qt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new qt("size");return i.xform=r,t.push(i),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Zu=t,Zu}function BF(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new wn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function zF(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return BF(r,t),r}function XI(t,e,n){const r=GI(e);return r===null?null:zF(t,r,n)}function $F(t,e,n,r){const i=GI(e);if(i===null||!a_(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+o(h)+"/o/"+o(d),p=c_(f,n,r),y=$I({alt:"media",token:c});return p+y})[0]}function WF(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class JI{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){if(!t)throw o_()}function HF(t,e){function n(r,i){const s=XI(t,i,e);return ZI(s!==null),s}return n}function qF(t,e){function n(r,i){const s=XI(t,i,e);return ZI(s!==null),$F(s,i,t.host,t._protocol)}return n}function eC(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=oF():i=sF():n.getStatus()===402?i=iF(t.bucket):n.getStatus()===403?i=aF(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function KF(t){const e=eC(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=rF(t.path)),s.serverResponse=i.serverResponse,s}return n}function GF(t,e,n){const r=e.fullServerUrl(),i=c_(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new JI(i,s,qF(t,n),o);return a.errorHandler=KF(e),a}function YF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function QF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=YF(null,e)),r}function XF(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=QF(e,r,i),h=WF(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=pi.getBlob(d,r,f);if(p===null)throw fF();const y={name:c.fullPath},v=c_(s,t.host,t._protocol),b="POST",_=t.maxUploadRetryTime,w=new JI(v,b,HF(t,n),_);return w.urlParams=y,w.headers=o,w.body=p.uploadData(),w.errorHandler=eC(e),w}class JF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ms.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ms.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ms.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw nl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ZF extends JF{initXhr(){this.xhr_.responseType="text"}}function tC(){return new ZF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this._service=e,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ys(e,n)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YI(this._location.path)}get storage(){return this._service}get parent(){const e=VF(this._location.path);if(e===null)return null;const n=new wn(this._location.bucket,e);return new Ys(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw mF(e)}}function e6(t,e,n){t._throwIfRoot("uploadBytes");const r=XF(t.storage,t._location,QI(),new pi(e,!0),n);return t.storage.makeRequestWithTokens(r,tC).then(i=>({metadata:i,ref:t}))}function t6(t,e,n=Un.RAW,r){t._throwIfRoot("uploadString");const i=WI(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),e6(t,i.data,s)}function n6(t){t._throwIfRoot("getDownloadURL");const e=GF(t.storage,t._location,QI());return t.storage.makeRequestWithTokens(e,tC).then(n=>{if(n===null)throw pF();return n})}function r6(t,e){const n=jF(t._location.path,e),r=new wn(t._location.bucket,n);return new Ys(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t){return/^[A-Za-z]+:\/\//.test(t)}function s6(t,e){return new Ys(t,e)}function nC(t,e){if(t instanceof u_){const n=t;if(n._bucket==null)throw dF();const r=new Ys(n,n._bucket);return e!=null?nC(r,e):r}else return e!==void 0?r6(t,e):t}function o6(t,e){if(e&&i6(e)){if(t instanceof u_)return s6(t,e);throw Fm("To use ref(service, url), the first argument must be a Storage instance.")}else return nC(t,e)}function ob(t,e){const n=e==null?void 0:e[BI];return n==null?null:wn.makeFromBucketSpec(n,t)}function a6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:xS(i,t.app.options.projectId))}class u_{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=UI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tF,this._maxUploadRetryTime=nF,this._requests=new Set,i!=null?this._bucket=wn.makeFromBucketSpec(i,this._host):this._bucket=ob(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=ob(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ys(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new yF(zI());{const o=CF(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const ab="@firebase/storage",lb="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="storage";function l6(t,e,n,r){return t=pt(t),t6(t,e,n,r)}function c6(t){return t=pt(t),n6(t)}function u6(t,e){return t=pt(t),o6(t,e)}function h6(t=yv(),e){t=pt(t);const r=mf(t,rC).getImmediate({identifier:e}),i=vS("storage");return i&&d6(r,...i),r}function d6(t,e,n,r={}){a6(t,e,n,r)}function f6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new u_(n,r,i,e,eo)}function p6(){Ws(new ji(rC,f6,"PUBLIC").setMultipleInstances(!0)),lr(ab,lb,""),lr(ab,lb,"esm2017")}p6();const g6={apiKey:"AIzaSyCAI2nZzcRP09Vmugb61ztxKZG1FC9lpYg",authDomain:"event-planner-f074c.firebaseapp.com",projectId:"event-planner-f074c",storageBucket:"event-planner-f074c.appspot.com",messagingSenderId:"228038484139",appId:"1:228038484139:web:55676fda81a746d38757ee",databaseURL:"https://event-planner-f074c-default-rtdb.europe-west1.firebasedatabase.app/"},h_=TS(g6),m6=Ns(h_),st=Qv(h_),y6=h6(h_),iC=M.createContext(),v6=({children:t})=>{const{user:e}=so(),[n,r]=M.useState([]),[i,s]=M.useState([]),[o,a]=M.useState({}),[l,c]=M.useState(""),h=async()=>{if(e)try{const _=Gn(st,`users/${e.uid}/favorites`),E=(await Gs(_)).docs.map(I=>({id:I.id,...I.data()}));s(E)}catch(_){console.error("Error fetching favorites:",_)}},d=async()=>{if(e)try{const _=Gn(st,`users/${e.uid}/attendees`),w=await Gs(_),E={};w.docs.forEach(I=>{E[I.id]=I.data().attendees||[]}),a(E)}catch(_){console.error("Error fetching attendees:",_)}};M.useEffect(()=>{e&&(h(),d())},[e]);const f=_=>{r(_)},p=async _=>{if(e)try{const w=Yt(st,`users/${e.uid}/favorites`,_.id);await RI(w,_),s(E=>[...E,_])}catch(w){console.error("Error adding favorite:",w)}},y=async _=>{if(e)try{const w=Yt(st,`users/${e.uid}/favorites`,_);await Yc(w),s(E=>E.filter(I=>I.id!==_))}catch(w){console.error("Error removing favorite:",w)}},v=async(_,w)=>{if(e)try{const E=Yt(st,`users/${e.uid}/attendees`,_);await Vd(E,{attendees:Ej(w)}),a(I=>({...I,[_]:[...I[_]||[],w]}))}catch(E){console.error("Error adding attendee:",E)}},b=_=>{c(_)};return M.useEffect(()=>{if(l){const _=n.filter(w=>{var E;return w.name.toLowerCase().includes(l.toLowerCase())||((E=w.location)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))});r(_)}},[l,n]),m.jsx(iC.Provider,{value:{searchResults:n,setSearchResults:r,setSearchData:f,favorites:i,addFavorite:p,removeFavorite:y,addAttendee:v,attendees:o,searchTerm:l,handleSearch:b},children:t})},Qc=()=>M.useContext(iC);function _6(){const{searchResults:t,setSearchData:e}=Qc(),[n,r]=M.useState({category:"",town:""}),[i,s]=M.useState(!1),[o,a]=M.useState(""),[l,c]=M.useState(8),h=y=>{const{name:v,value:b}=y.target;r({...n,[v]:b}),o&&a("")},d=async()=>{var w;const y="mOFr2N2LO0CuZBIXgKd9m8lJBRf1IFy7",{category:v,town:b}=n,_=`https://app.ticketmaster.com/discovery/v2/events.json?apikey=${y}&keyword=${encodeURIComponent(v)}&city=${encodeURIComponent(b)}`;try{s(!0),a("");const E=await fetch(_);if(!E.ok)throw new Error("Failed to fetch events");const N=((w=(await E.json())._embedded)==null?void 0:w.events)||[];e(N),c(8)}catch{a("Unable to fetch events. Please try again.")}finally{s(!1)}},f=y=>{if(y.preventDefault(),!n.category.trim()||!n.town.trim()){a("Both category and town fields are required.");return}d()},p=()=>{c(y=>y+8)};return m.jsxs("div",{className:"container mx-auto mt-10",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Find an Event!"}),m.jsxs("form",{onSubmit:f,className:"flex space-x-4 mb-6",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-gray-300",children:"Category"}),m.jsx("input",{type:"text",name:"category",value:n.category,onChange:h,className:"w-full p-2 border text-gray-800 rounded",placeholder:"e.g., Music, Sports"})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-gray-300",children:"Town"}),m.jsx("input",{type:"text",name:"town",value:n.town,onChange:h,className:"w-full p-2 border text-gray-800 rounded",placeholder:"e.g., New York, Los Angeles"})]}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 self-center",children:"Search"})]}),i&&m.jsx("p",{className:"mt-4 text-blue-600",children:"Loading events..."}),o&&m.jsx("p",{className:"mt-4 text-red-600",children:o}),t.length>0&&!i&&m.jsxs("p",{className:"text-lg font-medium mb-4",children:[t.length," event",t.length!==1?"s":""," found"]}),t.length===0&&!i&&!o&&m.jsx("p",{className:"mt-4 text-gray-600",children:"No events found. Please try a different search."}),m.jsxs("div",{className:"mt-6",children:[m.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.slice(0,l).map((y,v)=>{var w,E,I,N,O,S,T;const b=((E=(w=y.images)==null?void 0:w[0])==null?void 0:E.url)||"placeholder.jpg",_=`${y.id}-${v}`;return m.jsxs("li",{className:"border p-4 rounded bg-gray-800",children:[m.jsx("h4",{className:"font-bold",children:y.name}),m.jsx("img",{src:b,alt:y.name,className:"w-full h-64 object-cover rounded mt-2"}),m.jsxs("p",{children:["Date: ",y.dates.start.localDate]}),m.jsxs("p",{children:["Venue: ",((N=(I=y._embedded)==null?void 0:I.venues[0])==null?void 0:N.name)||"Unknown"]}),m.jsxs("p",{children:["City: ",((T=(S=(O=y._embedded)==null?void 0:O.venues[0])==null?void 0:S.city)==null?void 0:T.name)||"Unknown"]}),m.jsx(lt,{to:`/event/${y.id}`,state:{event:y},className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 mt-2 inline-block",children:"View Details"})]},_)})}),l<t.length&&m.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Load More"})]})]})}function w6(){const{searchResults:t}=Qc(),[e,n]=M.useState({}),[r,i]=M.useState([]),[s,o]=M.useState(4),[a,l]=M.useState(!0);return M.useEffect(()=>{const c=t.reduce((h,d)=>{const f=new Date(d.dates.start.localDate).toDateString();return h[f]||(h[f]=[]),h[f].push(d),h},{});n(c)},[t]),M.useEffect(()=>{(async()=>{var y;const h=localStorage.getItem("lastSearch");if(!h)return;const{category:d,town:f}=JSON.parse(h),p="mOFr2N2LO0CuZBIXgKd9m8lJBRf1IFy7";try{const v=`https://app.ticketmaster.com/discovery/v2/events.json?apikey=${p}&keyword=${encodeURIComponent(d)}&city=${encodeURIComponent(f)}`,w=((y=(await(await fetch(v)).json())._embedded)==null?void 0:y.events)||[];i(w),l(!1)}catch(v){console.error("Failed to fetch event suggestions:",v),l(!1)}})()},[]),m.jsx("div",{className:"eventcontainer",children:m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-primary text-white min-h-screen relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"bg-gradient-to-br from-purple-600 via-pink-500 to-indigo-500 h-full w-full opacity-40"}),m.jsx("div",{className:"absolute w-96 h-96 bg-accent opacity-30 blur-3xl -top-20 -left-10 animate-pulse"}),m.jsx("div",{className:"absolute w-72 h-72 bg-secondary opacity-30 blur-2xl -bottom-10 -right-20 animate-pulse"})]}),m.jsxs("div",{className:"bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 py-10 rounded-lg shadow-lg mb-8",children:[m.jsxs("h1",{className:"text-4xl font-extrabold text-center text-white tracking-wide animate-fadeIn",children:["Find Your Next ",m.jsx("span",{className:"text-accent",children:"Event"})]}),m.jsx("p",{className:"text-center mt-2 text-lg text-light",children:"Browse, search, and plan your perfect day out."})]}),m.jsx(_6,{}),a?m.jsxs("div",{className:"mt-8 text-center",children:[m.jsx("div",{className:"animate-spin inline-block w-12 h-12 border-4 border-solid border-accent border-t-transparent rounded-full"}),m.jsx("p",{className:"mt-4 text-light",children:"Loading event suggestions..."})]}):m.jsxs("div",{className:"mt-12",children:[m.jsx("h2",{className:"text-3xl font-bold text-accent mb-6",children:"Event Suggestions"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.slice(0,s).map(c=>{var h,d,f;return m.jsxs("div",{className:"bg-gradient-to-b from-secondary via-primary to-secondary p-4 rounded-lg shadow-lg hover:shadow-xl transition-transform transform hover:scale-105",children:[((h=c.images)==null?void 0:h[0])&&m.jsx("img",{src:c.images[0].url,alt:c.name,className:"w-full h-48 object-cover rounded-md mb-4"}),m.jsx("h4",{className:"text-xl font-bold text-accent mb-2",children:c.name}),m.jsxs("p",{className:"text-light mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Venue:"})," ",((f=(d=c._embedded)==null?void 0:d.venues[0])==null?void 0:f.name)||"Unknown Venue"]}),m.jsxs("p",{className:"text-light mb-2",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",new Date(c.dates.start.localDate).toLocaleDateString()]}),m.jsx(lt,{to:`/event/${c.id}`,state:{event:c},className:"block mt-2 text-center px-4 py-2 bg-accent text-white rounded-lg hover:bg-opacity-80",children:"View Details"})]},c.id)})}),s<r.length&&m.jsx("div",{className:"text-center mt-6",children:m.jsx("button",{onClick:()=>o(c=>c+4),className:"mt-4 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-800 text-white rounded hover:opacity-90 shadow-md",children:"Show More"})})]})]})})}function x6({title:t,titleId:e,...n},r){return M.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?M.createElement("title",{id:e},t):null,M.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))}const b6=M.forwardRef(x6),sC=()=>{const t=Sn(),e=()=>{t(-1)};return m.jsxs("button",{onClick:e,className:"flex items-center space-x-2 p-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[m.jsx(b6,{className:"h-5 w-5"}),m.jsx("span",{})]})};function E6(){const[t,e]=M.useState([]),[n,r]=M.useState(""),[i,s]=M.useState(!0),{user:o}=so(),a=Sn(),l=async()=>{s(!0),r("");try{const d=Ns().currentUser;if(!d||!d.uid)throw new Error("User is not logged in.");const f=Gn(st,`users/${d.uid}/events`),y=(await Gs(f)).docs.map(v=>{const b=v.data(),_=(b.ticketQuantity||0)-(b.ticketsSold||0);return{id:v.id,...b,ticketsRemaining:_}});e(y)}catch(h){console.error("Error fetching events:",h),r("Failed to fetch events. Please try again later.")}finally{s(!1)}},c=async h=>{if(window.confirm("Are you sure you want to delete this event?"))try{await Yc(Yt(st,"events",h)),e(f=>f.filter(p=>p.id!==h))}catch(f){console.error("Error deleting event:",f),r("Failed to delete the event. Please try again later.")}};return M.useEffect(()=>{l()},[o]),m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 min-h-screen text-white",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-80 h-80 bg-indigo-500 opacity-30 blur-2xl -top-20 -left-10 animate-pulse"}),m.jsx("div",{className:"absolute w-72 h-72 bg-pink-400 opacity-30 blur-2xl -bottom-10 -right-10 animate-pulse"})]}),m.jsx("div",{className:"mb-6",children:m.jsx(sC,{})}),m.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide text-center mb-6",children:["Manage ",m.jsx("span",{className:"text-accent",children:"Events"})]}),n&&m.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded-lg text-center mb-4",children:n}),i?m.jsx("p",{className:"text-lg text-center animate-pulse",children:"Loading events..."}):t.length===0?m.jsx("p",{className:"text-lg text-center mt-10",children:"No events available. Create some to see them here!"}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(h=>m.jsxs("div",{className:"bg-gradient-to-b from-purple-700 via-indigo-700 to-purple-800 p-4 rounded-lg shadow-lg hover:shadow-xl transition-transform transform hover:scale-105 relative",children:[h.eventImage&&m.jsx("img",{src:h.eventImage,alt:h.eventName,className:"w-full h-48 object-cover rounded-lg mb-4"}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold mb-2",children:h.eventName}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Location:"})," ",h.location]}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",h.date]}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Time:"})," ",h.time]}),m.jsxs("p",{className:"text-sm mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Tickets Remaining:"})," ",h.ticketsRemaining]}),m.jsxs("p",{className:"text-sm",children:[m.jsx("span",{className:"font-semibold",children:"Price:"})," $",h.ticketPrice]})]}),m.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[m.jsx("button",{onClick:()=>a("/events/view-details/:eventId",{state:{eventId:h.id}}),className:"px-4 py-2 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600",children:"View Details"}),h.isOwned&&m.jsx("button",{onClick:()=>a(`/edit-event/${h.id}`,{state:{event:h}}),className:"px-4 py-2 bg-yellow-500 text-white rounded-md shadow-md hover:bg-yellow-600",children:"Edit"}),m.jsx("button",{onClick:()=>a("/manage-reservations",{state:{eventId:h.id}}),className:"px-4 py-2 bg-green-500 text-white rounded-md shadow-md hover:bg-green-600",children:"Manage Reservations"}),h.isOwned&&m.jsx("button",{onClick:()=>c(h.id),className:"px-4 py-2 bg-red-500 text-white rounded-md shadow-md hover:bg-red-600",children:"Delete"})]})]},h.id))})]})}function T6(){var f,p,y,v,b,_,w;const t=Qi(),e=Sn(),{event:n}=t.state||{},{favorites:r,addFavorite:i,removeFavorite:s}=Qc(),[o,a]=M.useState(!1);if(M.useEffect(()=>{if(n){const E=r.some(I=>I.id===n.id);a(E)}},[n,r]),!n)return m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-indigo-700 via-purple-800 to-blue-600 text-white",children:[m.jsx("h2",{className:"text-3xl font-bold",children:"Event Not Found"}),m.jsx("button",{onClick:()=>e("/manage-events"),className:"mt-6 px-6 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-700",children:"Go to Manage Events"})]});const l=(p=(f=n._embedded)==null?void 0:f.venues)==null?void 0:p[0],c=((v=(y=n.images)==null?void 0:y[0])==null?void 0:v.url)||"https://via.placeholder.com/300",h=()=>{var I,N,O,S,T,k,P,R,D;const E={id:n.id,name:n.name||"Unnamed Event",location:((O=(N=(I=n._embedded)==null?void 0:I.venues)==null?void 0:N[0])==null?void 0:O.name)||"Location not available",date:((T=(S=n.dates)==null?void 0:S.start)==null?void 0:T.localDate)||"Date not available",time:((P=(k=n.dates)==null?void 0:k.start)==null?void 0:P.localTime)||"Time not available",image:((D=(R=n.images)==null?void 0:R[0])==null?void 0:D.url)||"https://via.placeholder.com/150",description:n.info||"No description available",priceRange:n.priceRanges?`${n.priceRanges[0].min} - ${n.priceRanges[0].max}`:"Price not available"};i(E),a(!0)},d=()=>{s(n),a(!1)};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-700 via-purple-800 to-blue-600 text-white px-6 py-10",children:[m.jsxs("nav",{className:"mb-8 text-lg",children:[m.jsx("button",{onClick:()=>e("/manage-events"),className:"text-blue-300 hover:underline",children:"Manage Events"})," > ",m.jsx("span",{className:"text-gray-300",children:n.name})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 text-black",children:[m.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 mb-6",children:n.name}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("img",{src:c,alt:n.name,className:"w-full h-64 object-cover rounded-lg shadow-lg"}),l&&m.jsxs("div",{className:"mt-6",children:[m.jsxs("p",{className:"text-gray-700",children:[m.jsx("strong",{children:"Venue:"})," ",l.name]}),m.jsxs("p",{className:"text-gray-700",children:[m.jsx("strong",{children:"City:"})," ",l.city.name]}),m.jsxs("p",{className:"text-gray-700",children:[m.jsx("strong",{children:"Address:"})," ",(b=l.address)==null?void 0:b.line1]})]})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-gray-700 mb-4",children:[m.jsx("strong",{children:"Date:"})," ",((w=(_=n.dates)==null?void 0:_.start)==null?void 0:w.localDate)||"Date not available"]}),m.jsxs("p",{className:"text-gray-700 mb-4",children:[m.jsx("strong",{children:"Description:"})," ",n.info||"No description available."]}),n.priceRanges&&m.jsxs("p",{className:"text-gray-700 mb-4",children:[m.jsx("strong",{children:"Price Range:"})," $",n.priceRanges[0].min," - $",n.priceRanges[0].max]}),m.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-6 py-3 bg-green-500 text-white rounded-md hover:bg-green-700",children:"Buy Tickets"})]})]}),m.jsxs("div",{className:"mt-8 flex flex-wrap items-center space-x-4",children:[m.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-700",children:"Back to Events"}),n.isOwned&&m.jsx("button",{onClick:()=>e(`/edit-event/${n.id}`,{state:{event:n}}),className:"px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-700",children:"Edit Event"}),m.jsx("button",{onClick:o?d:h,className:`px-4 py-2 rounded-md text-white ${o?"bg-red-500 hover:bg-red-700":"bg-blue-500 hover:bg-blue-700"}`,children:o?"Remove from Favorites":"Add to Favorites"})]})]})]})}function oC(){const[t,e]=M.useState({eventName:"",location:"",date:"",time:"",ticketQuantity:"",ticketPrice:"",eventImage:""}),[n,r]=M.useState({}),[i,s]=M.useState(""),o=Sn(),a=Ns(),l=f=>{const{name:p,value:y}=f.target;e({...t,[p]:y})},c=f=>{const p=f.target.files[0],y=new FileReader;y.onload=()=>{e({...t,eventImage:y.result})},p&&y.readAsDataURL(p)},h=()=>{const f={};return t.eventName||(f.eventName="Event name is required."),t.location||(f.location="Location is required."),t.date||(f.date="Date is required."),t.time||(f.time="Time is required."),(!t.ticketQuantity||isNaN(t.ticketQuantity)||t.ticketQuantity<=0)&&(f.ticketQuantity="Ticket quantity must be a positive number."),(!t.ticketPrice||isNaN(t.ticketPrice)||t.ticketPrice<=0)&&(f.ticketPrice="Ticket price must be a positive number."),f},d=async f=>{f.preventDefault();const p=h();if(Object.keys(p).length>0){r(p);return}r({});try{const y=a.currentUser;if(!y||!y.uid)throw new Error("User is not logged in.");let v="";if(t.eventImage){const _=u6(y6,`event-images/${Date.now()}`);await l6(_,t.eventImage,"data_url"),v=await c6(_)}const b=Gn(st,`users/${y.uid}/events`);await jf(b,{eventName:t.eventName,location:t.location,date:t.date,time:t.time,ticketQuantity:parseInt(t.ticketQuantity),ticketPrice:parseFloat(t.ticketPrice),eventImage:v,createdAt:at.now()}),s("Event created successfully!"),e({eventName:"",location:"",date:"",time:"",ticketQuantity:"",ticketPrice:"",eventImage:""}),setTimeout(()=>{s(""),o("/manage-events")},2e3)}catch(y){console.error("Error creating event:",y),r({general:"An error occurred while creating the event. Please ensure you are logged in and try again."})}};return m.jsxs("div",{className:"container mx-auto mt-10 px-4 sm:px-6 md:px-8 bg-gray-900 text-white",children:[m.jsx("h1",{className:"text-3xl font-semibold mb-6 text-center",children:"Create New Event"}),i&&m.jsx("p",{className:"text-green-500 mb-4 text-center",children:i}),n.general&&m.jsx("p",{className:"text-red-500 mb-4 text-center",children:n.general}),m.jsxs("form",{onSubmit:d,className:"space-y-6 max-w-2xl mx-auto bg-gray-800 p-6 rounded-lg shadow-lg",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Event Image"}),m.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),t.eventImage&&m.jsx("img",{src:t.eventImage,alt:"Event Preview",className:"w-32 h-32 object-cover mt-4 rounded border-2 border-gray-600"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Event Name"}),m.jsx("input",{type:"text",name:"eventName",value:t.eventName,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.eventName&&m.jsx("p",{className:"text-red-500",children:n.eventName})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Location"}),m.jsx("input",{type:"text",name:"location",value:t.location,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.location&&m.jsx("p",{className:"text-red-500",children:n.location})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Date"}),m.jsx("input",{type:"date",name:"date",value:t.date,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.date&&m.jsx("p",{className:"text-red-500",children:n.date})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Time"}),m.jsx("input",{type:"time",name:"time",value:t.time,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.time&&m.jsx("p",{className:"text-red-500",children:n.time})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Ticket Quantity"}),m.jsx("input",{type:"number",name:"ticketQuantity",value:t.ticketQuantity,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.ticketQuantity&&m.jsx("p",{className:"text-red-500",children:n.ticketQuantity})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Ticket Price"}),m.jsx("input",{type:"number",name:"ticketPrice",value:t.ticketPrice,onChange:l,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"}),n.ticketPrice&&m.jsx("p",{className:"text-red-500",children:n.ticketPrice})]}),m.jsx("button",{type:"submit",className:"w-full py-3 mt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Event"})]})]})}function S6(){const{id:t}=tN(),e=Sn(),[n,r]=M.useState({eventName:"",location:"",date:"",time:"",ticketQuantity:"",ticketPrice:"",eventImage:""}),[i,s]=M.useState({}),[o,a]=M.useState(""),[l,c]=M.useState(!0),h=()=>{c(!0);const v=(JSON.parse(localStorage.getItem("events"))||[]).find(b=>b.id===parseInt(t));v?(r(v),c(!1)):(c(!1),e("/manage-events"))};M.useEffect(()=>{t&&h()},[t]);const d=y=>{const{name:v,value:b}=y.target;r(_=>({..._,[v]:b}))},f=()=>{const y={};return n.eventName||(y.eventName="Event name is required."),n.location||(y.location="Location is required."),n.date||(y.date="Date is required."),n.time||(y.time="Time is required."),(!n.ticketQuantity||isNaN(n.ticketQuantity)||n.ticketQuantity<=0)&&(y.ticketQuantity="Ticket quantity must be a positive number."),(!n.ticketPrice||isNaN(n.ticketPrice)||n.ticketPrice<=0)&&(y.ticketPrice="Ticket price must be a positive number."),y},p=y=>{y.preventDefault();const v=f();if(Object.keys(v).length>0){s(v);return}s({});const _=(JSON.parse(localStorage.getItem("events"))||[]).map(w=>w.id===parseInt(t)?{...w,...n}:w);localStorage.setItem("events",JSON.stringify(_)),a("Event updated successfully!"),setTimeout(()=>a(""),3e3),e("/manage-events")};return m.jsx("div",{className:"edit-event-page",children:m.jsxs("div",{className:"edit-event-container",children:[m.jsx("h1",{className:"page-title",children:"Edit Event"}),o&&m.jsx("p",{className:"success-message",children:o}),l?m.jsx("p",{className:"loading-message",children:"Loading event details..."}):m.jsxs("form",{onSubmit:p,className:"edit-event-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Event Name"}),m.jsx("input",{type:"text",name:"eventName",value:n.eventName,onChange:d,placeholder:"Enter event name"}),i.eventName&&m.jsx("p",{className:"error-text",children:i.eventName})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Location"}),m.jsx("input",{type:"text",name:"location",value:n.location,onChange:d,placeholder:"Enter location"}),i.location&&m.jsx("p",{className:"error-text",children:i.location})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Date"}),m.jsx("input",{type:"date",name:"date",value:n.date,onChange:d}),i.date&&m.jsx("p",{className:"error-text",children:i.date})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Time"}),m.jsx("input",{type:"time",name:"time",value:n.time,onChange:d}),i.time&&m.jsx("p",{className:"error-text",children:i.time})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Ticket Quantity"}),m.jsx("input",{type:"number",name:"ticketQuantity",value:n.ticketQuantity,onChange:d,placeholder:"Enter ticket quantity"}),i.ticketQuantity&&m.jsx("p",{className:"error-text",children:i.ticketQuantity})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Ticket Price"}),m.jsx("input",{type:"number",name:"ticketPrice",value:n.ticketPrice,onChange:d,placeholder:"Enter ticket price"}),i.ticketPrice&&m.jsx("p",{className:"error-text",children:i.ticketPrice})]}),m.jsx("button",{type:"submit",className:"submit-btn",children:"Update Event"})]})]})})}function k6(){const{user:t}=so(),[e,n]=M.useState([]),[r,i]=M.useState(null),[s,o]=M.useState({}),[a,l]=M.useState(!1),[c,h]=M.useState(!1),[d,f]=M.useState(""),p=async()=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}console.log("Fetching events for user:",t.uid);try{const E=Gn(st,"users",t.uid,"events"),I=await Gs(E);console.log("All fetched documents:",I.docs.map(O=>O.data()));const N=I.docs.map(O=>({id:O.id,...O.data()}));console.log("Filtered events for user:",N),n(N)}catch(E){console.error("Error fetching events:",E),f("Failed to load events. Please try again later.")}},y=async E=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}try{const I=Gn(st,"users",t.uid,"events"),N=await jf(I,E);n(O=>[...O,{id:N.id,...E}])}catch(I){console.error("Error creating event:",I),f("Failed to create the event. Please try again later.")}},v=async E=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}try{await Yc(Yt(st,"users",t.uid,"events",E)),n(I=>I.filter(N=>N.id!==E))}catch(I){console.error("Error deleting event:",I),f("Failed to delete the event. Please try again later.")}},b=E=>{i(E),o(E),l(!0)},_=async()=>{if(!(t!=null&&t.uid)){console.error("No user logged in");return}try{await Vd(Yt(st,"users",t.uid,"events",r.id),s),n(E=>E.map(I=>I.id===r.id?{id:r.id,...s}:I)),l(!1),i(null)}catch(E){console.error("Error updating event:",E),f("Failed to update the event. Please try again later.")}},w=E=>{const{name:I,value:N}=E.target;o({...s,[I]:N})};return M.useEffect(()=>{p()},[t]),m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-500 min-h-screen text-white relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-96 h-96 bg-indigo-400 opacity-30 blur-3xl -top-10 -left-10 animate-pulse"}),m.jsx("div",{className:"absolute w-72 h-72 bg-pink-500 opacity-30 blur-2xl -bottom-10 -right-20 animate-pulse"})]}),m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide",children:["My ",m.jsx("span",{className:"text-accent",children:"Events"})]}),m.jsx("button",{onClick:()=>h(E=>!E),className:"px-6 py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold rounded-lg shadow-lg hover:opacity-90 transition-transform transform hover:scale-105",children:c?"Cancel":"Create Event"})]}),c&&m.jsx(oC,{onEventCreated:y}),d&&m.jsx("p",{className:"text-red-500 bg-red-100 p-3 rounded-lg text-center mb-4",children:d}),m.jsx("h2",{className:"text-3xl font-semibold mb-4",children:"Created Events"}),e.length>0?m.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(E=>m.jsxs("li",{className:"bg-gradient-to-b from-purple-600 via-indigo-600 to-purple-700 p-4 rounded-lg shadow-md hover:shadow-lg transition-transform transform hover:scale-105",children:[E.eventImage&&m.jsx("img",{src:E.eventImage,alt:E.eventName,className:"w-full h-48 object-cover rounded-md mb-4"}),m.jsx("h3",{className:"text-xl font-bold text-accent mb-2",children:E.eventName}),m.jsxs("p",{className:"text-light mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Location:"})," ",E.location]}),m.jsxs("p",{className:"text-light mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",E.date]}),m.jsxs("p",{className:"text-light mb-2",children:[m.jsx("span",{className:"font-semibold",children:"Time:"})," ",E.time]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{onClick:()=>b(E),className:"px-4 py-2 bg-yellow-500 text-white rounded-lg shadow-md hover:opacity-90",children:"Edit"}),m.jsx("button",{onClick:()=>v(E.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg shadow-md hover:opacity-90",children:"Delete"})]})]},E.id))}):m.jsx("p",{className:"text-lg text-center mt-10",children:"No events created yet!"}),a&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white text-gray-800 p-6 rounded-lg shadow-lg w-96",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Event"}),m.jsxs("form",{children:[m.jsx("input",{type:"text",name:"eventName",value:s.eventName,onChange:w,placeholder:"Event Name",className:"w-full px-4 py-2 border rounded-lg mb-4"}),m.jsx("button",{type:"button",onClick:_,className:"w-full px-4 py-2 bg-green-500 text-white font-bold rounded-lg hover:bg-green-600",children:"Save"})]})]})})]})}function I6(){const{favorites:t,removeFavorite:e,handleSearch:n,searchTerm:r}=Qc(),{user:i}=so(),s=Qv(),[o,a]=M.useState(!1),[l,c]=M.useState(null),[h,d]=M.useState(1),f=5,p=Sn(),y=h*f,v=y-f,b=t.slice(v,y),_=O=>{c(O),a(!0)},w=async()=>{if(l)try{const O=Yt(s,`users/${i.uid}/favorites`,l.id);await Yc(O),e(l.id),a(!1),c(null)}catch(O){console.error("Error removing favorite from Firestore:",O)}},E=()=>{h<Math.ceil(t.length/f)&&d(h+1)},I=()=>{h>1&&d(h-1)},N=()=>{p(-1)};return m.jsxs("div",{className:"container mx-auto mt-10 px-6 py-8 bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800 min-h-screen text-white",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-96 h-96 bg-indigo-500 opacity-30 blur-3xl -top-32 -left-20 animate-pulse"}),m.jsx("div",{className:"absolute w-80 h-80 bg-purple-400 opacity-30 blur-3xl -bottom-16 -right-16 animate-pulse"})]}),m.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide text-center mb-8",children:["My ",m.jsx("span",{className:"text-yellow-400",children:"Favorite"})," Events"]}),m.jsx("div",{className:"mb-8",children:m.jsx("input",{type:"text",placeholder:"Search by name or location...",value:r,onChange:O=>n(O.target.value),className:"w-full p-4 text-black rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-yellow-500"})}),b.length>0?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(O=>m.jsxs("div",{className:"bg-gradient-to-b from-gray-700 via-gray-800 to-gray-900 rounded-lg shadow-lg overflow-hidden transform hover:scale-105 transition-transform",children:[m.jsx("img",{src:O.image||"https://via.placeholder.com/150",alt:O.name||"Unnamed Event",className:"w-full h-48 object-cover"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-2xl font-bold mb-2 text-yellow-400",children:O.name||"Unnamed Event"}),m.jsxs("p",{className:"mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Location:"})," ",O.location||"N/A"]}),m.jsxs("p",{className:"mb-1",children:[m.jsx("span",{className:"font-semibold",children:"Date:"})," ",O.date||"N/A"]}),m.jsxs("p",{className:"mb-3",children:[m.jsx("span",{className:"font-semibold",children:"Time:"})," ",O.time||"N/A"]}),m.jsx("button",{onClick:()=>_(O),className:"w-full py-2 bg-red-600 rounded-lg text-white hover:bg-red-700",children:"Remove from Favorites"})]})]},O.id))}):m.jsx("p",{className:"text-center text-gray-200 text-lg mt-16",children:"No favorite events yet. Add some from the events list!"}),m.jsxs("div",{className:"flex justify-between items-center mt-12",children:[m.jsx("button",{onClick:I,disabled:h===1,className:"px-6 py-2 bg-gray-600 rounded-lg hover:bg-gray-700 disabled:opacity-50",children:"Previous"}),m.jsxs("p",{className:"text-lg",children:["Page ",h," of ",Math.ceil(t.length/f)]}),m.jsx("button",{onClick:E,disabled:h===Math.ceil(t.length/f),className:"px-6 py-2 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Next"})]}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx("button",{onClick:N,className:"px-6 py-3 bg-yellow-500 rounded-lg text-black font-bold hover:bg-yellow-600",children:"Go Back"})}),o&&m.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60",children:m.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-96 text-black",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Confirm Removal"}),m.jsxs("p",{className:"mb-4",children:["Are you sure you want to remove"," ",m.jsx("span",{className:"font-semibold text-indigo-600",children:l==null?void 0:l.name}),"?"]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("button",{onClick:w,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Yes, Remove"}),m.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2 bg-gray-400 rounded-lg hover:bg-gray-500",children:"Cancel"})]})]})})]})}const C6=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!P6(i,s)&&r||Object.defineProperty(t,n,s)},P6=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},A6=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},R6=(t,e)=>`/* Wrapped ${t}*/
${e}`,N6=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),D6=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),O6=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=R6.bind(null,r,e.toString());Object.defineProperty(i,"name",D6),Object.defineProperty(t,"toString",{...N6,value:i})},M6=(t,e,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=t;for(const i of Reflect.ownKeys(e))C6(t,e,i,n);return A6(t,e),O6(t,e,r),t};var L6=M6,Um={exports:{}},V6=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};(function(t,e){var n=ku&&ku.__awaiter||function(o,a,l,c){return new(l||(l=Promise))(function(h,d){function f(v){try{y(c.next(v))}catch(b){d(b)}}function p(v){try{y(c.throw(v))}catch(b){d(b)}}function y(v){v.done?h(v.value):new l(function(b){b(v.value)}).then(f,p)}y((c=c.apply(o,a||[])).next())})},r=ku&&ku.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(V6);function s(o,a="maxAge"){let l,c,h;const d=()=>n(this,void 0,void 0,function*(){if(l!==void 0)return;const y=v=>n(this,void 0,void 0,function*(){h=i.default();const b=v[1][a]-Date.now();if(b<=0){o.delete(v[0]),h.resolve();return}return l=v[0],c=setTimeout(()=>{o.delete(v[0]),h&&h.resolve()},b),typeof c.unref=="function"&&c.unref(),h.promise});try{for(const v of o)yield y(v)}catch{}l=void 0}),f=()=>{l=void 0,c!==void 0&&(clearTimeout(c),c=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},p=o.set.bind(o);return o.set=(y,v)=>{o.has(y)&&o.delete(y);const b=p(y,v);return l&&l===y&&f(),d(),b},d(),o}e.default=s,t.exports=s,t.exports.default=s})(Um,Um.exports);var j6=Um.exports;const F6=L6,U6=j6,Jp=new WeakMap,aC=new WeakMap,Bd=(t,{cacheKey:e,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&U6(n);const i=function(...s){const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s);return n.set(o,{data:l,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),l};return F6(i,t,{ignoreNonConfigurable:!0}),aC.set(i,n),i};Bd.decorator=(t={})=>(e,n,r)=>{const i=e[n];if(typeof i!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!Jp.has(this)){const s=Bd(i,t);return Jp.set(this,s),s}return Jp.get(this)}};Bd.clear=t=>{const e=aC.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var B6=Bd;const lC=q1(B6);function z6(t){return typeof t=="string"}function $6(t,e,n){return n.indexOf(t)===e}function W6(t){return t.toLowerCase()===t}function cb(t){return t.indexOf(",")===-1?t:t.split(",")}function Bm(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return Bm(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return Bm(n)}if(t.indexOf("-")===-1||!W6(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function H6(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,h=a;c<h.length;c++){var d=h[c];l=l.concat(cb(d))}var f=navigator.language,p=f&&cb(f);o=o.concat(l,p)}return r&&o.push(s),o.filter(z6).map(Bm).filter($6)}var q6=lC(H6,{cacheKey:JSON.stringify});function K6(t){return q6(t)[0]||null}var cC=lC(K6,{cacheKey:JSON.stringify});function Qr(t,e,n){return function(i,s){s===void 0&&(s=n);var o=t(i)+s;return e(o)}}function Xc(t){return function(n){return new Date(t(n).getTime()-1)}}function Jc(t,e){return function(r){return[t(r),e(r)]}}function Ue(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function ts(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function zf(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function ka(t){var e=Ue(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var G6=Qr(Ue,ka,-100),uC=Qr(Ue,ka,100),d_=Xc(uC),Y6=Qr(Ue,d_,-100),hC=Jc(ka,d_);function ns(t){var e=Ue(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var dC=Qr(Ue,ns,-10),f_=Qr(Ue,ns,10),$f=Xc(f_),fC=Qr(Ue,$f,-10),pC=Jc(ns,$f);function Ia(t){var e=Ue(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var gC=Qr(Ue,Ia,-1),p_=Qr(Ue,Ia,1),Wf=Xc(p_),mC=Qr(Ue,Wf,-1),Q6=Jc(Ia,Wf);function g_(t,e){return function(r,i){i===void 0&&(i=e);var s=Ue(r),o=ts(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function oo(t){var e=Ue(t),n=ts(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}var yC=g_(oo,-1),m_=g_(oo,1),Zc=Xc(m_),vC=g_(Zc,-1),X6=Jc(oo,Zc);function J6(t,e){return function(r,i){i===void 0&&(i=e);var s=Ue(r),o=ts(r),a=zf(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function eu(t){var e=Ue(t),n=ts(t),r=zf(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}var Z6=J6(eu,1),y_=Xc(Z6),e5=Jc(eu,y_);function _C(t){return zf(Zc(t))}var It={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},t5={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},v_=[0,1,2,3,4,5,6],Zp=new Map;function n5(t){return function(n,r){var i=n||cC();Zp.has(i)||Zp.set(i,new Map);var s=Zp.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function r5(t){var e=new Date(t);return new Date(e.setHours(12))}function ao(t){return function(e,n){return n5(t)(e,r5(n))}}var i5={day:"numeric"},s5={day:"numeric",month:"long",year:"numeric"},o5={month:"long"},a5={month:"long",year:"numeric"},l5={weekday:"short"},c5={weekday:"long"},u5={year:"numeric"},h5=ao(i5),d5=ao(s5),f5=ao(o5),wC=ao(a5),p5=ao(l5),g5=ao(c5),Hf=ao(u5),m5=v_[0],y5=v_[5],ub=v_[6];function Ec(t,e){e===void 0&&(e=It.ISO_8601);var n=t.getDay();switch(e){case It.ISO_8601:return(n+6)%7;case It.ISLAMIC:return(n+1)%7;case It.HEBREW:case It.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function v5(t){var e=ka(t);return Ue(e)}function _5(t){var e=ns(t);return Ue(e)}function zm(t,e){e===void 0&&(e=It.ISO_8601);var n=Ue(t),r=ts(t),i=t.getDate()-Ec(t,e);return new Date(n,r,i)}function w5(t,e){e===void 0&&(e=It.ISO_8601);var n=e===It.GREGORY?It.GREGORY:It.ISO_8601,r=zm(t,e),i=Ue(t)+1,s,o;do s=new Date(i,0,n===It.ISO_8601?4:1),o=zm(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Ls(t,e){switch(t){case"century":return ka(e);case"decade":return ns(e);case"year":return Ia(e);case"month":return oo(e);case"day":return eu(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function x5(t,e){switch(t){case"century":return G6(e);case"decade":return dC(e);case"year":return gC(e);case"month":return yC(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function xC(t,e){switch(t){case"century":return uC(e);case"decade":return f_(e);case"year":return p_(e);case"month":return m_(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function b5(t,e){switch(t){case"decade":return dC(e,-100);case"year":return gC(e,-10);case"month":return yC(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function E5(t,e){switch(t){case"decade":return f_(e,100);case"year":return p_(e,10);case"month":return m_(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function bC(t,e){switch(t){case"century":return d_(e);case"decade":return $f(e);case"year":return Wf(e);case"month":return Zc(e);case"day":return y_(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function T5(t,e){switch(t){case"century":return Y6(e);case"decade":return fC(e);case"year":return mC(e);case"month":return vC(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function S5(t,e){switch(t){case"decade":return fC(e,-100);case"year":return mC(e,-10);case"month":return vC(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function hb(t,e){switch(t){case"century":return hC(e);case"decade":return pC(e);case"year":return Q6(e);case"month":return X6(e);case"day":return e5(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function k5(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Ls(t,r[0]),bC(t,r[1])]}function EC(t,e,n){return n.map(function(r){return(e||Hf)(t,r)}).join(" – ")}function I5(t,e,n){return EC(t,e,hC(n))}function TC(t,e,n){return EC(t,e,pC(n))}function C5(t){return t.getDay()===new Date().getDay()}function SC(t,e){e===void 0&&(e=It.ISO_8601);var n=t.getDay();switch(e){case It.ISLAMIC:case It.HEBREW:return n===y5||n===ub;case It.ISO_8601:case It.GREGORY:return n===ub||n===m5;default:throw new Error("Unsupported calendar type.")}}var er="react-calendar__navigation";function P5(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?wC:r,s=t.formatYear,o=s===void 0?Hf:s,a=t.locale,l=t.maxDate,c=t.minDate,h=t.navigationAriaLabel,d=h===void 0?"":h,f=t.navigationAriaLive,p=t.navigationLabel,y=t.next2AriaLabel,v=y===void 0?"":y,b=t.next2Label,_=b===void 0?"»":b,w=t.nextAriaLabel,E=w===void 0?"":w,I=t.nextLabel,N=I===void 0?"›":I,O=t.prev2AriaLabel,S=O===void 0?"":O,T=t.prev2Label,k=T===void 0?"«":T,P=t.prevAriaLabel,R=P===void 0?"":P,D=t.prevLabel,A=D===void 0?"‹":D,Z=t.setActiveStartDate,Y=t.showDoubleView,G=t.view,re=t.views,U=re.indexOf(G)>0,W=G!=="century",H=x5(G,e),ie=W?b5(G,e):void 0,X=xC(G,e),ne=W?E5(G,e):void 0,me=function(){if(H.getFullYear()<0)return!0;var Be=T5(G,e);return c&&c>=Be}(),be=W&&function(){if(ie.getFullYear()<0)return!0;var Be=S5(G,e);return c&&c>=Be}(),Ee=l&&l<X,Ze=W&&l&&l<ne;function yr(){Z(H,"prev")}function Qn(){Z(ie,"prev2")}function Xr(){Z(X,"next")}function Jr(){Z(ne,"next2")}function Zr(Be){var vr=function(){switch(G){case"century":return I5(a,o,Be);case"decade":return TC(a,o,Be);case"year":return o(a,Be);case"month":return i(a,Be);default:throw new Error("Invalid view: ".concat(G,"."))}}();return p?p({date:Be,label:vr,locale:a||cC()||void 0,view:G}):vr}function is(){var Be="".concat(er,"__label");return m.jsxs("button",{"aria-label":d,"aria-live":f,className:Be,disabled:!U,onClick:n,style:{flexGrow:1},type:"button",children:[m.jsx("span",{className:"".concat(Be,"__labelText ").concat(Be,"__labelText--from"),children:Zr(e)}),Y?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"".concat(Be,"__divider"),children:" – "}),m.jsx("span",{className:"".concat(Be,"__labelText ").concat(Be,"__labelText--to"),children:Zr(X)})]}):null]})}return m.jsxs("div",{className:er,children:[k!==null&&W?m.jsx("button",{"aria-label":S,className:"".concat(er,"__arrow ").concat(er,"__prev2-button"),disabled:be,onClick:Qn,type:"button",children:k}):null,A!==null&&m.jsx("button",{"aria-label":R,className:"".concat(er,"__arrow ").concat(er,"__prev-button"),disabled:me,onClick:yr,type:"button",children:A}),is(),N!==null&&m.jsx("button",{"aria-label":E,className:"".concat(er,"__arrow ").concat(er,"__next-button"),disabled:Ee,onClick:Xr,type:"button",children:N}),_!==null&&W?m.jsx("button",{"aria-label":v,className:"".concat(er,"__arrow ").concat(er,"__next2-button"),disabled:Ze,onClick:Jr,type:"button",children:_}):null]})}var Fo=function(){return Fo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fo.apply(this,arguments)},A5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function db(t){return"".concat(t,"%")}function __(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=A5(t,["children","className","count","direction","offset","style","wrap"]);return m.jsx("div",Fo({className:n,style:Fo({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l,{children:M.Children.map(e,function(c,h){var d=s&&h===0?db(100*s/r):null;return M.cloneElement(c,Fo(Fo({},c.props),{style:{flexBasis:db(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:d,marginInlineStart:d,marginInlineEnd:0}}))})}))}function R5(t,e,n){return e&&e>t?e:n&&n<t?n:t}function Tc(t,e){return e[0]<=t&&e[1]>=t}function N5(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function kC(t,e){return Tc(t[0],e)||Tc(t[1],e)}function fb(t,e,n){var r=kC(e,t),i=[];if(r){i.push(n);var s=Tc(t[0],e),o=Tc(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function D5(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function O5(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var p=t.dateType;if(!p)throw new Error("dateType is required when date is not an array of two dates");return hb(p,n)}();if(Tc(o,a)&&s.push("".concat(i,"--now")),!e||!D5(e))return s;var l=function(){if(Array.isArray(e))return e;var p=t.valueType;if(!p)throw new Error("valueType is required when value is not an array of two dates");return hb(p,e)}();N5(l,a)?s.push("".concat(i,"--active")):kC(l,a)&&s.push("".concat(i,"--hasActive"));var c=fb(l,a,"".concat(i,"--range"));s.push.apply(s,c);var h=Array.isArray(e)?e:[e];if(r&&h.length===1){var d=r>l[0]?[l[0],r]:[r,l[0]],f=fb(d,a,"".concat(i,"--hover"));s.push.apply(s,f)}return s}function qf(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,h=t.start,d=t.step,f=d===void 0?1:d,p=t.value,y=t.valueType,v=[],b=h;b<=o;b+=f){var _=i(b);v.push(c({classes:O5({date:_,dateType:s,hover:a,value:p,valueType:y}),date:_}))}return m.jsx(__,{className:e,count:r,offset:l,wrap:!0,children:v})}function Kf(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,h=t.minDateTransform,d=t.onClick,f=t.onMouseOver,p=t.style,y=t.tileClassName,v=t.tileContent,b=t.tileDisabled,_=t.view,w=M.useMemo(function(){var I={activeStartDate:e,date:i,view:_};return typeof y=="function"?y(I):y},[e,i,y,_]),E=M.useMemo(function(){var I={activeStartDate:e,date:i,view:_};return typeof v=="function"?v(I):v},[e,i,v,_]);return m.jsxs("button",{className:An(r,w),disabled:c&&h(c)>i||a&&l(a)<i||(b==null?void 0:b({activeStartDate:e,date:i,view:_})),onClick:d?function(I){return d(i,I)}:void 0,onFocus:f?function(){return f(i)}:void 0,onMouseOver:f?function(){return f(i)}:void 0,style:p,type:"button",children:[s?m.jsx("abbr",{"aria-label":s(o,i),children:n}):n,E]})}var $m=function(){return $m=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$m.apply(this,arguments)},M5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},pb="react-calendar__century-view__decades__decade";function L5(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Hf:i,o=M5(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(pb),ka(a).getFullYear()!==r&&c.push("".concat(pb,"--neighboringCentury")),m.jsx(Kf,$m({},o,{classes:c,maxDateTransform:$f,minDateTransform:ns,view:"century",children:TC(l,s,a)}))}var Wm=function(){return Wm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Wm.apply(this,arguments)},gb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function V5(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=gb(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=v5(e),l=a+(r?119:99);return m.jsx(qf,{className:"react-calendar__century-view__decades",dateTransform:ns,dateType:"decade",end:l,hover:n,renderTile:function(c){var h=c.date,d=gb(c,["date"]);return m.jsx(L5,Wm({},o,d,{activeStartDate:e,currentCentury:a,date:h}),h.getTime())},start:a,step:10,value:i,valueType:s})}var Hm=function(){return Hm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hm.apply(this,arguments)};function j5(t){function e(){return m.jsx(V5,Hm({},t))}return m.jsx("div",{className:"react-calendar__century-view",children:e()})}var qm=function(){return qm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qm.apply(this,arguments)},F5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},mb="react-calendar__decade-view__years__year";function U5(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Hf:i,o=F5(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(mb),ns(a).getFullYear()!==r&&c.push("".concat(mb,"--neighboringDecade")),m.jsx(Kf,qm({},o,{classes:c,maxDateTransform:Wf,minDateTransform:Ia,view:"decade",children:s(l,a)}))}var Km=function(){return Km=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Km.apply(this,arguments)},yb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function B5(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=yb(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=_5(e),l=a+(r?11:9);return m.jsx(qf,{className:"react-calendar__decade-view__years",dateTransform:Ia,dateType:"year",end:l,hover:n,renderTile:function(c){var h=c.date,d=yb(c,["date"]);return m.jsx(U5,Km({},o,d,{activeStartDate:e,currentDecade:a,date:h}),h.getTime())},start:a,value:i,valueType:s})}var Gm=function(){return Gm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gm.apply(this,arguments)};function z5(t){function e(){return m.jsx(B5,Gm({},t))}return m.jsx("div",{className:"react-calendar__decade-view",children:e()})}var Ym=function(){return Ym=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ym.apply(this,arguments)},$5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},vb=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},W5="react-calendar__year-view__months__month";function H5(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?f5:r,s=t.formatMonthYear,o=s===void 0?wC:s,a=$5(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return m.jsx(Kf,Ym({},a,{classes:vb(vb([],n,!0),[W5],!1),formatAbbr:o,maxDateTransform:Zc,minDateTransform:oo,view:"year",children:i(c,l)}))}var Qm=function(){return Qm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qm.apply(this,arguments)},_b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function q5(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=_b(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=Ue(e);return m.jsx(qf,{className:"react-calendar__year-view__months",dateTransform:function(c){var h=new Date;return h.setFullYear(l,c,1),oo(h)},dateType:"month",end:a,hover:n,renderTile:function(c){var h=c.date,d=_b(c,["date"]);return m.jsx(H5,Qm({},s,d,{activeStartDate:e,date:h}),h.getTime())},start:o,value:r,valueType:i})}var Xm=function(){return Xm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Xm.apply(this,arguments)};function K5(t){function e(){return m.jsx(q5,Xm({},t))}return m.jsx("div",{className:"react-calendar__year-view",children:e()})}var Jm=function(){return Jm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jm.apply(this,arguments)},G5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},eg="react-calendar__month-view__days__day";function Y5(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?h5:s,a=t.formatLongDate,l=a===void 0?d5:a,c=G5(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=c.date,d=c.locale,f=[];return r&&f.push.apply(f,r),f.push(eg),SC(h,e)&&f.push("".concat(eg,"--weekend")),h.getMonth()!==i&&f.push("".concat(eg,"--neighboringMonth")),m.jsx(Kf,Jm({},c,{classes:f,formatAbbr:l,maxDateTransform:y_,minDateTransform:eu,view:"month",children:o(d,h)}))}var Zm=function(){return Zm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zm.apply(this,arguments)},wb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Q5(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=wb(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=Ue(e),h=ts(e),d=i||s,f=Ec(e,n),p=d?0:f,y=(d?-f:0)+1,v=function(){if(i)return y+6*7-1;var b=_C(e);if(s){var _=new Date;_.setFullYear(c,h,b),_.setHours(0,0,0,0);var w=7-Ec(_,n)-1;return b+w}return b}();return m.jsx(qf,{className:"react-calendar__month-view__days",count:7,dateTransform:function(b){var _=new Date;return _.setFullYear(c,h,b),eu(_)},dateType:"day",hover:r,end:v,renderTile:function(b){var _=b.date,w=wb(b,["date"]);return m.jsx(Y5,Zm({},l,w,{activeStartDate:e,calendarType:n,currentMonthIndex:h,date:_}),_.getTime())},offset:p,start:y,value:o,valueType:a})}var IC="react-calendar__month-view__weekdays",tg="".concat(IC,"__weekday");function X5(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?p5:n,i=t.formatWeekday,s=i===void 0?g5:i,o=t.locale,a=t.onMouseLeave,l=new Date,c=oo(l),h=Ue(c),d=ts(c),f=[],p=1;p<=7;p+=1){var y=new Date(h,d,p-Ec(c,e)),v=s(o,y);f.push(m.jsx("div",{className:An(tg,C5(y)&&"".concat(tg,"--current"),SC(y,e)&&"".concat(tg,"--weekend")),children:m.jsx("abbr",{"aria-label":v,title:v,children:r(o,y).replace(".","")})},p))}return m.jsx(__,{className:IC,count:7,onFocus:a,onMouseOver:a,children:f})}var zd=function(){return zd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zd.apply(this,arguments)},xb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},bb="react-calendar__tile";function J5(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=m.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=xb(t,["date","onClickWeekNumber","weekNumber"]);return m.jsx("button",zd({},a,{className:bb,onClick:function(l){return s(o,i,l)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=xb(t,["date","onClickWeekNumber","weekNumber"]);return m.jsx("div",zd({},a,{className:bb,children:r}))}}function Z5(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=_C(e),h=Ec(e,n),d=c-(7-h);return 1+Math.ceil(d/7)}(),a=function(){for(var c=Ue(e),h=ts(e),d=zf(e),f=[],p=0;p<o;p+=1)f.push(zm(new Date(c,h,d+p*7),n));return f}(),l=a.map(function(c){return w5(c,n)});return m.jsx(__,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,h){var d=a[h];if(!d)throw new Error("date is not defined");return m.jsx(J5,{date:d,onClickWeekNumber:r,weekNumber:c},c)})})}var ey=function(){return ey=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ey.apply(this,arguments)},e3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function t3(t){if(t)for(var e=0,n=Object.entries(t5);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return It.ISO_8601}function n3(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?t3(n):s,a=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,h=t.showWeekNumbers,d=e3(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function f(){return m.jsx(X5,{calendarType:o,formatShortWeekday:a,formatWeekday:l,locale:n,onMouseLeave:r})}function p(){return h?m.jsx(Z5,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function y(){return m.jsx(Q5,ey({calendarType:o},d))}var v="react-calendar__month-view";return m.jsx("div",{className:An(v,h?"".concat(v,"--weekNumbers"):""),children:m.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[p(),m.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[f(),y()]})]})})}var Uo=function(){return Uo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Uo.apply(this,arguments)},eh="react-calendar",Fh=["century","decade","year","month"],r3=["decade","year","month","day"],w_=new Date;w_.setFullYear(1,0,1);w_.setHours(0,0,0,0);var i3=new Date(864e13);function vl(t){return t instanceof Date?t:new Date(t)}function CC(t,e){return Fh.slice(Fh.indexOf(t),Fh.indexOf(e)+1)}function s3(t,e,n){var r=CC(e,n);return r.indexOf(t)!==-1}function x_(t,e,n){return t&&s3(t,e,n)?t:n}function PC(t){var e=Fh.indexOf(t);return r3[e]}function o3(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=vl(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function AC(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=o3(n,e);if(!o)return null;var a=PC(s),l=function(){switch(e){case 0:return Ls(a,o);case 1:return bC(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return R5(l,r,i)}var b_=function(t){return AC(t,0)},RC=function(t){return AC(t,1)},a3=function(t){return[b_,RC].map(function(e){return e(t)})};function NC(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=x_(o,i,n),l=b_({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Ls(a,l)}function l3(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,h=t.view,d=x_(h,l,o),f=e||n;return f?Ls(d,f):NC({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:h||i})}function ng(t){return t&&(!Array.isArray(t)||t.length===1)}function th(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var c3=M.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,h=e.formatDay,d=e.formatLongDate,f=e.formatMonth,p=e.formatMonthYear,y=e.formatShortWeekday,v=e.formatWeekday,b=e.formatYear,_=e.goToRangeStartOnSelect,w=_===void 0?!0:_,E=e.inputRef,I=e.locale,N=e.maxDate,O=N===void 0?i3:N,S=e.maxDetail,T=S===void 0?"month":S,k=e.minDate,P=k===void 0?w_:k,R=e.minDetail,D=R===void 0?"century":R,A=e.navigationAriaLabel,Z=e.navigationAriaLive,Y=e.navigationLabel,G=e.next2AriaLabel,re=e.next2Label,U=e.nextAriaLabel,W=e.nextLabel,H=e.onActiveStartDateChange,ie=e.onChange,X=e.onClickDay,ne=e.onClickDecade,me=e.onClickMonth,be=e.onClickWeekNumber,Ee=e.onClickYear,Ze=e.onDrillDown,yr=e.onDrillUp,Qn=e.onViewChange,Xr=e.prev2AriaLabel,Jr=e.prev2Label,Zr=e.prevAriaLabel,is=e.prevLabel,Be=e.returnValue,vr=Be===void 0?"start":Be,Wt=e.selectRange,co=e.showDoubleView,iu=e.showFixedNumberOfWeeks,Ca=e.showNavigation,Pa=Ca===void 0?!0:Ca,su=e.showNeighboringCentury,ep=e.showNeighboringDecade,uo=e.showNeighboringMonth,Aa=uo===void 0?!0:uo,ou=e.showWeekNumbers,gt=e.tileClassName,bt=e.tileContent,ho=e.tileDisabled,fo=e.value,Ra=e.view,au=M.useState(a),ss=au[0],os=au[1],Na=M.useState(null),Da=Na[0],lu=Na[1],cu=M.useState(Array.isArray(l)?l.map(function(le){return le!==null?vl(le):null}):l!=null?vl(l):null),as=cu[0],uu=cu[1],Oa=M.useState(c),ls=Oa[0],po=Oa[1],mt=r||ss||l3({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:O,maxDetail:T,minDate:P,minDetail:D,value:fo,view:Ra}),Ke=function(){var le=function(){return Wt&&ng(as)?as:fo!==void 0?fo:as}();return le?Array.isArray(le)?le.map(function(xe){return xe!==null?vl(xe):null}):le!==null?vl(le):null:null}(),cs=PC(T),Ie=x_(Ra||ls,D,T),hn=CC(D,T),us=Wt?Da:null,go=hn.indexOf(Ie)<hn.length-1,yt=hn.indexOf(Ie)>0,Ma=M.useCallback(function(le){var xe=function(){switch(vr){case"start":return b_;case"end":return RC;case"range":return a3;default:throw new Error("Invalid returnValue.")}}();return xe({maxDate:O,maxDetail:T,minDate:P,value:le})},[O,T,P,vr]),_r=M.useCallback(function(le,xe){os(le);var ze={action:xe,activeStartDate:le,value:Ke,view:Ie};H&&!th(mt,le)&&H(ze)},[mt,H,Ke,Ie]),Xn=M.useCallback(function(le,xe){var ze=function(){switch(Ie){case"century":return ne;case"decade":return Ee;case"year":return me;case"month":return X;default:throw new Error("Invalid view: ".concat(Ie,"."))}}();ze&&ze(le,xe)},[X,ne,me,Ee,Ie]),La=M.useCallback(function(le,xe){if(go){Xn(le,xe);var ze=hn[hn.indexOf(Ie)+1];if(!ze)throw new Error("Attempted to drill down from the lowest view.");os(le),po(ze);var Zt={action:"drillDown",activeStartDate:le,value:Ke,view:ze};H&&!th(mt,le)&&H(Zt),Qn&&Ie!==ze&&Qn(Zt),Ze&&Ze(Zt)}},[mt,go,H,Xn,Ze,Qn,Ke,Ie,hn]),Va=M.useCallback(function(){if(yt){var le=hn[hn.indexOf(Ie)-1];if(!le)throw new Error("Attempted to drill up from the highest view.");var xe=Ls(le,mt);os(xe),po(le);var ze={action:"drillUp",activeStartDate:xe,value:Ke,view:le};H&&!th(mt,xe)&&H(ze),Qn&&Ie!==le&&Qn(ze),yr&&yr(ze)}},[mt,yt,H,yr,Qn,Ke,Ie,hn]),Jn=M.useCallback(function(le,xe){var ze=Ke;Xn(le,xe);var Zt=Wt&&!ng(ze),Ht;if(Wt)if(Zt)Ht=Ls(cs,le);else{if(!ze)throw new Error("previousValue is required");if(Array.isArray(ze))throw new Error("previousValue must not be an array");Ht=k5(cs,ze,le)}else Ht=Ma(le);var ds=!Wt||Zt||w?NC({maxDate:O,maxDetail:T,minDate:P,minDetail:D,value:Ht,view:Ie}):null;xe.persist(),os(ds),uu(Ht);var du={action:"onChange",activeStartDate:ds,value:Ht,view:Ie};if(H&&!th(mt,ds)&&H(du),ie)if(Wt){var fu=ng(Ht);if(!fu)ie(Ht||null,xe);else if(i){if(Array.isArray(Ht))throw new Error("value must not be an array");ie([Ht||null,null],xe)}}else ie(Ht||null,xe)},[mt,i,Ma,w,O,T,P,D,H,ie,Xn,Wt,Ke,cs,Ie]);function tp(le){lu(le)}function ja(){lu(null)}M.useImperativeHandle(n,function(){return{activeStartDate:mt,drillDown:La,drillUp:Va,onChange:Jn,setActiveStartDate:_r,value:Ke,view:Ie}},[mt,La,Va,Jn,_r,Ke,Ie]);function hs(le){var xe=le?xC(Ie,mt):Ls(Ie,mt),ze=go?La:Jn,Zt={activeStartDate:xe,hover:us,locale:I,maxDate:O,minDate:P,onClick:ze,onMouseOver:Wt?tp:void 0,tileClassName:gt,tileContent:bt,tileDisabled:ho,value:Ke,valueType:cs};switch(Ie){case"century":return m.jsx(j5,Uo({formatYear:b,showNeighboringCentury:su},Zt));case"decade":return m.jsx(z5,Uo({formatYear:b,showNeighboringDecade:ep},Zt));case"year":return m.jsx(K5,Uo({formatMonth:f,formatMonthYear:p},Zt));case"month":return m.jsx(n3,Uo({calendarType:s,formatDay:h,formatLongDate:d,formatShortWeekday:y,formatWeekday:v,onClickWeekNumber:be,onMouseLeave:Wt?ja:void 0,showFixedNumberOfWeeks:typeof iu<"u"?iu:co,showNeighboringMonth:Aa,showWeekNumbers:ou},Zt));default:throw new Error("Invalid view: ".concat(Ie,"."))}}function hu(){return Pa?m.jsx(P5,{activeStartDate:mt,drillUp:Va,formatMonthYear:p,formatYear:b,locale:I,maxDate:O,minDate:P,navigationAriaLabel:A,navigationAriaLive:Z,navigationLabel:Y,next2AriaLabel:G,next2Label:re,nextAriaLabel:U,nextLabel:W,prev2AriaLabel:Xr,prev2Label:Jr,prevAriaLabel:Zr,prevLabel:is,setActiveStartDate:_r,showDoubleView:co,view:Ie,views:hn}):null}var Fa=Array.isArray(Ke)?Ke:[Ke];return m.jsxs("div",{className:An(eh,Wt&&Fa.length===1&&"".concat(eh,"--selectRange"),co&&"".concat(eh,"--doubleView"),o),ref:E,children:[hu(),m.jsxs("div",{className:"".concat(eh,"__viewContainer"),onBlur:Wt?ja:void 0,onMouseLeave:Wt?ja:void 0,children:[hs(),co?hs(!0):null]})]})});function u3(){var o;const{searchResults:t}=Qc(),[e,n]=M.useState({}),[r,i]=M.useState(null);M.useEffect(()=>{const a=t.reduce((l,c)=>{const h=new Date(c.dates.start.localDate).toDateString();return l[h]||(l[h]=[]),l[h].push(c),l},{});n(a)},[t]);const s=a=>{i(a.toDateString())};return m.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-indigo-700 via-purple-800 to-blue-600 text-white px-6 py-8",children:[m.jsxs("div",{className:"absolute inset-0 z-[-1]",children:[m.jsx("div",{className:"absolute w-96 h-96 bg-blue-500 opacity-30 blur-3xl -top-24 -left-16 animate-pulse"}),m.jsx("div",{className:"absolute w-80 h-80 bg-purple-400 opacity-30 blur-3xl bottom-0 right-0 animate-pulse"})]}),m.jsx("div",{className:"mb-8",children:m.jsx(sC,{})}),m.jsxs("div",{className:"text-center mb-10",children:[m.jsxs("h1",{className:"text-5xl font-extrabold tracking-wide",children:["Event ",m.jsx("span",{className:"text-yellow-400",children:"Calendar"})]}),m.jsx("p",{className:"text-lg mt-4 text-gray-200",children:"Click a date to view events or scroll through all events below."})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-black",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Calendar"}),m.jsx(c3,{onChange:s,tileClassName:({date:a})=>{const l=a.toDateString();return e[l]?"bg-blue-500 text-white rounded-full":""},className:"w-full"})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-black overflow-y-auto max-h-[75vh]",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6",children:r?`Events on ${r}`:"Select a Date"}),r&&((o=e[r])==null?void 0:o.length)>0?m.jsx("ul",{className:"space-y-6",children:e[r].map(a=>{var l,c,h;return m.jsxs("li",{className:"flex items-start space-x-4",children:[((l=a.images)==null?void 0:l[0])&&m.jsx("img",{src:a.images[0].url,alt:a.name,className:"w-20 h-20 object-cover rounded-md shadow-lg"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800",children:a.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",a.dates.start.localDate]}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Venue: ",((h=(c=a._embedded)==null?void 0:c.venues[0])==null?void 0:h.name)||"Unknown"]}),m.jsx(lt,{to:`/event/${a.id}`,state:{event:a},className:"text-indigo-600 hover:underline text-sm mt-2 block",children:"View Details"})]})]},a.id)})}):r?m.jsx("p",{className:"text-gray-600",children:"No events found for this date."}):m.jsx("p",{className:"text-gray-600",children:"Select a date to view events."})]})]}),m.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mt-10 text-black",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"All Events"}),Object.keys(e).length>0?Object.keys(e).map(a=>m.jsxs("div",{className:"mb-8",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:a}),m.jsx("ul",{className:"space-y-4",children:e[a].map(l=>{var c,h,d;return m.jsxs("li",{className:"flex items-start space-x-4 border-b pb-4 last:border-none",children:[((c=l.images)==null?void 0:c[0])&&m.jsx("img",{src:l.images[0].url,alt:l.name,className:"w-16 h-16 object-cover rounded-md"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-lg font-medium text-gray-800",children:l.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",l.dates.start.localDate]}),m.jsxs("p",{className:"text-sm text-gray-600",children:["Venue: ",((d=(h=l._embedded)==null?void 0:h.venues[0])==null?void 0:d.name)||"Unknown"]}),m.jsx(lt,{to:`/event/${l.id}`,state:{event:l},className:"text-blue-500 hover:underline text-sm mt-2 block",children:"View Details"})]})]},l.id)})})]},a)):m.jsx("p",{className:"text-gray-600",children:"No events found."})]})]})}function h3(){const t=Qi(),{eventId:e}=t.state||{},[n,r]=M.useState(null),[i,s]=M.useState([]),[o,a]=M.useState(""),[l,c]=M.useState(!0),[h,d]=M.useState({name:"",ticketCount:"",specialRequirements:""}),[f,p]=M.useState(""),[y,v]=M.useState("");M.useEffect(()=>{(async()=>{if(!e){a("No event ID provided!"),c(!1);return}try{const k=Ns().currentUser;if(!k||!k.uid)throw new Error("User is not logged in.");const P=Yt(st,`users/${k.uid}/events`,e),R=await i_(P);if(!R.exists()){a("No such event found!"),c(!1);return}const D=R.data();console.log("Fetched event data:",D),r({id:R.id,...D,totalTickets:D.totalTickets||D.ticketQuantity||0});const A=Gn(st,`users/${k.uid}/events/${e}/attendees`),Y=(await Gs(A)).docs.map(G=>({id:G.id,...G.data()}));console.log("Fetched attendees:",Y),s(Y)}catch(T){console.error("Error fetching event or attendees:",T),a("An error occurred while fetching the event or attendees.")}finally{c(!1)}})()},[e]);const b=S=>{const{name:T,value:k}=S.target;d({...h,[T]:k})},_=async S=>{if(S.preventDefault(),!h.name||!h.ticketCount||isNaN(h.ticketCount)){p("Please provide a valid name and ticket count.");return}const T=parseInt(h.ticketCount);if(T<=0){p("Ticket count must be a positive number.");return}if(n.ticketQuantity<T){p("Not enough tickets available.");return}p(""),v("");try{const P=Ns().currentUser;if(!P||!P.uid)throw new Error("User is not logged in.");const R=Yt(st,`users/${P.uid}/events`,e),D=n.ticketQuantity-T,A=(n.ticketsSold||0)+T;console.log("Updating Firestore with:",{ticketQuantity:D,ticketsSold:A}),await Vd(R,{ticketQuantity:D,ticketsSold:A,totalTickets:n.totalTickets});const Z=Gn(st,`users/${P.uid}/events/${e}/attendees`);await jf(Z,{name:h.name,ticketCount:T,specialRequirements:h.specialRequirements||""}),r(Y=>{const G={...Y,ticketQuantity:D,ticketsSold:A};return console.log("Updated event state:",G),G}),s(Y=>{const G=[...Y,{name:h.name,ticketCount:T,specialRequirements:h.specialRequirements||""}];return console.log("Updated attendees state:",G),G}),v("Tickets purchased successfully!"),d({name:"",ticketCount:"",specialRequirements:""})}catch(k){console.error("Error processing ticket purchase:",k),p("An error occurred while purchasing tickets. Please try again.")}},w=async(S,T)=>{try{const P=Ns().currentUser;if(!P||!P.uid)throw new Error("User is not logged in.");const R=Yt(st,`users/${P.uid}/events/${e}/attendees`,S);await Yc(R);const D=Yt(st,`users/${P.uid}/events`,e),A=n.ticketQuantity+T,Z=n.ticketsSold-T;await Vd(D,{ticketQuantity:A,ticketsSold:Z,totalTickets:n.totalTickets}),r(Y=>{const G={...Y,ticketQuantity:A,ticketsSold:Z};return console.log("Updated event state after removal:",G),G}),s(Y=>Y.filter(G=>G.id!==S))}catch(k){console.error("Error removing attendee:",k),a("An error occurred while removing the attendee.")}},E=(n==null?void 0:n.totalTickets)||0,I=(n==null?void 0:n.ticketQuantity)||0,N=E>0?Math.round((E-I)/E*100):0;console.log(`Tickets Left: ${I}, Total Tickets: ${E}, Progress: ${N}`);const O=N>50?"green":N>20?"orange":"red";return m.jsx("div",{className:"container mx-auto mt-10 px-4 sm:px-6 md:px-8 bg-gray-900 text-white",children:o?m.jsx("p",{className:"text-red-500 text-center",children:o}):l?m.jsx("p",{className:"text-gray-500 text-center",children:"Loading event and attendees..."}):n?m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-semibold mb-6 text-center",children:["Attendees for ",n.eventName]}),m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("p",{children:["Tickets Sold: ",E-I," of ",E]}),m.jsx("div",{className:"w-full bg-gray-700 rounded-full h-6 mt-4 overflow-hidden",children:m.jsxs("div",{className:"h-6 text-sm text-center text-white",style:{width:`${N}%`,backgroundColor:O},children:[N,"% Sold"]})})]}),m.jsxs("form",{onSubmit:_,className:"space-y-4 max-w-xl mx-auto bg-gray-800 p-6 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Purchase Tickets"}),f&&m.jsx("p",{className:"text-red-500",children:f}),y&&m.jsx("p",{className:"text-green-500",children:y}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Name"}),m.jsx("input",{type:"text",name:"name",value:h.name,onChange:b,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Number of Tickets"}),m.jsx("input",{type:"number",name:"ticketCount",value:h.ticketCount,onChange:b,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-300",children:"Special Requirements"}),m.jsx("textarea",{name:"specialRequirements",value:h.specialRequirements,onChange:b,className:"w-full p-3 mt-2 bg-gray-700 text-white border border-gray-600 rounded"})]}),m.jsx("button",{type:"submit",className:"w-full py-3 mt-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Purchase Tickets"})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Attendees List"}),i.length>0?m.jsx("ul",{className:"space-y-4",children:i.map(S=>m.jsxs("li",{className:"flex justify-between items-center bg-gray-800 p-4 rounded-lg mb-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold",children:S.name}),m.jsxs("p",{className:"text-sm text-gray-400",children:["Tickets: ",S.ticketCount]}),S.specialRequirements&&m.jsxs("p",{className:"text-sm text-gray-400",children:["Special Requirements:"," ",S.specialRequirements]})]}),m.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600",onClick:()=>w(S.id,S.ticketCount),children:"Remove"})]},S.id))}):m.jsx("p",{className:"text-gray-500",children:"No attendees registered yet."})]})]}):m.jsx("p",{className:"text-gray-500 text-center",children:"No event details available."})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function tu(t){return t+.5|0}const _i=(t,e,n)=>Math.max(Math.min(t,n),e);function _l(t){return _i(tu(t*2.55),0,255)}function Mi(t){return _i(tu(t*255),0,255)}function Ir(t){return _i(tu(t/2.55)/100,0,1)}function Eb(t){return _i(tu(t*100),0,100)}const kn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ty=[..."0123456789ABCDEF"],d3=t=>ty[t&15],f3=t=>ty[(t&240)>>4]+ty[t&15],nh=t=>(t&240)>>4===(t&15),p3=t=>nh(t.r)&&nh(t.g)&&nh(t.b)&&nh(t.a);function g3(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&kn[t[1]]*17,g:255&kn[t[2]]*17,b:255&kn[t[3]]*17,a:e===5?kn[t[4]]*17:255}:(e===7||e===9)&&(n={r:kn[t[1]]<<4|kn[t[2]],g:kn[t[3]]<<4|kn[t[4]],b:kn[t[5]]<<4|kn[t[6]],a:e===9?kn[t[7]]<<4|kn[t[8]]:255})),n}const m3=(t,e)=>t<255?e(t):"";function y3(t){var e=p3(t)?d3:f3;return t?"#"+e(t.r)+e(t.g)+e(t.b)+m3(t.a,e):void 0}const v3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function DC(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function _3(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function w3(t,e,n){const r=DC(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function x3(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function E_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=x3(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function T_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Mi)}function S_(t,e,n){return T_(DC,t,e,n)}function b3(t,e,n){return T_(w3,t,e,n)}function E3(t,e,n){return T_(_3,t,e,n)}function OC(t){return(t%360+360)%360}function T3(t){const e=v3.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?_l(+e[5]):Mi(+e[5]));const i=OC(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=b3(i,s,o):e[1]==="hsv"?r=E3(i,s,o):r=S_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function S3(t,e){var n=E_(t);n[0]=OC(n[0]+e),n=S_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function k3(t){if(!t)return;const e=E_(t),n=e[0],r=Eb(e[1]),i=Eb(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ir(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Tb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Sb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function I3(){const t={},e=Object.keys(Sb),n=Object.keys(Tb);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Tb[s]);s=parseInt(Sb[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let rh;function C3(t){rh||(rh=I3(),rh.transparent=[0,0,0,0]);const e=rh[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const P3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function A3(t){const e=P3.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?_l(o):_i(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?_l(r):_i(r,0,255)),i=255&(e[4]?_l(i):_i(i,0,255)),s=255&(e[6]?_l(s):_i(s,0,255)),{r,g:i,b:s,a:n}}}function R3(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ir(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const rg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wo=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function N3(t,e,n){const r=wo(Ir(t.r)),i=wo(Ir(t.g)),s=wo(Ir(t.b));return{r:Mi(rg(r+n*(wo(Ir(e.r))-r))),g:Mi(rg(i+n*(wo(Ir(e.g))-i))),b:Mi(rg(s+n*(wo(Ir(e.b))-s))),a:t.a+n*(e.a-t.a)}}function ih(t,e,n){if(t){let r=E_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=S_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function MC(t,e){return t&&Object.assign(e||{},t)}function kb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Mi(t[3]))):(e=MC(t,{r:0,g:0,b:0,a:1}),e.a=Mi(e.a)),e}function D3(t){return t.charAt(0)==="r"?A3(t):T3(t)}class Sc{constructor(e){if(e instanceof Sc)return e;const n=typeof e;let r;n==="object"?r=kb(e):n==="string"&&(r=g3(e)||C3(e)||D3(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=MC(this._rgb);return e&&(e.a=Ir(e.a)),e}set rgb(e){this._rgb=kb(e)}rgbString(){return this._valid?R3(this._rgb):void 0}hexString(){return this._valid?y3(this._rgb):void 0}hslString(){return this._valid?k3(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=N3(this._rgb,e._rgb,n)),this}clone(){return new Sc(this.rgb)}alpha(e){return this._rgb.a=Mi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=tu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ih(this._rgb,2,e),this}darken(e){return ih(this._rgb,2,-e),this}saturate(e){return ih(this._rgb,1,e),this}desaturate(e){return ih(this._rgb,1,-e),this}rotate(e){return S3(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function br(){}const O3=(()=>{let t=0;return()=>t++})();function _e(t){return t==null}function je(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function fe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Qe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function pn(t,e){return Qe(t)?t:e}function ae(t,e){return typeof t>"u"?e:t}const M3=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,LC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Pe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Se(t,e,n,r){let i,s,o;if(je(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(fe(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function $d(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Wd(t){if(je(t))return t.map(Wd);if(fe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Wd(t[n[i]]);return e}return t}function VC(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function L3(t,e,n,r){if(!VC(t))return;const i=e[t],s=n[t];fe(i)&&fe(s)?kc(i,s,r):e[t]=Wd(s)}function kc(t,e,n){const r=je(e)?e:[e],i=r.length;if(!fe(t))return t;n=n||{};const s=n.merger||L3;let o;for(let a=0;a<i;++a){if(o=r[a],!fe(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Bl(t,e){return kc(t,e,{merger:V3})}function V3(t,e,n){if(!VC(t))return;const r=e[t],i=n[t];fe(r)&&fe(i)?Bl(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Wd(i))}const Ib={"":t=>t,x:t=>t.x,y:t=>t.y};function j3(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function F3(t){const e=j3(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Wi(t,e){return(Ib[e]||(Ib[e]=F3(e)))(t)}function k_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ic=t=>typeof t<"u",Hi=t=>typeof t=="function",Cb=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function U3(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Me=Math.PI,Oe=2*Me,B3=Oe+Me,Hd=Number.POSITIVE_INFINITY,z3=Me/180,nt=Me/2,ms=Me/4,Pb=Me*2/3,wi=Math.log10,fr=Math.sign;function zl(t,e,n){return Math.abs(t-e)<n}function Ab(t){const e=Math.round(t);t=zl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(wi(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function $3(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function fa(t){return!isNaN(parseFloat(t))&&isFinite(t)}function W3(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function jC(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Bn(t){return t*(Me/180)}function I_(t){return t*(180/Me)}function Rb(t){if(!Qe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function FC(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Me&&(s+=Oe),{angle:s,distance:i}}function ny(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function H3(t,e){return(t-e+B3)%Oe-Me}function mn(t){return(t%Oe+Oe)%Oe}function Cc(t,e,n,r){const i=mn(t),s=mn(e),o=mn(n),a=mn(s-i),l=mn(o-i),c=mn(i-s),h=mn(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function wt(t,e,n){return Math.max(e,Math.min(n,t))}function q3(t){return wt(t,-32768,32767)}function Dr(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function C_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Or=(t,e,n,r)=>C_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),K3=(t,e,n)=>C_(t,n,r=>t[r][e]>=n);function G3(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const UC=["push","pop","shift","splice","unshift"];function Y3(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),UC.forEach(n=>{const r="_onData"+k_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Nb(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(UC.forEach(s=>{delete t[s]}),delete t._chartjs)}function BC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const zC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $C(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,zC.call(window,()=>{r=!1,t.apply(e,n)}))}}function Q3(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const P_=t=>t==="start"?"left":t==="end"?"right":"center",Lt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,X3=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function WC(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:d,maxDefined:f}=o.getUserBounds();d&&(i=wt(Math.min(Or(a,l,c).lo,n?r:Or(e,l,o.getPixelForValue(c)).lo),0,r-1)),f?s=wt(Math.max(Or(a,o.axis,h,!0).hi+1,n?0:Or(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function HC(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const sh=t=>t===0||t===1,Db=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Oe/n)),Ob=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Oe/n)+1,$l={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*nt)+1,easeOutSine:t=>Math.sin(t*nt),easeInOutSine:t=>-.5*(Math.cos(Me*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>sh(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>sh(t)?t:Db(t,.075,.3),easeOutElastic:t=>sh(t)?t:Ob(t,.075,.3),easeInOutElastic(t){return sh(t)?t:t<.5?.5*Db(t*2,.1125,.45):.5+.5*Ob(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$l.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$l.easeInBounce(t*2)*.5:$l.easeOutBounce(t*2-1)*.5+.5};function A_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Mb(t){return A_(t)?t:new Sc(t)}function ig(t){return A_(t)?t:new Sc(t).saturate(.5).darken(.1).hexString()}const J3=["x","y","borderWidth","radius","tension"],Z3=["color","borderColor","backgroundColor"];function eU(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Z3},numbers:{type:"number",properties:J3}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function tU(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Lb=new Map;function nU(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Lb.get(n);return r||(r=new Intl.NumberFormat(t,e),Lb.set(n,r)),r}function nu(t,e,n){return nU(e,n).format(t)}const qC={values(t){return je(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=rU(t,n)}const o=wi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),nu(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(wi(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?qC.numeric.call(this,t,e,n):""}};function rU(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Gf={formatters:qC};function iU(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Qs=Object.create(null),ry=Object.create(null);function Wl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function sg(t,e,n){return typeof e=="string"?kc(Wl(t,e),n):kc(Wl(t,""),e)}class sU{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>ig(i.backgroundColor),this.hoverBorderColor=(r,i)=>ig(i.borderColor),this.hoverColor=(r,i)=>ig(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return sg(this,e,n)}get(e){return Wl(this,e)}describe(e,n){return sg(ry,e,n)}override(e,n){return sg(Qs,e,n)}route(e,n,r,i){const s=Wl(this,e),o=Wl(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return fe(l)?Object.assign({},c,l):ae(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Fe=new sU({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[eU,tU,iU]);function oU(t){return!t||_e(t.size)||_e(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function qd(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function aU(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!je(d))o=qd(t,i,s,o,d);else if(je(d))for(c=0,h=d.length;c<h;c++)f=d[c],f!=null&&!je(f)&&(o=qd(t,i,s,o,f));t.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[s[l]];s.splice(0,p)}return o}function ys(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Vb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function iy(t,e,n,r){KC(t,e,n,r,null)}function KC(t,e,n,r,i){let s,o,a,l,c,h,d,f;const p=e.pointStyle,y=e.rotation,v=e.radius;let b=(y||0)*z3;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(b),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,v,0,0,Oe):t.arc(n,r,v,0,Oe),t.closePath();break;case"triangle":h=i?i/2:v,t.moveTo(n+Math.sin(b)*h,r-Math.cos(b)*v),b+=Pb,t.lineTo(n+Math.sin(b)*h,r-Math.cos(b)*v),b+=Pb,t.lineTo(n+Math.sin(b)*h,r-Math.cos(b)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(b+ms)*l,d=Math.cos(b+ms)*(i?i/2-c:l),a=Math.sin(b+ms)*l,f=Math.sin(b+ms)*(i?i/2-c:l),t.arc(n-d,r-a,c,b-Me,b-nt),t.arc(n+f,r-o,c,b-nt,b),t.arc(n+d,r+a,c,b,b+nt),t.arc(n-f,r+o,c,b+nt,b+Me),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}b+=ms;case"rectRot":d=Math.cos(b)*(i?i/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,f=Math.sin(b)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":b+=ms;case"cross":d=Math.cos(b)*(i?i/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,f=Math.sin(b)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(b)*(i?i/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,f=Math.sin(b)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),b+=ms,d=Math.cos(b)*(i?i/2:v),o=Math.cos(b)*v,a=Math.sin(b)*v,f=Math.sin(b)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(b)*v,a=Math.sin(b)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(b)*(i?i/2:v),r+Math.sin(b)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Mr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qf(t){t.restore()}function lU(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function cU(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function uU(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_e(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function hU(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function dU(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xs(t,e,n,r,i,s={}){const o=je(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,uU(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&dU(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_e(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),hU(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Pc(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Me,Me,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Me,nt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,nt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-nt,!0),t.lineTo(n+o.topLeft,r)}const fU=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pU=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gU(t,e){const n=(""+t).match(fU);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const mU=t=>+t||0;function R_(t,e){const n={},r=fe(e),i=r?Object.keys(e):e,s=fe(t)?r?o=>ae(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=mU(s(o));return n}function GC(t){return R_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Vs(t){return R_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function $t(t){const e=GC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function dt(t,e){t=t||{},e=e||Fe.font;let n=ae(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ae(t.style,e.style);r&&!(""+r).match(pU)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ae(t.family,e.family),lineHeight:gU(ae(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ae(t.weight,e.weight),string:""};return i.string=oU(i),i}function wl(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function yU(t,e,n){const{min:r,max:i}=t,s=LC(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function rs(t,e){return Object.assign(Object.create(t),e)}function N_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=JC("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>N_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return QC(a,l,()=>SU(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Fb(a).includes(l)},ownKeys(a){return Fb(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function pa(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:YC(t,r),setContext:s=>pa(t,s,n,r),override:s=>pa(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return QC(s,o,()=>_U(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function YC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Hi(n)?n:()=>n,isIndexable:Hi(r)?r:()=>r}}const vU=(t,e)=>t?t+k_(e):e,D_=(t,e)=>fe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function QC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function _U(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Hi(a)&&o.isScriptable(e)&&(a=wU(e,a,t,n)),je(a)&&a.length&&(a=xU(e,a,t,o.isIndexable)),D_(e,a)&&(a=pa(a,i,s&&s[e],o)),a}function wU(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),D_(t,l)&&(l=O_(i._scopes,i,t,l)),l}function xU(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(fe(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=O_(c,i,t,h);e.push(pa(d,s,o&&o[t],a))}}return e}function XC(t,e,n){return Hi(t)?t(e,n):t}const bU=(t,e)=>t===!0?e:typeof t=="string"?Wi(e,t):void 0;function EU(t,e,n,r,i){for(const s of e){const o=bU(n,s);if(o){t.add(o);const a=XC(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function O_(t,e,n,r){const i=e._rootScopes,s=XC(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=jb(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=jb(a,o,s,l,r),l===null)?!1:N_(Array.from(a),[""],i,s,()=>TU(e,n,r))}function jb(t,e,n,r,i){for(;n;)n=EU(t,e,n,r,i);return n}function TU(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return je(i)&&fe(n)?n:i||{}}function SU(t,e,n,r){let i;for(const s of e)if(i=JC(vU(s,t),n),typeof i<"u")return D_(t,i)?O_(n,r,t,i):i}function JC(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Fb(t){let e=t._keys;return e||(e=t._keys=kU(t._scopes)),e}function kU(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function ZC(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,h;for(a=0,l=r;a<l;++a)c=a+n,h=e[c],o[a]={r:i.parse(Wi(h,s),c)};return o}const IU=Number.EPSILON||1e-14,ga=(t,e)=>e<t.length&&!t[e].skip&&t[e],eP=t=>t==="x"?"y":"x";function CU(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=ny(s,i),l=ny(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,f=r*h;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function PU(t,e,n){const r=t.length;let i,s,o,a,l,c=ga(t,0);for(let h=0;h<r-1;++h)if(l=c,c=ga(t,h+1),!(!l||!c)){if(zl(e[h],0,IU)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function AU(t,e,n="x"){const r=eP(n),i=t.length;let s,o,a,l=ga(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ga(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=d+s*e[c])}}function RU(t,e="x"){const n=eP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ga(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ga(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?fr(i[o-1])!==fr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}PU(t,i,s),AU(t,s,e)}function oh(t,e,n){return Math.max(Math.min(t,n),e)}function NU(t,e){let n,r,i,s,o,a=Mr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Mr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=oh(i.cp1x,e.left,e.right),i.cp1y=oh(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=oh(i.cp2x,e.left,e.right),i.cp2y=oh(i.cp2y,e.top,e.bottom)))}function DU(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")RU(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=CU(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&NU(t,n)}function M_(){return typeof window<"u"&&typeof document<"u"}function L_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Kd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Xf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function OU(t,e){return Xf(t).getPropertyValue(e)}const MU=["top","right","bottom","left"];function js(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=MU[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const LU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function VU(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(LU(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Es(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Xf(n),s=i.boxSizing==="border-box",o=js(i,"padding"),a=js(i,"border","width"),{x:l,y:c,box:h}=VU(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-f)/y*n.height/r)}}function jU(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&L_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Xf(s),l=js(a,"border","width"),c=js(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Kd(a.maxWidth,s,"clientWidth"),i=Kd(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Hd,maxHeight:i||Hd}}const ah=t=>Math.round(t*10)/10;function FU(t,e,n,r){const i=Xf(t),s=js(i,"margin"),o=Kd(i.maxWidth,t,"clientWidth")||Hd,a=Kd(i.maxHeight,t,"clientHeight")||Hd,l=jU(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const f=js(i,"border","width"),p=js(i,"padding");c-=p.width+f.width,h-=p.height+f.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=ah(Math.min(c,o,l.maxWidth)),h=ah(Math.min(h,a,l.maxHeight)),c&&!h&&(h=ah(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=ah(Math.floor(h*r))),{width:c,height:h}}function Ub(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const UU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};M_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Bb(t,e){const n=OU(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ts(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function BU(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function zU(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ts(t,i,n),a=Ts(i,s,n),l=Ts(s,e,n),c=Ts(o,a,n),h=Ts(a,l,n);return Ts(c,h,n)}const $U=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},WU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Xo(t,e,n){return t?$U(e,n):WU()}function tP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function nP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function rP(t){return t==="angle"?{between:Cc,compare:H3,normalize:mn}:{between:Dr,compare:(e,n)=>e-n,normalize:e=>e}}function zb({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function HU(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=rP(r),l=e.length;let{start:c,end:h,loop:d}=t,f,p;if(d){for(c+=l,h+=l,f=0,p=l;f<p&&o(a(e[c%l][r]),i,s);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function iP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=rP(r),{start:h,end:d,loop:f,style:p}=HU(t,e,n),y=[];let v=!1,b=null,_,w,E;const I=()=>l(i,E,_)&&a(i,E)!==0,N=()=>a(s,_)===0||l(s,E,_),O=()=>v||I(),S=()=>!v||N();for(let T=h,k=h;T<=d;++T)w=e[T%o],!w.skip&&(_=c(w[r]),_!==E&&(v=l(_,i,s),b===null&&O()&&(b=a(_,i)===0?T:k),b!==null&&S()&&(y.push(zb({start:b,end:T,loop:f,count:o,style:p})),b=null),k=T,E=_));return b!==null&&y.push(zb({start:b,end:d,loop:f,count:o,style:p})),y}function sP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=iP(r[i],t.points,e);s.length&&n.push(...s)}return n}function qU(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function KU(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function GU(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=qU(n,i,s,r);if(r===!0)return $b(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return $b(t,KU(n,o,l,c),n,e)}function $b(t,e,n,r){return!r||!r.setContext||!n?e:YU(t,e,n,r)}function YU(t,e,n,r){const i=t._chart.getContext(),s=Wb(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,f=d;function p(y,v,b,_){const w=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=w;for(;n[v%l].skip;)v+=w;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:b,style:_}),h=_,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],b;for(f=d+1;f<=y.end;f++){const _=n[f%l];b=Wb(r.setContext(rs(i,{type:"segment",p0:v,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),QU(b,h)&&p(d,f-1,y.loop,h),v=_,h=b}d<f-1&&p(d,f-1,y.loop,h)}return c}function Wb(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function QU(t,e){if(!e)return!1;const n=[],r=function(i,s){return A_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class XU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=zC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Er=new XU;const Hb="transparent",JU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Mb(t||Hb),i=r.valid&&Mb(e||Hb);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class ZU{constructor(e,n,r,i){const s=n[r];i=wl([e.to,i,s,e.from]);const o=wl([e.from,s,i]);this._active=!0,this._fn=e.fn||JU[e.type||typeof o],this._easing=$l[e.easing]||$l.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=wl([e.to,n,i,e.from]),this._from=wl([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class oP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!fe(e))return;const n=Object.keys(Fe.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!fe(s))return;const o={};for(const a of n)o[a]=s[a];(je(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=tB(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&eB(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}s[c]=d=new ZU(f,e,c,h),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Er.add(this._chart,r),!0}}function eB(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function tB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function qb(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function nB(t,e,n){if(n===!1)return!1;const r=qb(t,n),i=qb(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function rB(t){let e,n,r,i;return fe(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function aP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Kb(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],Qe(c)&&(s||e===0||fr(e)===fr(c))&&(e+=c)}return!h&&!r.all?0:e}function iB(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function og(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function sB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function oB(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function aB(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Gb(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Yb(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=sB(s,o,r),d=e.length;let f;for(let p=0;p<d;++p){const y=e[p],{[l]:v,[c]:b}=y,_=y._stacks||(y._stacks={});f=_[c]=aB(i,h,v),f[a]=b,f._top=Gb(f,o,!0,r.type),f._bottom=Gb(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[a]=b}}function ag(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function lB(t,e){return rs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function cB(t,e,n){return rs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function rl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const lg=t=>t==="reset"||t==="none",Qb=(t,e)=>e?t:Object.assign({},t),uB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:aP(n,!0),values:null};class Wn{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=og(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,p,y)=>d==="x"?f:d==="r"?y:p,s=n.xAxisID=ae(r.xAxisID,ag(e,"x")),o=n.yAxisID=ae(r.yAxisID,ag(e,"y")),a=n.rAxisID=ae(r.rAxisID,ag(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Nb(this._data,this),e._stacked&&rl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(fe(n)){const i=this._cachedMeta;this._data=iB(n,i)}else if(r!==n){if(r){Nb(r,this);const i=this._cachedMeta;rl(i),i._parsed=[]}n&&Object.isExtensible(n)&&Y3(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=og(n.vScale,n),n.stack!==r.stack&&(i=!0,rl(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Yb(this,n._parsed),n._stacked=og(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{je(i[e])?f=this.parseArrayData(r,i,e,n):fe(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=f[h],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&Yb(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(i);let f,p,y;for(f=0,p=i;f<p;++f)y=f+r,d[f]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+r,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,f,p;for(h=0,d=i;h<d;++h)f=h+r,p=n[f],c[h]={x:s.parse(Wi(p,a),f),y:o.parse(Wi(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:aP(i,!0),values:n._stacks[e.axis]._visualValues};return Kb(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=Kb(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=uB(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=oB(a);let f,p;function y(){p=i[f];const v=p[a.axis];return!Qe(p[e.axis])||h>v||d<v}for(f=0;f<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Qe(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=rB(ae(this.options.clip,nB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=cB(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=lB(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Ic(r);if(a)return Qb(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),p=Object.keys(Fe.elements[e]),y=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(f,p,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(Qb(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,r,n))}const c=new oP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||lg(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){lg(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!lg(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&rl(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}$(Wn,"defaults",{}),$(Wn,"datasetElementType",null),$(Wn,"dataElementType",null);function hB(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=BC(r.sort((i,s)=>i-s))}return t._cache.$bar}function dB(t){const e=t.iScale,n=hB(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Ic(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function fB(t,e,n,r){const i=n.barThickness;let s,o;return _e(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function pB(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function gB(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function lP(t,e,n,r){return je(t)?gB(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Xb(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,d,f;for(c=n,h=n+r;c<h;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(lP(f,d,s,c));return l}function cg(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function mB(t,e,n){return t!==0?fr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function yB(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function vB(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=yB(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[Jb(h,o,a,l)]=!0,i=c)),s[Jb(i,o,a,l)]=!0,t.borderSkipped=s}function Jb(t,e,n,r){return r?(t=_B(t,e,n),t=Zb(t,n,e)):t=Zb(t,e,n),t}function _B(t,e,n){return t===e?n:t===n?e:t}function Zb(t,e,n){return t==="start"?e:t==="end"?n:t}function wB(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Hl extends Wn{parsePrimitiveData(e,n,r,i){return Xb(e,n,r,i)}parseArrayData(e,n,r,i){return Xb(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,d=[];let f,p,y,v;for(f=r,p=r+i;f<p;++f)v=n[f],y={},y[s.axis]=s.parse(Wi(v,c),f),d.push(lP(Wi(v,h),y,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=cg(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let p=n;p<n+r;p++){const y=this.getParsed(p),v=s||_e(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),b=this._calculateBarIndexPixels(p,h),_=(y._stacks||{})[a.axis],w={horizontal:c,base:v.base,enableBorderRadius:!_||cg(y._custom)||o===_._top||o===_._bottom,x:c?v.head:b.center,y:c?b.center:v.head,height:c?b.size:Math.abs(v.size),width:c?Math.abs(v.size):b.size};f&&(w.options=d||this.resolveDataElementOptions(p,e[p].active?"active":i));const E=w.options||e[p].options;vB(w,E,_,o),wB(w,E,h.ratio),this.updateElement(e[p],p,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=h=>{const d=h._parsed.find(p=>p[r.axis]===l),f=d&&d[h.vScale.axis];if(_e(f)||isNaN(f))return!0};for(const h of i)if(!(n!==void 0&&c(h))&&((s===!1||o.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&o.push(h.stack),h.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||dB(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=cg(c);let d=l[n.axis],f=0,p=r?this.applyStack(n,l,r):d,y,v;p!==d&&(f=p-d,p=d),h&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&fr(d)!==fr(c.barEnd)&&(f=0),f+=d);const b=!_e(s)&&!h?s:f;let _=n.getPixelForValue(b);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(f+p):y=_,v=y-_,Math.abs(v)<o){v=mB(v,n,a)*o,d===a&&(_-=v/2);const w=n.getPixelForDecimal(0),E=n.getPixelForDecimal(1),I=Math.min(w,E),N=Math.max(w,E);_=Math.max(Math.min(_,N),I),y=_+v,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(_))}if(_===n.getPixelForValue(a)){const w=fr(v)*n.getLineWidthForValue(a)/2;_+=w,v-=w}return{size:v,base:_,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ae(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?pB(e,n,i,c):fB(e,n,i,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}$(Hl,"id","bar"),$(Hl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),$(Hl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Uh extends Wn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ae(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ae(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),h=o.axis,d=a.axis;for(let f=n;f<n+r;f++){const p=e[f],y=!s&&this.getParsed(f),v={},b=v[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(y[h]),_=v[d]=s?a.getBasePixel():a.getPixelForValue(y[d]);v.skip=isNaN(b)||isNaN(_),c&&(v.options=l||this.resolveDataElementOptions(f,p.active?"active":i),s&&(v.options.radius=0)),this.updateElement(p,f,v,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ae(r&&r._custom,s),i}}$(Uh,"id","bubble"),$(Uh,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),$(Uh,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function xB(t,e,n){let r=1,i=1,s=0,o=0;if(e<Oe){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(E,I,N)=>Cc(E,a,l,!0)?1:Math.max(I,I*n,N,N*n),y=(E,I,N)=>Cc(E,a,l,!0)?-1:Math.min(I,I*n,N,N*n),v=p(0,c,d),b=p(nt,h,f),_=y(Me,c,d),w=y(Me+nt,h,f);r=(v-_)/2,i=(b-w)/2,s=-(v+_)/2,o=-(b+w)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Ps extends Wn{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(fe(r[e])){const{key:l="value"}=this._parsing;s=c=>+Wi(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Bn(this.options.rotation-90)}_getCircumference(){return Bn(this.options.circumference)}_getRotationExtents(){let e=Oe,n=-Oe;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(M3(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:y,offsetY:v}=xB(d,h,l),b=(r.width-o)/f,_=(r.height-o)/p,w=Math.max(Math.min(b,_)/2,0),E=LC(this.options.radius,w),I=Math.max(E*l,0),N=(E-I)/this._getVisibleDatasetWeightTotal();this.offsetX=y*E,this.offsetY=v*E,i.total=this.calculateTotal(),this.outerRadius=E-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Oe)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,p=f?0:this.innerRadius,y=f?0:this.outerRadius,{sharedOptions:v,includeOptions:b}=this._getSharedOptions(n,i);let _=this._getRotation(),w;for(w=0;w<n;++w)_+=this._circumference(w,s);for(w=n;w<n+r;++w){const E=this._circumference(w,s),I=e[w],N={x:h+this.offsetX,y:d+this.offsetY,startAngle:_,endAngle:_+E,circumference:E,outerRadius:y,innerRadius:p};b&&(N.options=v||this.resolveDataElementOptions(w,I.active?"active":i)),_+=E,this.updateElement(I,w,N,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Oe*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=nu(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ae(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}$(Ps,"id","doughnut"),$(Ps,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),$(Ps,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),$(Ps,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Bh extends Wn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=WC(n,i,o);this._drawStart=a,this._drawCount=l,HC(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=a.axis,{spanGaps:y,segment:v}=this.options,b=fa(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none",w=n+r,E=e.length;let I=n>0&&this.getParsed(n-1);for(let N=0;N<E;++N){const O=e[N],S=_?O:{};if(N<n||N>=w){S.skip=!0;continue}const T=this.getParsed(N),k=_e(T[p]),P=S[f]=o.getPixelForValue(T[f],N),R=S[p]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[p],N);S.skip=isNaN(P)||isNaN(R)||k,S.stop=N>0&&Math.abs(T[f]-I[f])>b,v&&(S.parsed=T,S.raw=c.data[N]),d&&(S.options=h||this.resolveDataElementOptions(N,O.active?"active":i)),_||this.updateElement(O,N,S,i),I=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}$(Bh,"id","line"),$(Bh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),$(Bh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ql extends Wn{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=nu(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return ZC.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Me;let p=f,y;const v=360/this.countVisibleElements();for(y=0;y<n;++y)p+=this._computeAngle(y,i,v);for(y=n;y<n+r;y++){const b=e[y];let _=p,w=p+this._computeAngle(y,i,v),E=o.getDataVisibility(y)?c.getDistanceFromCenterForValue(this.getParsed(y).r):0;p=w,s&&(l.animateScale&&(E=0),l.animateRotate&&(_=w=f));const I={x:h,y:d,innerRadius:0,outerRadius:E,startAngle:_,endAngle:w,options:this.resolveDataElementOptions(y,b.active?"active":i)};this.updateElement(b,y,I,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?Bn(this.resolveDataElementOptions(e,n).angle||r):0}}$(ql,"id","polarArea"),$(ql,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),$(ql,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class sy extends Ps{}$(sy,"id","pie"),$(sy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class zh extends Wn{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return ZC.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=s.getPointPositionForValue(a,this.getParsed(a).r),d=o?s.xCenter:h.x,f=o?s.yCenter:h.y,p={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,p,i)}}}$(zh,"id","radar"),$(zh,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),$(zh,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class $h extends Wn{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=WC(n,r,i);if(this._drawStart=s,this._drawCount=o,HC(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,i),d=this.getSharedOptions(h),f=this.includeOptions(i,d),p=o.axis,y=a.axis,{spanGaps:v,segment:b}=this.options,_=fa(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none";let E=n>0&&this.getParsed(n-1);for(let I=n;I<n+r;++I){const N=e[I],O=this.getParsed(I),S=w?N:{},T=_e(O[y]),k=S[p]=o.getPixelForValue(O[p],I),P=S[y]=s||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[y],I);S.skip=isNaN(k)||isNaN(P)||T,S.stop=I>0&&Math.abs(O[p]-E[p])>_,b&&(S.parsed=O,S.raw=c.data[I]),f&&(S.options=d||this.resolveDataElementOptions(I,N.active?"active":i)),w||this.updateElement(N,I,S,i),E=O}this.updateSharedOptions(d,i,h)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}$($h,"id","scatter"),$($h,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),$($h,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var bB=Object.freeze({__proto__:null,BarController:Hl,BubbleController:Uh,DoughnutController:Ps,LineController:Bh,PieController:sy,PolarAreaController:ql,RadarController:zh,ScatterController:$h});function vs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class V_{constructor(e){$(this,"options");this.options=e||{}}static override(e){Object.assign(V_.prototype,e)}init(){}formats(){return vs()}parse(){return vs()}format(){return vs()}add(){return vs()}diff(){return vs()}startOf(){return vs()}endOf(){return vs()}}var EB={_date:V_};function TB(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?K3:Or;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const d=l(s,e,n-h),f=l(s,e,n+h);return{lo:d.lo,hi:f.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function ru(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:f}=TB(s[a],e,o,i);for(let p=d;p<=f;++p){const y=h[p];y.skip||r(y,c,p)}}}function SB(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function ug(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||ru(t,n,e,function(a,l,c){!i&&!Mr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function kB(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=FC(o,{x:e.x,y:e.y});Cc(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return ru(t,n,e,s),i}function IB(t,e,n,r,i,s){let o=[];const a=SB(n);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const p=h.inRange(e.x,e.y,i);if(r&&!p)return;const y=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!p)return;const b=a(e,y);b<l?(o=[{element:h,datasetIndex:d,index:f}],l=b):b===l&&o.push({element:h,datasetIndex:d,index:f})}return ru(t,n,e,c),o}function hg(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?kB(t,e,n,i):IB(t,e,n,r,i,s)}function e1(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return ru(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var CB={evaluateInteractionItems:ru,modes:{index(t,e,n,r){const i=Es(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ug(t,i,s,r,o):hg(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=Es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ug(t,i,s,r,o):hg(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=Es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return ug(t,i,s,r,o)},nearest(t,e,n,r){const i=Es(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return hg(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Es(e,t);return e1(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Es(e,t);return e1(t,i,"y",n.intersect,r)}}};const cP=["left","top","right","bottom"];function il(t,e){return t.filter(n=>n.pos===e)}function t1(t,e){return t.filter(n=>cP.indexOf(n.pos)===-1&&n.box.axis===e)}function sl(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function PB(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function AB(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!cP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function RB(t,e){const n=AB(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function NB(t){const e=PB(t),n=sl(e.filter(c=>c.box.fullSize),!0),r=sl(il(e,"left"),!0),i=sl(il(e,"right")),s=sl(il(e,"top"),!0),o=sl(il(e,"bottom")),a=t1(e,"x"),l=t1(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:il(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function n1(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function uP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function DB(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!fe(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&uP(o,s.getPadding());const a=Math.max(0,e.outerWidth-n1(o,t,"left","right")),l=Math.max(0,e.outerHeight-n1(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function OB(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function MB(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function xl(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,MB(a.horizontal,e));const{same:d,other:f}=DB(e,n,a,r);c|=d&&i.length,h=h||f,l.fullSize||i.push(a)}return c&&xl(i,e,n,r)||h}function lh(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function r1(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,f=c.size||l.height;Ic(c.start)&&(o=c.start),l.fullSize?lh(l,i.left,o,n.outerWidth-i.right-i.left,f):lh(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,f=c.size||l.width;Ic(c.start)&&(s=c.start),l.fullSize?lh(l,s,i.top,f,n.outerHeight-i.bottom-i.top):lh(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Ut={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=$t(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=NB(t.boxes),l=a.vertical,c=a.horizontal;Se(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const h=l.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},i);uP(f,$t(r));const p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),y=RB(l.concat(c),d);xl(a.fullSize,p,d,y),xl(l,p,d,y),xl(c,p,d,y)&&xl(l,p,d,y),OB(p),r1(a.leftAndTop,p,d,y),p.x+=p.w,p.y+=p.h,r1(a.rightAndBottom,p,d,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Se(a.chartArea,v=>{const b=v.box;Object.assign(b,t.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class hP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class LB extends hP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wh="$chartjs",VB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},i1=t=>t===null||t==="";function jB(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Wh]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",i1(i)){const s=Bb(t,"width");s!==void 0&&(t.width=s)}if(i1(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Bb(t,"height");s!==void 0&&(t.height=s)}return t}const dP=UU?{passive:!0}:!1;function FB(t,e,n){t&&t.addEventListener(e,n,dP)}function UB(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,dP)}function BB(t,e){const n=VB[t.type]||t.type,{x:r,y:i}=Es(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Gd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function zB(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Gd(a.addedNodes,r),o=o&&!Gd(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function $B(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Gd(a.removedNodes,r),o=o&&!Gd(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ac=new Map;let s1=0;function fP(){const t=window.devicePixelRatio;t!==s1&&(s1=t,Ac.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function WB(t,e){Ac.size||window.addEventListener("resize",fP),Ac.set(t,e)}function HB(t){Ac.delete(t),Ac.size||window.removeEventListener("resize",fP)}function qB(t,e,n){const r=t.canvas,i=r&&L_(r);if(!i)return;const s=$C((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),WB(t,s),o}function dg(t,e,n){n&&n.disconnect(),e==="resize"&&HB(t)}function KB(t,e,n){const r=t.canvas,i=$C(s=>{t.ctx!==null&&n(BB(s,t))},t);return FB(r,e,i),i}class GB extends hP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(jB(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Wh])return!1;const r=n[Wh].initial;["height","width"].forEach(s=>{const o=r[s];_e(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Wh],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:zB,detach:$B,resize:qB}[n]||KB;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:dg,detach:dg,resize:dg}[n]||UB)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return FU(e,n,r,i)}isAttached(e){const n=e&&L_(e);return!!(n&&n.isConnected)}}function YB(t){return!M_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?LB:GB}class Yn{constructor(){$(this,"x");$(this,"y");$(this,"active",!1);$(this,"options");$(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return fa(this.x)&&fa(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}$(Yn,"defaults",{}),$(Yn,"defaultRoutes");function QB(t,e){const n=t.options.ticks,r=XB(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?ZB(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return ez(e,c,s,o/i),c;const h=JB(s,e,i);if(o>0){let d,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(ch(e,c,h,_e(p)?0:a-p,a),d=0,f=o-1;d<f;d++)ch(e,c,h,s[d],s[d+1]);return ch(e,c,h,l,_e(p)?e.length:l+p),c}return ch(e,c,h),c}function XB(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function JB(t,e,n){const r=tz(t),i=e.length/n;if(!r)return Math.max(i,1);const s=$3(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function ZB(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function ez(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function ch(t,e,n,r,i){const s=ae(r,0),o=Math.min(ae(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function tz(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const nz=t=>t==="left"?"right":t==="right"?"left":t,o1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,a1=(t,e)=>Math.min(e||t,t);function l1(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function rz(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function iz(t,e){Se(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function ol(t){return t.drawTicks?t.tickLength:0}function c1(t,e){if(!t.display)return 0;const n=dt(t.font,e),r=$t(t.padding);return(je(t.text)?t.text.length:1)*n.lineHeight+r.height}function sz(t,e){return rs(t,{scale:e,type:"scale"})}function oz(t,e,n){return rs(t,{tick:n,index:e,type:"tick"})}function az(t,e,n){let r=P_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=nz(r)),r}function lz(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,p,y;const v=o-i,b=a-s;if(t.isHorizontal()){if(p=Lt(r,s,a),fe(n)){const _=Object.keys(n)[0],w=n[_];y=h[_].getPixelForValue(w)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=o1(t,n,e);f=a-s}else{if(fe(n)){const _=Object.keys(n)[0],w=n[_];p=h[_].getPixelForValue(w)-b+e}else n==="center"?p=(c.left+c.right)/2-b+e:p=o1(t,n,e);y=Lt(r,o,i),d=n==="left"?-nt:nt}return{titleX:p,titleY:y,maxWidth:f,rotation:d}}class lo extends Yn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=pn(e,Number.POSITIVE_INFINITY),n=pn(n,Number.NEGATIVE_INFINITY),r=pn(r,Number.POSITIVE_INFINITY),i=pn(i,Number.NEGATIVE_INFINITY),{min:pn(e,r),max:pn(n,i),minDefined:Qe(e),maxDefined:Qe(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:pn(n,pn(r,n)),max:pn(r,pn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yU(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?l1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=QB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Pe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Pe(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=a1(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,p=wt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-ol(e.grid)-n.padding-c1(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=I_(Math.min(Math.asin(wt((h.highest.height+6)/a,-1,1)),Math.asin(wt(l/c,-1,1))-Math.asin(wt(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=c1(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=ol(s)+l):(e.height=this.maxHeight,e.width=ol(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),p=r.padding*2,y=Bn(this.labelRotation),v=Math.cos(y),b=Math.sin(y);if(a){const _=r.mirror?0:b*d.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+_+p)}else{const _=r.mirror?0:v*d.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(c,h,b,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=i*e.width,p=r*n.height):(f=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_e(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=l1(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/a1(n,r));let c=0,h=0,d,f,p,y,v,b,_,w,E,I,N;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),i.font=b=v.string,_=s[b]=s[b]||{data:{},gc:[]},w=v.lineHeight,E=I=0,!_e(y)&&!je(y))E=qd(i,_.data,_.gc,E,y),I=w;else if(je(y))for(f=0,p=y.length;f<p;++f)N=y[f],!_e(N)&&!je(N)&&(E=qd(i,_.data,_.gc,E,N),I+=w);o.push(E),a.push(I),c=Math.max(E,c),h=Math.max(I,h)}iz(s,n);const O=o.indexOf(c),S=a.indexOf(h),T=k=>({width:o[k]||0,height:a[k]||0});return{first:T(0),last:T(n-1),widest:T(O),highest:T(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return q3(this._alignToPixels?ys(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=oz(this.getContext(),e,r))}return this.$context||(this.$context=sz(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Bn(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ol(s),p=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,b=v/2,_=function(G){return ys(r,G,v)};let w,E,I,N,O,S,T,k,P,R,D,A;if(o==="top")w=_(this.bottom),S=this.bottom-f,k=w-b,R=_(e.top)+b,A=e.bottom;else if(o==="bottom")w=_(this.top),R=e.top,A=_(e.bottom)-b,S=w+b,k=this.top+f;else if(o==="left")w=_(this.right),O=this.right-f,T=w-b,P=_(e.left)+b,D=e.right;else if(o==="right")w=_(this.left),P=e.left,D=_(e.right)-b,O=w+b,T=this.left+f;else if(n==="x"){if(o==="center")w=_((e.top+e.bottom)/2+.5);else if(fe(o)){const G=Object.keys(o)[0],re=o[G];w=_(this.chart.scales[G].getPixelForValue(re))}R=e.top,A=e.bottom,S=w+b,k=S+f}else if(n==="y"){if(o==="center")w=_((e.left+e.right)/2);else if(fe(o)){const G=Object.keys(o)[0],re=o[G];w=_(this.chart.scales[G].getPixelForValue(re))}O=w-b,T=O-f,P=e.left,D=e.right}const Z=ae(i.ticks.maxTicksLimit,d),Y=Math.max(1,Math.ceil(d/Z));for(E=0;E<d;E+=Y){const G=this.getContext(E),re=s.setContext(G),U=a.setContext(G),W=re.lineWidth,H=re.color,ie=U.dash||[],X=U.dashOffset,ne=re.tickWidth,me=re.tickColor,be=re.tickBorderDash||[],Ee=re.tickBorderDashOffset;I=rz(this,E,l),I!==void 0&&(N=ys(r,I,W),c?O=T=P=D=N:S=k=R=A=N,p.push({tx1:O,ty1:S,tx2:T,ty2:k,x1:P,y1:R,x2:D,y2:A,width:W,color:H,borderDash:ie,borderDashOffset:X,tickWidth:ne,tickColor:me,tickBorderDash:be,tickBorderDashOffset:Ee}))}return this._ticksLength=d,this._borderValue=w,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,f=ol(r.grid),p=f+h,y=d?-h:p,v=-Bn(this.labelRotation),b=[];let _,w,E,I,N,O,S,T,k,P,R,D,A="middle";if(i==="top")O=this.bottom-y,S=this._getXAxisLabelAlignment();else if(i==="bottom")O=this.top+y,S=this._getXAxisLabelAlignment();else if(i==="left"){const Y=this._getYAxisLabelAlignment(f);S=Y.textAlign,N=Y.x}else if(i==="right"){const Y=this._getYAxisLabelAlignment(f);S=Y.textAlign,N=Y.x}else if(n==="x"){if(i==="center")O=(e.top+e.bottom)/2+p;else if(fe(i)){const Y=Object.keys(i)[0],G=i[Y];O=this.chart.scales[Y].getPixelForValue(G)+p}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")N=(e.left+e.right)/2-p;else if(fe(i)){const Y=Object.keys(i)[0],G=i[Y];N=this.chart.scales[Y].getPixelForValue(G)}S=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const Z=this._getLabelSizes();for(_=0,w=a.length;_<w;++_){E=a[_],I=E.label;const Y=s.setContext(this.getContext(_));T=this.getPixelForTick(_)+s.labelOffset,k=this._resolveTickFontOptions(_),P=k.lineHeight,R=je(I)?I.length:1;const G=R/2,re=Y.color,U=Y.textStrokeColor,W=Y.textStrokeWidth;let H=S;o?(N=T,S==="inner"&&(_===w-1?H=this.options.reverse?"left":"right":_===0?H=this.options.reverse?"right":"left":H="center"),i==="top"?c==="near"||v!==0?D=-R*P+P/2:c==="center"?D=-Z.highest.height/2-G*P+P:D=-Z.highest.height+P/2:c==="near"||v!==0?D=P/2:c==="center"?D=Z.highest.height/2-G*P:D=Z.highest.height-R*P,d&&(D*=-1),v!==0&&!Y.showLabelBackdrop&&(N+=P/2*Math.sin(v))):(O=T,D=(1-R)*P/2);let ie;if(Y.showLabelBackdrop){const X=$t(Y.backdropPadding),ne=Z.heights[_],me=Z.widths[_];let be=D-X.top,Ee=0-X.left;switch(A){case"middle":be-=ne/2;break;case"bottom":be-=ne;break}switch(S){case"center":Ee-=me/2;break;case"right":Ee-=me;break;case"inner":_===w-1?Ee-=me:_>0&&(Ee-=me/2);break}ie={left:Ee,top:be,width:me+X.width,height:ne+X.height,color:Y.backdropColor}}b.push({label:I,font:k,textOffset:D,options:{rotation:v,color:re,strokeColor:U,strokeWidth:W,textAlign:H,textBaseline:A,translation:[N,O],backdrop:ie}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Bn(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=ys(e,this.left,o)-o/2,h=ys(e,this.right,a)+a/2,d=f=l):(d=ys(e,this.top,o)-o/2,f=ys(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Yf(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Xs(r,c,0,h,l,a)}i&&Qf(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=dt(r.font),o=$t(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||fe(n)?(l+=o.bottom,je(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=lz(this,l,n,a);Xs(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:az(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ae(e.grid&&e.grid.z,-1),i=ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==lo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return dt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class uh{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;hz(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,cz(e,o,r),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Fe[i]&&(delete Fe[i][r],this.override&&delete Qs[r])}}function cz(t,e,n){const r=kc(Object.create(null),[n?Fe.get(n):{},Fe.get(e),t.defaults]);Fe.set(e,r),t.defaultRoutes&&uz(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function uz(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Fe.route(s,i,l,a)})}function hz(t){return"id"in t&&"defaults"in t}class dz{constructor(){this.controllers=new uh(Wn,"datasets",!0),this.elements=new uh(Yn,"elements"),this.plugins=new uh(Object,"plugins"),this.scales=new uh(lo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Se(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=k_(e);Pe(r["before"+i],[],r),n[e](r),Pe(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var rr=new dz;class fz{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Pe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ae(r.options&&r.options.plugins,{}),s=pz(r);return i===!1&&!n?[]:mz(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function pz(t){const e={},n=[],r=Object.keys(rr.plugins.items);for(let s=0;s<r.length;s++)n.push(rr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function gz(t,e){return!e&&t===!1?null:t===!0?{}:t}function mz(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=gz(r[l],i);c!==null&&s.push({plugin:a,options:yz(t.config,{plugin:a,local:n[l]},c,o)})}return s}function yz(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oy(t,e){const n=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function vz(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function _z(t,e){return t===e?"_index_":"_value_"}function u1(t){if(t==="x"||t==="y"||t==="r")return t}function wz(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ay(t,...e){if(u1(t))return t;for(const n of e){const r=n.axis||wz(n.position)||t.length>1&&u1(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function h1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function xz(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return h1(t,"x",n[0])||h1(t,"y",n[0])}return{}}function bz(t,e){const n=Qs[t.type]||{scales:{}},r=e.scales||{},i=oy(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ay(o,a,xz(o,t),Fe.scales[a.type]),c=_z(l,i),h=n.scales||{};s[o]=Bl(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||oy(a,e),h=(Qs[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=vz(d,l),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),Bl(s[p],[{axis:f},r[p],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Bl(a,[Fe.scales[a.type],Fe.scale])}),s}function pP(t){const e=t.options||(t.options={});e.plugins=ae(e.plugins,{}),e.scales=bz(t,e)}function gP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Ez(t){return t=t||{},t.data=gP(t.data),pP(t),t}const d1=new Map,mP=new Set;function hh(t,e){let n=d1.get(t);return n||(n=e(),d1.set(t,n),mP.add(n)),n}const al=(t,e,n)=>{const r=Wi(e,n);r!==void 0&&t.add(r)};class Tz{constructor(e){this._config=Ez(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=gP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),pP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return hh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return hh(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return hh(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return hh(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>al(l,e,d))),h.forEach(d=>al(l,i,d)),h.forEach(d=>al(l,Qs[s]||{},d)),h.forEach(d=>al(l,Fe,d)),h.forEach(d=>al(l,ry,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),mP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Qs[n]||{},Fe.datasets[n]||{},{type:n},Fe,ry]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=f1(this._resolverCache,e,i);let l=o;if(kz(o,n)){s.$shared=!1,r=Hi(r)?r():r;const c=this.createResolver(e,r,a);l=pa(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=f1(this._resolverCache,e,r);return fe(n)?pa(s,n,void 0,i):s}}function f1(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:N_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Sz=t=>fe(t)&&Object.getOwnPropertyNames(t).some(e=>Hi(t[e]));function kz(t,e){const{isScriptable:n,isIndexable:r}=YC(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Hi(a)||Sz(a))||o&&je(a))return!0}return!1}var Iz="4.4.7";const Cz=["top","bottom","left","right","chartArea"];function p1(t,e){return t==="top"||t==="bottom"||Cz.indexOf(t)===-1&&e==="x"}function g1(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function m1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Pe(n&&n.onComplete,[t],e)}function Pz(t){const e=t.chart,n=e.options.animation;Pe(n&&n.onProgress,[t],e)}function yP(t){return M_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Hh={},y1=t=>{const e=yP(t);return Object.values(Hh).filter(n=>n.canvas===e).pop()};function Az(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Rz(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function dh(t,e,n){return t.options.clip?t[n]:e[n]}function Nz(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:dh(n,e,"left"),right:dh(n,e,"right"),top:dh(r,e,"top"),bottom:dh(r,e,"bottom")}:e}var si;let Jf=(si=class{static register(...e){rr.add(...e),v1()}static unregister(...e){rr.remove(...e),v1()}constructor(e,n){const r=this.config=new Tz(n),i=yP(e),s=y1(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||YB(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=O3(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fz,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Q3(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Hh[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Er.listen(this,"complete",m1),Er.listen(this,"progress",Pz),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return _e(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ub(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vb(this.canvas,this.ctx),this}stop(){return Er.stop(this),this}resize(e,n){Er.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ub(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Se(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=ay(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),Se(s,o=>{const a=o.options,l=a.id,c=ay(l,a),h=ae(a.type,o.dtype);(a.position===void 0||p1(a.position,c)!==p1(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const f=rr.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Se(i,(o,a)=>{o||delete r[a]}),Se(r,o=>{Ut.configure(this,o,o.options),Ut.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(g1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||oy(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:c,dataElementType:h}=Fe.datasets[a];Object.assign(l,{dataElementType:rr.getElement(h),datasetElementType:c&&rr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Se(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(g1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Se(this.scales,e=>{Ut.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Cb(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Az(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Cb(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ut.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Se(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Hi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Er.has(this)?this.attached&&!Er.running(this)&&Er.start(this):(this.draw(),m1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Nz(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Yf(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Qf(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Mr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=CB.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=rs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Ic(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Er.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Vb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Hh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Se(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Se(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Se(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!$d(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=U3(e),c=Rz(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Pe(s.onHover,[e,a,this],this),l&&Pe(s.onClick,[e,a,this],this));const h=!$d(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},$(si,"defaults",Fe),$(si,"instances",Hh),$(si,"overrides",Qs),$(si,"registry",rr),$(si,"version",Iz),$(si,"getChart",y1),si);function v1(){return Se(Jf.instances,t=>t._plugins.invalidate())}function Dz(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+nt,r-nt),t.closePath(),t.clip()}function Oz(t){return R_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Mz(t,e,n,r){const i=Oz(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return wt(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:wt(i.innerStart,0,o),innerEnd:wt(i.innerEnd,0,o)}}function xo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Yd(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+r+n-c,0),f=h>0?h+r+n+c:0;let p=0;const y=i-l;if(r){const Y=h>0?h-r:0,G=d>0?d-r:0,re=(Y+G)/2,U=re!==0?y*re/(re+r):y;p=(y-U)/2}const v=Math.max(.001,y*d-n/Me)/d,b=(y-v)/2,_=l+b+p,w=i-b-p,{outerStart:E,outerEnd:I,innerStart:N,innerEnd:O}=Mz(e,f,d,w-_),S=d-E,T=d-I,k=_+E/S,P=w-I/T,R=f+N,D=f+O,A=_+N/R,Z=w-O/D;if(t.beginPath(),s){const Y=(k+P)/2;if(t.arc(o,a,d,k,Y),t.arc(o,a,d,Y,P),I>0){const W=xo(T,P,o,a);t.arc(W.x,W.y,I,P,w+nt)}const G=xo(D,w,o,a);if(t.lineTo(G.x,G.y),O>0){const W=xo(D,Z,o,a);t.arc(W.x,W.y,O,w+nt,Z+Math.PI)}const re=(w-O/f+(_+N/f))/2;if(t.arc(o,a,f,w-O/f,re,!0),t.arc(o,a,f,re,_+N/f,!0),N>0){const W=xo(R,A,o,a);t.arc(W.x,W.y,N,A+Math.PI,_-nt)}const U=xo(S,_,o,a);if(t.lineTo(U.x,U.y),E>0){const W=xo(S,k,o,a);t.arc(W.x,W.y,E,_-nt,k)}}else{t.moveTo(o,a);const Y=Math.cos(k)*d+o,G=Math.sin(k)*d+a;t.lineTo(Y,G);const re=Math.cos(P)*d+o,U=Math.sin(P)*d+a;t.lineTo(re,U)}t.closePath()}function Lz(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Yd(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Oe||Oe))}return Yd(t,e,n,r,l,i),t.fill(),l}function Vz(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let y=e.endAngle;if(s){Yd(t,e,n,r,y,i);for(let v=0;v<s;++v)t.stroke();isNaN(a)||(y=o+(a%Oe||Oe))}p&&Dz(t,e,y),s||(Yd(t,e,n,r,y,i),t.stroke())}class bl extends Yn{constructor(n){super();$(this,"circumference");$(this,"endAngle");$(this,"fullCircles");$(this,"innerRadius");$(this,"outerRadius");$(this,"pixelMargin");$(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=FC(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,y=ae(f,c-l),v=Cc(o,l,c)&&l!==c,b=y>=Oe||v,_=Dr(a,h+p,d+p);return b&&_}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,d=(s+o)/2,f=(a+l+h+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Oe?Math.floor(i/Oe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Me,i||0)),h=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Lz(n,this,h,o,a),Vz(n,this,h,o,a),n.restore()}}$(bl,"id","arc"),$(bl,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),$(bl,"defaultRoutes",{backgroundColor:"backgroundColor"}),$(bl,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function vP(t,e,n=e){t.lineCap=ae(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ae(n.borderDash,e.borderDash)),t.lineDashOffset=ae(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ae(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ae(n.borderWidth,e.borderWidth),t.strokeStyle=ae(n.borderColor,e.borderColor)}function jz(t,e,n){t.lineTo(n.x,n.y)}function Fz(t){return t.stepped?lU:t.tension||t.cubicInterpolationMode==="monotone"?cU:jz}function _P(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function Uz(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=_P(i,n,r),h=Fz(s);let{move:d=!0,reverse:f}=r||{},p,y,v;for(p=0;p<=c;++p)y=i[(a+(f?c-p:p))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,v,y,f,s.stepped),v=y);return l&&(y=i[(a+(f?c:0))%o],h(t,v,y,f,s.stepped)),!!l}function Bz(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=_P(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,f,p,y,v,b,_;const w=I=>(o+(c?a-I:I))%s,E=()=>{v!==b&&(t.lineTo(h,b),t.lineTo(h,v),t.lineTo(h,_))};for(l&&(p=i[w(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[w(f)],p.skip)continue;const I=p.x,N=p.y,O=I|0;O===y?(N<v?v=N:N>b&&(b=N),h=(d*h+I)/++d):(E(),t.lineTo(I,N),y=O,d=0,v=b=N),_=N}E()}function ly(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Bz:Uz}function zz(t){return t.stepped?BU:t.tension||t.cubicInterpolationMode==="monotone"?zU:Ts}function $z(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),vP(t,e.options),t.stroke(i)}function Wz(t,e,n,r){const{segments:i,options:s}=e,o=ly(e);for(const a of i)vP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Hz=typeof Path2D=="function";function qz(t,e,n,r){Hz&&!e.options.segment?$z(t,e,n,r):Wz(t,e,n,r)}class xi extends Yn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;DU(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=GU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=sP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=zz(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:f}=o[c],p=s[d],y=s[f];if(p===y){a.push(p);continue}const v=Math.abs((i-p[n])/(y[n]-p[n])),b=l(p,y,v,r.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,r){return ly(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=ly(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),qz(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}$(xi,"id","line"),$(xi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),$(xi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),$(xi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function _1(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class qh extends Yn{constructor(n){super();$(this,"parsed");$(this,"skip");$(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return _1(this,n,"x",r)}inYRange(n,r){return _1(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Mr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,iy(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}$(qh,"id","point"),$(qh,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),$(qh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function wP(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,h=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function bi(t,e,n,r){return t?0:wt(e,n,r)}function Kz(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=GC(r);return{t:bi(i.top,s.top,0,n),r:bi(i.right,s.right,0,e),b:bi(i.bottom,s.bottom,0,n),l:bi(i.left,s.left,0,e)}}function Gz(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Vs(i),o=Math.min(e,n),a=t.borderSkipped,l=r||fe(i);return{topLeft:bi(!l||a.top||a.left,s.topLeft,0,o),topRight:bi(!l||a.top||a.right,s.topRight,0,o),bottomLeft:bi(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:bi(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Yz(t){const e=wP(t),n=e.right-e.left,r=e.bottom-e.top,i=Kz(t,n/2,r/2),s=Gz(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function fg(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&wP(t,r);return a&&(i||Dr(e,a.left,a.right))&&(s||Dr(n,a.top,a.bottom))}function Qz(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Xz(t,e){t.rect(e.x,e.y,e.w,e.h)}function pg(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Kh extends Yn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Yz(this),a=Qz(o.radius)?Pc:Xz;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,pg(o,n,s)),e.clip(),a(e,pg(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,pg(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return fg(this,e,n,r)}inXRange(e,n){return fg(this,e,null,n)}inYRange(e,n){return fg(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}$(Kh,"id","bar"),$(Kh,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),$(Kh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Jz=Object.freeze({__proto__:null,ArcElement:bl,BarElement:Kh,LineElement:xi,PointElement:qh});const cy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],w1=cy.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function xP(t){return cy[t%cy.length]}function bP(t){return w1[t%w1.length]}function Zz(t,e){return t.borderColor=xP(e),t.backgroundColor=bP(e),++e}function e9(t,e){return t.backgroundColor=t.data.map(()=>xP(e++)),e}function t9(t,e){return t.backgroundColor=t.data.map(()=>bP(e++)),e}function n9(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Ps?e=e9(n,e):i instanceof ql?e=t9(n,e):i&&(e=Zz(n,e))}}function x1(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function r9(t){return t&&(t.borderColor||t.backgroundColor)}function i9(){return Fe.borderColor!=="rgba(0,0,0,0.1)"||Fe.backgroundColor!=="rgba(0,0,0,0.1)"}var s9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=x1(r)||r9(i)||s&&x1(s)||i9();if(!n.forceOverride&&o)return;const a=n9(t);r.forEach(a)}};function o9(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h=e,d,f,p,y,v;for(o[l++]=t[h],d=0;d<s-2;d++){let b=0,_=0,w;const E=Math.floor((d+1)*a)+1+e,I=Math.min(Math.floor((d+2)*a)+1,n)+e,N=I-E;for(w=E;w<I;w++)b+=t[w].x,_+=t[w].y;b/=N,_/=N;const O=Math.floor(d*a)+1+e,S=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:T,y:k}=t[h];for(p=y=-1,w=O;w<S;w++)y=.5*Math.abs((T-b)*(t[w].y-k)-(T-t[w].x)*(_-k)),y>p&&(p=y,f=t[w],v=w);o[l++]=f,h=v}return o[l++]=t[c],o}function a9(t,e,n,r){let i=0,s=0,o,a,l,c,h,d,f,p,y,v;const b=[],_=e+n-1,w=t[e].x,I=t[_].x-w;for(o=e;o<e+n;++o){a=t[o],l=(a.x-w)/I*r,c=a.y;const N=l|0;if(N===h)c<y?(y=c,d=o):c>v&&(v=c,f=o),i=(s*i+a.x)/++s;else{const O=o-1;if(!_e(d)&&!_e(f)){const S=Math.min(d,f),T=Math.max(d,f);S!==p&&S!==O&&b.push({...t[S],x:i}),T!==p&&T!==O&&b.push({...t[T],x:i})}o>0&&O!==p&&b.push(t[O]),b.push(a),h=N,s=0,y=v=c,d=f=p=o}}return b}function EP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function b1(t){t.data.datasets.forEach(e=>{EP(e)})}function l9(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=wt(Or(e,s.axis,o).lo,0,n-1)),c?i=wt(Or(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var c9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){b1(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(wl([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:d,count:f}=l9(l,c);const p=n.threshold||4*r;if(f<=p){EP(i);return}_e(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let y;switch(n.algorithm){case"lttb":y=o9(c,d,f,r,n);break;case"min-max":y=a9(c,d,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=y})},destroy(t){b1(t)}};function u9(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=j_(l,c,i);const h=uy(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[l],end:i[c]});continue}const d=sP(e,h);for(const f of d){const p=uy(n,s[f.start],s[f.end],f.loop),y=iP(a,i,p);for(const v of y)o.push({source:v,target:f,start:{[n]:E1(h,p,"start",Math.max)},end:{[n]:E1(h,p,"end",Math.min)}})}}return o}function uy(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=mn(i),s=mn(s)),{property:t,start:i,end:s}}function h9(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=j_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function j_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function E1(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function TP(t,e){let n=[],r=!1;return je(t)?(r=!0,n=t):n=h9(t,e),n.length?new xi({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function T1(t){return t&&t.fill!==!1}function d9(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Qe(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function f9(t,e,n){const r=y9(t);if(fe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Qe(i)&&Math.floor(i)===i?p9(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function p9(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function g9(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:fe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function m9(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:fe(t)?r=t.value:r=e.getBaseValue(),r}function y9(t){const e=t.options,n=e.fill;let r=ae(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function v9(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=_9(e,n);a.push(TP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)w9(i,o[h],a)}return new xi({points:i,options:{}})}function _9(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function w9(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=x9(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function x9(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],d=o[h.start][n],f=o[h.end][n];if(Dr(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:r}}class SP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Oe},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function b9(t){const{chart:e,fill:n,line:r}=t;if(Qe(n))return E9(e,n);if(n==="stack")return v9(t);if(n==="shape")return!0;const i=T9(t);return i instanceof SP?i:TP(i,r)}function E9(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function T9(t){return(t.scale||{}).getPointPositionForValue?k9(t):S9(t)}function S9(t){const{scale:e={},fill:n}=t,r=g9(n,e);if(Qe(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function k9(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=m9(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new SP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function gg(t,e,n){const r=b9(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:d=c}=l||{};r&&i.points.length&&(Yf(t,n),I9(t,{line:i,target:r,above:h,below:d,area:n,scale:s,axis:o}),Qf(t))}function I9(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(S1(t,r,o.top),k1(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),S1(t,r,o.bottom)),k1(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function S1(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=i[l],d=i[j_(l,c,i)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function k1(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=u9(n,r,i);for(const{source:l,target:c,start:h,end:d}of a){const{style:{backgroundColor:f=s}={}}=l,p=r!==!0;t.save(),t.fillStyle=f,C9(t,o,p&&uy(i,h,d)),t.beginPath();const y=!!n.pathSegment(t,l);let v;if(p){y?t.closePath():I1(t,r,d,i);const b=!!r.pathSegment(t,c,{move:y,reverse:!0});v=y&&b,v||I1(t,r,h,i)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function C9(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function I1(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var P9={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof xi&&(l={visible:t.isDatasetVisible(o),index:o,fill:f9(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=d9(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&gg(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;T1(s)&&gg(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!T1(r)||n.drawTime!=="beforeDatasetDraw"||gg(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const C1=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},A9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class P1 extends Yn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Pe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=dt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=C1(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-h;return this.legendItems.forEach((y,v)=>{const b=r+n/2+s.measureText(y.text).width;(v===0||c[c.length-1]+b+2*a>o)&&(d+=h,c[c.length-(v>0?0:1)]=0,p+=h,f++),l[v]={left:0,top:p,row:f,width:b,height:i},c[c.length-1]+=b+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,f=0,p=0,y=0,v=0;return this.legendItems.forEach((b,_)=>{const{itemWidth:w,itemHeight:E}=R9(r,n,s,b,i);_>0&&p+E+2*a>h&&(d+=f+a,c.push({width:f,height:p}),y+=f+a,v++,f=p=0),l[_]={left:y,top:p,col:v,width:w,height:E},f=Math.max(f,w),p+=E+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Xo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Lt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Lt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Lt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Lt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yf(e,this),this._draw(),Qf(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Fe.color,l=Xo(e.rtl,this.left,this.width),c=dt(o.font),{padding:h}=o,d=c.size,f=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:b}=C1(o,d),_=function(O,S,T){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const k=ae(T.lineWidth,1);if(i.fillStyle=ae(T.fillStyle,a),i.lineCap=ae(T.lineCap,"butt"),i.lineDashOffset=ae(T.lineDashOffset,0),i.lineJoin=ae(T.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=ae(T.strokeStyle,a),i.setLineDash(ae(T.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:k},R=l.xPlus(O,y/2),D=S+f;KC(i,P,R,D,o.pointStyleWidth&&y)}else{const P=S+Math.max((d-v)/2,0),R=l.leftForLtr(O,y),D=Vs(T.borderRadius);i.beginPath(),Object.values(D).some(A=>A!==0)?Pc(i,{x:R,y:P,w:y,h:v,radius:D}):i.rect(R,P,y,v),i.fill(),k!==0&&i.stroke()}i.restore()},w=function(O,S,T){Xs(i,T.text,O,S+b/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},E=this.isHorizontal(),I=this._computeTitleHeight();E?p={x:Lt(s,this.left+h,this.right-r[0]),y:this.top+h+I,line:0}:p={x:this.left+h,y:Lt(s,this.top+I+h,this.bottom-n[0].height),line:0},tP(this.ctx,e.textDirection);const N=b+h;this.legendItems.forEach((O,S)=>{i.strokeStyle=O.fontColor,i.fillStyle=O.fontColor;const T=i.measureText(O.text).width,k=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),P=y+f+T;let R=p.x,D=p.y;l.setWidth(this.width),E?S>0&&R+P+h>this.right&&(D=p.y+=N,p.line++,R=p.x=Lt(s,this.left+h,this.right-r[p.line])):S>0&&D+N>this.bottom&&(R=p.x=R+n[p.line].width+h,p.line++,D=p.y=Lt(s,this.top+I+h,this.bottom-n[p.line].height));const A=l.x(R);if(_(A,D,O),R=X3(k,R+y+f,E?R+P:this.right,e.rtl),w(l.x(R),D,O),E)p.x+=P+h;else if(typeof O.text!="string"){const Z=c.lineHeight;p.y+=kP(O,Z)+h}else p.y+=N}),nP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=dt(n.font),i=$t(n.padding);if(!n.display)return;const s=Xo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=Lt(e.align,d,this.right-f);else{const y=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);h=c+Lt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Lt(a,d,d+f);o.textAlign=s.textAlign(P_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Xs(o,n.text,p,h,r)}_computeTitleHeight(){const e=this.options.title,n=dt(e.font),r=$t(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Dr(e,this.left,this.right)&&Dr(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Dr(e,i.left,i.left+i.width)&&Dr(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!O9(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=A9(i,r);i&&!s&&Pe(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Pe(n.onHover,[e,r,this],this)}else r&&Pe(n.onClick,[e,r,this],this)}}function R9(t,e,n,r,i){const s=N9(r,t,e,n),o=D9(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function N9(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function D9(t,e,n){let r=t;return typeof e.text!="string"&&(r=kP(e,n)),r}function kP(t,e){const n=t.text?t.text.length:0;return e*n}function O9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var M9={id:"legend",_element:P1,start(t,e,n){const r=t.legend=new P1({ctx:t.ctx,options:n,chart:t});Ut.configure(t,r,n),Ut.addBox(t,r)},stop(t){Ut.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ut.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=$t(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class F_ extends Yn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=je(r.text)?r.text.length:1;this._padding=$t(r.padding);const s=i*dt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=Lt(a,r,s),d=n+e,c=s-r):(o.position==="left"?(h=r+e,d=Lt(a,i,n),l=Me*-.5):(h=s-e,d=Lt(a,n,i),l=Me*.5),c=i-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=dt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Xs(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:P_(n.align),textBaseline:"middle",translation:[o,a]})}}function L9(t,e){const n=new F_({ctx:t.ctx,options:e,chart:t});Ut.configure(t,n,e),Ut.addBox(t,n),t.titleBlock=n}var V9={id:"title",_element:F_,start(t,e,n){L9(t,n)},stop(t){const e=t.titleBlock;Ut.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ut.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fh=new WeakMap;var j9={id:"subtitle",start(t,e,n){const r=new F_({ctx:t.ctx,options:n,chart:t});Ut.configure(t,r,n),Ut.addBox(t,r),fh.set(t,r)},stop(t){Ut.removeBox(t,fh.get(t)),fh.delete(t)},beforeUpdate(t,e,n){const r=fh.get(t);Ut.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const El={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=ny(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tr(t,e){return e&&(je(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Tr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function F9(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function A1(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=dt(e.bodyFont),c=dt(e.titleFont),h=dt(e.footerFont),d=s.length,f=i.length,p=r.length,y=$t(e.padding);let v=y.height,b=0,_=r.reduce((I,N)=>I+N.before.length+N.lines.length+N.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const I=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=p*I+(_-p)*l.lineHeight+(_-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let w=0;const E=function(I){b=Math.max(b,n.measureText(I).width+w)};return n.save(),n.font=c.string,Se(t.title,E),n.font=l.string,Se(t.beforeBody.concat(t.afterBody),E),w=e.displayColors?o+2+e.boxPadding:0,Se(r,I=>{Se(I.before,E),Se(I.lines,E),Se(I.after,E)}),w=0,n.font=h.string,Se(t.footer,E),n.restore(),b+=y.width,{width:b,height:v}}function U9(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function B9(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function z9(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),B9(c,t,e,n)&&(c="center"),c}function R1(t,e,n){const r=n.yAlign||e.yAlign||U9(t,n);return{xAlign:n.xAlign||e.xAlign||z9(t,e,n,r),yAlign:r}}function $9(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function W9(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function N1(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Vs(o);let y=$9(e,a);const v=W9(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,f)+i:a==="right"&&(y+=Math.max(d,p)+i),{x:wt(y,0,r.width-e.width),y:wt(v,0,r.height-e.height)}}function ph(t,e,n){const r=$t(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function D1(t){return tr([],Tr(t))}function H9(t,e,n){return rs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function O1(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const IP={beforeTitle:br,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:br,beforeBody:br,beforeLabel:br,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _e(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:br,afterBody:br,beforeFooter:br,footer:br,afterFooter:br};function en(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?IP[e].call(n,r):i}class hy extends Yn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new oP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=H9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=en(r,"beforeTitle",this,e),s=en(r,"title",this,e),o=en(r,"afterTitle",this,e);let a=[];return a=tr(a,Tr(i)),a=tr(a,Tr(s)),a=tr(a,Tr(o)),a}getBeforeBody(e,n){return D1(en(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Se(e,s=>{const o={before:[],lines:[],after:[]},a=O1(r,s);tr(o.before,Tr(en(a,"beforeLabel",this,s))),tr(o.lines,en(a,"label",this,s)),tr(o.after,Tr(en(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return D1(en(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=en(r,"beforeFooter",this,e),s=en(r,"footer",this,e),o=en(r,"afterFooter",this,e);let a=[];return a=tr(a,Tr(i)),a=tr(a,Tr(s)),a=tr(a,Tr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(F9(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),Se(a,h=>{const d=O1(e.callbacks,h);i.push(en(d,"labelColor",this,h)),s.push(en(d,"labelPointStyle",this,h)),o.push(en(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=El[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=A1(this,r),c=Object.assign({},a,l),h=R1(this.chart,r,c),d=N1(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Vs(a),{x:f,y:p}=e,{width:y,height:v}=n;let b,_,w,E,I,N;return s==="center"?(I=p+v/2,i==="left"?(b=f,_=b-o,E=I+o,N=I-o):(b=f+y,_=b+o,E=I-o,N=I+o),w=b):(i==="left"?_=f+Math.max(l,h)+o:i==="right"?_=f+y-Math.max(c,d)-o:_=this.caretX,s==="top"?(E=p,I=E-o,b=_-o,w=_+o):(E=p+v,I=E+o,b=_+o,w=_-o),N=E),{x1:b,x2:_,x3:w,y1:E,y2:I,y3:N}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Xo(r.rtl,this.x,this.width);for(e.x=ph(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=dt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=dt(s.bodyFont),d=ph(this,"left",s),f=i.x(d),p=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+p;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(f,c)+c/2,_=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,iy(e,v,b,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,iy(e,v,b,_)}else{e.lineWidth=fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(f,c),b=i.leftForLtr(i.xPlus(f,1),c-2),_=Vs(o.borderRadius);Object.values(_).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Pc(e,{x:v,y,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Pc(e,{x:b,y:y+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=dt(r.bodyFont);let f=d.lineHeight,p=0;const y=Xo(r.rtl,this.x,this.width),v=function(T){n.fillText(T,y.x(e.x+p),e.y+f/2),e.y+=f+s},b=y.textAlign(o);let _,w,E,I,N,O,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=ph(this,b,r),n.fillStyle=r.bodyColor,Se(this.beforeBody,v),p=a&&b!=="right"?o==="center"?c/2+h:c+2+h:0,I=0,O=i.length;I<O;++I){for(_=i[I],w=this.labelTextColors[I],n.fillStyle=w,Se(_.before,v),E=_.lines,a&&E.length&&(this._drawColorBox(n,e,I,y,r),f=Math.max(d.lineHeight,l)),N=0,S=E.length;N<S;++N)v(E[N]),f=d.lineHeight;Se(_.after,v)}p=0,f=d.lineHeight,Se(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Xo(r.rtl,this.x,this.width);for(e.x=ph(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=dt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:y}=Vs(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+h),n.quadraticCurveTo(a,l+h,a,l+h-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=El[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=A1(this,e),l=Object.assign({},o,this._size),c=R1(n,e,l),h=N1(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=$t(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),tP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),nP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!$d(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!$d(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=El[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}$(hy,"positioners",El);var q9={id:"tooltip",_element:hy,positioners:El,afterInit(t,e,n){n&&(t.tooltip=new hy({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:IP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},K9=Object.freeze({__proto__:null,Colors:s9,Decimation:c9,Filler:P9,Legend:M9,SubTitle:j9,Title:V9,Tooltip:q9});const G9=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Y9(t,e,n,r){const i=t.indexOf(e);if(i===-1)return G9(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Q9=(t,e)=>t===null?null:wt(Math.round(t),0,e);function M1(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class dy extends lo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_e(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Y9(r,e,ae(n,e),this._addedLabels),Q9(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return M1.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}$(dy,"id","category"),$(dy,"defaults",{ticks:{callback:M1}});function X9(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,p=s||1,y=h-1,{min:v,max:b}=e,_=!_e(o),w=!_e(a),E=!_e(c),I=(b-v)/(d+1);let N=Ab((b-v)/y/p)*p,O,S,T,k;if(N<1e-14&&!_&&!w)return[{value:v},{value:b}];k=Math.ceil(b/N)-Math.floor(v/N),k>y&&(N=Ab(k*N/y/p)*p),_e(l)||(O=Math.pow(10,l),N=Math.ceil(N*O)/O),i==="ticks"?(S=Math.floor(v/N)*N,T=Math.ceil(b/N)*N):(S=v,T=b),_&&w&&s&&W3((a-o)/s,N/1e3)?(k=Math.round(Math.min((a-o)/N,h)),N=(a-o)/k,S=o,T=a):E?(S=_?o:S,T=w?a:T,k=c-1,N=(T-S)/k):(k=(T-S)/N,zl(k,Math.round(k),N/1e3)?k=Math.round(k):k=Math.ceil(k));const P=Math.max(Rb(N),Rb(S));O=Math.pow(10,_e(l)?P:l),S=Math.round(S*O)/O,T=Math.round(T*O)/O;let R=0;for(_&&(f&&S!==o?(n.push({value:o}),S<o&&R++,zl(Math.round((S+R*N)*O)/O,o,L1(o,I,t))&&R++):S<o&&R++);R<k;++R){const D=Math.round((S+R*N)*O)/O;if(w&&D>a)break;n.push({value:D})}return w&&f&&T!==a?n.length&&zl(n[n.length-1].value,a,L1(a,I,t))?n[n.length-1].value=a:n.push({value:a}):(!w||T===a)&&n.push({value:T}),n}function L1(t,e,{horizontal:n,minRotation:r}){const i=Bn(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Qd extends lo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=fr(i),c=fr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=X9(i,s);return e.bounds==="ticks"&&jC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return nu(e,this.chart.options.locale,this.options.ticks.format)}}class fy extends Qd{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Qe(e)?e:0,this.max=Qe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Bn(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}$(fy,"id","linear"),$(fy,"defaults",{ticks:{callback:Gf.formatters.numeric}});const Rc=t=>Math.floor(wi(t)),_s=(t,e)=>Math.pow(10,Rc(t)+e);function V1(t){return t/Math.pow(10,Rc(t))===1}function j1(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function J9(t,e){const n=e-t;let r=Rc(n);for(;j1(t,e,r)>10;)r++;for(;j1(t,e,r)<10;)r--;return Math.min(r,Rc(t))}function Z9(t,{min:e,max:n}){e=pn(t.min,e);const r=[],i=Rc(e);let s=J9(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,s)),f=pn(t.min,Math.round((l+h+d*Math.pow(10,s))*o)/o);for(;f<n;)r.push({value:f,major:V1(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+h+d*Math.pow(10,s))*o)/o;const p=pn(t.max,f);return r.push({value:p,major:V1(p),significand:d}),r}class py extends lo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=Qd.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Qe(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Qe(e)?Math.max(0,e):null,this.max=Qe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qe(this._userMin)&&(this.min=e===_s(this.min,0)?_s(this.min,-1):_s(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(_s(r,-1)),o(_s(i,1)))),r<=0&&s(_s(i,-1)),i<=0&&o(_s(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Z9(n,this);return e.bounds==="ticks"&&jC(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":nu(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=wi(e),this._valueRange=wi(this.max)-wi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(wi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}$(py,"id","logarithmic"),$(py,"defaults",{ticks:{callback:Gf.formatters.logarithmic,major:{enabled:!0}}});function gy(t){const e=t.ticks;if(e.display&&t.display){const n=$t(e.backdropPadding);return ae(e.font&&e.font.size,Fe.font.size)+n.height}return 0}function e8(t,e,n){return n=je(n)?n:[n],{w:aU(t,e.string,n),h:n.length*e.lineHeight}}function F1(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function t8(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Me/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+i[l],a),d=dt(c.font),f=e8(t.ctx,d,t._pointLabels[l]);r[l]=f;const p=mn(t.getIndexAngle(l)+a),y=Math.round(I_(p)),v=F1(y,h.x,f.w,0,180),b=F1(y,h.y,f.h,90,270);n8(n,e,p,v,b)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=s8(t,r,i)}function n8(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function r8(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(I_(mn(l.angle+nt))),h=l8(l.y,a.h,c),d=o8(c),f=a8(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:f,top:h,right:f+a.w,bottom:h+a.h}}function i8(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Mr({x:n,y:r},e)||Mr({x:n,y:s},e)||Mr({x:i,y:r},e)||Mr({x:i,y:s},e))}function s8(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:gy(s)/2,additionalAngle:o?Me/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=e[h];const d=r8(t,h,l);r.push(d),a==="auto"&&(d.visible=i8(d,c),d.visible&&(c=d))}return r}function o8(t){return t===0||t===180?"center":t<180?"left":"right"}function a8(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function l8(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function c8(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!_e(a)){const l=Vs(e.borderRadius),c=$t(e.backdropPadding);t.fillStyle=a;const h=r-c.left,d=i-c.top,f=s-r+c.width,p=o-i+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),Pc(t,{x:h,y:d,w:f,h:p,radius:l}),t.fill()):t.fillRect(h,d,f,p)}}function u8(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));c8(n,o,s);const a=dt(o.font),{x:l,y:c,textAlign:h}=s;Xs(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function CP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Oe);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function h8(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),CP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function d8(t,e,n){return rs(t,{label:n,index:e,type:"pointLabel"})}class Tl extends Qd{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=$t(gy(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Qe(e)&&!isNaN(e)?e:0,this.max=Qe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/gy(this.options))}generateTickLabels(e){Qd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Pe(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?t8(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Oe/(this._pointLabels.length||1),r=this.options.startAngle||0;return mn(e*n+Bn(r))}getDistanceFromCenterForValue(e){if(_e(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(_e(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return d8(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-nt+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),CP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&u8(this,o),i.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const f=this.getContext(d),p=i.setContext(f),y=s.setContext(f);h8(this,p,l,o,y)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=h;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),h=dt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=$t(c.backdropPadding);e.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}Xs(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}$(Tl,"id","radialLinear"),$(Tl,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Gf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),$(Tl,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),$(Tl,"descriptors",{angleLines:{_fallback:"grid"}});const Zf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sn=Object.keys(Zf);function U1(t,e){return t-e}function B1(t,e){if(_e(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Qe(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(fa(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function z1(t,e,n,r){const i=sn.length;for(let s=sn.indexOf(t);s<i-1;++s){const o=Zf[sn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return sn[s]}return sn[i-1]}function f8(t,e,n,r,i){for(let s=sn.length-1;s>=sn.indexOf(n);s--){const o=sn[s];if(Zf[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return sn[n?sn.indexOf(n):0]}function p8(t){for(let e=sn.indexOf(t)+1,n=sn.length;e<n;++e)if(Zf[sn[e]].common)return sn[e]}function $1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=C_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function g8(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function W1(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:g8(t,r,i,n)}class Nc extends lo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new EB._date(e.adapters.date);i.init(n),Bl(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:B1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Qe(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Qe(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=G3(i,s,o);return this._unit=n.unit||(r.autoSkip?z1(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):f8(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:p8(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),W1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=wt(n,0,o),r=wt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||z1(s.minUnit,n,r,this._getLabelCapacity(n)),a=ae(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=fa(l)||l===!0,h={};let d=n,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<r;f=+e.add(f,a,o),p++)$1(h,f,y);return(f===r||i.bounds==="ticks"||p===1)&&$1(h,f,y),Object.keys(h).sort(U1).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Pe(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=r[n],p=c&&d&&f&&f.major;return this._adapter.format(e,i||(p?d:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Bn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,W1(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(B1(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return BC(e.sort(U1))}}$(Nc,"id","time"),$(Nc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function gh(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Or(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Or(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class my extends Nc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=gh(n,this.min),this._tableRange=gh(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(gh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return gh(this._table,r*this._tableRange+this._minPos,!0)}}$(my,"id","timeseries"),$(my,"defaults",Nc.defaults);var m8=Object.freeze({__proto__:null,CategoryScale:dy,LinearScale:fy,LogarithmicScale:py,RadialLinearScale:Tl,TimeScale:Nc,TimeSeriesScale:my});const y8=[bB,Jz,K9,m8],PP="label";function H1(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function v8(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function AP(t,e){t.labels=e}function RP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:PP;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function _8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:PP;const n={labels:[],datasets:[]};return AP(n,t.labels),RP(n,t.datasets,e),n}function w8(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=t,p=M.useRef(null),y=M.useRef(null),v=()=>{p.current&&(y.current=new Jf(p.current,{type:o,data:_8(a,s),options:l&&{...l},plugins:c}),H1(e,y.current))},b=()=>{H1(e,null),y.current&&(y.current.destroy(),y.current=null)};return M.useEffect(()=>{!i&&y.current&&l&&v8(y.current,l)},[i,l]),M.useEffect(()=>{!i&&y.current&&AP(y.current.config.data,a.labels)},[i,a.labels]),M.useEffect(()=>{!i&&y.current&&a.datasets&&RP(y.current.config.data,a.datasets,s)},[i,a.datasets]),M.useEffect(()=>{y.current&&(i?(b(),setTimeout(v)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),M.useEffect(()=>{y.current&&(b(),setTimeout(v))},[o]),M.useEffect(()=>(v(),()=>b()),[]),ce.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},h)}const x8=M.forwardRef(w8);function b8(t,e){return Jf.register(e),M.forwardRef((n,r)=>ce.createElement(x8,{...n,ref:r,type:t}))}const E8=b8("bar",Hl);Jf.register(...y8);function T8(){var _;const t=Qi(),e=Sn(),{eventId:n}=t.state||{},[r,i]=M.useState(null),[s,o]=M.useState([]),[a,l]=M.useState(0),[c,h]=M.useState(0),[d,f]=M.useState(0);M.useState(""),M.useState(""),M.useState({name:"",ticketCount:"",specialRequirements:""});const p=(_=m6.currentUser)==null?void 0:_.uid;if(!n||!p)return m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 text-center text-white",children:[m.jsx("h1",{className:"text-4xl font-bold",children:"Event Not Found"}),m.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 mt-4 bg-gray-500 rounded-md text-white",children:"Go Back"})]});const y=async()=>{try{const w=Yt(st,`users/${p}/events`,n),E=await i_(w);if(E.exists()){const I=E.data();i({id:E.id,...I});const S=new Date(I.date)-new Date,T=Math.ceil(S/(1e3*60*60*24));f(T),v(n,I.ticketPrice||0)}else console.log("No such event found!")}catch(w){console.error("Error fetching event data:",w)}},v=async(w,E)=>{try{const I=Gn(st,`users/${p}/events/${w}/attendees`),O=(await Gs(I)).docs.map(k=>({...k.data(),id:k.id,specialRequirements:k.data().specialRequirements||"None"})),S=O.reduce((k,P)=>k+(P.ticketCount||0),0),T=O.reduce((k,P)=>k+(P.ticketCount||0)*E,0);o(O),l(S),h(T)}catch(I){console.error("Error fetching attendees:",I)}};M.useEffect(()=>{y()},[p,n]);const b={labels:s.map(w=>w.name),datasets:[{label:"Tickets Purchased",data:s.map(w=>w.ticketCount||0),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]};return m.jsxs("div",{className:"container mx-auto mt-10 px-4 py-6 bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-600 min-h-screen text-white",children:[m.jsx("button",{onClick:()=>e(-1),className:"px-4 py-2 bg-gray-500 rounded-md text-white mb-6",children:"Go Back"}),r?m.jsxs(m.Fragment,{children:[m.jsx("h1",{className:"text-4xl font-bold text-center mb-6",children:r.eventName}),m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-2xl font-semibold",children:"Days Left to Event"}),m.jsxs("p",{className:"text-4xl font-bold mt-4",children:[d," days"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[m.jsxs("div",{className:"bg-purple-800 p-6 rounded-lg text-center shadow-lg",children:[m.jsx(Qj,{size:36,className:"mx-auto mb-3 text-blue-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:"Number of Attendees"}),m.jsx("p",{className:"text-3xl font-bold",children:s.length})]}),m.jsxs("div",{className:"bg-purple-800 p-6 rounded-lg text-center shadow-lg",children:[m.jsx(Gj,{size:36,className:"mx-auto mb-3 text-green-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:"Total Tickets Sold"}),m.jsx("p",{className:"text-3xl font-bold",children:a})]}),m.jsxs("div",{className:"bg-purple-800 p-6 rounded-lg text-center shadow-lg",children:[m.jsx(Hj,{size:36,className:"mx-auto mb-3 text-yellow-400"}),m.jsx("h3",{className:"text-xl font-semibold",children:"Total Revenue"}),m.jsxs("p",{className:"text-3xl font-bold",children:["$",c]})]})]}),m.jsxs("div",{className:"bg-purple-900 p-6 rounded-lg shadow-lg mb-10",children:[m.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Tickets Purchased per Attendee"}),s.length>0?m.jsx(E8,{data:b,options:{responsive:!0}}):m.jsx("p",{className:"text-center",children:"No attendees yet."})]}),m.jsxs("div",{className:"bg-purple-900 p-6 rounded-lg shadow-lg",children:[m.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Attendee List"}),s.length>0?m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"table-auto min-w-full text-left",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2",children:"Name"}),m.jsx("th",{className:"px-4 py-2",children:"Tickets Purchased"}),m.jsx("th",{className:"px-4 py-2",children:"Amount Paid"}),m.jsx("th",{className:"px-4 py-2",children:"Special Requirements"})]})}),m.jsx("tbody",{children:s.map((w,E)=>m.jsxs("tr",{className:`${E%2===0?"bg-purple-800":"bg-purple-700"}`,children:[m.jsx("td",{className:"px-4 py-2",children:w.name||"N/A"}),m.jsx("td",{className:"px-4 py-2",children:w.ticketCount||0}),m.jsxs("td",{className:"px-4 py-2",children:["$",w.ticketCount?w.ticketCount*(r.ticketPrice||0):0]}),m.jsx("td",{className:"px-4 py-2",children:w.specialRequirements||"None"})]},E))})]})}):m.jsx("p",{className:"text-center",children:"No attendees yet."})]})]}):m.jsx("p",{children:"Loading event details..."})]})}const ii=({isAllowed:t,children:e})=>t?e:m.jsx(mN,{to:"/not-authorized",replace:!0}),S8=()=>{const t=Sn();return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-80",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Access Restricted"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"You need to log in or register to access this feature."}),m.jsxs("div",{className:"flex justify-end",children:[m.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2",onClick:()=>t("/login"),children:"Login/Register"}),m.jsx("button",{className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",onClick:()=>t("/"),children:"Close"})]})]})})},k8=({onClose:t})=>m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-80",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Access Restricted"}),m.jsx("p",{className:"text-gray-700 mb-4",children:"Please register or login to access this feature."}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2",onClick:t,children:"Close"})})]})});function I8(){const{user:t,login:e,register:n,logout:r}=so(),[i,s]=M.useState([]),[o,a]=M.useState(!1),[l,c]=M.useState(!1);Sn();const h=!!t,d=()=>{c(!1)},f=p=>{s(y=>y.filter(v=>v.id!==p))};return M.useEffect(()=>{const p=localStorage.getItem("favorites");p&&s(JSON.parse(p))},[]),M.useEffect(()=>{localStorage.setItem("favorites",JSON.stringify(i))},[i]),m.jsx(v6,{children:m.jsxs("div",{className:"App",children:[m.jsx(Xj,{user:t,onLogin:()=>c(!0),onLogout:r}),m.jsx(Mj,{}),m.jsxs(vN,{children:[m.jsx(fn,{path:"/",element:m.jsx(Jj,{})}),m.jsx(fn,{path:"/event",element:m.jsx(w6,{})}),m.jsx(fn,{path:"/event/:eventId",element:m.jsx(T6,{})}),m.jsx(fn,{path:"/not-authorized",element:m.jsx(S8,{})}),m.jsx(fn,{path:"/create-event",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(oC,{})})}),m.jsx(fn,{path:"/manage-events",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(E6,{})})}),m.jsx(fn,{path:"/events/view-details/:eventId",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(T8,{})})}),m.jsx(fn,{path:"/edit-event/:id",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(S6,{})})}),m.jsx(fn,{path:"/my-events",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(k6,{favoriteEvents:i,onRemoveEvent:f})})}),m.jsx(fn,{path:"/favorites",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(I6,{})})}),m.jsx(fn,{path:"/calendar",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(u3,{})})}),m.jsx(fn,{path:"/manage-reservations",element:m.jsx(ii,{isAllowed:h,onRestrictedAccess:()=>c(!0),children:m.jsx(h3,{})})})]}),o&&m.jsx(k8,{onClose:()=>a(!1)}),l&&m.jsx(s_,{onClose:d})]})})}mg.createRoot(document.getElementById("root")).render(m.jsx(SN,{basename:"/Event-Planner",children:m.jsx(Lj,{children:m.jsx(I8,{})})}));
